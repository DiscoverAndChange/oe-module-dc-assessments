{"version":3,"sources":["webpack:///src/app/library-assets/exercise/exercise.component.ts","webpack:///src/app/library-assets/exercise/exercise.component.html","webpack:///src/app/shared/role-selector/role-selector.component.ts","webpack:///src/app/shared/role-selector/role-selector.component.html","webpack:///src/app/shared/models/scale-result.ts","webpack:///src/app/shared/services/question-answer-populator.service.ts","webpack:///src/app/shared/models/display-condition.ts","webpack:///src/app/assessment-charts/services/chart.service.ts","webpack:///src/app/library-assets/models/library-asset.ts","webpack:///src/app/login/sso/sso.component.ts","webpack:///src/app/login/sso/sso.component.html","webpack:///crypto (ignored)","webpack:///src/app/reports/client-assessment-result-view/client-assessment-result-view.component.ts","webpack:///src/app/reports/client-assessment-result-view/client-assessment-result-view.component.html","webpack:///src/app/shared/billing-details/billing-details.component.ts","webpack:///src/app/shared/billing-details/billing-details.component.html","webpack:///crypto (ignored)?0efc","webpack:///src/app/shared/models/ExternalAssignedQuestionnaire.ts","webpack:///src/app/companies/signup/signup.component.ts","webpack:///src/app/companies/signup/signup.component.html","webpack:///src/app/shared/models/company.ts","webpack:///src/app/login/models/AuthState.ts","webpack:///src/app/shared/toast/toast-ref.ts","webpack:///src/app/reports/services/report-navigator.service.ts","webpack:///src/app/theme/standalone-container/standalone-container.component.ts","webpack:///src/app/theme/standalone-container/standalone-container.component.html","webpack:///src/app/reports/asset-result-view/asset-result-view.component.ts","webpack:///src/app/reports/asset-result-view/asset-result-view.component.html","webpack:///src/app/login/services/auth.service.ts","webpack:///src/app/shared/services/stripe-payment-processor.service.ts","webpack:///src/app/login/login-finalize/login-finalize.component.ts","webpack:///src/app/login/login-finalize/login-finalize.component.html","webpack:///src/app/shared/models/question-set.ts","webpack:///src/app/shared/assessment-group-list/assessment-group-list.component.ts","webpack:///src/app/shared/assessment-group-list/assessment-group-list.component.html","webpack:///src/app/assessment-charts/summary-scales-chart/summary-scales-chart.component.ts","webpack:///src/app/assessment-charts/summary-scales-chart/summary-scales-chart.component.html","webpack:///src/app/shared/services/assessment.service.ts","webpack:///src/app/assessment-charts/legend-color-icon/legend-color-icon.component.ts","webpack:///src/app/assessment-charts/legend-color-icon/legend-color-icon.component.html","webpack:///src/app/shared/services/question-factory.service.ts","webpack:///src/app/login/login-header/login-header.component.ts","webpack:///src/app/login/login-header/login-header.component.html","webpack:///src/app/shared/models/question-set-label.ts","webpack:///src/app/shared/services/pagination-results-loader-factory.service.ts","webpack:///src/app/reports/report-items/client-scale-results/client-scale-results.component.ts","webpack:///src/app/reports/report-items/client-scale-results/client-scale-results.component.html","webpack:///src/app/reports/pcl-summary/pcl-summary.component.ts","webpack:///src/app/reports/pcl-summary/pcl-summary.component.html","webpack:///src/app/shared/models/question-set-type.ts","webpack:///src/app/shared/toast/toast.service.ts","webpack:///src/environments/environment.ts","webpack:///src/app/theme/theme.module.ts","webpack:///src/app/shared/services/fhir-smart-style.service.ts","webpack:///src/app/login/services/amplify-auth-service.ts","webpack:///src/app/shared/models/subscription-status.ts","webpack:///src/app/theme/theme-routing.module.ts","webpack:///src/app/shared/services/alert.service.ts","webpack:///src/app/library-assets/services/asset.service.ts","webpack:///src/app/reports/models/base-report-item-component.ts","webpack:///src/app/shared/services/questionnaire.service.ts","webpack:///src/app/reports/models/print-settings.ts","webpack:///src/app/reports/scale-sub-list/scale-sub-list.component.ts","webpack:///src/app/reports/scale-sub-list/scale-sub-list.component.html","webpack:///src/app/tab/tab.component.ts","webpack:///src/app/tab/tab.component.html","webpack:///src/app/shared/models/question-type.ts","webpack:///src/app/shared/models/DacModalRef.ts","webpack:///src/app/library-assets/asset-picker/asset-picker.component.ts","webpack:///src/app/library-assets/asset-picker/asset-picker.component.html","webpack:///src/app/shared/card/card.component.ts","webpack:///src/app/shared/card/card.component.html","webpack:///src/app/shared/copy-clipboard/copy-clipboard.component.ts","webpack:///src/app/shared/copy-clipboard/copy-clipboard.component.html","webpack:///src/app/shared/assessment-picker/assessment-picker.component.ts","webpack:///src/app/shared/assessment-picker/assessment-picker.component.html","webpack:///src/app/shared/services/shopping.service.ts","webpack:///src/app/assessment-charts/scale-chart/scale-chart.component.ts","webpack:///src/app/assessment-charts/scale-chart/scale-chart.component.html","webpack:///src/app/login/services/auth-guard-login.service.ts","webpack:///src/app/shared/models/ErrorCodes.ts","webpack:///src/app/shared/services/assignment-hydrator.service.ts","webpack:///src/app/shared/services/company.service.ts","webpack:///src/app/shared/services/modal.service.ts","webpack:///src/app/shared/feature-enabled/feature-enabled.ts","webpack:///src/app/shared/services/assignment.service.ts","webpack:///src/app/shared/username-checker/username-checker.component.ts","webpack:///src/app/shared/username-checker/username-checker.component.html","webpack:///src/app/debug/debug-routing.module.ts","webpack:///src/app/shared/models/list-question.ts","webpack:///src/app/login/admin-login-finalize/admin-login-finalize.component.ts","webpack:///src/app/login/admin-login-finalize/admin-login-finalize.component.html","webpack:///src/app/shared/models/utility.ts","webpack:///src/app/login/admin-login/admin-login.component.ts","webpack:///src/app/login/admin-login/admin-login.component.html","webpack:///src/app/shared/models/subscription-plan.ts","webpack:///src/app/reports/report-items/flagged-questions-list/flagged-questions-list.component.ts","webpack:///src/app/reports/report-items/flagged-questions-list/flagged-questions-list.component.html","webpack:///src/app/library-assets/asset-new/asset-new.component.ts","webpack:///src/app/library-assets/asset-new/asset-new.component.html","webpack:///src/app/theme/footer/footer.component.ts","webpack:///src/app/theme/footer/footer.component.html","webpack:///src/app/shared/models/user.ts","webpack:///src/app/companies/companies.module.ts","webpack:///src/app/shared/services/order.service.ts","webpack:///src/app/shared/services/assessment-grader.service.ts","webpack:///src/app/shared/services/dac-config.service.ts","webpack:///src/app/reports/assessment-result-view/assessment-result-view.component.ts","webpack:///src/app/reports/assessment-result-view/assessment-result-view.component.html","webpack:///src/app/shared/models/multiple-choice-question.ts","webpack:///src/app/shared/shared.module.ts","webpack:///src/app/shared/models/assessment-result-answer.ts","webpack:///src/app/shared/models/AssignedQuestionnaire.ts","webpack:///src/app/shared/models/AssignedAssessmentGroup.ts","webpack:///src/app/reports/services/pcl-grader.service.ts","webpack:///src/app/shared/services/assessment-hydrator.service.ts","webpack:///src/app/reports/models/scale-list-data-component.ts","webpack:///node_modules/moment/locale sync ^\\.\\/.*$","webpack:///src/app/shared/models/AssignmentSingle.ts","webpack:///src/app/shared/services/metrics.service.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/reports/report-items/scale-results-summary/scale-results-summary.component.ts","webpack:///src/app/reports/report-items/scale-results-summary/scale-results-summary.component.html","webpack:///src/app/shared/models/assessment-result.ts","webpack:///src/app/shared/services/host-site.service.ts","webpack:///src/app/shared/services/http.service.ts","webpack:///src/app/theme/sso-page/sso-page.component.ts","webpack:///src/app/theme/sso-page/sso-page.component.html","webpack:///src/app/reports/report-items/computed-scale/computed-scale.component.ts","webpack:///src/app/reports/report-items/computed-scale/computed-scale.component.html","webpack:///src/app/shared/toast/toast-config.ts","webpack:///src/app/library-assets/models/library-asset-result.ts","webpack:///src/app/shared/models/textbox-question.ts","webpack:///src/app/reports/scale-results-table-summary/scale-results-table-summary.component.ts","webpack:///src/app/reports/scale-results-table-summary/scale-results-table-summary.component.html","webpack:///src/app/assessment-charts/assessment-charts.module.ts","webpack:///src/app/shared/services/copy-clipboard.service.ts","webpack:///src/app/shared/models/managed-client.ts","webpack:///src/app/debug/fhir-client/fhir-client.component.ts","webpack:///src/app/debug/fhir-client/fhir-client.component.html","webpack:///src/app/reports/text-item/text-item.component.ts","webpack:///src/app/reports/text-item/text-item.component.html","webpack:///src/app/shared/models/assessment.ts","webpack:///src/app/shared/user-selector/user-selector.component.ts","webpack:///src/app/shared/user-selector/user-selector.component.html","webpack:///src/app/shared/models/order.ts","webpack:///src/app/login/login.module.ts","webpack:///src/app/shared/toast/toast.component.ts","webpack:///src/app/shared/toast/toast.component.html","webpack:///src/app/shared/models/Assignment.ts","webpack:///src/app/shared/models/AssignedLibraryAsset.ts","webpack:///src/app/shared/models/role.ts","webpack:///src/app/reports/report-items/therapist-scale-results/therapist-scale-results.component.ts","webpack:///src/app/reports/report-items/therapist-scale-results/therapist-scale-results.component.html","webpack:///src/app/shared/models/capability.ts","webpack:///src/app/library-assets/article/article.component.ts","webpack:///src/app/library-assets/article/article.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/tabs/tabs.component.ts","webpack:///src/app/tabs/tabs.component.html","webpack:///src/app/reports/scale-summary/scale-summary.component.ts","webpack:///src/app/reports/scale-summary/scale-summary.component.html","webpack:///src/app/shared/models/scale-range.ts","webpack:///src/app/shared/models/assessment-group.ts","webpack:///src/app/shared/spin-icon/spin-icon.component.ts","webpack:///src/app/shared/spin-icon/spin-icon.component.html","webpack:///src/app/shared/models/flagged-condition.ts","webpack:///src/app/reports/report-items/scale-results-sections-list/scale-results-sections-list.component.ts","webpack:///src/app/reports/report-items/scale-results-sections-list/scale-results-sections-list.component.html","webpack:///src/app/shared/services/assessment-token.service.ts","webpack:///src/app/reports/scale-questions-list/scale-questions-list.component.ts","webpack:///src/app/reports/scale-questions-list/scale-questions-list.component.html","webpack:///src/app/reports/questionnaire-result-view/questionnaire-result-view.component.ts","webpack:///src/app/reports/questionnaire-result-view/questionnaire-result-view.component.html","webpack:///src/app/theme/admin-login-finalize-page/admin-login-finalize-page.component.ts","webpack:///src/app/theme/admin-login-finalize-page/admin-login-finalize-page.component.html","webpack:///src/app/theme/login-page/login-page.component.ts","webpack:///src/app/theme/login-page/login-page.component.html","webpack:///src/app/shared/condition-edit/condition-edit.component.ts","webpack:///src/app/shared/condition-edit/condition-edit.component.html","webpack:///src/app/reports/report-items/question-action-list/question-action-list.component.ts","webpack:///src/app/reports/report-items/question-action-list/question-action-list.component.html","webpack:///src/app/login/login-dialog/login-dialog.component.ts","webpack:///src/app/login/login-dialog/login-dialog.component.html","webpack:///src/app/shared/models/scale.ts","webpack:///src/app/shared/models/billing-details.ts","webpack:///src/app/shared/validators/password-strength.directive.ts","webpack:///src/app/login/login/login.component.ts","webpack:///src/app/login/login/login.component.html","webpack:///src/app/shared/services/authenticator.ts","webpack:///src/app/reports/print-dialog/print-dialog.component.ts","webpack:///src/app/reports/print-dialog/print-dialog.component.html","webpack:///src/app/account-owner-settings/account-owner-settings.component.ts","webpack:///src/app/account-owner-settings/account-owner-settings.component.html","webpack:///src/app/shared/models/assessment-group-display.ts","webpack:///src/app/reports/report-viewer/report-viewer.component.ts","webpack:///src/app/reports/report-viewer/report-viewer.component.html","webpack:///src/app/reports/report-items/flagged-questions-list-simple/flagged-questions-list-simple.component.ts","webpack:///src/app/reports/report-items/flagged-questions-list-simple/flagged-questions-list-simple.component.html","webpack:///src/app/shared/services/sso-cross-domain-messenger.ts","webpack:///src/app/pricing-table/pricing-table.component.ts","webpack:///src/app/pricing-table/pricing-table.component.html","webpack:///src/app/shared/services/assessment-result-hydrator.service.ts","webpack:///src/app/reports/services/report.service.ts","webpack:///src/app/theme/admin-login-page/admin-login-page.component.ts","webpack:///src/app/theme/admin-login-page/admin-login-page.component.html","webpack:///src/app/reports/services/question-action.service.ts","webpack:///src/app/assessment-charts/models/chart-color.ts","webpack:///src/app/shared/models/checklist-question.ts","webpack:///src/app/admin/models/item.ts","webpack:///src/app/shared/services/pdf.service.ts","webpack:///src/app/shared/models/AssignedAssessment.ts","webpack:///src/app/navigation/navigation.component.ts","webpack:///src/app/navigation/navigation.component.html","webpack:///src/app/shared/services/user.service.ts","webpack:///src/app/theme/site-container/site-container.component.ts","webpack:///src/app/theme/site-container/site-container.component.html","webpack:///src/app/login/models/ChallengeName.ts","webpack:///src/app/shared/search-input/search-input.component.ts","webpack:///src/app/shared/search-input/search-input.component.html","webpack:///src/app/shared/services/task-service.ts","webpack:///src/app/shared/toast/toast-animation.ts","webpack:///src/app/shared/services/assessment-group.service.ts","webpack:///src/app/reports/report-items/pcl-assessment-results/pcl-assessment-results.component.ts","webpack:///src/app/reports/report-items/pcl-assessment-results/pcl-assessment-results.component.html","webpack:///src/app/login/has-permission/has-permission.ts","webpack:///src/app/assessment-charts/base-chart/base-chart.component.ts","webpack:///src/app/shared/services/billing.service.ts","webpack:///src/app/login/logout/logout.component.ts","webpack:///src/app/login/logout/logout.component.html","webpack:///src/app/shared/models/paginated-results-loader.ts","webpack:///src/app/shared/services/assessment-compressor.service.ts","webpack:///src/app/shared/services/client.service.ts","webpack:///src/app/theme/login-finalize-page/login-finalize-page.component.ts","webpack:///src/app/theme/login-finalize-page/login-finalize-page.component.html","webpack:///src/app/reports/report-items/html-content-item/html-content-item.component.ts","webpack:///src/app/reports/report-items/html-content-item/html-content-item.component.html","webpack:///src/app/library-assets/asset-list/asset-list.component.ts","webpack:///src/app/library-assets/asset-list/asset-list.component.html","webpack:///src/app/theme/services/theme.service.ts","webpack:///src/app/reports/services/scale-result-question-finder.service.ts","webpack:///src/app/reports/pcl-criteria-icon/pcl-criteria-icon.component.ts","webpack:///src/app/reports/pcl-criteria-icon/pcl-criteria-icon.component.html","webpack:///src/app/shared/services/unique-id.service.ts","webpack:///src/app/assessment-charts/services/scale-result-color.service.ts","webpack:///src/app/library-assets/exercise-list/exercise-list.component.ts","webpack:///src/app/library-assets/exercise-list/exercise-list.component.html","webpack:///src/app/reports/report-items/summary-section-graph-item/summary-section-graph-item.component.ts","webpack:///src/app/reports/report-items/summary-section-graph-item/summary-section-graph-item.component.html","webpack:///src/app/shared/toast/toast.module.ts","webpack:///src/app/reports/reports.module.ts","webpack:///src/app/library-assets/library-assets.module.ts","webpack:///src/app/shared/buy-item-button/buy-item-button.component.ts","webpack:///src/app/shared/buy-item-button/buy-item-button.component.html","webpack:///src/app/reports/report-reviewer-container/report-viewer-container.component.ts","webpack:///src/app/reports/report-reviewer-container/report-viewer-container.component.html","webpack:///src/app/shared/services/pako.service.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/app/companies/companies-routing.module.ts","webpack:///src/app/shared/models/AssignedTemplateProfile.ts","webpack:///src/app/login/services/auth-guard.service.ts","webpack:///src/app/shared/models/question.ts","webpack:///src/app/shared/billing-card/billing-card.component.ts","webpack:///src/app/shared/billing-card/billing-card.component.html","webpack:///src/app/theme/page-not-found/page-not-found.component.ts","webpack:///src/app/theme/page-not-found/page-not-found.component.html","webpack:///src/app/shared/models/client.ts","webpack:///src/app/reports/report-items/addo-scale-results/addo-scale-results.component.ts","webpack:///src/app/reports/report-items/addo-scale-results/addo-scale-results.component.html","webpack:///src/app/assessment-charts/scale-chart-legend/scale-chart-legend.component.ts","webpack:///src/app/assessment-charts/scale-chart-legend/scale-chart-legend.component.html","webpack:///src/app/shared/models/billing-card.ts","webpack:///src/app/login/services/admin-guard.service.ts","webpack:///src/app/shared/pdf-generate-btn/pdf-generate-btn.component.ts","webpack:///src/app/shared/pdf-generate-btn/pdf-generate-btn.component.html","webpack:///src/app/reports/scale-range-content/scale-range-content.component.ts","webpack:///src/app/reports/scale-range-content/scale-range-content.component.html","webpack:///src/app/shared/services/fhir-service.ts","webpack:///src/app/shared/services/subscription-hydrator.service.ts","webpack:///src/app/shared/models/subscription.ts","webpack:///src/app/reports/peer-clinic-result-viewer/peer-clinic-result-viewer.component.ts","webpack:///src/app/reports/peer-clinic-result-viewer/peer-clinic-result-viewer.component.html","webpack:///src/app/library-assets/admin-view-asset/admin-view-asset.component.ts","webpack:///src/app/library-assets/admin-view-asset/admin-view-asset.component.html","webpack:///src/app/shared/models/single-choice-question.ts","webpack:///src/app/theme/services/nav-bar.service.ts","webpack:///src/app/debug/debug.module.ts","webpack:///src/app/shared/models/AssignmentItem.ts","webpack:///src/main.ts","webpack:///src/app/shared/back-button/back-button.component.ts","webpack:///src/app/shared/back-button/back-button.component.html","webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/reports/report-items/assessment-questions-list/assessment-questions-list.component.ts","webpack:///src/app/reports/report-items/assessment-questions-list/assessment-questions-list.component.html"],"names":["ExerciseComponent","element","idService","domSanitizer","onSubmit","answerIds","hideHeaders","clearText","evt","target","innerText","removeEventListener","boundClickHandler","exercise","content","ExerciseContent","bypassSecurityTrustHtml","result","elements","nativeElement","querySelectorAll","i","length","setupExerciseClickHandlers","populateExerciseAnswers","answers","populateExerciseJournal","journal","forEach","a","querySelector","getAnswerIdPrefix","id","answer","contentEditable","addEventListener","replace","push","window","print","map","journalEntry","asset","next","selector","templateUrl","styleUrls","disabled","RoleSelectorComponent","selected","currentRole","role","changes","Admin","Registered","emit","setAdmin","ScaleResult","score","_score","toFixed","_range","displayName","_scale","v","scale","getPercentageForScore","QuestionAnswerPopulator","question","questionSet","label","labels","Map","set","setSavedAnswer","DisplayCondition","assessment","_displayType","shouldShow","shouldHide","metAnswerCondition","type","qs","getQuestionSetById","q","getQuestionById","hasAnswer","_questionSet","_question","_answer","ChartService","_chart","console","error","registerPlugins","targetElement","data","configOptions","ctx","getContext","options","chart","destroy","clear","Chart","plugins","register","afterDraw","chartInstance","config","showDatapoints","helpers","fontColor","getValueOrDefault","defaultFontColor","fontSize","dataPointFontSize","defaults","global","defaultFontSize","font","fontString","defaultFontFamily","textAlign","textBaseline","fillStyle","providedIn","LibraryAsset","creationDate","Date","lastUpdateDate","tags","tag","indexOf","str","title","trim","toLowerCase","SsoComponent","route","dacConfig","router","authService","alertService","_ssoFailed","_debugAlerts","log","_storageAccessRequired","msg","queryParams","subscribe","params","loadSSO","storageAccessGranted","document","requestStorageAccess","then","isAccessGranted","undefined","reason","Promise","resolve","loadStorageAccessNeeded","time","authenticateSSO","RelayState","userResp","JSON","stringify","redirectUrl","issuer","setupSSOIssuerForSession","Client","getTime","setTimeout","navigate","_message","redirectURL","location","href","applicationTitle","seamlessMode","supportPhone","supportEmail","copyrightTitle","copyrightURL","ClientAssessmentResultViewComponent","_assessmentService","_clientId","resultId","hasLoadedResults","getAssessmentResult","scaleResults","status","body","classList","add","BillingDetailsComponent","billingService","billingDetails","loading","getBillingDetails","details","updateDefaultBillingCard","updatedBillingDetails","success","confirm","deleteDefaultBillingCard","subscriptions","ExternalAssignedQuestionnaire","Type","questionnaireId","questionnaireReference","parts","split","questionnaireResponseReference","task","SignupComponent","companyService","formBuilder","amplifyService","elementRef","metrics","themeService","processingSignup","METRIC_CATEGORY","_company","isPerformingAction","_authState","SIGN_UP","signupForm","group","name","required","email","password","confirmForm","confirmationCode","_authStateSubscription","authStateChange$","authState","state","unsubscribe","setMainContentFluid","resetAuthState","signupLogo","applicationLogoUrl","setAuthState","user","action","trackEvent","CONFIRM_SIGN_UP","plan","handleCTA","el","home","scrollIntoView","partner","hasPartner","formError","trackSignup","code","get","value","confirmSignUp","Company","registerNewCompany","message","preventDefault","stopImmediatePropagation","resendSignUp","info","sessionStorage","localStorage","values","username","signUp","attributes","validationData","getUsername","err","signIn","authToken","signInUserSession","accessToken","jwtToken","company","authenticateCognito","reset","signOut","freeTrialPeriod","handlePlan","_sharedTokens","_hostSiteName","_name","_email","_user","_id","_clientCount","_tokenCount","_sendAssessmentsCompleteNotifications","_sendNotificationsToPrimaryContact","_disableShopRegisteredUsers","_sendNotificationsCopyToRegularUsers","AuthState","ToastRef","overlay","dispose","overlayElement","getBoundingClientRect","ReportNavigatorService","navItems","navId","has","item","navBar","navBarHeight","clientHeight","scrolledY","scrollY","scroll","reject","StandaloneContainerComponent","host","siteContainer","AssetResultViewComponent","assetService","modalService","disableAsset","allowPrinting","isFeatureEnabled","getAssetResult","back","showPrintDialog","openDialog","hideNotesOption","LoginStateNotification","AuthService","_dac$http","_clientService","assessmentService","subHydrator","_fhirClient","userService","_isSystemUser","_isLoggedIn","_loginStateSubject","getCurrentLoginState","authEvent","newPassword","requiredAttributes","challengeParam","completeNewPassword","SIGN_IN","getFhirUser","fhirUser","isLoggedIn","getUnAuthenticatedUser","fhirUserParts","fhirRole","getClientUser","getUserById","post","clearSession","_client","clearCache","clientApiId","clientID","resp","updateSessionStorageWithUser","Error","ssoRelayState","securePost","ssoToken","processUserAuthenticationFromResp","innerError","_code","SYSTEM_ERROR","awsCognitoConfig","enabled","authenticateWithAmplify","cognitoUser","authenticateWithServerWithUsername","subscription","forgotPassword","forgotPasswordSubmit","codeType","confirmSignIn","dacUser","SIGNED_IN","SMS_MFA","SOFTWARE_TOKEN_MFA","CONFIRM_SIGN_IN","NEW_PASSWORD_REQUIRED","REQUIRE_NEW_PASSWORD","CUSTOM_CHALLENGE","trigger","CUSTOM_CONFIRM_SIGN_IN","cognitoCode","FORGOT_PASSWORD","Object","assign","fromJSONObject","UnAuthenticated","setItem","toString","capabilities","toJSON","removeItem","companyID","configData","region","awsCognitoRegion","userPoolId","userPool","userPoolsId","userPoolWebClientId","webClientId","mandatorySignIn","currentStatus","_inAuthentication","userId","getItem","companyId","capString","parse","subJSONString","fromJSON","clientId","StripePaymentProcessor","dac$http","CARD_LOCALE","amount","description","receivedToken","handler","StripeCheckout","configure","key","stripe_public_key","locale","token","closed","response","open","stripe_charge_name","existingEmail","panelLabel","allowRememberMe","createToken","tokenCreateResponse","LoginFinalizeComponent","fhirService","fhirClientReady","client","navigateByUrl","needsAuthentication","_errorMessage","errorMessage","QuestionSet","display_order","questions","answer_start_value","display_type","display_conditions","find","index","splice","shiftCollectionUp","shiftCollectionDown","filter","assessment_scale","_display_conditions","question_sets","_display_type","_display_order","_answer_start_value","_title","_questions","_labels","_instructions","AssessmentGroupListComponent","assessmentGroupService","assessmentTokenService","buy","hasLoadedTokens","_hasLoadedData","groups","canShop","_userSubscription","getLoginState","loginState","hasCapability","CAN_SHOP","getAssessmentGroups","g","displayGroup","Show","loadAssessmentTokens","getRemainingTokens","getGroupRemainingTokens","tokens","getGroupTokensRemaining","event","stopPropagation","dup","Assessments","uid","alert","addAssessmentToGroup","version","createNewGroup","NewGroupName","display","ShowAdd","isTokensEnabled","SummaryScalesChartComponent","chartService","scaleResultColorService","MAX_SCALE_NAME_LENGTH","reverseDirection","adjustment","vpFontSize","getFontSizeForCurrentViewport","mediumDevice","matchMedia","smallDevice","configuration","legend","tooltips","xAxes","scales","ticks","beginAtZero","autoSkip","gridLines","offsetGridLines","offset","yMax","ranges","yAxes","stepSize","callback","scaleRangeNames","getChartRangeNames","max","position","barPercentage","maxBarThickness","point","radius","hoverRadius","showNames","layout","padding","right","top","bottom","_labelData","_barData","results","sr","substring","Math","min","chartScaleNames","chartRangeNames","r","showRangeScore","rangeEnd","range","barColor","hoverBackgroundColor","borderColor","dataSets","barGraphData","scorePercent","getPercentageForRange","backgroundColor","borderWidth","yAxisID","scaleRanges","colors","getBackgroundColors","reverse","colorChart","Array","fill","color","pointRadius","xAxisID","getLabelsForScales","datasets","AssessmentService","_pako","_resultHydrator","_hydrator","_compressor","_uuid","EXTENSION_NAME","API_URL","api_url","_results","_assessments","_pendingResults","generate","hydrate","forceTestRetake","getLatestClientAssessmentResult","_assessmentUid","assignment","Uid","getAssessmentCopy","requestData","assignmentItemID","Id","getFhirClient","request","AssessmentUuid","flat","json","isArray","extension","e","url","valueString","createAssessmentFromJSON","meta","versionId","compressedAssessment","compress","that","assessments","isAssessmentEnabled","compressedPost","newId","resultToSave","getAssessmentResultForSave","currentUser","saveData","client_id","client_custom_field_1","clientCustomField1","_answers","linkId","_question_id","questionnaireResponse","resourceType","questionnaire","author","reference","source","create","createdResource","transformed","_assignmentItemId","assignmentItemId","_assessment","_uid","_version","_scaleResults","_flaggedQuestions","flaggedQuestions","_scaleId","_rangeId","questionSets","getQuestionSetsForDisplay","answerForSave","getComputedScore","defer","resultID","assessmentUID","createAssessmentResultFromJSON","resultData","resultDataAssessment","assessmentVersionData","assessmentData","resultIds","_clientCustomField1","_forceTestRetake","LegendColorIconComponent","colorContainer","context","fillRect","width","height","imgSrc","toDataURL","imgContainer","src","className","QuestionFactoryService","Textbox","Checklist","SingleChoice","createQuestionForType","MultipleChoice","LoginHeaderComponent","QuestionSetLabel","_skipScoring","order","_label","lbl","PaginatedResultsLoaderFactory","queryFunction","loader","ClientScaleResultsComponent","navigator","scaleResult","clientContent","therapistContent","PclSummaryComponent","pclGrader","_criteria","assessmentResult","getPCLCriteriaFromAssessmentResult","hasNavigationItem","summaryScaleResult","QuestionSetType","ToastService","parentInjector","toastConfig","showToastForType","positionStrategy","getPositionStrategy","overlayRef","toastRef","lastToast","injector","getInjector","toastPortal","attach","WeakMap","lastToastIsVisible","isVisible","strategy","getPosition","toastData","text","timeToDisplay","showToast","environment","production","applicationLogo","applicationLogoTitle","stripePublicKey","stripeChargeName","features","apiURL","skinClasses","navBarClass","reportHeaderImgURL","partners","disabledAssessments","smartConfig","scopes","clientScopes","fhirUrl","smartStyleUrl","ThemeModule","imports","declarations","exports","schemas","providers","FhirSmartStyleService","smartConfigStyleUrl","fetch","jsonStyles","smartStyles","logo_primary","AmplifyAuthService","INITIAL_STATE","_stateChange","change","currentState","mfaCode","mfaType","forgotPasswordCode","settings","SubscriptionStatus","routes","ThemeRoutingModule","forChild","AlertService","toastService","toasts","closeAllToasts","toast","getToastConfig","addToastToList","alertId","close","clearToasts","t","animation","getAlertCount","AssetService","assetUuid","hydrateLibraryAssetFromQuestionnaireItem","savedResult","jsonResult","serverResult","serverAsset","uuid","_assets","items","searchString","selectedTag","assetType","getAssets","assets","hasTag","titleContainsString","_tags","BaseReportItemComponent","_loadSubject","complete","notifyItemLoad","asObservable","QuestionnaireService","questionnairesByUrl","debug","titles","questionnaireTitles","reduce","b","questionnairesToFetch","n","encodeURIComponent","join","patientId","questionnaireIds","maxDate","limit","toISOString","responses","slice","all","convertResponseToAssessmentResult","responseId","getQuestionnaireResponse","getQuestionnaireForUrl","convertQuestionnaireToBasicAssessment","authored","dateCompleted","addAnswersToArray","getQuestionsListById","question_id","rootGroup","hydrateQuestions","addQuestionSet","currentGroup","questionItem","newGroup","instructions","prompt","addQuestion","qrItems","qr","ResultId","qrIds","keys","QuestionnaireId","convertResponseToAssessmentResultForQuestionnaire","Name","depthCount","answerValues","valueCoding","hasOwnProperty","valueDecimal","properties","getOwnPropertyNames","p","PrintSettings","showTherapistNotes","_showTherapistNotes","ScaleSubListComponent","copyClipboardService","SubScales","copyTable","row","descriptionClient","copyTableToText","TabComponent","tabs","isActive","addTab","heading","routerLink","QuestionType","DacModalRef","dialogRef","dialogResult","afterOpened","afterClosed","beforeClosed","backdropClick","keydownEvents","updatePosition","updateSize","classes","addPanelClass","removePanelClass","getState","AssetPickerComponent","hasLoaded","loadFailed","loaders","getTags","assetSearch","runSearch","searchAssets","CardComponent","icon","CopyClipboardComponent","iconClass","copyText","copyContent","AssessmentPickerComponent","questionnaireService","questionnaireSelected","_loadedTokens","_hasLoadedAssessments","getCurrentUser","_canBuy","queries","getQuestionnaires","_questionnaires","_search","ShoppingService","stripe","tokenService","http","orderService","_cartItems","_shopItems","_singleItemCheckout","_checkoutStatus","subItems","subItem","hydrateItem","assessment_uid","getAvailableItems","checkoutReturnUrl","_singleItemCheckoutReturnUrl","emptyCart","responseItems","existingItem","quantity","useSavedCard","total","handleFreeOrder","handlePaidOrder","pmtProcessorToken","orderId","purchaseTokens","stripeCharge","charge","chargeData","purchaseResult","storeLastOrder","sum","totalPrice","ScaleChartComponent","getChart","dataset","controller","getDatasetMeta","bar","fillText","_model","x","y","getMaxRange","scaleLabel","parseFloat","getComputedProperty","labelString","fontStyle","fontFamily","lineHeight","annotation","annotations","setupAnnotations","property","defaultValue","ownerDocument","defaultView","getComputedStyle","getPropertyValue","showRanges","even","line","drawTime","mode","scaleID","midPoint","yAdjust","box","yScaleID","yMin","rangeStart","showScaleName","AuthGuardLogin","loginType","canActivate","ErrorCode","ErrorCodeStatus","codeMap","DUP_ENTRY","INVALID_REQUEST","VALIDATE_DATA_MISSING","VALIDATION_FAILED","INVALID_BILLING_CARD","AUTHORIZATION_REQUIRED","MUST_AUTHENTICATE","ASSESSMENT_QUOTA_REACHED","RECORD_NOT_FOUND","RECORD_CREATE_FAILED","instance","AssignmentHydratorService","record","Items","hydrateAssignmentItem","recordItem","CompanyUserStatistic","CompanyService","hydrateCompanyFromData","_primaryContactEmail","ModalService","dialog","component","dacRef","IfFeatureEnabled","templateRef","viewContainer","feature","createEmbeddedView","ifFeatureEnabled","AssignmentService","assignmentHydrator","appointmentId","profileId","ProfileId","serverAssignment","hydrateAssignment","updateClientAssignment","createClientAssignment","freeToken","serverResponse","UsernameCheckerComponent","usernameDuplicate","usernameValid","newUsername","isDuplicateUsername","isDuplicate","checkUsername","path","pathMatch","redirectTo","DebugRoutingModule","ListQuestion","_customLabels","l","AdminLoginFinalizeComponent","loadFhirStylesFromClient","dcUrl","intent","getIntentFromClient","appointment","getFhirContextFromClient","patient","Utility","collection","AdminLoginComponent","returnUrl","_authSubscription","snapshot","authorizeUserAdmin","authorizeClient","disableRegistration","SubscriptionPlan","unitType","endsWith","getSingularUnitType","FlaggedQuestionsListComponent","_questionsByAssessments","variables","_itemTitle","_description","c","getFlaggedQuestions","_scales_per_page","size","tagValidator","control","list","AssetNewComponent","uuidService","assetTypes","isSaving","assetForm","originalCreator","creatorLink","tagList","template","createElement","innerHTML","hasAttribute","saveAsset","save","FooterComponent","fixedBottom","getFullYear","User","_role","_caps","_enabled","cap","some","firstName","lastName","_username","isActiveSubscription","_companyPrimaryContact","_companyName","_companyID","_password","_firstName","_lastName","_subscription","CompaniesModule","OrderService","_paginationFactory","orderData","populateOrder","_lastOrder","getPaginatedOrderHistory","bind","_resultsLoader","getResultsLoader","getResults","orders","_orders","hasMoreResults","loadMore","_offset","_limit","o","object","creation_date","last_update_date","ScaleResultNode","_children","_data","_calculated","_calculatorStategy","ScaleCalculatorCriteriaThresholdStrategy","ScaleCalculatorMeanStrategy","ScaleCalculatorSumStrategy","calculate","calculated","children","calculateTotal","prev","current","itemCount","gradingData","requiredQuestions","requiredScoreThreshold","currentQuestionsMatchingThreshold","AssessmentGraderService","gradeScales","flagQuestions","hasFlagCondition","flaggedCondition","shouldFlagQuestion","isFlaggedForReview","curr","concat","s","resultsByScale","hasSubScales","getSubScaleIds","shouldGradeQuestion","resultNode","gradeQuestion","getRangeForScore","scaleId","subScaleResult","calculateScoreWithSubScores","skip_scoring","addScore","is_reversed","isSelected","multiplier","setComputedScore","calculateQuestion","CustomLabels","totalAnswers","skipScoring","endValue","interval","gradeMultipleChoice","gradeSingleChoice","DacConfig","_environment","_is_dev_environment","_enabledFeatures","_stripePublicKey","_stripeChargeName","_applicationTitle","_applicationLogoUrl","_applicationLogoTitle","_api_url","_supportEmail","_supportPhone","_reportHeaderImgURL","_cognitoConfig","_freeTrialPeriod","_take_test_url","protocol","_skinClasses","_seamlessMode","setupSeamlessModeForSession","setupSkinForSession","_ssoIssuer","_smartConfigStyleUrl","_smartStyles","skin","skinClass","skins","replaceSkinClasses","AssessmentResultViewComponent","_grader","_visibleScaleResults","queryParamsSubscription","displayTherapistNotes","rescoreResults","getAssessmentResultWithLatestAssessment","latestResult","grade","includeInReports","rootNode","itemsContainer","textArea","docFragment","DocumentFragment","append","cloneNode","clonedAppScaleResultsTableSummary","clonedTherapistScales","replaceWith","scaleResultsTableSummaryComponent","getPrintContent","scaleResultsComponent","node","textContent","saveAssessmentResult","_result","MultipleChoiceQuestion","ans","isAnswer","windowFactory","windowToken","windowProvider","provide","useValue","SharedModule","ngModule","AssessmentResultAnswer","AssignedQuestionnaire","documentTemplateId","documentId","AssignedAssessmentGroup","assessmentGroupId","PclGraderService","questionSetsByQuestion","getQuestionsForScale","hasPTSD","checkScaleForPTSD","getShortName","criteriaName","matchedQuestions","labelIndex","findIndex","AssessmentHydrator","questionFactory","_question_sets","_scales","hydrateScale","populateSubScaleProxies","hydrateQuestionSet","hydrateDisplayConditions","shouldMigrateAssessment","migrateAssessment","migrateAssessments","negToPosAssessments","negativeToPositiveRanges","dc","displayType","_questionSetId","_questionId","_answerId","newLabels","hydrateQuestionSetLabel","newQuestions","hydrateQuestion","_ranges","hydrateScaleRange","scaleIds","_subScaleIds","subScaleIds","addSubScale","proxy","_type","_flaggedCondition","customLabels","flag","lbls","flagValues","_flagValues","clearFlagValues","fv","qsl","addFlagValue","cl","listType","ScaleDataSectionComponent","_assessmentResult","computed_result","webpackContext","req","webpackContextResolve","__webpack_require__","webpackContextKeys","module","AssignmentSingle","MetricsService","category","_paq","AppComponent","httpService","authenticator","fhirStyleService","currentUrl","navEndEvent$","events","pipe","urlAfterRedirects","loadSmartStyles","seamless","showSideNav","_httpSubscription","statusCode","shouldOpenLoginDialog","openLoginDialog","childUrl","firstChild","loginDialogRef","isAdmin","ScaleResultsSummaryComponent","charts","_resultByUid","_sections","section","styles","printHide","printDisplayOnly","chartSize","getScaleResult","assessmentUid","getScaleResultByScaleId","rs","sections","AssessmentResult","_answersByQuestionId","_dateCompleted","scaleHasHomework","questionId","assignmentURL","resourcesURL","HostSiteService","GhQueryEncoder","k","HTTPService","_$http","_authenticator","_dacConfig","_httpStatusSubject","_useClientApis","_apiUrl","addToken","getFhirUserType","baseUrl","searchParams","fromObject","encoder","getHttpHeaders","headers","withCredentials","observe","toPromise","val","getAuthorizationHeader","refreshIfNeeded","clientState","getAuthorizationHeaderFromFhirClient","isFhirUrl","cacheBuster","generateUrl","apiUrl","postWithOptions","securityToken","responseType","header","binaryData","gzip","postUrl","XMLHttpRequest","onload","statusText","onerror","setRequestHeader","send","SsoPageComponent","ComputedScaleComponent","hydrator","_scaleResult","_calculation","calculation","addCalculation","ToastData","defaultToastConfig","fadeOut","fadeIn","spacer","TOAST_CONFIG_TOKEN","LibraryAssetResult","TextboxQuestion","ScaleResultsTableSummaryComponent","showViewLink","descriptionTherapist","getMaxScore","getLabelNameForRange","obj","strLen","highlightScaleResults","hs","getRangeDisplayName","rangeLabelMapping","scaleMap","severityLabels","AssessmentChartsModule","CopyClipboardService","table","textarea","appendChild","copyTextarea","getElementById","select","successful","execCommand","removeChild","ManagedClient","assignments","IsComplete","every","getNextAssignmentItemToComplete","hasItem","assignedAssessment","assetId","assignedAsset","AssetId","findAssignmentForAssignmentItem","markCompleted","assignedUser","FhirClientComponent","refreshToken","TextItemComponent","Assessment","display_client_results","creator","creatorUrl","isPublic","removeScale","qsQuestions","shouldDisplayQuestionSet","displayConditions","getDisplayConditions","showRatings","getDisplay","initQuestionList","questionsById","cur","_creator","_creatorUrl","_resourcesURL","enable","desc","_display_client_results","sets","_therapistDescription","_isPublic","UserSelectorComponent","users","getUsers","activeUsers","u","setupSelectedUser","selectedUser","_selectedUserId","selectUser","allowEmpty","Order","orderItems","discount","LoginModule","entryComponents","ToastComponent","ref","animationState","delay","intervalId","clearTimeout","toState","isFadeOut","itFinished","onFadeFinished","fadeToast","animations","Assignment","dateAssigned","DateAssigned","DateCompleted","getAssignmentsCompleted","AssignedLibraryAsset","Role","TherapistScaleResultsComponent","_skipContent","_skipGraph","_skipTable","_showRangeScore","_rollUpQuestions","externalScalesPerPage","externalScaleResults","ScaleResults","externalAssessmentResult","externalTitle","populateNavigator","cleanupNavigator","documentFragment","chartContainer","chartImage","summaryScaleChartComponent","getChartAsHtmlImageElement","firstElementChild","expandContent","scales_per_page","skipTable","skipGraph","skipContent","rollUpQuestions","hasTableAction","questionById","_questionActions","tableActions","ta","tableActionLabel","SkipTable","shouldRollUpQuestions","RollUpQuestions","rollUpSubScales","depth","questionList","subScaleResults","getSubScales","getQuestionsForScaleResult","rootElement","getScaleResultNavigatorId","registerItem","unregisterItem","si","Capability","ArticleComponent","article","ArticleContent","AppModule","panelClass","hasBackdrop","closeOnNavigation","forRoot","bootstrap","TabsComponent","_router","headerColor","endEvent","child","activeRoute","setupActiveTabFromRoute","toggleActive","missingRouters","tab","activeTab","relativeTo","ScaleSummaryComponent","ScaleRange","mediaType","mediaURL","_mediaType","_mediaURL","minRange","maxRange","maxInterval","normalizedPercentage","round","_assignmentURL","mid","ceil","abs","_rangeStart","_rangeEnd","_displayName","_content","_clientContent","AssessmentGroup","created","updated","SpinIconComponent","spinnerType","FlaggedCondition","flagDirection","fl","mcQuestion","flagValue","answerIndex","clQuestion","flagAnswer","_flagDirection","ScaleResultsSectionsListComponent","AssessmentTokenService","tokensEnabled","CAN_BUY_TOKENS","assessmentQuotas","numTests","tokensRemaining","testCount","quota","getItemForUid","total_tokens","used_tokens","remaining_tokens","addTokens","ScaleQuestionsListComponent","actionService","hasThirdColumn","hasQuestionActions","flagPrompts","displayScale","QuestionActions","actionsByQuestionId","QuestionDisplays","Questions","answerDisplayText","actionLabel","flagQuestion","computedScore","qd","questionDisplay","handleAction","QuestionnaireResultViewComponent","changeDetection","disable","getQuestionnaireResponseAsAssessmentResult","getQuestionsList","detectChanges","therapistScaleResults","AdminLoginFinalizePageComponent","LoginPageComponent","ConditionEditComponent","condition","getLabels","QuestionActionListComponent","questionActionService","questionFinder","_questionsByScale","questionAction","LoginDialogComponent","closeDialog","logout","goToClientLogin","goToAdminLogin","Scale","isDeleted","_subScales","_gradingData","_includeInReports","_rollUpSubScaleQuestions","potentialScales","availableScales","ps","hasSubScale","uniqueScales","getConnectedSubScales","ss","startInterval","endInterval","getIntervalPercentage","_negativeToPositiveRanges","_multiplier","_deleted","_descriptionClient","_descriptionTherapist","BillingDetails","_cards","_subscriptions","cards","_customerId","passwordStrengthValidator","passwordPolicyMsg","errors","match","LoginComponent","termsAndConditionsAgreed","charCode","login","_token","authenticateClient","Authenticator","PrintDialogComponent","pdfService","METRICS_CATEGORY","printSettings","_hasPrinted","printing","metricMessage","fileId","filePrintId","clearAlert","checked","printingComplete","getPDFUrl","AccountOwnerSettingsComponent","loaded","getAccountOwnerCompany","saveAccountOwnerCompany","AssessmentGroupDisplay","ReportViewerComponent","resolver","clientService","reportService","uniqueIdService","navBarService","crossDomainMessenger","questionnaireResponseService","_reportItemClassNames","menuItems","componentItems","componentItemsById","reportId","routeParamsSubscription","setupReportSidebar","assignmentId","loadReport","clearReportSidebar","getClient","report","getAssignment","_reportData","assessmentResultIds","getAssessmentResultIds","qrResultItems","getQuestionnaireResponseItems","arResults","getAssessmentResultList","qrResults","getQuestionnaireResponsesAsAssessmentResults","resultPromises","assessmentResults","history","container","read","FlaggedQuestionsListSimpleComponent","SsoCrossDomainMessenger","sendData","ssoIssuer","parent","postMessage","PricingTableComponent","selectPlan","AssessmentResultHydrator","assessmentHydrator","_assessmentHydrator","answerMap","questionMap","createQuestionMap","createAnswerMap","fillInAnswers","hydrateScaleResult","fq","fillInQuestion","QUESTION_LIST","srData","scaleData","rangeData","ReportService","reports","showAllReports","allReportsIncludingHidden","getReportObjects","linkedAssessments","requirements","assignmentReports","assessmentAssignment","linkedGroup","AssessmentGroupId","questionnaireAssignment","linkedQuestionnaires","AdminLoginPageComponent","QuestionActionService","sendMessage","ChartColor","ChecklistQuestion","addAnswer","getAnswerLabels","Item","price","_price","_quantity","vChecked","isNaN","_subItems","_assessment_uid","PdfService","pageToGenerate","AssignedAssessment","assessmentUuid","assessmentId","NavigationComponent","breakpointObserver","isHandset$","Handset","matches","UserService","mapUser","userToCreate","newUser","copied","userToRestore","saveUser","savedUser","userToArchive","SiteContainerComponent","navService","isSmall$","_navItems","_loginStateSubscription","topNavBarItemsForDisplay","skipContentPadding","_sidebarSubscription","displaySideBarEvent","drawer","toggle","navBarItem","handleMenuItemClick","isMainContentFluid","navItemsForDisplay","isStickyFixContainerEnabled","ChallengeName","SearchInputComponent","search","initialSearch","_searchString","doSearch","enterKeySearch","resetSearch","TaskService","tasks","getTasksForClient","filteredTasks","input","partOf","assignmentByReference","unmatchedTasks","coding","valueCanonical","assignmentItem","parseInt","QuestionnaireReference","lastUpdated","output","valueReference","QuestionnaireResponseReference","pop","Task","authoredOn","system","toastAnimations","opacity","AssessmentGroupService","newAssessment","showAllGroups","PclAssessmentResultsComponent","HasPermissionDirective","hasPermission","BaseChartComponent","chartElement","cs","drawChart","clearChartConversionTimeout","destroyChart","destroyChartImage","maxValue","maxY","getMaxYAxisTick","calculateStepSize","responsive","maintainAspectRatio","left","stacked","onComplete","handleChartAnimationComplete","setupChartData","_configOptions","setupChartConfiguration","_timeoutHandler","dataUrl","chartNode","Image","parentNode","chartData","getLabelData","getDatasets","drawChartWithData","createChartNode","componentElement","BillingService","stripeService","createUpdateCardToken","promise","customerId","card","newBilling","LogoutComponent","PaginatedResultsLoader","queryFunc","_hasMoreResults","_queryFunc","resultList","handleResultsLoaded","hasMoreData","AssessmentCompressorService","compressScale","compressQuestionSet","compressedScale","compressDisplayCondition","ClientService","taskService","_clientNotice","_sort","hydrateClient","subj","isTest","subject","newClient","hydrateFhirPatient","searchQueryObj","cursor","use","given","family","generalPractitioner","provider","providerParts","telecom","emailContacts","workContact","homeContact","getAssignmentTasksForClient","LoginFinalizePageComponent","HtmlContentItemComponent","_classNames","classNames","encapsulation","None","AssetListComponent","loadAssetsForType","getAssetsByType","sort","localeCompare","Assets","ThemeService","_isMainContentFluid","isFluid","stickyFixEnabled","_isStickyFixContainerEnabled","ScaleResultQuestionFinderService","PclCriteriaIconComponent","criteria","UniqueIdService","ScaleResultColorService","PURPLE","LIGHT_BLUE","GREEN","ORANGE","RED","_bgColorsForRangeSize","getSingleRange","getTwoRange","getThreeRange","getFourRange","getFiveRange","singleColor","low","high","moderate","lowModerate","moderateHigh","scaleRangeLength","rangeIndex","chartColors","rangeLength","getBackgroundColorForRange","ExerciseListComponent","viewAsset","SummarySectionGraphItemComponent","ToastModule","ReportsModule","LibraryAssetsModule","BuyItemButtonComponent","shoppingService","click","buying","shoppingItem","getItemForAssessment","getItemForAssessmentGroup","addItemToCart","startSingleCheckoutOrder","buyItem","ReportViewerContainerComponent","reportVariables","reportComputedVariables","computedResults","questionnaireMappings","processQuestionnaireMappings","processedResults","processReportComputations","resolveVariables","createComponent","componentId","addComponentToNavBar","ci","itemLoaded","handleLoadedResize","mappings","questionnaires","scrollHeight","scrollWidth","computed_results","newResults","createScaleResultFromComputation","computation","processCalculation","resolved","resolveComputedScale","resolveResultScale","resolveScale","variableData","resolveVariableFromResult","scorePercentage","computedResultId","processScaleResult","getComponentFromType","factory","resolveComponentFactory","componentRef","reportItemComponent","setReportData","reportItemClassNames","getHTMLClassNames","classNameString","addReportNavBarItem","questionnaireResults","showTitle","Pako","m","EhrModule","AdminModule","AssessmentsModule","AppRoutingModule","enableTracing","companyRoutes","CompaniesRoutingModule","AssignedTemplateProfile","AuthGuard","prefix","Question","_display_index","_computedScore","_prompt","_is_reversed","_skip_scoring","_is_flagged","BillingCardComponent","PageNotFoundComponent","customField1","AddoScaleResultsComponent","_pageBreaks","pageBreaks","pb","pageBreakIndex","isSingle","ScaleRangeChartColor","ScaleChartLegendComponent","rangeSize","_chartColors","BillingCard","_brand","_last4","AdminGuard","PdfGenerateBtnComponent","file","html","documentElement","ScaleRangeContentComponent","hasContent","FhirService","smartStyleService","fhirClient","ready","refresh","redirectUrlPath","getClientId","baseUri","baseURI","returnParam","URL","authorize","tokenResponse","smart_style_url","contextResourceFilter","resource","fhirContext","filteredResources","startsWith","errorParts","errorKey","urlParams","URLSearchParams","bodyClientId","bodyClientSecret","clientSecret","SubscriptionHydratorService","subJSON","canceledAt","getNullableDate","currentPeriodEnd","currentPeriodStart","renewalDate","endedAt","amountPerUnit","Subscription","billingInterval","ACTIVE","TRIAL","CANCEL_PROCESSING","TRIAL_PERIOD_ENDED","UNPAID","PAST_DUE","CANCELED","TERMINATED","isTrialSubscription","getTotalCurrency","getUnitTypeNameForQuantity","Intl","NumberFormat","formatter","style","currency","format","PeerClinicResultViewerComponent","activatedRoute","extraRows","maxRows","resultCount","resultsMapping","scaleList","dateList","scalesById","highScaleRange","lowScaleRange","createScale","nrs","odi","setupResultHistory","paramMap","getQuestionnairesByTitle","getPreviousQuestionnaireResponsesAsAssessmentResults","resultHistory","from","random","isAfterVisitAssessment","resultAnswer","getAnswerForQuestionId","newLow","newHigh","scaleRange","addRange","scores","floor","AdminViewAssetComponent","getAsset","goBack","SingleChoiceQuestion","NavBarService","stateUpdate","createNavItems","_topNavBarItems","createTopNavItems","_displaySideBarEvent","_navBarAction","_reportNavBarItems","reportClientId","getHomeMenuItem","roleExplicitMatch","hasChildren","navItem","getClientLoginMenuItem","getAdminLoginMenuItem","getClientDashboardMenuItem","getMyAccountMenuItem","getContactMenuItem","getLogoutMenuItem","SuperUser","library","capability","ic","shouldDisplayItem","ni","DebugModule","AssignmentItem","dacAppConfig","bootstrapModule","BackButtonComponent","webpackEmptyAsyncContext","AssessmentQuestionsListComponent"],"mappings":"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","file":"main-es5.js","sourcesContent":["/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, ElementRef, AfterViewInit, Input, Output, EventEmitter, ViewChild } from '@angular/core';\nimport { UniqueIdService } from 'app/shared/services/unique-id.service';\nimport { LibraryAsset } from 'app/library-assets/models/library-asset';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport { LibraryAssetResult } from 'app/library-assets/models/library-asset-result';\nimport { LibraryExerciseAnswer } from '../models/LibraryExerciseAnswer';\n\n@Component({\n  selector: 'dac-exercise',\n  templateUrl: './exercise.component.html',\n  styleUrls: ['./exercise.component.scss']\n})\nexport class ExerciseComponent implements OnInit, AfterViewInit {\n\n  @Input() exercise:LibraryAsset;\n  @Input() result:LibraryAssetResult;\n  @Output() onSubmit = new EventEmitter<LibraryAssetResult>();\n  @Input(\"disabled\") disabled:Boolean;\n  @Input() hideHeaders:boolean;\n\n  @ViewChild('journal') journal:ElementRef;\n\n  private answerIds:string[];\n  private boundClickHandler:any;\n\n  public ExerciseContent:SafeHtml;\n\n  constructor(private element:ElementRef, private idService:UniqueIdService, private domSanitizer:DomSanitizer) {\n    this.answerIds = [];\n    this.hideHeaders = false;\n    let clearText = function(evt:MouseEvent) {\n      let element = evt.target as HTMLElement;\n      element.innerText = \"\";\n      evt.target.removeEventListener('focus', clearText);\n    };\n    this.boundClickHandler = clearText;\n  }\n\n  ngOnInit() {\n    // we've sanitized this on the server, and we need to get the ids\n    if (this.exercise && this.exercise.content) {\n      this.ExerciseContent = this.domSanitizer.bypassSecurityTrustHtml(this.exercise.content);\n    }\n  }\n\n  ngOnDestroy() {\n    if (!this.result) {\n      let elements = this.element.nativeElement.querySelectorAll('.exercise-answer');\n      for (var i = 0; i < elements.length; i++) {\n        elements[i].removeEventListener('focus', this.boundClickHandler);\n      }\n    }\n  }\n\n  ngAfterViewInit() {\n    if (!this.exercise) {\n      return; // no exercise... nothing to do here.\n    }\n    if (!this.result) {\n      this.setupExerciseClickHandlers();\n    } else {\n      this.populateExerciseAnswers(this.result.answers);\n      this.populateExerciseJournal(this.result.journal);\n    }\n  }\n\n  public hasJournal() {\n    if (this.exercise.journal) {\n      return true;\n    }\n    return false;\n  }\n\n  private populateExerciseAnswers(answers:LibraryExerciseAnswer[]) {\n    if (!answers.length) {\n      return;\n    }\n    answers.forEach(a => {\n      let element = this.element.nativeElement.querySelector(\"#\" + this.exercise.getAnswerIdPrefix() + a.id);\n      if (element) {\n        element.innerText = a.answer;\n      }\n    });\n  }\n\n  private populateExerciseJournal(journal:string) {\n    if (this.journal && journal) {\n      this.journal.nativeElement.innerText = journal;\n    }\n  }\n  private setupExerciseClickHandlers() {\n    let elements = this.element.nativeElement.querySelectorAll('.exercise-answer');\n    for (var i = 0; i < elements.length; i++) {\n      elements[i].contentEditable = true;\n      elements[i].addEventListener('focus', this.boundClickHandler);\n      if (elements[i].id) {\n        let id = elements[i].id.replace(this.exercise.getAnswerIdPrefix(), \"\");\n        this.answerIds.push(id);\n      }\n    }\n  }\n  public print() {\n    if (window && window.print) {\n      window.print();\n    }\n  }\n\n  /**\n   * Saves off the answers and journal and sends it to the caller.\n   */\n  public submit() {\n    let answers = this.answerIds.map(i => {\n      let element = this.element.nativeElement.querySelector('#' + this.exercise.getAnswerIdPrefix() + i);\n      return {\n        id: i\n        ,answer: element ? element.innerText : null\n      };\n    });\n\n    let journalEntry = null;\n    if (this.journal) {\n      journalEntry = this.journal.nativeElement.innerText;\n    }\n\n    let result = new LibraryAssetResult();\n    result.asset = this.exercise;\n    result.answers = answers;\n    result.journal = journalEntry;\n    this.onSubmit.next(result);\n  }\n}\n","<div class=\"row p-2\" *ngIf=\"!hideHeaders\">\n  <div class=\"col-md-12 card card-body\">\n    <div class=\"row\">\n      <div class=\"col-6 col-sm-3 col-md-2 order-1\">\n      </div>\n      <div class=\"col-12 col-sm-6 col-md-8 text-center order-3 order-md-2\">\n        <h4 class=\"h4-responsive\">{{exercise?.title}}</h4>\n      </div>\n      <div class=\"col-6 col-sm-3 col-md-2 text-right order-2 order-md-3\">\n        <input type=\"button\" class=\"btn btn-secondary d-print-none\" value=\"Print\" (click)=\"print()\" />\n      </div>\n    </div>\n  </div>\n</div>\n<div [innerHTML]=\"ExerciseContent\"></div>\n<div class=\"card card-cascade wider mt-4 col-md-8 journalContainer\" *ngIf=\"hasJournal()\">\n  <div class=\"view gradient-card-header secondary-gradient\">\n      <h4 class=\"h4-responsive\"><i class=\"fa fa-pencil p-2\"></i>Time for Reflection</h4>\n  </div>\n  <div class=\"card-body\">\n    <h5 class=\"text-center\">{{exercise?.journal}}</h5>\n    <div *ngIf=\"!result\" #journal contenteditable=\"true\" class=\"form-control journal\"></div>\n    <div *ngIf=\"result\" #journal class=\"form-control journal\"></div>\n  </div>\n</div>\n<div class=\"row p-2 d-print-none\"  *ngIf=\"!hideHeaders\">\n  <div class=\"col card card-body\">\n    <div class=\"row\">\n      <div class=\"col-6 col-sm-3 col-md-2 order-1\">\n      </div>\n      <div class=\"col-12 col-sm-6 col-md-8 text-center order-3 order-md-2\">\n        <h4 class=\"h4-responsive\">{{exercise?.title}}</h4>\n      </div>\n      <div class=\"col-6 col-sm-3 col-md-2 text-right order-2 order-md-3\">\n        <input [disabled]=\"disabled\" type=\"button\" class=\"btn btn-primary\" value=\"Submit\" (click)=\"submit()\" />\n      </div>\n    </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Output, EventEmitter, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { Role } from \"../../shared/models/role\";\n\n@Component({\n  selector: 'app-role-selector',\n  templateUrl: './role-selector.component.html',\n  styleUrls: ['./role-selector.component.css']\n})\nexport class RoleSelectorComponent implements OnInit, OnChanges {\n\n  @Output() selected = new EventEmitter<Role>();\n  @Input() role:Role;\n  @Input() disabled:boolean;\n  private currentRole:Role;\n\n  constructor() {\n  }\n\n  ngOnInit() {\n    this.currentRole = this.role;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.currentRole = this.role;\n  }\n\n\n  // TODO: stephen eventually this needs to be a checklist of roles.\n  public setAdmin() {\n    if (this.currentRole === Role.Admin) {\n      this.currentRole = Role.Registered;\n    }\n    else {\n      this.currentRole = Role.Admin;\n    }\n    this.selected.emit(this.currentRole);\n  }\n\n  public isAdmin() {\n    return this.currentRole <= Role.Admin;\n  }\n\n}\n","<input class=\"form-control\" id=\"role-selector\" type=\"checkbox\" \n    (click)=\"setAdmin()\" [checked]=\"isAdmin()\" [disabled]=\"disabled\"/> <label for=\"role-selector\">Is Admin</label>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Scale } from \"./scale\";\nimport { ScaleRange } from \"./scale-range\";\n\nexport class ScaleResult\n{\n\tprivate _scale:Scale;\n\tprivate _score:number;\n\tprivate _range:ScaleRange;\n\n\tconstructor() {\n\t\tthis.score = 0;\n\t}\n\n\tpublic get scale() : Scale {\n\t\treturn this._scale;\n\t}\n\n\tpublic set scale(v : Scale) {\n\t\tthis._scale = v;\n\t}\n\n\n\tpublic get score() : number {\n\t\treturn this._score;\n\t}\n\n\tpublic getScoreForDisplay() : string {\n\t\t// @see https://stackoverflow.com/a/5623195\n\t\treturn this._score.toFixed(2).replace(/[.,]00$/, \"\");\n\t}\n\n\tpublic get scorePercentage() : number {\n\t\tlet score = 0;\n\t\tif (this.scale && this.score) {\n\t\t\tscore = this.scale.getPercentageForScore(this.score);\n\t\t}\n\t\treturn score;\n\t}\n\n\n\tpublic set score(v : number) {\n\t\tthis._score = v;\n\t}\n\n\tpublic get range() : ScaleRange {\n\t\treturn this._range;\n\t}\n\n\tpublic set range(v : ScaleRange) {\n\t\tthis._range = v;\n\t}\n\n\tpublic getRangeDisplayName() {\n\t\tif (this._range) {\n\t\t\treturn this._range.displayName;\n\t\t}\n\t\treturn \"\";\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Question} from \"../models/question\";\nimport {MultipleChoiceQuestion} from \"../models/multiple-choice-question\";\nimport {TextboxQuestion} from \"../models/textbox-question\";\nimport {ChecklistQuestion} from \"../models/checklist-question\";\nimport { QuestionSet } from \"../models/question-set\";\nimport {sample} from \"lodash\";\n\nexport class QuestionAnswerPopulator {\n    private _:any;\n\n    constructor() {\n    }\n\n    populateQuestion(question:Question, questionSet:QuestionSet) {\n        let answer:any = null;\n\n        let label = sample(questionSet.labels);\n        if (question instanceof MultipleChoiceQuestion) {\n            answer = label.id;\n        }\n        if (question instanceof TextboxQuestion) {\n            answer = \"Testing String\";\n        }\n        if (question instanceof ChecklistQuestion) {\n            answer = new Map<String,String>();\n            answer.set(label.id, label.id);\n        }\n        question.setSavedAnswer(answer, questionSet.labels);\n    }\n}","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {QuestionSet} from \"./question-set\";\nimport {Question} from \"./question\";\nimport {QuestionSetLabel} from \"./question-set-label\";\nimport {Assessment} from \"./assessment\";\n\nexport class DisplayCondition {\n\n    /**\n     * Whether the condition should hide or show the question set.\n     */\n    private _displayType: \"show\" | \"hide\";\n\n    /**\n     * The question set that the display condition belongs to.\n     */\n    private _questionSet:QuestionSet;\n\n    /**\n     * The id of the question this condtion belongs to\n     */\n    private _question:Question;\n\n    /**\n     * The question set label answer that must be selected in\n     * order for the display condition to trigger.\n     */\n    private _answer:QuestionSetLabel;\n\n    get displayType() {\n        return this._displayType;\n    }\n\n    set displayType(v:\"show\" | \"hide\") {\n        this._displayType = v;\n    }\n\n    get questionSet() {\n        return this._questionSet;\n    }\n\n    set questionSet(v:QuestionSet) {\n        this._questionSet = v;\n    }\n\n     get question() {\n        return this._question;\n    }\n\n    set question(v:Question) {\n        this._question = v;\n    }\n\n     get answer() {\n        return this._answer;\n    }\n\n    set answer(v:QuestionSetLabel) {\n        this._answer = v;\n    }\n\n    public getDisplay(assessment:Assessment) {\n        if (this._displayType === 'show') {\n            if (this.shouldShow(assessment)) {\n                return 'show';\n            }\n            return 'hide';\n        }\n        else if (this.shouldHide(assessment)) {\n            return 'hide';\n        }\n        return 'show';\n    }\n\n    public shouldShow(assessment:Assessment) {\n        return this.metAnswerCondition('show', assessment);\n    }\n\n    public shouldHide(assessment:Assessment) {\n        return this.metAnswerCondition('hide', assessment);\n    }\n\n    private metAnswerCondition(type:string, assessment:Assessment) {\n         if (this._displayType !== type) {\n            return false;\n        }\n\n        let qs = assessment.getQuestionSetById(this.questionSet.id);\n        if (!qs) {\n            return false;\n        }\n\n        let q = qs.getQuestionById(this.question.id);\n        if (!q) {\n            return false;\n        }\n        if (q.hasAnswer(this.answer)){\n        // if (q.answer && q.answer.id && q.answer.id == this.answer.id) {\n            return true;\n        }\n        return false;\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from \"@angular/core\";\n@Injectable({\n  providedIn: 'root',\n})\nexport class ChartService  {\n    private _chart:any;\n\n    constructor() {\n        this._chart = window['Chart'] as any;\n        if (!this._chart) {\n            console.error(\"Cannot find reference to Chart.js library.  Check script path inclusion\");\n            return;\n        }\n        this.registerPlugins();\n    }\n\n    drawChart(targetElement:Element, data, configOptions) {\n        var element = targetElement as HTMLCanvasElement;\n        var ctx = element.getContext(\"2d\");\n        // TODO: stephen need a way of injecting this instead of grabbing a global script.\n        return new this._chart(ctx, {\n            type: \"bar\",\n            data: data,\n            options: configOptions\n        });\n    }\n    // TODO: stephen need to typedef this.\n    destroyChart(chart:any) {\n        if (chart && chart.destroy) {\n            // chart destroy doesn't seem to actually clear the canvas element\n            if (chart.clear) {\n                chart.clear();\n            }\n            chart.destroy();\n        }\n    }\n\n    registerPlugins() {\n        let Chart = this._chart;\n        Chart.plugins.register({\n        afterDraw: function(chartInstance) {\n            if (chartInstance.config.options.showDatapoints) {\n            var helpers = Chart.helpers;\n            var ctx = chartInstance.chart.ctx;\n            var fontColor = helpers.getValueOrDefault(chartInstance.config.options.showDatapoints.fontColor, chartInstance.config.options.defaultFontColor);\n\n            // render the value of the chart above the bar\n            let fontSize = chartInstance.config.options.dataPointFontSize ? chartInstance.config.options.dataPointFontSize : Chart.defaults.global.defaultFontSize;\n            ctx.font = Chart.helpers.fontString(fontSize, 'bold', Chart.defaults.global.defaultFontFamily);\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'bottom';\n            ctx.fillStyle = fontColor;\n\n            // chartInstance.data.datasets.forEach(function (dataset) {\n            //     for (var i = 0; i < dataset.data.length; i++) {\n            //     var model = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._model;\n            //     var scaleMax = dataset._meta[Object.keys(dataset._meta)[0]].data[i]._yScale.maxHeight;\n            //     var yPos = (scaleMax - model.y) / scaleMax >= 0.93 ? model.y + 20 : model.y - 5;\n            //     ctx.fillText(dataset.data[i], model.x, yPos);\n            //     }\n            // });\n            }\n        }\n        });\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { LibraryExerciseAnswer } from \"./LibraryExerciseAnswer\";\n\nexport class LibraryAsset {\n    id: number;\n    uuid: string;\n    type: \"article\"|\"assignment\";\n    originalCreator:string;\n    title: string;\n    description: string;\n    content: string;\n    journal: string;\n    creationDate: Date\n    lastUpdateDate: Date;\n    tags:string[];\n\n    constructor() {\n      this.type = \"assignment\";\n      this.creationDate = new Date();\n      this.lastUpdateDate = new Date();\n      this.tags = [];\n    }\n\n    public getAnswerIdPrefix() {\n        return 'answer-id-';\n    }\n\n    public hasTag(tag:string) {\n        return this.tags && this.tags.indexOf(tag) >= 0;\n    }\n\n    public titleContainsString(str:string) {\n        if (!this.title || this.title.trim() ==\"\") {\n            return false;\n        }\n        return this.title.toLowerCase().indexOf(str.toLowerCase()) >= 0;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {AuthService} from '../services/auth.service';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\nimport { Role } from 'app/shared/models/role';\nimport { AlertService } from 'app/shared/services/alert.service';\n\n@Component({\n  selector: 'app-sso',\n  templateUrl: './sso.component.html',\n  styleUrls: ['./sso.component.css']\n})\nexport class SsoComponent implements OnInit {\n  private _ssoFailed:boolean;\n  private _debugAlerts:boolean;\n  private _storageAccessRequired:boolean;\n  constructor(private route:ActivatedRoute,\n    private dacConfig:DacConfig,\n    private router:Router, private authService:AuthService,\n    private alertService:AlertService) {\n      this._ssoFailed = false;\n      this._debugAlerts = false;\n      this.log(\"SsoComponent\");\n      this._storageAccessRequired = false;\n  }\n\n  private log(msg) {\n    if (this._debugAlerts) {\n      this.alertService.error(msg);\n    }\n    else {\n      console.log(msg);\n    }\n  }\n\n  public get title() {\n    return this.dacConfig.applicationTitle;\n  }\n\n  public get isSeamless() {\n    return this.dacConfig.seamlessMode;\n  }\n\n  public get ssoFailed() {\n    return this._ssoFailed;\n  }\n\n  public get storageAccessRequired() {\n    return this._storageAccessRequired;\n  }\n  ngInit() {\n    this.route.queryParams.subscribe((params) => {\n      this.log(\"Query params are subscribed inside ngInit()\");\n    });\n    this.alertService.error(\"show something here\");\n  }\n\n  ngAfterViewInit() {\n    this.loadSSO(); // for now we just load the sso and don't deal with the storage access stuff.\n  }\n\n  public grantStorageAccess() {\n    // @ts-ignore\n    var storageAccessGranted = document.requestStorageAccess();\n    storageAccessGranted.then((isAccessGranted) => {\n      if (isAccessGranted === true || isAccessGranted === undefined) {\n        this._storageAccessRequired = false;\n        this.loadSSO();\n      }\n      else {\n        this.alertService.error(\"Storage access is required to use this service\");\n      }\n    })\n    .catch((reason) => {\n      console.error(reason);\n      this.alertService.error(reason);\n      this.alertService.error(\"Storage access is required to use this service\");\n    });\n  }\n\n  public requestStorageAccess() {\n    let storageAccessGranted = Promise.resolve(true);\n    if (!window.document['requestStorageAccess']) {\n      console.error(\"requestStorageAccess() called when window.Document.requestStorageAccess does not exist\");\n    } else {\n      storageAccessGranted = window.document['requestStorageAccess']();\n    }\n    storageAccessGranted.then((isAccessGranted) => {\n      if (isAccessGranted) {\n        this.loadSSO();\n      }\n      else {\n        this.loadStorageAccessNeeded();\n      }\n    });\n  }\n\n  public loadStorageAccessNeeded() {\n    this._storageAccessRequired = true;\n  }\n\n  private loadSSO() {\n    this.log(\"SsoComponent ngAfterViewInit \");\n    let time = new Date();\n    this.log(\"Inside the ngAfterViewInt just before subscribe of query params\");\n    this.route.queryParams.subscribe((params) => {\n\n      this.authService.authenticateSSO(params.RelayState)\n      .then((userResp) => {\n        this.log(\"User response is: \" + JSON.stringify(userResp));\n        let route = userResp.redirectUrl;\n        if (userResp.issuer) {\n          this.dacConfig.setupSSOIssuerForSession(userResp.issuer);\n        }\n        if (!route) {\n          route = userResp.role == Role.Client ? \"/assessments/dashboard/\" : \"/admin/dashboard/\";\n        }\n        // so we don't just quickly flash through give a second to\n        if (new Date().getTime() < (time.getTime() +1000)) {\n          setTimeout(() => {\n            this.router.navigate([route]);\n          }, 1000);\n        }\n        else {\n          this.router.navigate([route]);\n        } })\n      .catch((error) => {\n        let msg = error && error._message ? error._message : \"There was a server error and we could not load your data\";\n        this.alertService.error(msg, 30000);\n        this.log(error);\n        // TODO: stephen if there is no error we should display something here...\n        if (error.redirectURL) {\n          window.location.href = error.redirectURL;\n        }\n        else {\n          this._ssoFailed = true;\n        }\n      });\n    });\n  }\n\n  ngOnInit() {\n\n  }\n\n  // TODO: stephen abstract this all into a footer component.\n\n  get supportPhone() {\n    return this.dacConfig.supportPhone;\n  }\n\n  get supportEmail() {\n    return this.dacConfig.supportEmail;\n  }\n\n  get mailLink() {\n    return \"mailto:\" + this.supportEmail;\n  }\n  get phoneLink() {\n    return \"tel:\" + this.supportPhone;\n  }\n\n  get copyrightTitle() {\n    return this.dacConfig.copyrightTitle;\n  }\n  get copyrightURL() {\n    return this.dacConfig.copyrightURL;\n  }\n\n}\n","<div class=\"view hm-black-light home-banner\">\n    <div class=\"full-bg-img\">\n        <div class=\"container\">\n            <div class=\"d-flex align-items-center d-flex justify-content-center\" style=\"height: 600px\">\n                <div class=\"row mt-5\">\n                    <div class=\"col-md-12 wow fadeIn mb-3\">\n\n                        <div class=\"intro-info-content text-center\" *ngIf=\"!storageAccessRequired\">\n                            <!-- <h1 class=\"h1-responsive mb-2 wow fadeInDown text-uppercase text-light\" data-wow-delay=\"0.3s\">{{title}}</h1> -->\n                            <h2 class=\"h2-responsive mb-2 wow fadeInDown text-uppercase text-light\" *ngIf=\"!ssoFailed\">\n                                <app-spin-icon class=\"pl-2\"></app-spin-icon>Loading up your account</h2>\n                            <h2 class=\"h2-responsive mb-2 wow fadeInDown text-uppercase text-light\" *ngIf=\"ssoFailed\">\n                                There was an error loading the application.\n                            </h2>\n                            <h2 class=\"h2-responsive mb-2 wow fadeInDown text-uppercase text-light\" *ngIf=\"ssoFailed\">\n                                    Contact support for assistance.\n                            </h2>\n                        </div>\n                        <div class=\"intro-info-content text-center\" *ngIf=\"storageAccessRequired\">\n                            <h2 class=\"h2-responsive mb-2 wow fadeInDown text-uppercase text-light\">\n                                In order to use the assessment service to both take and save your assessment data, you must grant storage access.\n                            </h2>\n                            <a (click)=\"grantStorageAccess()\" class=\"btn btn-lg\">Grant Access</a>\n                            <h2 class=\"h2-responsive mb-2 wow fadeInDown text-uppercase text-light\">\n                                    Contact support for assistance, if you have any questions.\n                            </h2>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","/* (ignored) */","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { AssessmentService } from 'app/shared/services/assessment.service';\nimport { AssessmentResult } from 'app/shared/models/assessment-result';\nimport { ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'dac-client-assessment-result-view',\n  templateUrl: './client-assessment-result-view.component.html',\n  styleUrls: ['./client-assessment-result-view.component.scss']\n})\nexport class ClientAssessmentResultViewComponent implements OnInit {\n  _clientId: any;\n  hasLoadedResults: boolean;\n  result: AssessmentResult;\n\n  constructor(private _assessmentService:AssessmentService, private route:ActivatedRoute) { }\n\n  ngOnInit() {\n   // TODO: stephen do we need the rx switchTo piece?\n   this.route.params.subscribe((params) => {\n    this._clientId = params['id'];\n    let resultId = params['resultId'];\n    this.hasLoadedResults = false;\n    this._assessmentService.getAssessmentResult(this._clientId, resultId).then((result:AssessmentResult) =>  {\n      this.hasLoadedResults = true;\n      this.result = result;\n      if (this.result == null || !this.result.scaleResults || this.result.scaleResults.length < 1) {\n        console.error(\"Could not find result\");\n        // this.goBack();\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n      if (error && error.status === 404 || error.status === 400) {\n        // this.goBack();\n      }\n    });\n  });\n}\n\nngAfterViewInit() {\n  // we need to let outside listeners like the server pdf generator know we have finished loading so we can generate the report\n  console.log(\"adding dac-report-loaded class\");\n  document.body.classList.add(\"dac-report-loaded\");\n}\n\n}\n","<div *ngFor=\"let scaleResult of result.scaleResults\">\n  <div class=\"row mb-0 mt-3\" *ngIf=\"!SkipContent\">\n    <app-scale-range-content class=\"col\" [scaleResult]=\"scaleResult\"></app-scale-range-content>\n  </div>\n  <div class=\"row\">\n    <app-scale-questions-list  class=\"col-12 d-report-print-page\" [Questions]=\"result.assessment.getQuestionsForScale(scaleResult.scale)\"></app-scale-questions-list>\n  </div>\n</div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { BillingService } from '../services/billing.service';\nimport { BillingDetails } from '../models/billing-details';\nimport { AlertService } from '../../shared/services/alert.service';\nimport { DacConfig } from '../services/dac-config.service';\n\n@Component({\n  selector: 'dac-billing-details',\n  templateUrl: './billing-details.component.html',\n  styleUrls: ['./billing-details.component.scss']\n})\nexport class BillingDetailsComponent implements OnInit {\n\n  private billingDetails:BillingDetails;\n  public loading:boolean;\n\n  constructor(private billingService:BillingService\n  ,private alertService:AlertService\n  ,private dacConfig:DacConfig) {\n    this.billingDetails = new BillingDetails();\n  }\n\n  get hasSubscription() {\n    return this.billingDetails.subscriptions.length > 0;\n  }\n\n  ngOnInit() {\n    this.loading = true;\n    this.billingService.getBillingDetails()\n    .then(details => {\n      this.billingDetails = details\n      this.loading = false;\n    })\n    .catch((error) => {\n      this.loading = false;\n      console.error(error);\n      this.alertService.error(\"Failed to retrieve billing details from server.  Check your network connection and refresh the page.\");\n    });\n  }\n\n  get Billing() {\n    return this.billingDetails;\n  }\n\n  get supportEmail() {\n    return this.dacConfig.supportEmail;\n  }\n\n  public setupCard() {\n    this.billingService.updateDefaultBillingCard(this.billingDetails)\n    .then((updatedBillingDetails) => {\n      this.billingDetails = updatedBillingDetails;\n      this.alertService.success(\"Default billing card updated\");\n    })\n    .catch((error) => {\n      console.error(error);\n      this.alertService.error(\"There was an error updating your default billing card.  Please try again or contact customer support\");\n    });\n  }\n\n  public removeCard() {\n    if (confirm(\"Are you sure you want to delete this card?\")) {\n      this.billingService.deleteDefaultBillingCard(this.billingDetails)\n      .then((billingDetails) => {\n        this.billingDetails = billingDetails;\n        this.alertService.success(\"Deleted billing card\");\n      });\n    }\n  }\n\n}\n","<div class=\"row\" *ngIf=\"loading\">\n  <div class=\"col\">\n    <div class=\"alert alert-warning\">Loading... <app-spin-icon></app-spin-icon>\n    </div>\n  </div>\n</div>\n<div class=\"row\" *ngIf=\"!loading\">\n  <div class=\"col\">\n    <div class=\"card card-cascade wider col-md-10 col-lg-8 col-12 ml-auto mr-auto\">\n      <div class=\"view gradient-card-header secondary-gradient\">\n        <h4>Billing Card</h4>\n      </div>\n      <div class=\"card-body text-center\" *ngIf=\"!Billing.hasCards()\">\n        <p class=\"alert alert-info\">There is no card setup on file.</p>\n        <div class=\"text-center\">\n          <input type=\"button\" class=\"btn btn-secondary\" value=\"Setup Payment Card\" (click)=\"setupCard()\" />\n        </div>\n      </div>\n      <div class=\"card-body\" *ngIf=\"Billing.hasCards()\">\n        <h6>Billing Email On File <b>{{Billing.email}}</b></h6>\n\n        <div *ngIf=\"Billing.hasCards()\" class=\"row\">\n          <div class=\"col-12\" *ngFor=\"let card of Billing.cards\">\n            <dac-billing-card [card]=\"card\"></dac-billing-card>\n            <input type=\"button\" class=\"btn btn-secondary\" value=\"Update Card\" (click)=\"setupCard()\" />\n            <i class=\"fa fa-trash\" class=\"btn btn-danger fa fa-trash\" alt=\"Remove Saved Card\" title=\"Remove Saved Card\"\n              (click)=\"removeCard()\"></i>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","/* (ignored) */","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { AssignmentItem } from \"./AssignmentItem\";\n\nexport class ExternalAssignedQuestionnaire extends AssignmentItem\n{\n    private questionnaireReference:string|null;\n    private questionnaireResponseReference:string|null;\n    private questionnaireId:string;\n    private task?:any;\n\n    public constructor() {\n        super();\n        this.Type = \"ExternalQuestionnaire\";\n    }\n\n    public get QuestionnaireId() {\n      return this.questionnaireId;\n    }\n\n    public get QuestionnaireReference() {\n        return this.questionnaireReference;\n    }\n\n    public set QuestionnaireReference(v:string) {\n        this.questionnaireReference = v;\n        let parts = this.questionnaireReference.split(\"/\");\n        let id = parts[parts.length - 1];\n        if (id) {\n          this.questionnaireId = id;\n        } else {\n          this.questionnaireId = null;\n        }\n    }\n\n    public get QuestionnaireResponseReference() {\n      return this.questionnaireResponseReference;\n    }\n\n    public set QuestionnaireResponseReference(v:string) {\n        this.questionnaireResponseReference = v;\n    }\n\n    public get Task() {\n      return this.task;\n    }\n\n    public set Task(v:any) {\n      this.task = v;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {AlertService} from '../../shared/services/alert.service';\nimport {AuthService} from '../../login/services/auth.service';\nimport { Component, OnInit, ElementRef, OnDestroy } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Company } from \"../../shared/models/company\";\nimport { CompanyService } from \"../../shared/services/company.service\";\nimport { DacConfig } from 'app/shared/services/dac-config.service';\nimport { Subscription } from 'rxjs';\nimport { MetricsService } from 'app/shared/services/metrics.service';\nimport { AmplifyAuthService } from 'app/login/services/amplify-auth-service';\nimport { AuthState } from 'app/login/models/AuthState';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { passwordStrengthValidator } from 'app/shared/validators/password-strength.directive';\nimport { ThemeService } from 'app/theme/services/theme.service';\n\n@Component({\n  selector: 'dac-signup',\n  templateUrl: './signup.component.html',\n  styleUrls: ['./signup.component.css']\n})\nexport class SignupComponent implements OnInit, OnDestroy {\n  public signupLogo: string;\n  private _company:Company;\n  private _authState:string;\n\n  public isPerformingAction:boolean;\n  public processingSignup:boolean = false;\n  public signupForm:FormGroup;\n  public confirmForm:FormGroup;\n  public formError:string;\n  private _authStateSubscription:Subscription;\n  private readonly METRIC_CATEGORY = 'signup';\n\n  constructor(private companyService:CompanyService, private router:Router\n    ,private formBuilder:FormBuilder\n  ,private authService:AuthService,\n  private amplifyService:AmplifyAuthService,\n   private alertService:AlertService\n  ,private dacConfig:DacConfig\n  ,private elementRef:ElementRef\n  ,private metrics:MetricsService\n  ,private themeService:ThemeService) {\n    this._company = new Company();\n    this.isPerformingAction = false;\n    this._authState = AuthState.SIGN_UP;\n    this.signupForm = this.formBuilder.group({\n      name: [null, Validators.required]\n      ,email: [null, Validators.email]\n      ,password: [null, [Validators.required, passwordStrengthValidator()]] // change to match password requirements here\n    })\n    this.confirmForm = this.formBuilder.group({\n      confirmationCode: [null, Validators.required]\n    })\n    this._authStateSubscription = this.authService.authStateChange$().subscribe(authState => {\n      this._authState = authState.state;\n    });\n    // this.amplifyService.setAuthState({state: 'signUp', user:null});\n  }\n\n  ngOnDestroy() {\n    if (this._authStateSubscription) {\n      this._authStateSubscription.unsubscribe();\n    }\n    this.themeService.setMainContentFluid(false);\n    this.authService.resetAuthState();\n  }\n\n  ngOnInit() {\n    this.themeService.setMainContentFluid(true);\n    this.signupLogo = this.dacConfig.applicationLogoUrl\n    this.amplifyService.setAuthState({state: AuthState.SIGN_UP, user:null});\n  }\n\n  private trackSignup(action:string, name?:string) {\n    this.metrics.trackEvent(this.METRIC_CATEGORY, action, name);\n  }\n\n  public isSignup() {\n    return this._authState == AuthState.SIGN_UP;\n  }\n\n  public isSignupConfirm() {\n    return this._authState == AuthState.CONFIRM_SIGN_UP;\n  }\n\n  get authState() {\n    return this._authState;\n  }\n\n  get Company() {\n    return this._company;\n  }\n\n  public handlePlan(plan:\"Custom\"|\"Therapist\") {\n    // custom will go to the contact page.\n    if (plan == \"Therapist\") {\n      this.handleCTA();\n    }\n    return;\n  }\n\n  public handleCTA() {\n    let el = this.elementRef.nativeElement as HTMLElement;\n    let home = el.querySelector(\"#home\");\n    home.scrollIntoView(true);\n  }\n\n  public showPartner(partner:string) {\n    if (this.dacConfig.hasPartner(partner)) {\n      return true;\n    }\n    return false;\n  }\n  public async confirmSignup() {\n    this.formError = \"\";\n    this.trackSignup('confirmSignup');\n    let code = this.confirmForm.get('confirmationCode').value.trim();\n    this.processingSignup = true;\n    this.amplifyService\n    .confirmSignUp(this.Company.email, code)\n    .then(() => {\n      this.trackSignup('confirmSignup', 'cognito confirmed');\n      this.registerNewCompany();\n    })\n    .catch((error) => {\n      this.trackSignup('confirmSignup', 'code invalid or error');\n      this.processingSignup = false;\n      console.error(error);\n      let msg = error.message || error || \"There was an error in confirming your code.  Please try again or contact support\";\n      this.formError = msg;\n    });\n  }\n\n  public resendConfirmationCode(evt:Event) {\n    this.formError = \"\";\n    evt.preventDefault();\n    evt.stopImmediatePropagation();\n    this.trackSignup('resentConfirmationCode');\n\n    this.amplifyService\n        .resendSignUp(this.Company.email)\n        .then(() => {\n          this.trackSignup('resentConfirmationCode', 'code resent');\n          this.alertService.info(\"Confirmation code resent. Check your email for confirmation\");\n        })\n        .catch((error) => {\n          this.trackSignup('resentConfirmationCode', 'code failed to resend');\n          this.formError = \"There was an error resending the confirmation code.  Please try again\";\n        });\n    return false;\n  }\n\n  public async signup() {\n    this.formError = \"\";\n    this.trackSignup('signupClicked');\n    // we are going to clear our local storage to make sure everything is reset\n    try {\n      sessionStorage.clear();\n      localStorage.clear();\n    }\n    catch (error) {\n      this.trackSignup('signupClicked', 'clear storage failed');\n      console.error(\"Failed to clear local and session storage\", error);\n    }\n\n    this.processingSignup = true;\n    let values = this.signupForm.value;\n    this.Company.name = values.name;\n    this.Company.email = values.email;\n    this._company.user.username = this.Company.email;\n\n    this.amplifyService.signUp({\n      // email: this.Company.email,\n      username: values.email,\n      password: values.password,\n      attributes: {\n        //   email: this.Company.email,          // optional\n         'custom:companyName': values.name\n      },\n      validationData: []  //optional\n      })\n      .then(data => {\n        this.trackSignup('signupClicked', 'cognito signup');\n        // TODO: stephen do we save off the lead here...\n        this.processingSignup = false;\n        this.amplifyService.setAuthState({state: AuthState.CONFIRM_SIGN_UP, user: {username:data.user.getUsername()}});\n      })\n      .catch(err =>\n        {\n          if (err.code === \"UsernameExistsException\") {\n            this.trackSignup('signupClicked', 'duplicate email');\n            this.formError = \"That email address already exists.  Please choose a different one or login\";\n          }\n          else if (err.code == 'InvalidParameterException') {\n            this.trackSignup('signupClicked', 'invalid cognito parameter');\n            this.formError = err.message;\n          }\n          else {\n            this.trackSignup('signupClicked', 'system error occurred');\n            this.formError = \"There was an error creating your account.  Check your information and try again or contact our support\";\n          }\n          this.processingSignup = false;\n          console.log(err)\n      });\n\n    }\n    public registerNewCompany() {\n      this.formError = \"\";\n      let values = this.signupForm.value;\n\n      this.trackSignup('registerNewCompany');\n      // this._company.user.password = this.password;\n      // TODO: need to handle any referral and other pieces of information as part of this registration\n      const user = this.amplifyService.signIn(this._company.email, values.password)\n        .then((user) => {\n          this.trackSignup('registerNewCompany', 'cognito signIn success');\n          let authToken = user.signInUserSession.accessToken.jwtToken;\n          // registration will only work if there is a valid auth token here...\n          this.companyService.registerNewCompany(this._company, authToken)\n            .then((company) => {\n              this.trackSignup('registerNewCompany', 'company registered');\n                // now let's login in and authenticate here...\n                this.authService.authenticateCognito(user).then(() => {\n                  this.trackSignup('registerNewCompany', 'authentication complete');\n                  this.signupForm.reset();\n                  this.alertService.success(\"Registration complete. Sending you on to your dashboard.\");\n                  setTimeout(() => {\n                    this.router.navigate([\"/admin/\"]);\n                    this.processingSignup = false;\n                  }, 3000);\n                })\n                .catch(error => {\n                  this.trackSignup('registerNewCompany', 'authentication failed');\n                  this.processingSignup = false;\n                  console.error(error);\n                  this.alertService.error(\"Failed to log you in.  Redirecting to login page\");\n                  this.router.navigate([\"/loginAdmin\"]);\n                })\n            })\n            .catch(error => {\n              this.trackSignup('registerNewCompany', 'company registration failed');\n              this.processingSignup = false;\n              console.error(error); // TODO: stephen this error needs to be transmitted to the server.\n              this.formError = \"Failed to sign you in and complete creation of your account.  Please contact customer support for assistance.\";\n              this.amplifyService.signOut({ global: true }); // sign out if we failed to login.\n              this.amplifyService.setAuthState({state: AuthState.SIGN_UP, user: null});\n            })\n        })\n        .catch(error => {\n          this.trackSignup('registerNewCompany', 'cognito signIn failed');\n          console.error(error); // TODO: stephen this error needs to be transmitted to the server.\n          this.formError = \"Failed to sign you in and complete creation of your account.  Please contact customer support for assistance.\";\n        })\n\n\n  }\n\n  public getFreeTrialPeriod() {\n    return this.dacConfig.freeTrialPeriod;\n  }\n\n}\n","<!-- =========================\n     PRE LOADER\n============================== -->\n<!-- <div class=\"preloader\">\n    <div class=\"status\">&nbsp;</div>\n</div> -->\n\n<!-- =========================\n           HEADER\n      ============================== -->\n<header id=\"home\">\n    <!-- COLOR OVER IMAGE -->\n    <div class=\"color-overlay\">\n        <!-- <div class=\"navbar-header\">\n            <nav class=\"navbar navbar-expand-lg navbar-light bg-light\">\n                <a class=\"navbar-brand text-left\" href=\"/\"><img src=\"{{signupLogo}}\" /></a>\n            </nav>\n        </div> -->\n        <!-- HEADING, FEATURES AND REGISTRATION FORM CONTAINER -->\n        <div class=\"container\">\n\n            <div class=\"row\">\n\n                <!-- LEFT - HEADING AND TEXTS -->\n                <div class=\"col-md-7 col-sm-7 intro-section\">\n\n                    <h1 class=\"intro-section-header text-left\">\n                        Helping You\n                        <strong>Create</strong> the\n                        <strong>Change</strong> Your Clients Want\n                    </h1>\n\n                    <ul class=\"feature-list-1\">\n                        <!-- FEATURE ROW -->\n                        <li>\n                            <div class=\"icon-container pull-left\">\n                                <span class=\"fa fa-check\"></span>\n                            </div>\n                            <p class=\"text-left\">\n                                <strong>Unlimited access to valid and reliable digital assessments for diagnosis and treatment planning.\n                                </strong>\n                            </p>\n                        </li>\n\n                        <!-- FEATURE ROW -->\n                        <li>\n                            <div class=\"icon-container pull-left\">\n                                <span class=\"fa fa-check\"></span>\n                            </div>\n                            <p class=\"text-left\">\n                                <strong>Unlimited access to a growing library of homework exercises and articles to provide ongoing support to your clients.</strong>\n                            </p>\n                        </li>\n\n                        <!-- FEATURE ROW -->\n                        <li>\n                            <div class=\"icon-container pull-left\">\n                                <span class=\"fa fa-check\"></span>\n                            </div>\n                            <p class=\"text-left\">\n                                <strong>No commitment required -- try the service absolutely free with no credit card required.</strong>\n                            </p>\n                        </li>\n\n                    </ul>\n\n                </div>\n\n                <!-- RIGHT - REGISTRATION FORM -->\n\n                <div class=\"col-md-5 col-sm-5\">\n\n                    <div class=\"vertical-registration-form\">\n                        <div class=\"colored-line\">\n                        </div>\n                        <h3>{{getFreeTrialPeriod()}} Day Free Trial<br /><small>No Credit Card Required</small></h3>\n\n                        <form class=\"registration-form\" id=\"register\" role=\"form\" [formGroup]=\"signupForm\" *ngIf=\"isSignup()\">\n                            <div>\n                                <input class=\"form-control input-box\" id=\"companyName\" type=\"text\" name=\"companyName\" placeholder=\"Company Name\" formControlName=\"name\"\n                                />\n                                <div *ngIf=\"signupForm.get('name').invalid && (signupForm.get('name').dirty || signupForm.get('name').touched)\"\n                                  class=\"alert alert-danger\">\n                                  <p *ngIf=\"signupForm.get('name').hasError('required')\">\n                                    Please provide a name for your company. Or use your own given name.\n                                  </p>\n                                </div>\n                                <input class=\"form-control input-box\" id=\"email\" type=\"text\" name=\"email\" placeholder=\"Email\" formControlName=\"email\">\n                                <div *ngIf=\"signupForm.get('email').invalid && (signupForm.get('email').dirty || signupForm.get('email').touched)\"\n                                  class=\"alert alert-danger\">\n                                  <p *ngIf=\"signupForm.get('email').hasError('email')\">\n                                    Please provide a valid email for you or your company.\n                                  </p>\n                                </div>\n                                <input class=\"form-control input-box\" id=\"password\" type=\"password\" name=\"password\" placeholder=\"Password\" formControlName=\"password\">\n                                <div *ngIf=\"signupForm.get('password').invalid && (signupForm.get('password').dirty || signupForm.get('password').touched)\"\n                                  class=\"alert alert-danger\">\n                                  <p *ngIf=\"signupForm.get('password').hasError('required')\">\n                                    A password is required.\n                                  </p>\n                                  <p *ngIf=\"signupForm.get('password').hasError('passwordStrength')\">\n                                    Your password is not strong enough.  You must have a password that is 8 characters long, with one uppercase letter, one lowercase letter, and have one number.\n                                  </p>\n                                </div>\n\n                                <button\n                                     class=\"btn btn-primary\"\n                                    (click)=\"signup()\" type=\"submit\" id=\"submit\" name=\"submit\"\n                                    [disabled]=\"signupForm.invalid || processingSignup\"\n                                    >\n                                    <span *ngIf=\"!processingSignup\">Get Started</span>\n                                    <span *ngIf=\"processingSignup\">Processing</span>\n                                </button>\n                                <p class=\"small text-light\">By clicking Get Started, you agree to the <a target=\"_blank\" [routerLink]=\"['/baa']\">Business Associate Agreement</a>, <a target=\"_blank\" [routerLink]=\"['/terms-and-conditions']\">Terms of Service</a>, and <a target=\"_blank\" [routerLink]=\"['/privacy']\">Privacy Policy.</a></p>\n                            </div>\n                        </form>\n\n                        <form class=\"registration-form\" id=\"confirmRegister\" role=\"form\" [formGroup]=\"confirmForm\" *ngIf=\"isSignupConfirm()\">\n                            <div>\n                                <p class='text-light'>Please enter the code you received in your email</p>\n                                <input class=\"form-control input-box\" id=\"confirmationCode\" type=\"text\" name=\"confirmationCode\" placeholder=\"Confirmation Code\" formControlName=\"confirmationCode\"\n                                />\n                                <button class=\"btn btn-primary\" [disabled]=\"confirmForm.invalid || processingSignup\" (click)=\"confirmSignup()\" type=\"submit\" id=\"submit\" name=\"submit\">Confirm Email</button>\n                                <app-spin-icon *ngIf=\"processingSignup\"></app-spin-icon>\n                                <p>Didn't receive a code?  <a href=\"#\" (click)=\"resendConfirmationCode($event)\">Resend code</a></p>\n                            </div>\n                        </form>\n                        <div class=\"alert alert-danger\" *ngIf=\"formError\">\n                          <p>{{formError}}</p>\n                        </div>\n                        <p class='text-white'><small><a class='text-primary' [routerLink]=\"['/', 'loginAdmin']\">Login</a> if you already have an account</small></p>\n                    </div>\n                </div>\n                <!-- /END - REGISTRATION FORM -->\n            </div>\n\n        </div>\n        <!-- /END HEADING, FEATURES AND REGISTRATION FORM CONTAINER -->\n\n    </div>\n\n</header>\n\n<!-- =========================\n     SECTION 1\n============================== -->\n<section class=\"section1\" id=\"section1\">\n\n    <div class=\"container\">\n        <div class=\"row\">\n\n            <div class=\"col-md-6\">\n\n                <!-- SCREENSHOT -->\n                <div class=\"side-screenshot pull-left\">\n                    <img src=\"/assets/images/screenshot-1.png\" alt=\"Feature\" class=\"img-fluid\">\n                </div>\n\n            </div>\n\n            <div class=\"col-md-6\">\n\n                <!-- DETAILS WITH LIST -->\n                <div class=\"brief text-left\">\n\n                    <!-- HEADING -->\n                    <h2>Assessments Made Easy</h2>\n                    <div class=\"colored-line pull-left\">\n                    </div>\n\n                    <!-- TEXT -->\n                    <p>\n                        What would it be like to ask your client to take an assessment and then be able to quickly review their results without spending\n                        time adding the scores up and then reviewing what that means for your client. The graphs enable you\n                        to identify what your client needs and focus on giving them the treatment they need. Simple and easy.\n                    </p>\n\n                    <!-- FEATURE LIST -->\n                    <ul class=\"feature-list-2\">\n\n                        <!-- FEATURE -->\n                        <li>\n                            <!-- ICON -->\n                            <div class=\"icon-container pull-left\">\n                                <span class=\"fa fa-cog\"></span>\n                            </div>\n                            <!-- DETAILS -->\n                            <div class=\"details pull-left\">\n                                <h6>Easy to Customize</h6>\n                                <p>\n                                        Whether your client has depression, anxiety, trauma, or addiction you can send them the assessment they need with a simple click.\n                                </p>\n                            </div>\n                        </li>\n\n                        <!-- FEATURE -->\n                        <li>\n                            <!-- ICON -->\n                            <div class=\"icon-container pull-left\">\n                                <span class=\"fa fa-list\"></span>\n                            </div>\n                            <!-- DETAILS -->\n                            <div class=\"details pull-left\">\n                                <h6>Battery of Assessments</h6>\n                                <p>\n                                    We've put together comprehensive batteries for key assessment areas to save you time and effort.\n                                    Assign the battery and your clients get all the assessments with just a single click.\n                                </p>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <!-- /END DETAILS WITH LIST -->\n\n        </div>\n        <!-- END ROW -->\n\n    </div>\n    <!-- END CONTAINER -->\n\n</section>\n<!-- =========================\n     SECTION 2\n============================== -->\n<section class=\"section2 bgcolor-2\" id=\"section2\">\n\n    <div class=\"container\">\n\n        <!-- SECTION HEADING -->\n\n        <h2>Key Features</h2>\n\n        <div class=\"colored-line\">\n        </div>\n\n        <!-- <div class=\"sub-heading\">\n                Term sheet convertible note colluding bootstrapping.\n            </div> -->\n\n        <div class=\"features\">\n\n            <!-- FEATURES ROW 1 -->\n            <div class=\"row\">\n\n                <!-- SINGLE FEATURE BOX -->\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <span class=\"fa fa-bar-chart\"></span>\n                        </div>\n                        <h4>Top Level Summarys</h4>\n                        <p>\n                            We do the heavy lifting by providing summary graphs and reports of your clients assessment results so you can focus on what you do the besthelp\n                            your clients heal.\n                        </p>\n                    </div>\n                </div>\n\n                <!-- SINGLE FEATURE BOX -->\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <span class=\"fa fa-map\"></span>\n                        </div>\n                        <h4>Comprehensive reports</h4>\n                        <p>\n                             You can review a top level summary or dive in for an in-depth breakdown of your clients' answers and what they mean.\n                        </p>\n                    </div>\n                </div>\n\n                <!-- SINGLE FEATURE BOX -->\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <span class=\"fa fa-gift\"></span>\n                        </div>\n                        <h4>Mobile Friendly</h4>\n                        <p>\n                            All of our assessments have been built and tested to work on android and iOS devices as well as desktop platforms.\n                        </p>\n                    </div>\n                </div>\n            </div>\n\n            <!-- FEATURES ROW 2 -->\n            <div class=\"row\">\n\n                <!-- SINGLE FEATURE BOX -->\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <span class=\"fa fa-line-chart\"></span>\n                        </div>\n                        <h4>Track client progress</h4>\n                        <p>\n                            Measure progress over time from the first to your last session. Anytime you give a follow up assessment you will see your\n                            clients improvement.\n                        </p>\n                    </div>\n                </div>\n\n\n                <!-- SINGLE FEATURE BOX -->\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <span class=\"fa fa-clipboard\"></span>\n                        </div>\n                        <h4>Assign Homework</h4>\n                        <p>\n                            Provide additional support by giving homework to your clients with our library of exercises and articles.\n                        </p>\n                    </div>\n                </div>\n\n                 <!-- SINGLE FEATURE BOX -->\n                 <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <span class=\"fa fa-lock\"></span>\n                        </div>\n                        <h4>HIPAA Compliant</h4>\n                        <p>\n                            We offer a <a [routerLink]='[\"/baa\"]'>BAA</a> for your organization.  We keep your client's PHI safe by both encryption (in transit and at rest) as well as following industry best practices.\n                        </p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n    <!-- /END CONTAINER -->\n</section>\n<dac-pricing-table class=\"section2 bgcolor-2 d-block primary-gradient\" (selected)=\"handlePlan($event)\"></dac-pricing-table>\n\n<!-- =========================\n     SECTION 3\n============================== -->\n<section class=\"section3\" id=\"section3\">\n\n    <div class=\"container\">\n        <div class=\"row\">\n\n            <div class=\"col-md-8\">\n\n                <!-- DETAILS WITH LIST -->\n                <div class=\"brief text-left\">\n\n                    <!-- HEADING -->\n                    <h2>Why Assessments Matter!</h2>\n                    <div class=\"colored-line pull-left\">\n                    </div>\n                    <blockquote class=\"blockquote mt-4 p-0\">\n                        <p class=\"mb-0 pt-0\">Why didnt my other therapists ask me these questions?</p>\n                    </blockquote>\n                    <p>These were the first words my new client said to me when she sat down. She continued, </p>\n                    <blockquote class=\"blockquote p-0\">\n                        <p class=\"mb-0 pt-0\">I have been to four other therapists and spent more than $10,000 since I discovered my partners\n                            affair and none of my other therapists have addressed the issues this assessment did. Why dont\n                            all therapists ask these questions?\n                        </p>\n                    </blockquote>\n                    <p class=\"mt-0\">\n                        <strong>I was completely caught off guard.</strong>\n                    </p>\n                    <p class=\"mt-0\">\n                        I later learned that my client had spent years trying to figure out what was wrong with her. She had been to therapy, but\n                        none of her therapists had addressed her core traumas. Had those therapists had access to the same\n                        assessments I did, they could have helped her earlier because they would have discovered the depth\n                        of what she had been going through. She became one of our best referral sources over the next few\n                        months as she sent members of her 12-step support group to our agency.\n                    </p>\n                </div>\n            </div>\n            <div class=\"col-md-4\">\n                <div class=\"row justify-content-center\">\n                    <div class=\"col text-center\">\n                        <img src=\"/assets/images/therapist-kevin-skinner.jpg\" class=\"img-fluid\" />\n                        <p>Dr. Kevin Skinner LMFT</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</section>\n\n<!-- =========================\n     SECTION 4\n============================== -->\n<section class=\"section4 bgcolor-2\" id=\"section4\">\n\n    <div class=\"container\">\n\n\n\n        <h2>How to get started</h2>\n\n        <div class=\"colored-line\">\n        </div>\n\n        <div class=\"sub-heading\">Signup now and get started in six easy steps.</div>\n\n        <div class=\"features\">\n\n\n            <div class=\"row\">\n\n\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <h1>\n                                <span class=\"badge badge-pill badge-primary\">1</span>\n                            </h1>\n                        </div>\n                        <h4>Create your free {{getFreeTrialPeriod()}} Day Trial Account</h4>\n                        <p>\n                            Get unlimited access for free during the trial period, test it yourself or with your clients, and get a feel for our system without paying anything.\n                        </p>\n                    </div>\n                </div>\n\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <h1>\n                                <span class=\"badge badge-pill badge-primary\">2</span>\n                            </h1>\n                        </div>\n                        <h4>Create a client</h4>\n                        <p>\n                            Add a new client, providing their contact information and email address.  This information is encrypted and secure.  The system\n                            will generate a unique token for them to use.\n                        </p>\n                    </div>\n                </div>\n\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <h1>\n                                <span class=\"badge badge-pill badge-primary\">3</span>\n                            </h1>\n                        </div>\n                        <h4>Create an Assignment</h4>\n                        <p>\n                            Pick from one of our curated batteries or pick from assessments for areas such as Adult ADHD, Anxiety, Depression, PTSD, Relationship Satisfaction , Betrayal Trauma,\n                            Adverse Childhood Experiences, Hypersexual Behavior, and much more\n                        </p>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"row\">\n\n\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <h1>\n                                <span class=\"badge badge-pill badge-primary\">4</span>\n                            </h1>\n                        </div>\n                        <h4>Send the invitation email to your client</h4>\n                        <p>\n                            At a click of a button invite your client to get started or copy the invitation to your own email client and send it from there.\n                        </p>\n                    </div>\n                </div>\n\n\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <h1>\n                                <span class=\"badge badge-pill badge-primary\">5</span>\n                            </h1>\n                        </div>\n                        <h4>Review Results</h4>\n                        <p>\n                            You'll receive an email notification when your client's finish their results.  From there you can review your clients test results and discuss the results with them.\n                        </p>\n                    </div>\n                </div>\n\n\n                <div class=\"col-md-4\">\n                    <div class=\"feature\">\n                        <div class=\"icon\">\n                            <h1>\n                                <span class=\"badge badge-pill badge-primary\">6</span>\n                            </h1>\n                        </div>\n                        <h4>Upload Client Results</h4>\n                        <p>\n                            If you choose, you can generate a PDF of your client's results to store in your EHR or just copy a shareable link that will bring you back to your client.\n                        </p>\n                    </div>\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n</section>\n\n<!-- =========================\n     SECTION 7\n============================== -->\n<section class=\"section7\" id=\"section7\">\n    <div class=\"container\">\n\n        <!-- SECTION HEADING -->\n        <h2>Our Valued Partnerships</h2>\n        <div class=\"colored-line\">\n        </div>\n\n        <!-- CLIENTS -->\n        <div class=\"row clients justify-content-center\">\n            <div class=\"col-5 col-md-3\" *ngIf=\"showPartner('apsats')\">\n                <a href=\"https://www.apsats.org/\">\n                    <img class=\"img-fluid\" src=\"/assets/images/logo-apsats.png\" alt=\"APSATS Logo\">\n                </a>\n            </div>\n            <div class=\"col-5 col-md-3\" *ngIf=\"showPartner('apsats')\">\n                <a href=\"https://addorecovery.com/\">\n                    <img class=\"img-fluid\" src=\"/assets/images/logo-addo.png\" alt=\"Addo Recovery Logo\">\n                </a>\n            </div>\n            <div class=\"col-5 col-md-3\" *ngIf=\"showPartner('discoverandchange')\">\n                <a href=\"https://www.discoverandchange.com/\">\n                    <img class=\"img-fluid\" src=\"/assets/images/logo-discoverandchange.dark.png\" alt=\"Discover and Change Logo\">\n                </a>\n            </div>\n\n        </div>\n    </div>\n    <!-- /END CONTAINER -->\n\n</section>\n\n<!-- =========================\n     SECTION 8 - CTA\n============================== -->\n<section class=\"cta-section\" id=\"section8\">\n    <div class=\"color-overlay\">\n        <div class=\"container\">\n            <h4>Helping You Create the Change Your Clients Want</h4>\n            <div id=\"cta-4\">\n                <a (click)=\"handleCTA()\" class=\"btn btn-primary\"> Get Started</a>\n            </div>\n        </div>\n        <!-- /END CONTAINER -->\n    </div>\n    <!-- /END COLOR OVERLAY -->\n\n</section>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { User } from \"./user\";\n\nexport class Company {\n    private _name:string;\n    private _email:string;\n    private _user:User;\n\tprivate _id:number;\n\tprivate _clientCount:number;\n\tprivate _tokenCount:number;\n\tprivate _hostSiteName:string;\n\tprivate _sharedTokens:boolean;\n    private _sendAssessmentsCompleteNotifications:boolean;\n\tprivate _sendNotificationsToPrimaryContact:boolean;\n\tprivate _disableShopRegisteredUsers:boolean;\n\tprivate _sendNotificationsCopyToRegularUsers:boolean;\n\n    constructor(name?: string, email?: string, user?: User) {\n        this.name = name;\n        this.email = email ? email.toLowerCase() : \"\";\n        if (!user) {\n            this.user = new User();\n        }\n\t}\n\n\tpublic get sharedTokens() : boolean {\n\t\treturn this._sharedTokens;\n\t}\n\n\tpublic get hostSiteName() : string {\n\t\treturn this._hostSiteName;\n\t}\n\n\tpublic get name(): string {\n\t\treturn this._name;\n\t}\n\n\tpublic set name(value: string) {\n\t\tthis._name = value;\n\t}\n\n\tpublic get email(): string {\n\t\treturn this._email;\n\t}\n\n\tpublic set email(value: string) {\n\t\tthis._email = value ? value.toLowerCase() : \"\";\n\t}\n\n\tpublic get user(): User {\n\t\treturn this._user;\n\t}\n\n\tpublic set user(value: User) {\n\t\tthis._user = value;\n\t}\n\n\tpublic get id(): number {\n\t\treturn this._id;\n\t}\n\n\tpublic set id(value: number) {\n\t\tthis._id = value;\n\t}\n\n\tpublic get clientCount() : number {\n\t\treturn this._clientCount;\n\t}\n\tpublic get tokenCount() : number {\n\t\treturn this._tokenCount;\n\t}\n\n\tpublic get sendAssessmentsCompleteNotifications() {\n\t\treturn this._sendAssessmentsCompleteNotifications;\n\t}\n\n\tpublic set sendAssessmentsCompleteNotifications(v:boolean) {\n\t\tthis._sendAssessmentsCompleteNotifications = v;\n\t}\n\n    public get sendNotificationsToPrimaryContact() {\n\t\treturn this._sendNotificationsToPrimaryContact;\n\t}\n\n\tpublic set sendNotificationsToPrimaryContact(v:boolean) {\n\t\tthis._sendNotificationsToPrimaryContact = v;\n\t}\n\n\tpublic get disableShopRegisteredUsers() {\n\t\treturn this._disableShopRegisteredUsers;\n\t}\n\n\tpublic set disableShopRegisteredUsers(v:boolean) {\n\t\tthis._disableShopRegisteredUsers = v;\n\t}\n\n\tpublic get sendNotificationsCopyToRegularUsers() {\n\t\treturn this._sendNotificationsCopyToRegularUsers;\n\t}\n\n\tpublic set sendNotificationsCopyToRegularUsers(v:boolean) {\n\t\tthis._sendNotificationsCopyToRegularUsers = v;\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport enum AuthState {\n  SIGN_IN = 'signIn',\n  SIGNED_IN = 'signedIn',\n  CONFIRM_SIGN_IN = 'confirmSignIn',\n  FORGOT_PASSWORD = 'forgotPassword',\n  REQUIRE_NEW_PASSWORD = 'requireNewPassword',\n  CUSTOM_CONFIRM_SIGN_IN = 'customConfirmSignIn',\n  SIGN_UP = \"signUp\",\n  CONFIRM_SIGN_UP = \"confirmSignUp\"\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { OverlayRef } from '@angular/cdk/overlay';\n\nexport class ToastRef {\n  constructor(readonly overlay: OverlayRef) { }\n\n  close() {\n    this.overlay.dispose();\n  }\n\n  isVisible() {\n    return this.overlay && this.overlay.overlayElement;\n  }\n\n  getPosition() {\n    return this.overlay.overlayElement.getBoundingClientRect()\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\n\n@Injectable()\nexport class ReportNavigatorService {\n  private navItems:Map<String, Element>;\n  constructor() {\n    this.navItems = new Map<String, Element>();\n  }\n\n  public hasNavigationItem(navId:string) {\n    return this.navItems.has(navId);\n  }\n\n  public navigate(navId:string) : Promise<void> {\n    let item = this.navItems.get(navId);\n    if (item) {\n      // TODO: stephen change out this hack to accomodate the fixed navbar at the top.\n      let navBar = document.querySelector(\"dac-navbar nav\");\n      let navBarHeight = navBar ? navBar.clientHeight : 0; // if we have no navbar such as on the client we just skip.\n\n      // adapted from https://stackoverflow.com/a/13857312\n      item.scrollIntoView(true);\n      var scrolledY = window.scrollY;\n\n      if(scrolledY){\n        window.scroll(0, scrolledY - navBarHeight);\n      }\n\n      return Promise.resolve();\n    }\n    return Promise.reject(\"item not found with id \" + navId);\n  }\n\n  public registerItem(navId:string, element:Element) {\n    this.navItems.set(navId, element);\n  }\n\n  public unregisterItem(navId:string) {\n    this.navItems.delete(navId);\n  }\n}\n","import { Component, ViewChild } from \"@angular/core\";\nimport { SiteContainerComponent } from \"../site-container/site-container.component\";\n\n/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n@Component({\n  selector: 'dac-standalone-container',\n  templateUrl: './standalone-container.component.html'\n  ,host: {class: 'col p-0'}\n})\nexport class StandaloneContainerComponent {\n\n  @ViewChild(\"siteContainer\") siteContainer:SiteContainerComponent;\n}\n","<div class=\"row no-gutters\">\n  <dac-site-container class=\"col\" #siteContainer>\n      <router-outlet></router-outlet>\n      <app-login-dialog [fixedBottom]=\"false\"></app-login-dialog>\n  </dac-site-container>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { LibraryAssetResult } from 'app/library-assets/models/library-asset-result';\nimport { ActivatedRoute } from '@angular/router';\nimport { AssetService } from 'app/library-assets/services/asset.service';\nimport { AlertService } from 'app/shared/services/alert.service';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\nimport { Location } from '@angular/common';\nimport { PrintDialogComponent } from '../print-dialog/print-dialog.component';\nimport { ModalService } from 'app/shared/services/modal.service';\n\n@Component({\n  selector: 'dac-asset-result-view',\n  templateUrl: './asset-result-view.component.html',\n  styleUrls: ['./asset-result-view.component.scss']\n})\nexport class AssetResultViewComponent implements OnInit {\n\n  public disableAsset = true;\n  public result:LibraryAssetResult;\n  public hasLoadedResults:boolean;\n  public allowPrinting = false;\n\n   /**\n   * Whether to show the print dialog or not.\n   */\n  public showPrintDialog:boolean;\n\n  constructor(private route:ActivatedRoute, private assetService:AssetService,\n    private alertService:AlertService, private dacConfig:DacConfig\n    , private location:Location,private modalService:ModalService) {\n      this.allowPrinting = this.dacConfig.isFeatureEnabled(\"pdf.printing\");\n    }\n\n  ngOnInit() {\n    this.route.params.subscribe((params) => {\n      let resultId = params['resultId'];\n      this.hasLoadedResults = false;\n      this.assetService.getAssetResult(resultId).then((result:LibraryAssetResult) => {\n        this.hasLoadedResults = true;\n        this.result = result;\n      })\n      .catch((error) => {\n        console.error(error);\n        if (error && error.status === 404 || error.status === 400) {\n          this.alertService.error(\"404 This item could not be found\");\n        } else {\n          this.alertService.error(\"There was a server error in loading this item.  Check your internet connection or contact support\");\n        }\n      });\n    });\n  }\n  ngAfterViewInit() {\n    // we need to let outside listeners like the server pdf generator know we have finished loading so we can generate the report\n    console.log(\"adding dac-report-loaded class\");\n    document.body.classList.add(\"dac-report-loaded\");\n  }\n  public goBack() {\n    this.location.back();\n  }\n\n  public closePrintDialog() {\n    // reset it once we've closed the dialog.\n    this.showPrintDialog = false;\n  }\n\n  public showCommandButtons() {\n      return !this.dacConfig.seamlessMode;\n  }\n\n  public browserPrint() {\n    if (window && window.print) {\n      window.print();\n    }\n  }\n\n  public print() {\n    this.modalService.openDialog(PrintDialogComponent, {hideNotesOption: true});\n  }\n\n  public shouldDisplayExercise() {\n    return this.result && this.result.asset.type == 'assignment';\n  }\n\n  public shouldDisplayArticle() {\n    return this.result && this.result.asset.type == 'article';\n  }\n\n}\n","<div class=\"col itemsContainer d-print-block-visible\">\n    <div class=\"row report-controls\">\n        <div class=\"col-2\" *ngIf=\"showCommandButtons()\">\n            <input class=\"btn btn-primary\" type=\"button\" (click)=\"goBack()\" value=\"Back\" />\n        </div>\n        <div [ngClass]=\"{'col-8': showCommandButtons(),  'col-12 text-center': !showCommandButtons()}\">\n            <h1 class=\"h1-responsive report-name text-center\">{{result?.asset.title}}</h1>\n        </div>\n        <div class=\"col-2 ml-auto\" *ngIf=\"showCommandButtons()\">\n            <input class=\"btn btn-secondary\" type=\"button\" (click)=\"browserPrint()\" *ngIf=\"allowPrinting\" value=\"Download PDF\" />\n            <!-- <input class=\"btn btn-secondary\" type=\"button\" (click)=\"print()\" *ngIf=\"allowPrinting\" value=\"Download PDF\" /> -->\n        </div>\n    </div>\n    <div class=\"row d-none d-print-block-visible\">\n        <div class='col-12 text-center'>\n            <h1 class=\"h1-responsive report-name text-center\">{{result?.asset.title}}</h1>\n        </div>\n    </div>\n    <div class=\"row\" *ngIf=\"!hasLoadedResults\">\n        <div class=\"col\">\n            <p class=\"alert alert-warning\">\n                <app-spin-icon></app-spin-icon> Loading Report data...\n            </p>\n        </div>\n    </div>\n    <p class=\"text-center offset-2 col-8\"><i>{{result?.asset.description}}</i></p>\n    <dac-exercise class=\"card card-body\" *ngIf=\"shouldDisplayExercise()\" [exercise]=\"result.asset\" [result]=\"result\" [hideHeaders]=\"disableAsset\" [disabled]=\"disableAsset\">\n    </dac-exercise>\n    <dac-article class=\"card card-body\" *ngIf=\"shouldDisplayArticle()\" [article]=\"result.asset\" [result]=\"result\" [hideHeaders]=\"disableAsset\" [disabled]=\"disableAsset\">\n    </dac-article>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Inject, Injectable, OnInit } from '@angular/core';\nimport { HTTPService } from '../../shared/services/http.service';\nimport { ClientService } from '../../shared/services/client.service';\nimport { ManagedClient } from '../../shared/models/managed-client';\nimport { AssessmentService } from \"../../shared/services/assessment.service\";\nimport {Observable, BehaviorSubject} from 'rxjs';\nimport { User } from 'app/shared/models/user';\nimport { Role } from 'app/shared/models/role';\nimport { AlertService } from 'app/shared/services/alert.service';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\nimport { SubscriptionHydratorService } from 'app/shared/services/subscription-hydrator.service';\nimport { Subscription } from 'app/shared/models/subscription';\nimport { AmplifyAuthService } from './amplify-auth-service';\nimport { MetricsService } from 'app/shared/services/metrics.service';\nimport { CognitoUserInterface } from '../models/CognitoUserInterface';\nimport { ChallengeName } from '../models/ChallengeName';\nimport { AuthState } from '../models/AuthState';\nimport { AuthStateEvent } from '../models/AuthStateEvent';\nimport { ErrorCode } from 'app/shared/models/ErrorCodes';\nimport Client from 'fhirclient/lib/Client';\nimport { FhirService } from 'app/shared/services/fhir-service';\nimport { UserService } from 'app/shared/services/user.service';\n\nclass LoginStateNotification {\n  role: Role\n  isLoggedIn: boolean;\n  clientId: string;\n  user:User;\n}\n\ninterface OEPortalPatientResult {\n  validationErrors: string[];\n  error_description: string[];\n  data: {\n    id: string;\n    pid: string;\n    uuid: string;\n  }\n}\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthService implements OnInit {\n\n  private _isLoggedIn:boolean;\n  private _clientId:string;\n  private _client:ManagedClient;\n  private _user:User;\n  private _isSystemUser:boolean;\n  private _loginStateSubject:BehaviorSubject<any>;\n  private _inAuthentication:boolean;\n\n  readonly METRIC_CATEGORY='Auth';\n\n  constructor(\n    private _dac$http:HTTPService\n    ,private _clientService:ClientService\n    // TODO: stephen need to introduce a caching service that we can clear the caching service\n    // when we logout to reset any current state.  For expediency we are just including this\n    // service to reset, but this is bad cohesion.\n    // TODO: stephen another option would be to use an event system and have all the services listen to the logout event.\n    // this is more difficult to reason about though...\n    ,private assessmentService:AssessmentService\n    ,private alertService:AlertService\n    ,private amplifyService: AmplifyAuthService\n    ,private subHydrator:SubscriptionHydratorService\n    ,private dacConfig:DacConfig\n    ,private metrics:MetricsService\n    ,private _fhirClient:FhirService\n    ,private userService:UserService\n  ) {\n    // setup all our variables.\n    this._isSystemUser = false;\n    this._isLoggedIn = false;\n    this._user = null;\n    // let fhirUser = this._fhirClient.getFhirUser();\n    // let roleId = Role.UnAuthenticated;\n    // let isLoggedIn = false;\n    // let clientApiId = null;\n    // let userId = null;\n    // if (fhirUser) {\n    //   isLoggedIn = true;\n    //   let fhirUserParts = fhirUser.split(\"/\");\n    //   let fhirRole = fhirUserParts[0];\n    //   if (fhirRole == 'Patient') {\n    //     roleId = Role.Client;\n    //     isLoggedIn = true;\n    //     clientApiId = fhirUserParts[1];\n    //   } else if (fhirRole == 'Practitioner' || fhirRole == 'Person') { // Person occurs if its an admin who does not have NPI\n    //     roleId = Role.Registered;\n    //     userId = fhirUserParts[1];\n    //   }\n    // }\n\n\n    // TODO: stephen figure out why we can't put the sessionStorage logic in ngOnInit\n    // let roleId = +sessionStorage.getItem(\"roleId\");\n    // let clientApiId = sessionStorage.getItem(\"clientId\");\n    // let userId = sessionStorage.getItem(\"userId\");\n    // let isLoggedIn = sessionStorage.getItem(\"isLoggedIn\") === \"true\";\n\n    // this.amplifyService.auth().getCurrentUser();\n    // if (isLoggedIn && roleId !== Role.Client) {\n    //   this._isSystemUser = true;\n    //   this._isLoggedIn = true;\n    //   this._user = this.recreateUserFromSession(+userId);\n    //   this.configureUserAuthPool(dacConfig);\n\n    // }\n    // else if (clientApiId && isLoggedIn) {\n    //   this._clientId = clientApiId;\n    //   this._isLoggedIn = true;\n    //   this._user = this.getClientUser(clientApiId);\n    // }\n    // else {\n    //   this._user = this.getUnAuthenticatedUser();\n    // }\n\n    this._loginStateSubject = new BehaviorSubject(this.getCurrentLoginState());\n  }\n\n  ngOnInit() {\n\n  }\n\n  /**\n   * Set's the current state of the login authorization for regular users\n   * @param authEvent\n   */\n  public setAuthState(authEvent: AuthStateEvent) {\n    // we have to deal with all kind's of amplify problems here so we are going to mask all of this.\n    this.amplifyService.setAuthState(authEvent)\n  }\n\n  /**\n   * Resets the auth state back to the initial state of the service.\n   */\n  public resetAuthState() {\n    this.amplifyService.resetAuthState();\n  }\n\n  /**\n   * Returns an observable that lets you observe events that occur during the authorization process\n   */\n  public authStateChange$() : Observable<AuthStateEvent> {\n    return this.amplifyService.authStateChange$();\n  }\n\n  async completeNewPassword(user: CognitoUserInterface, newPassword: string, requiredAttributes: [string: string][]) {\n    try {\n      var requiredAttributes = user.challengeParam.requiredAttributes;\n      await this.amplifyService.completeNewPassword(user, newPassword, requiredAttributes);\n      this.metrics.trackEvent(this.METRIC_CATEGORY, 'completeNewPassword', 'User password reset');\n      this.amplifyService.setAuthState({ state: AuthState.SIGN_IN, user: user });\n    }\n    catch (error) {\n      this.metrics.trackEvent(this.METRIC_CATEGORY, 'completeNewPassword', 'User password reset failed');\n      throw error;\n    }\n  }\n\n  /**\n   * Returns an observable that lets you observe login state (not logged in, logged in, logged out)\n   */\n  getLoginState() : Observable<LoginStateNotification> {\n    return this._loginStateSubject;\n  }\n\n  async getCurrentUser() : Promise<User> {\n    if (!this._user) {\n      let fhirUser = await this._fhirClient.getFhirUser();\n      let isLoggedIn = false;\n      this._user = this.getUnAuthenticatedUser(); // default to unauthenticated\n\n      if (fhirUser) {\n        isLoggedIn = true;\n        let fhirUserParts = fhirUser.split(\"/\");\n        let fhirRole = fhirUserParts[0];\n        if (fhirRole == 'Patient') {\n          this._clientId = fhirUserParts[1];\n          this._isLoggedIn = true;\n          this._user = this.getClientUser(this._clientId);\n        } else if (fhirRole == 'Practitioner' || fhirRole == 'Person') { // Person occurs if its an admin who does not have NPI\n            // TODO: @adunsulag we need to hit the SystemUser endpoint to get our custom information for now\n          this._isSystemUser = true;\n          this._user = await this.userService.getUserById(fhirUserParts[1]);;\n        }\n      } else {\n        this._user = this.getUnAuthenticatedUser();\n      }\n      // send out the updated login state since we've updated our current user\n      this._loginStateSubject.next(this.getCurrentLoginState());\n    }\n    return this._user;\n  }\n\n  async logout() : Promise<{redirectUrl?:string}> {\n    let result;\n\n    try {\n      result = await this._dac$http.post<{redirectUrl:string}>(\"/logout\",{});\n      this.metrics.trackEvent(this.METRIC_CATEGORY, 'logout', 'server logout processed');\n    }\n    catch (error) {\n      // if the server failed to clean up we still want to clean up our service and clear the session...\n      this.metrics.trackEvent(this.METRIC_CATEGORY, 'logout', 'server logout failed');\n      console.error(\"System error on logging out \", error);\n    }\n\n    try {\n      // since we'll be redirecting, we just want to clear the session storage.\n      // TODO: stephen will this introduce bugs if the redirectUrl is within the same\n      // application?\n\n      // need to do our global logout here\n      // By doing this, you are revoking all the auth tokens(id token, access token and refresh token)\n      // which means the user is signed out from all the devices\n      // Note: although the tokens are revoked, the AWS credentials will remain valid until they expire (which by default is 1 hour)\n      // await this.amplifyService.signOut({ global: true })\n      if (result && result.redirectUrl) {\n        sessionStorage.clear();\n        return {redirectUrl: result.redirectUrl};\n      }\n      else {\n        // clear and notify everyone we've logged out\n        this.clearSession();\n        return {};\n      }\n    }\n    catch (error) {\n      console.error(error);\n      this.metrics.trackEvent(this.METRIC_CATEGORY, 'logout', 'Cognito signout failed');\n    }\n  }\n\n  clearSession() {\n    sessionStorage.clear();\n    this._client = null;\n    this._clientId = null;\n    this._isLoggedIn = false;\n    this._isSystemUser = false;\n    this._user = this.getUnAuthenticatedUser();\n    this.assessmentService.clearCache();\n    this._loginStateSubject.next(this.getCurrentLoginState());\n  }\n\n  authenticateClient(clientApiId:string) {\n    // sessionStorage.clear();\n    let data = {\n      clientID: clientApiId\n    };\n     return this._dac$http.post(\"/login/client\", data).then((resp) => {\n       this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateClient', 'Authentication succeded');\n       this._clientId = clientApiId;\n       this._isLoggedIn = true;\n       // now populate the user here.\n       this._user = this.getClientUser(clientApiId);\n       this.updateSessionStorageWithUser(this._user);\n       this._loginStateSubject.next(this.getCurrentLoginState());\n      return clientApiId;\n     })\n     .catch((error) => {\n       console.error(error);\n       if (error.status === 404) {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateClient', 'Invalid client token');\n         throw new Error(\"Invalid Token: \" + clientApiId);\n      }\n      else {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateClient', 'Server error authenticating client');\n        throw new Error(\"An error occurred communicating with the server.  Please try again.\");\n      }\n     });\n  }\n\n  authenticateSSO(ssoRelayState:string) : Promise<{role:Role, id:string, redirectUrl:string, issuer:string}> {\n    return this._dac$http.securePost<{role:Role, id:string, redirectUrl:string, issuer:string}>(\"sso\", {ssoToken: ssoRelayState}, ssoRelayState)\n    .then(data => {\n      if (data.role == Role.Client) {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'sso', 'authenticated single sign on for client');\n        this._clientId = data.id;\n      } else {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'sso', 'authenticated single sign on for user');\n      }\n      this.processUserAuthenticationFromResp(data);\n      return data;\n    })\n    .catch((error) => {\n      console.error(error);\n      let innerError = error.error || {error: \"System error occurred\", _code: ErrorCode.SYSTEM_ERROR, _message: \"There was a system error and we could not load your data\"};\n      if (innerError.redirectUrl) {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'sso', 'single sign on failed, redirecting to url');\n        // window.location.href = error.redirectUrl;\n      }\n      else {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'sso', 'single sign on failed no redirect url set');\n        // TODO: stephen need to navigate to an SSO error page if we have no redirect url.\n      }\n      throw innerError;\n    })\n  }\n\n  authenticateCognito(user:CognitoUserInterface) {\n    // send the amazon cognito user to the server to verify the user actually is valid\n    // then we can setup the client session for the user...\n    if (!(user && user.signInUserSession && user.signInUserSession.accessToken && user.signInUserSession.accessToken.jwtToken)) {\n      throw new Error(\"There was a system error.  Please try again or contact support\");\n      // TODO: stephen seems like we want to be notified right away if the data format is off...\n    }\n    let authToken = user.signInUserSession.accessToken.jwtToken;\n    return this._dac$http.post(\"/login\", {authToken:authToken})\n      .then(resp => this.processUserAuthenticationFromResp(resp))\n      .then(user => {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateCognito', 'User authenticated with cognito JWT');\n        return user;\n      })\n      .catch((error) => {\n        if (error.status === 401) {\n          throw new Error(\"Your username or password was invalid\");\n        }\n        else {\n          throw new Error(\"There was an error communicating with the server.  Please try again or contact support\");\n        }\n      });\n  }\n\n  async authenticate(username:string, password:string) {\n    // TODO: stephen need a way of persisting the session storage\n    // also need a better way of actually authenticating the clients.\n    // sessionStorage.clear();\n\n\n    let cognitoUser;\n    if (this.dacConfig.awsCognitoConfig.enabled)\n    {\n      cognitoUser = await this.authenticateWithAmplify(username, password);\n      password = \"\";\n      // make sure we can authenticate here\n      try {\n        return await this.authenticateCognito(cognitoUser);\n      }\n      catch (error) {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticate', 'Server failed to validate cognito user');\n        throw {code: \"DacCognitoAuthenticateException\", message: error};\n      }\n    } else {\n      cognitoUser = await this.authenticateWithServerWithUsername(username, password);\n      password = \"\";\n    }\n  }\n\n  // migrateCognito(username:string) {\n  //   return this._dac$http.post(\"/login/migrate\", {username});\n  // }\n\n  private async authenticateWithServerWithUsername(username:string, password:string) {\n    try {\n      let data = {\n        username: username\n        ,password: password\n      };\n      let resp = await this._dac$http.post(\"/login\", data);\n      this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateWithServerWithUsername', 'User authenticated with password');\n      let user = await this.processUserAuthenticationFromResp(resp);\n      return user;\n    }\n    catch (error) {\n      if (error.status === 401) {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateWithServerWithUsername', 'Username or password invalid');\n        throw new Error(\"Your username or password was invalid\");\n      }\n      else {\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateWithServerWithUsername', 'Server error on authentication');\n        throw new Error(\"There was an error communicating with the server.  Please try again or contact support\");\n      }\n    }\n  }\n\n  public updateUserWithSubscription(subscription:Subscription) {\n    this._user.subscription = subscription;\n    this.updateSessionStorageWithUser(this._user);\n    this._loginStateSubject.next(this.getCurrentLoginState());\n  }\n\n  async sendForgotPasswordCode(username: any) {\n    try {\n      await this.amplifyService.forgotPassword(username);\n      this.metrics.trackEvent(this.METRIC_CATEGORY, 'sendForgotPasswordCode', 'Forgot password code sent');\n    }\n    catch (error) {\n      let code = error.code || \"NO_CODE\";\n      this.metrics.trackEvent(this.METRIC_CATEGORY, 'sendForgotPasswordCode', \"Failed to send forgot password. Cognito Code: \" + code);\n      throw error;\n    }\n  }\n\n  /**\n   *\n   * @param username The username of the user to update\n   * @param code The verification code that was sent to the user\n   * @param password The new password to set for the user\n   */\n  async updateUserForgottenPassword(username:string, code:string, password:string) {\n    await this.amplifyService.forgotPasswordSubmit(username, code, password);\n    this.metrics.trackEvent(this.METRIC_CATEGORY, 'updateUserForgottenPassword', 'User password updated');\n    password = \"\";\n    return;\n  }\n\n  async confirmSignIn(user: CognitoUserInterface, code: string, codeType: \"SMS_MFA\"|\"SOFTWARE_TOKEN_MFA\"|null) {\n    await this.amplifyService.confirmSignIn(user, code, codeType);\n    let dacUser = await this.authenticateCognito(user); // authenticate on the server\n    this.metrics.trackEvent(this.METRIC_CATEGORY, 'updateUserForgottenPassword', 'User MFA Confirmed');\n    // user confirmed, we send in the DAC user this time and NOT the cognito user\n    this.amplifyService.setAuthState({user: dacUser, state: AuthState.SIGNED_IN});\n  }\n\n  private async authenticateWithAmplify(username:string, password:string) {\n    try {\n      let cognitoUser = await this.amplifyService.signIn(username, password);\n      password = \"\"; // clear password from memory\n\n      // we set our cognito states here...\n      if (cognitoUser['challengeName'] === ChallengeName.SMS_MFA ||\n        cognitoUser['challengeName'] === ChallengeName.SOFTWARE_TOKEN_MFA) {\n        this.setAuthState({ state: AuthState.CONFIRM_SIGN_IN, user: cognitoUser });\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateWithAmplify', 'Cognito authentication requires account confirmation');\n        throw {code: 'DacCognitoChallengeRequired'};\n      }\n      else if (cognitoUser['challengeName'] === ChallengeName.NEW_PASSWORD_REQUIRED) {\n        this.setAuthState({\n            state: AuthState.REQUIRE_NEW_PASSWORD,\n            user: cognitoUser,\n        });\n        this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateWithAmplify', 'Cognito authentication requires new password');\n        throw {code: 'DacCognitoChallengeRequired'};\n      }\n      else if (cognitoUser['challengeName'] === ChallengeName.CUSTOM_CHALLENGE &&\n        cognitoUser.challengeParam &&\n        cognitoUser.challengeParam.trigger === 'true') {\n        this.setAuthState({\n            state: AuthState.CUSTOM_CONFIRM_SIGN_IN,\n            user: cognitoUser,\n        });\n        throw {code: 'DacCognitoChallengeRequired'};\n      }\n      return cognitoUser;\n    }\n    catch (error) {\n      let cognitoCode = error.code || 'NO_CODE';\n      this.metrics.trackEvent(this.METRIC_CATEGORY, 'authenticateWithAmplify', 'Cognito authentication failed Cognito Code:' + cognitoCode);\n\n      if (cognitoCode === 'UserNotConfirmedException') {\n        // logger.debug('the user is not confirmed');\n        this.amplifyService.setAuthState({state: AuthState.CONFIRM_SIGN_UP, user: {username:username} });\n      } else if (cognitoCode === 'PasswordResetRequiredException') {\n        // logger.debug('the user requires a new password');\n        this.amplifyService.setAuthState({state: AuthState.FORGOT_PASSWORD, user: {username:username} });\n      }\n\n      // for backwards compatibility we have this option\n      // if (cognitoCode == \"NotAuthorizedException\") {\n      //   return this.authenticateWithServerWithUsername(username,password);\n      // }\n      throw error;\n    }\n  }\n\n  private processUserAuthenticationFromResp(user) {\n    Object.assign(this._user, user);\n    if (user.subscription) {\n      this._user.subscription = this.subHydrator.fromJSONObject(user.subscription);\n    }\n    this._isLoggedIn = true;\n    this.updateSessionStorageWithUser(this._user);\n    this._loginStateSubject.next(this.getCurrentLoginState());\n    return user;\n  }\n\n  private updateSessionStorageWithUser(user:User) {\n    try {\n      if (user.role === Role.UnAuthenticated) {\n        sessionStorage.setItem(\"isLoggedIn\", \"false\");\n      }\n      else {\n        sessionStorage.setItem(\"isLoggedIn\", \"true\");\n        sessionStorage.setItem(\"roleId\", user.role.toString());\n        sessionStorage.setItem(\"username\", user.username);\n        sessionStorage.setItem(\"capabilities\", JSON.stringify(user.capabilities));\n        if (user.subscription) {\n          sessionStorage.setItem(\"subscription\", this.subHydrator.toJSON(user.subscription));\n        }\n        else {\n          sessionStorage.removeItem(\"subscription\");\n        }\n\n        if (user.role !== Role.Client) {\n          sessionStorage.setItem(\"userId\", user.id.toString());\n          sessionStorage.setItem(\"companyId\", user.companyID.toString());\n        }\n        else {\n          sessionStorage.setItem(\"clientId\", user.username);\n        }\n      }\n    }\n    catch (error) {\n      console.error(\"SessionStorage quota exceeded or disabled\", error);\n    }\n  }\n\n  private configureUserAuthPool(dacConfig:DacConfig) {\n    let configData = {\n\n      // REQUIRED only for Federated Authentication - Amazon Cognito Identity Pool ID\n      // identityPoolId: dacConfig.awsCognitoConfig.userPool.userIdentityPoolId, // 'us-east-1:0c4629df-3bcc-49b5-be6e-5861d5283b56',\n\n      // REQUIRED - Amazon Cognito Region\n      region: dacConfig.awsCognitoConfig.awsCognitoRegion, // 'us-east-1',\n\n      // OPTIONAL - Amazon Cognito Federated Identity Pool Region\n      // Required only if it's different from Amazon Cognito Region\n      // identityPoolRegion: 'XX-XXXX-X',\n\n      // OPTIONAL - Amazon Cognito User Pool ID\n      userPoolId: dacConfig.awsCognitoConfig.userPool.userPoolsId, // 'us-east-1_s9iDqPquj',\n\n      // OPTIONAL - Amazon Cognito Web Client ID (26-char alphanumeric string)\n      userPoolWebClientId: dacConfig.awsCognitoConfig.userPool.webClientId, //'1271f4r7a3f24kk53j6emll9nb',\n\n      // OPTIONAL - Enforce user authentication prior to accessing AWS resources or not\n      mandatorySignIn: false,\n\n      // OPTIONAL - Configuration for cookie storage\n      // cookieStorage: {\n      // // REQUIRED - Cookie domain (only required if cookieStorage is provided)\n      //     domain: '.yourdomain.com',\n      // // OPTIONAL - Cookie path\n      //     path: '/',\n      // // OPTIONAL - Cookie expiration in days\n      //     expires: 365,\n      // // OPTIONAL - Cookie secure flag\n      //     secure: true\n      // },\n\n      // OPTIONAL - customized storage object\n      // storage: new MyStorage(),\n\n      // OPTIONAL - Manually set the authentication flow type. Default is 'USER_SRP_AUTH'\n      // authenticationFlowType: 'USER_PASSWORD_AUTH'\n  };\n\n    this._dac$http.currentStatus().subscribe((status) => {\n      // if we need to authenticate..\n      if (status == 401 && this._isLoggedIn && !this._inAuthentication) {\n        // server has terminated the session... so we need to log ourselves out as well.\n        return this.amplifyService.signOut({ global: true });\n      }\n    });\n  }\n\n  private recreateUserFromSession(userId:number) {\n    let user = new User();\n    user.id = +userId;\n    user.role = +sessionStorage.getItem(\"roleId\");\n    user.username = sessionStorage.getItem(\"username\");\n    let companyId = sessionStorage.getItem(\"companyId\");\n    if (companyId) {\n      user.companyID = +companyId;\n    }\n    let capString = sessionStorage.getItem(\"capabilities\");\n    if (capString) {\n      let capabilities = [];\n      try {\n        capabilities = JSON.parse(capString);\n      }\n      catch (error) {\n        console.error(\"Failed to parse capabilities string: \", error);\n      }\n      user.capabilities = capabilities;\n    }\n\n    let subJSONString = sessionStorage.getItem(\"subscription\");\n    if (subJSONString) {\n      user.subscription = this.subHydrator.fromJSON(subJSONString);\n    }\n\n    // repopulate the information based upon what is retrieved.\n    // TODO: right now only admins have access to this endpoint...\n    // need to figure out why reg users can't call this.\n    // this._dac$http.get(\"users/\" + user.id).then((usr) => {\n    //   user.username = usr.username;\n    //   user.role = usr.role;\n    //   user.companyID = usr.companyID;\n    // });\n\n    return user;\n  }\n\n  private createUserFromId(userId:number) {\n    let user = new User();\n    this._user.id = userId;\n  }\n\n  private getClientUser(clientApiId) {\n    let user = new User();\n    user.role = Role.Client;\n    user.username = clientApiId;\n    // this.getCurrentClient().then((client) => {\n    //   if (client.user) { // if the client isn't assigned any Primary Care Provider.\n    //     user.companyID = client.user.companyID;\n    //   }\n    // });\n    return user;\n  }\n\n  private getUnAuthenticatedUser() {\n    let user = new User();\n    user.role = Role.UnAuthenticated;\n    user.username = \"unauthenticated\";\n    return user;\n  }\n\n  private getCurrentLoginState() : LoginStateNotification {\n    let user = this._user;\n    if (!user) {\n      user = this.getUnAuthenticatedUser();\n    }\n    return {\n      role: user.role\n      ,isLoggedIn: this._isLoggedIn\n      ,clientId: this._clientId\n      ,user:user\n    };\n  }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from \"@angular/core\";\nimport { HTTPService } from \"./http.service\";\nimport { DacConfig } from \"./dac-config.service\";\n\n@Injectable()\nexport class StripePaymentProcessor {\n    private readonly CARD_LOCALE = 'auto';\n\n    constructor(private dac$http: HTTPService,\n        private dacConfig: DacConfig) {\n    }\n\n    createToken(amount: number, description: string): Promise<any> {\n        let receivedToken = false;\n        return new Promise((resolve, reject) => {\n            var handler = (<any>window).StripeCheckout.configure({\n                key: this.dacConfig.stripe_public_key,\n                locale: this.CARD_LOCALE,\n                token: function (token: any) {\n                    // You can access the token ID with `token.id`.\n                    // Get the token ID to your server-side code for use.\n                    receivedToken = true;\n                    resolve(token);\n                }\n                , closed: function (response) {\n                    console.log(\"response is: \", response);\n                    if (!receivedToken) {\n                        reject({ code: \"canceled\" });\n                    }\n                }\n            });\n\n            handler.open({\n                name: this.dacConfig.stripe_charge_name,\n                description: description,\n                amount: amount\n            });\n        });\n    }\n\n    createUpdateCardToken(description:string, existingEmail?:string): Promise<any> {\n        let receivedToken = false;\n        return new Promise((resolve, reject) => {\n            var handler = (<any>window).StripeCheckout.configure({\n                key: this.dacConfig.stripe_public_key,\n                locale: this.CARD_LOCALE,\n                token: function (token: any) {\n                    // You can access the token ID with `token.id`.\n                    // Get the token ID to your server-side code for use.\n                    receivedToken = true;\n                    resolve(token);\n                }\n                , closed: function (response) {\n                    console.log(\"response is: \", response);\n                    if (!receivedToken) {\n                        reject({ code: \"canceled\" });\n                    }\n                }\n            });\n            let options:any = {\n                name: this.dacConfig.stripe_charge_name\n                ,description: description\n                ,panelLabel: \"Save Payment Card\"\n                ,allowRememberMe: false\n            };\n            if (existingEmail) {\n                options.email = existingEmail;\n            }\n\n            handler.open(options);\n        })\n    }\n\n    charge(amount, description): Promise<any> {\n        return this.createToken(amount, description).then((tokenCreateResponse) => {\n            console.log(\"Response received: \", tokenCreateResponse);\n            return tokenCreateResponse.id;\n        });\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { FhirService } from 'app/shared/services/fhir-service';\n\n@Component({\n  selector: 'app-login-finalize',\n  templateUrl: './login-finalize.component.html'\n})\nexport class LoginFinalizeComponent implements OnInit {\n\n\n  private _errorMessage;\n\n  constructor(private fhirService:FhirService, private router:Router) {\n    console.log(\"inside LoginFinalizeComponent component consttructor\");\n  }\n\n  public get hasError() {\n    return this.errorMessage != null;\n  }\n\n  public get errorMessage() {\n    return this._errorMessage;\n  }\n\n\n  ngOnInit() {\n    this.fhirService.fhirClientReady()\n    .then(client => {\n      // if for some reason someone logged in as a patient... we are sending them on to the patient routes\n      // TODO: we need a way of sending a user back to the page they were trying to access before the permission request hit them...\n      this.router.navigateByUrl(\"/\"); // go back and let the route guard send to the admin page or the regular page now that we are ready\n    })\n    .catch(error => {\n      if (error.needsAuthentication) {\n        // somehow they cancelled the navigation or need to go back.. relaunch the nnavigation window\n        this.router.navigate([\"login\"]);\n      } else {\n        this._errorMessage = error.message;\n      }\n    });\n  }\n}\n","<div class=\"alert alert-error\" *ngIf=\"hasError\">\n  {{errorMessage}}\n</div>\n<div class=\"alert alert-info\" *ngIf=\"!hasError\">\n  Processing login.\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {QuestionSetLabel} from \"./question-set-label\";\nimport {Question} from \"./question\";\nimport {Utility} from \"./utility\";\nimport {Scale} from \"./scale\";\nimport {DisplayCondition} from \"./display-condition\";\nexport class QuestionSet\n{\n\tprivate _id:string;\n\tprivate _title:string;\n\tprivate _questions:Question[];\n\tprivate _labels:QuestionSetLabel[];\n\tprivate _answer_start_value:number;\n\tprivate _display_order:number;\n\tprivate _display_type:string;\n\tprivate _instructions:string;\n\tprivate _display_conditions:DisplayCondition[];\n\n\tconstructor() {\n\t\tthis.id = null;\n\t\tthis.title = \"\";\n\t\tthis.display_order = 0;\n\t\tthis.questions = [];\n\t\tthis.labels = [];\n\t\tthis.answer_start_value = 1;\n\t\t// options are LikertGrid, SingleSelectDropDown\n\t\tthis.display_type = \"MultipleChoiceGrid\";\n\t\tthis.display_conditions = [];\n\t}\n\n\tpublic getQuestionById(id:string) {\n\t\tlet q = this.questions.find(q => q.id == id);\n\t\treturn q;\n\t}\n\n\tpublic get display_conditions () : DisplayCondition[] {\n\t\treturn this._display_conditions;\n\t}\n\n\tpublic set display_conditions(v : DisplayCondition[]) {\n\t\tthis._display_conditions = v;\n\t}\n\n\tpublic get display_type() : string {\n\t\treturn this._display_type;\n\t}\n\n\tpublic set display_type(v : string) {\n\t\tthis._display_type = v;\n\t}\n\n\tpublic get id() : string {\n\t\treturn this._id;\n\t}\n\n\tpublic set id(v : string) {\n\t\tthis._id = v;\n\t}\n\n\tpublic get display_order() : number {\n\t\treturn this._display_order;\n\t}\n\n\tpublic set display_order(v:number) {\n\t\tthis._display_order = v;\n\t}\n\n\tpublic get answer_start_value() : number {\n\t\treturn this._answer_start_value;\n\t}\n\n\tpublic set answer_start_value(v:number) {\n\t\tthis._answer_start_value = v;\n\t}\n\n\tpublic get title() : string {\n\t\treturn this._title;\n\t}\n\n\tpublic set title(v : string) {\n\t\tthis._title = v;\n\t}\n\n\tpublic get questions() : Question[] {\n\t\treturn this._questions;\n\t}\n\n\tpublic set questions(v : Question[]) {\n\t\tthis._questions = v;\n\t}\n\n\n\tpublic get labels() : QuestionSetLabel[] {\n\t\treturn this._labels;\n\t}\n\n\tpublic set labels(v : QuestionSetLabel[]) {\n\t\tthis._labels = v;\n\t}\n\n\tpublic get instructions() : string {\n\t\treturn this._instructions;\n\t}\n\n\tpublic set instructions(v:string) {\n\t\tthis._instructions = v;\n\t}\n\n\taddQuestion(question:Question) {\n\t\tthis.questions.push(question);\n\t}\n\n\tremoveQuestion(question:Question) {\n\t\tlet index = this.questions.indexOf(question);\n\t\tif (index >= 0) {\n\t\t\tthis.questions.splice(index, 1);\n\t\t}\n\t}\n\n\taddLabel(label:QuestionSetLabel) {\n\t\tthis.labels.push(label);\n\t}\n\tremoveLabel(label:QuestionSetLabel) {\n\t\tlet index = this.labels.indexOf(label);\n\t\tif (index >= 0) {\n\t\t\tthis.labels.splice(index, 1);\n\t\t}\n\t}\n\n\tshiftLabelUp(label:QuestionSetLabel) {\n\t\tUtility.shiftCollectionUp(this.labels, label);\n\t}\n\n\tshiftLabelDown(label:QuestionSetLabel) {\n\t\tUtility.shiftCollectionDown(this.labels, label);\n\t}\n\n\tshiftQuestionUp(question:Question) {\n\t\tUtility.shiftCollectionUp(this.questions, question);\n\t}\n\n\tshiftQuestionDown(question:Question) {\n\t\tUtility.shiftCollectionDown(this.questions, question);\n\t}\n\n\tremoveScale(scale:Scale) {\n\t\t// get all of the scales and set them to be null\n\t\t// for those questions.\n\t\tthis.questions.filter(q => q.assessment_scale.id == scale.id)\n\t\t\t.forEach(q => q.assessment_scale = null);\n\t}\n\n\tgetDisplayConditions() : DisplayCondition[] {\n\t\treturn this._display_conditions;\n\t}\n\n\tshouldDisplay(question_sets:QuestionSet[]) {\n\t\t// cycle through any conditions based upon the question_sets and say whether the current question_set\n\t\t// should display.\n\t\treturn true;\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport { AssessmentGroup } from '../../shared/models/assessment-group';\nimport { Assessment } from '../../shared/models/assessment';\nimport { AssessmentGroupService } from '../services/assessment-group.service';\nimport { AssessmentGroupDisplay } from '../../shared/models/assessment-group-display';\nimport { AssessmentTokenService } from '../../shared/services/assessment-token.service';\nimport { AuthService } from 'app/login/services/auth.service';\nimport { Capability } from 'app/shared/models/capability';\nimport { SubscriptionLike as ISubscription } from 'rxjs';\n\n@Component({\n  selector: 'dac-assessment-group-list',\n  templateUrl: './assessment-group-list.component.html',\n  styleUrls: ['./assessment-group-list.component.css']\n})\nexport class AssessmentGroupListComponent implements OnInit, OnDestroy {\n\n  public NewGroupName:string;\n  public hasLoadedTokens:boolean;\n\n  @Output() selected = new EventEmitter<AssessmentGroup>();\n  @Output() buy = new EventEmitter<AssessmentGroup>();\n\n  private groups:AssessmentGroupDisplay[];\n\n  private _userSubscription:ISubscription;\n  private _hasLoadedData:boolean;\n  private canShop:boolean;\n\n  constructor(\n    private assessmentGroupService:AssessmentGroupService\n    ,private assessmentTokenService:AssessmentTokenService\n    ,private authService:AuthService\n  ) {\n    this.hasLoadedTokens = false;\n    this._hasLoadedData = false;\n    this.groups = [];\n    this.canShop = false;\n\n    this._userSubscription = this.authService.getLoginState().subscribe(loginState =>{\n      if (loginState.user) {\n        this.canShop = loginState.user.hasCapability(Capability.CAN_SHOP);\n      }\n      else {\n        this.canShop = false;\n      }\n    });\n  }\n\n  get hasLoadedData() {\n    return this._hasLoadedData;\n  }\n\n  ngOnInit() {\n    this.assessmentGroupService.getAssessmentGroups().then((groups:AssessmentGroup[]) => {\n      // add a display property so we can expand/contract it.\n      this.groups = groups.map((g) => {\n        let displayGroup = new AssessmentGroupDisplay();\n        Object.assign(displayGroup, g);\n        displayGroup.Show = false;\n        return displayGroup;\n      })\n      return groups;\n    })\n    .then((groups) => {\n      return this.assessmentTokenService.loadAssessmentTokens().then(() => {\n        this.hasLoadedTokens = true;\n        this._hasLoadedData = true;\n      })\n    });\n  }\n  ngOnDestroy() {\n    this._userSubscription.unsubscribe();\n  }\n\n  public get tokensEnabled() {\n    return this.assessmentTokenService.isTokensEnabled();\n  }\n\n  getTokensRemaining(assessment:Assessment) {\n    if (!assessment) {\n      return 0;\n    }\n\n    return this.assessmentTokenService.getRemainingTokens(assessment);\n  }\n\n  getGroupTokensRemaining(group:AssessmentGroupDisplay) {\n    if (!group) {\n      return 0;\n    }\n\n    return this.assessmentTokenService.getGroupRemainingTokens(group);\n  }\n\n  shouldBuyTokens(group:AssessmentGroupDisplay) {\n    let tokens = this.getGroupTokensRemaining(group);\n    return this.canShop && tokens <= 0;\n  }\n\n  pickGroup(group:AssessmentGroup) {\n    this.selected.emit(group);\n  }\n\n  toggleGroup(group:AssessmentGroupDisplay, event:Event) {\n    group.Show = !group.Show;\n    console.log(group, group.Show);\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  addAssessmentToGroup(group:AssessmentGroup, assessment:Assessment) {\n    let dup = group.Assessments.find((a) => {return a.uid == assessment.uid });\n    if (dup) {\n      alert(\"This assessment already has been added.\");\n      return;\n    }\n\n    group.Assessments.push(assessment);\n    this.assessmentGroupService.addAssessmentToGroup(group, assessment).then((assessment:Assessment) => {\n      assessment.version = assessment.version;\n      assessment.id = assessment.id;\n    })\n    .catch((error) => {\n      console.error(error);\n      // TODO: stephen need to display an error here...\n      // remove it\n      let index = group.Assessments.indexOf(assessment);\n      if (index >= 0) {\n        group.Assessments.splice(index, 1);\n      }\n    });\n  }\n\n  addGroup() {\n    this.assessmentGroupService.createNewGroup(this.NewGroupName).then((group:AssessmentGroup) => {\n      let display = new AssessmentGroupDisplay();\n      Object.assign(display, group);\n\n      // hide all the others, and show the one we just added.\n      this.groups.forEach((g) => g.Show = false);\n      display.Show = true;\n      display.ShowAdd = true;\n      this.NewGroupName = \"\";\n\n      this.groups.push(display);\n    });\n  }\n\n  triggerBuy(group:AssessmentGroup) {\n    this.buy.emit(group);\n  }\n\n  public get Groups() {\n    return this.groups;\n  }\n}\n","<ul class=\"list-group\" *ngIf=\"!hasLoadedData\">\n  <li class=\"list-group-item d-flex justify-content-between align-items-center list-group-item-action\">\n    <span> <a class=\"badge badge-pill badge-primary mr-2\"><i class='fa fa-info'></i></a>Loading...</span>\n  </li>\n</ul>\n<p *ngIf=\"hasLoadedData && Groups.length <= 0\">No groups available</p>\n<ul class=\"list-group\" *ngIf=\"hasLoadedData\">\n  <li class=\"list-group-item d-flex justify-content-between align-items-center list-group-item-action\" *ngFor=\"let group of Groups\" (click)=\"pickGroup(group)\">\n    {{group.name}}\n    <span *ngIf=\"tokensEnabled && hasLoadedTokens && !shouldBuyTokens(group)\" class=\"badge badge-primary badge-pill\" alt=\"Tokens Remaining\" title=\"Tokens Remaining\">{{getGroupTokensRemaining(group)}}</span>\n    <dac-buy-item-button *ngIf=\"tokensEnabled && hasLoadedTokens && shouldBuyTokens(group)\" (click)=\"triggerBuy($event)\"\n        [item]=\"group\"></dac-buy-item-button>\n    <span *ngIf=\"!tokensEnabled\" class=\"badge badge-primary badge-pill btn btn-sm btn-primary\" alt=\"Add As Assignment\"\n      title=\"Add As Assignment\">Add\n    </span>\n  </li>\n</ul>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit,Input, ElementRef } from '@angular/core';\nimport {ScaleResult} from '../../shared/models/scale-result';\nimport * as Chart from 'chart.js';\nimport {ChartService} from \"../services/chart.service\";\nimport { ScaleResultColorService } from 'app/assessment-charts/services/scale-result-color.service';\nimport { ScaleRange } from 'app/shared/models/scale-range';\nimport { BaseChartComponent } from 'app/assessment-charts/base-chart/base-chart.component';\n\n@Component({\n  selector: 'app-summary-scales-chart',\n  templateUrl: './summary-scales-chart.component.html',\n  styleUrls: ['./summary-scales-chart.component.css']\n})\nexport class SummaryScalesChartComponent extends BaseChartComponent implements OnInit {\n\n  private MAX_SCALE_NAME_LENGTH:number = 75;\n  @Input(\"scaleResults\") scaleResults:ScaleResult[];\n  @Input(\"showNames\") showNames:Boolean;\n  @Input(\"showRangeScore\") showRangeScore:Boolean;\n  @Input(\"chartScaleNames\") chartScaleNames:string[];\n  @Input(\"chartRangeNames\") chartRangeNames:string[];\n\n  /**\n   * Should the graph have the top yAxis label be a positive color/value instead\n   * of a negative.  if reverseDirection is set to true, all of the scale range labels\n   * are reversed with their corresponding colors.\n   */\n  @Input(\"reverseDirection\") reverseDirection:boolean;\n  private _labelData:any[];\n  private _barData:any;\n\n  constructor(private element:ElementRef, private chartService:ChartService\n    , private scaleResultColorService:ScaleResultColorService) {\n      super(element, chartService);\n      this.reverseDirection = false;\n    }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  private getAdjustedFontSize(fontSize) {\n    let adjustment = fontSize / 14.4;\n    let vpFontSize = this.getFontSizeForCurrentViewport();\n    return fontSize * adjustment;\n  }\n\n  private getFontSizeForCurrentViewport() {\n    let fontSize = 14.4;\n    let mediumDevice = window.matchMedia('(max-width: 768px)');\n    let smallDevice = window.matchMedia('(max-width: 450px');\n    if (mediumDevice) {\n      fontSize = 12.0;\n    }\n    else if (smallDevice) {\n      fontSize = 10.0;\n    }\n    return fontSize;\n  }\n  protected setupChartConfiguration() {\n    let fontSize = this.getFontSizeForCurrentViewport();\n    let configuration = super.setupChartConfiguration();\n    configuration.legend = {\n      display: false\n    };\n    configuration.tooltips = {\n      enabled: false\n    };\n    /*\n    title: {\n        display: false\n        ,text: \"some title goes here\"\n      }\n      */\n    // configuration.title = {\n    //   display: true\n    //   ,position: 'top'\n    //   ,text: 'Severity: Slightly Elevated'\n    //   ,fontSize: this.getAdjustedFontSize(18)\n    // };\n    let xAxes = configuration.scales.xAxes[0];\n    xAxes.id = 'first-x-axis';\n    xAxes.ticks = {\n      beginAtZero: true\n      ,autoSkip: false\n    };\n    xAxes.gridLines = {\n      offsetGridLines: true\n    };\n    xAxes.offset = true;\n    configuration.scales.xAxes.push({\n      id: 'second-x-axis'\n      ,display: false\n    });\n    // configuration.scales.xAxes[0].display = false;\n\n    // these should all be the same length so grab the first one.\n    let yMax = this.scaleResults[0].scale.ranges.length;\n\n    let yAxes = configuration.scales.yAxes[0];\n    yAxes.id = 'first-y-axis';\n    yAxes.type = 'linear';\n    yAxes.ticks = {\n      stepSize: 1\n      ,callback: (value, index, values) => {\n        let scaleRangeNames = this.getChartRangeNames();\n        // if (value == 0 || !scaleRangeNames.hasOwnProperty(value-1)) {\n        //   return \" \";\n        // }\n        // else {\n          return scaleRangeNames[value-1];\n        // }\n      }\n      ,beginAtZero: true\n      ,max: yMax\n      ,fontSize: fontSize\n    };\n    configuration.defaultFontSize = fontSize;\n    // yAxes.padding = 0;\n    // yAxes.fontSize = 10;\n    yAxes.position = 'left';\n\n    if (this.scaleResults.length < 3) {\n      configuration.scales.xAxes[0].barPercentage = 0.50;\n      configuration.scales.xAxes[0].maxBarThickness = 50;\n    }\n    else if (this.scaleResults.length < 5) {\n      configuration.scales.xAxes[0].maxBarThickness = 50;\n    }\n\n    configuration.elements =  {\n        point: {\n          radius: 0 // should hide the points from displaying...\n          ,hoverRadius: 0\n        }\n      };\n    configuration.scales.xAxes[0].display = this.showNames === true;\n    configuration.layout.padding = {\n      right: 10\n      ,top: 10\n      ,bottom: 10\n    }\n    return configuration;\n  }\n  protected getLabelData() {\n    return this._labelData;\n  }\n  protected getDatasets() {\n    return this._barData;\n  }\n\n  private getLabelsForScales(results:ScaleResult[]) {\n    let labels =  this.scaleResults.map(sr => sr.scale.name.substring(0, Math.min(sr.scale.name.length, this.MAX_SCALE_NAME_LENGTH)));\n    // let labels =  this.scaleResults.map(sr => sr.scale.name);\n    if (this.chartScaleNames) {\n      if (this.chartScaleNames.length != results.length) {\n        console.error(\"chart scale names\",this.chartScaleNames, \" do not match number of scales \", results);\n      }\n      else {\n        labels = this.chartScaleNames;\n      }\n    }\n    // make sure we have two empty labels at the beginning and end of the graph\n    // we do this because of the grid offset setting, otherwise the bar graphs would have\n    // a bar at the front and end that are cut in half making the graph pretty ugly.\n    // labels.unshift(\"\");\n    // labels.push(\"\");\n    return labels;\n  }\n\n  protected getChartRangeNames() {\n    let scaleRangeNames = this.chartRangeNames;\n    if (!scaleRangeNames || scaleRangeNames.length == 0) {\n      scaleRangeNames = this.scaleResults[0].scale.ranges.map(r => {\n        let name = r.displayName || \"\";\n        if (this.showRangeScore !== false) {\n          name += \" (\" + r.rangeEnd + \")\";\n        }\n        else {\n          console.log(\"showRangeScore was false for \", this.scaleResults[0]);\n        }\n        return name;\n      });\n    }\n    else if (scaleRangeNames.length != this.scaleResults[0].scale.ranges.length) {\n      console.error(\"Scale range names does not match count of scale ranges\");\n    }\n    else {\n      scaleRangeNames = scaleRangeNames.map((v, i) => {\n        let range = this.scaleResults[0].scale.ranges[i];\n        return v + \" (\" + range.rangeEnd + \")\";\n      });\n    }\n    return scaleRangeNames;\n  }\n  protected setupChartData() {\n    let barColor = \"#007FFF\";\n    let hoverBackgroundColor = \"rgba(92,141,181, .75)\";\n    let borderColor: \"rgba(0, 0, 0, 1)\";\n\n    if (this.scaleResults) {\n\n      let dataSets = [];\n      let barGraphData = []; // to offset the bar graph by one\n\n\n      // ranges where we don't have scales have to have a score range of 0...\n      // need to make this just work... assume there are 5 scales...\n      // scalePerc = (score > range ? rangeEnd % : score % of range)\n      // 1 scale -> (score % of range), 0, 0, 0, 0\n      // 2 scale -> scalePerc, 0, 0, 0, scalePerc\n      // 3 scale -> scalePerc, 0, scalePerc, 0, scalePerc\n      // 4 scale -> scalePerc, scalePerc, 0, scalePerc, scalePerc\n      // 5 scale -> scalePerc, scalePerc, scalePerc, scalePerc, scalePerc\n\n      // this.scaleResults.map(sr => sr.scale.ranges)\n      // .reduce((prev, next) => prev = prev.concat(next), [])\n      // .forEach(r => console.log(r.name, \"(\",r.rangeStart, \"-\",r.rangeEnd, \")\"));\n\n      this.scaleResults.forEach(sr => {\n        // TODO: stephen later we want to generate an aproximate range modifier here...\n        let index = sr.scale.ranges.indexOf(sr.range);\n        // TODO: stephen much of this code is leftover from various graphing mechanisms we had before as each of the scales\n        // is on an ordinal value, but we represent the percentage through decimal numbers here.\n        let scorePercent = sr.range.getPercentageForRange(sr.score) / 100; // from 0 -> 1 this will increase the graph percent that way.\n        if (scorePercent <= 0) {\n          // we need to show something on the graph so let's do a .10 percent increment here so we can see some kind of bar here.\n          scorePercent += .10;\n        }\n\n        // let index = sr.scale.ranges.indexOf(sr.range) + .5;\n        barGraphData.push(index + scorePercent);\n      });\n      // barGraphData.push(0);  // to provide the padding offset at the end.\n      dataSets.push({\n        label: \"data\"\n        ,backgroundColor: barColor\n        ,borderColor: \"rgba(0, 0, 0, 1)\"\n        ,borderWidth: 1\n        ,yAxisID: 'first-y-axis'\n        ,data: barGraphData\n      });\n\n      let scaleRangeNames = this.getChartRangeNames();\n\n      let scaleRanges = this.scaleResults[0].scale.ranges;\n      let colors = this.scaleResultColorService.getBackgroundColors(scaleRangeNames.length);\n      if (this.reverseDirection) {\n        colors.reverse();\n      }\n      colors.forEach((colorChart, index) => {\n        dataSets.push({\n          label: scaleRangeNames[index]\n          ,data: Array(this.scaleResults.length+1).fill(index+1)\n          ,backgroundColor: colorChart.color\n          ,borderColor: colorChart.color\n          // ,borderWidth: 0\n          ,pointRadius: 0\n          ,type: 'line'\n          ,xAxisID: 'second-x-axis'\n          ,yAxisID: 'first-y-axis'\n        });\n      });\n      this._barData = dataSets;\n\n      this._labelData = this.getLabelsForScales(this.scaleResults);\n    }\n    else {\n      this._barData = {datasets: [], label: []};\n    }\n  }\n\n  public get hasResults() {\n    return this.scaleResults != null && this.scaleResults.length;\n  }\n}\n","<div *ngIf=\"hasResults\" class=\"scale-chart-container d-flex h-100\"></div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport { Pako } from \"./pako.service\";\nimport { HTTPService } from \"./http.service\";\nimport { DacConfig } from \"./dac-config.service\";\nimport { UniqueIdService } from \"./unique-id.service\";\nimport { AssessmentResultHydrator } from \"./assessment-result-hydrator.service\";\nimport { AssessmentHydrator } from \"./assessment-hydrator.service\";\n\nimport {Assessment} from \"../models/assessment\"\nimport {AssessmentResult} from \"../models/assessment-result\"\n\nimport {AssessmentCompressorService} from \"./assessment-compressor.service\";\nimport { AssignedAssessment } from '../models/AssignedAssessment';\nimport { FhirService } from './fhir-service';\n\n@Injectable()\nexport class AssessmentService\n{\n  private readonly EXTENSION_NAME = \"openemr-dac-assessment\";\n\tprivate API_URL;\n\tprivate _results:Map<String,AssessmentResult>;\n\tprivate _assessmentUid:string;\n\tprivate _clientId:string;\n\tprivate _clientCustomField1:string;\n\tprivate _assessments:Map<String,Assessment>;\n\tprivate _pendingResults:Map<String, Promise<any>>;\n\n\t/**\n\t * Flag used for administrators to force us to allow a test to be retaken.\n\t*/\n\tprivate _forceTestRetake:boolean;\n\n\tconstructor(\n      // TODO: stephen replace $http here with our dac$http\n      private _dac$http:HTTPService,\n      private _pako:Pako,\n      private _resultHydrator:AssessmentResultHydrator,\n      private _hydrator:AssessmentHydrator,\n\t  private _compressor:AssessmentCompressorService,\n      private _uuid:UniqueIdService,\n      private dacConfig:DacConfig,\n      private fhirService:FhirService\n\t\t) {\n\t\tthis.API_URL = this.dacConfig.api_url;\n\t\tthis._results = new Map();\n\t\tthis._assessments = new Map();\n\t\tthis._pendingResults = new Map();\n\t}\n\n\t// TODO: stephen need to handle the caching results.\n\tpublic clearCache() {\n\t\tthis._results = new Map();\n\t\tthis._assessments = new Map();\n\t\tthis._pendingResults = new Map();\n\t}\n\n\tpublic get clientId() {\n\t\treturn this._clientId;\n\t}\n\n\tpublic set clientId(v : string) {\n\t\tthis._clientId = v;\n\t}\n\n\tpublic get clientCustomField1() {\n\t\treturn this._clientCustomField1;\n\t}\n\n\tpublic set clientCustomField1(v:string) {\n\t\tthis._clientCustomField1 = v;\n\t}\n\n\tpublic get uid() : string {\n\t\treturn this._assessmentUid;\n\t}\n\n\tpublic set uid(v : string) {\n\t\tthis._assessmentUid = v;\n\t}\n\n\tpublic get forceTestRetake() : boolean {\n\t\treturn this._forceTestRetake;\n\t}\n\n\tpublic set forceTestRetake(v : boolean) {\n\t\tthis._forceTestRetake = v;\n\t}\n\n\n\tpublic newId() {\n\t\treturn this._uuid.generate();\n\t}\n\n\tprivate createAssessmentFromJSON(data:any) : Assessment {\n\t\treturn this._hydrator.hydrate(data);\n\t}\n\n\tprivate createAssessmentResultFromJSON(data:any) : AssessmentResult {\n\t\treturn this._resultHydrator.hydrate(data);\n\t}\n\n\thasClientTakenAssessment() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.forceTestRetake) {\n\t\t\t\tresolve([]);\n\t\t\t}\n\t\t\tthis.getLatestClientAssessmentResult(this.clientId, this._assessmentUid)\n\t\t\t\t.then((result:AssessmentResult) => {\n\t\t\t\t\tresolve(result.id);\n\t\t\t\t}, (error) => {\n\t\t\t\t\tif (error && error.status === 404) {\n\t\t\t\t\t\tresolve([]);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tconsole.error(\"could not retrieve assessment results\", error);\n\t\t\t\t\t\treject(\"could not retrieve assessment results\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t});\n\t}\n\n\tasync getAssessmentForAssignment(assignment:AssignedAssessment) {\n    if (assignment.Uid && this._assessments[assignment.Uid]) {\n      // we want to present a copy of the assessment here..\n      return this.getAssessmentCopy(this._assessments[assignment.Uid]);\n    }\n\t\tvar requestData = {\n\t\t\tclientID: this.clientId\n\t\t\t,assignmentItemID: assignment.Id\n\t\t};\n    // we go off the unique id of the assessment from the assignment and grab it from our unique extension\n    // we do this in order to simplify the scope requirements on the patient client side\n    let client = await this.fhirService.getFhirClient();\n    return client.request(\"Questionnaire?_id=\" + assignment.AssessmentUuid + \"&questionnaire-code=\" + this.EXTENSION_NAME, {flat: true})\n    // .then\n\t\t// TODO: stephen is this going to cause problems here??\n\t\t// return this._dac$http.get<Assessment>(\"assessments/\" + assignment.Uid, requestData)\n\t\t.then((json) => {\n      let item = Array.isArray(json) && json.length ? json[0] : {};\n      if (item.extension && Array.isArray(item.extension) && item.extension.length) {\n        let extension = item.extension.find(e => e.url == \"https://www.discoverandchange.com/fhir/\" + this.EXTENSION_NAME);\n        if (extension && extension.valueString) {\n          var assessment = this.createAssessmentFromJSON(JSON.parse(extension.valueString));\n          assessment.id = item.id;\n          assessment.version = item.meta && item.meta.versionId ? item.meta.versionId : 1;\n          this._assessments[assignment.Uid] = assessment;\n          return this.getAssessmentCopy(assessment);\n        }\n      }\n\t\t\tthrow new Error(\"Failed to find dac-assessment extension\");\n\t\t});\n\t}\n\n  getAssessmentCopy(assessment:Assessment) {\n    // we are going to create a JSON version of this, and then hydrate the version.\n    let compressedAssessment = this._compressor.compress(assessment);\n    return this._hydrator.hydrate(compressedAssessment);\n  }\n\n\tgetAssessmentVersion(uid:string, version:number) :Promise<Assessment>{\n\t\tvar requestData = {\n\t\t\tclientID: this.clientId\n\t\t\t,version: version\n\t\t};\n\t\treturn this._dac$http.get<Assessment>(\"assessments/\" + uid, requestData)\n\t\t.then((json) => {\n\t\t\tvar assessment = this.createAssessmentFromJSON(json);\n\t\t\treturn assessment;\n\t\t}, (error) => {\n\t\t\tconsole.error(error);\n\t\t\tthrow Error(\"could not retrieve assessment\");\n\t\t});\n\t}\n\n\tgetAssessment(uid) : Promise<Assessment> {\n\t\tvar that = this;\n\t\tif (this._assessments[uid]) {\n\t\t\treturn Promise.resolve(this._assessments[uid]);\n\t\t}\n\n\t\tvar requestData = {\n\t\t\tclientID: this.clientId\n\t\t};\n\t\treturn this._dac$http.get<Assessment>(\"assessments/\" + uid, requestData)\n\t\t.then((json) => {\n\t\t\tvar assessment = that.createAssessmentFromJSON(json);\n\t\t\tthis._assessments[uid] = assessment;\n\t\t\treturn assessment;\n\t\t}, (error) => {\n\t\t\tconsole.error(error);\n\t\t\tthrow Error(\"could not retrieve assessment\");\n\t\t});\n\t}\n\n\tgetAssessmentList() : Promise<Assessment[]> {\n\t\treturn this._dac$http.get<Assessment[]>(\"assessments\")\n\t\t\t.then(data => {\n\t\t\t\tif (data) {\n\t\t\t\t\tlet assessments = data.map(i => this.createAssessmentFromJSON(i))\n\t\t\t\t\t.filter(a => this.dacConfig.isAssessmentEnabled(a.uid));\n\t\t\t\t\treturn assessments;\n\t\t\t\t}\n\t\t\t\tthrow new Error(\"No assessment data was returned\");\n\t\t\t});\n\t}\n\n\t// TODO: stephen this compressed post is a leaky abstraction and doesn't work like the others\n\t// we need to fix it.\n\tcreateAssessment(assessment:Assessment) {\n\t\tlet compressedAssessment = this._compressor.compress(assessment);\n\t\treturn this._dac$http.compressedPost(\"assessments\", compressedAssessment)\n\t\t.catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tthrow error.response;\n\t\t});\n\t}\n\n\tsaveAssessment(assessment:Assessment) {\n\t\tlet compressedAssessment = this._compressor.compress(assessment);\n\t\treturn this._dac$http.compressedPost(\"assessments/\"+ assessment.uid, compressedAssessment)\n\t\t.then((result) => {\n\t\t\treturn result;\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error(error);\n\t\t\tthrow error.response;\n\t\t});\n\t}\n\n\tasync saveAssessmentResult(result:AssessmentResult) {\n\t\tvar that = this;\n\t\tif (!result.id) {\n\t\t\tresult.id = this.newId();\n\t\t}\n\n    let resultToSave = this.getAssessmentResultForSave(result);\n\n    let currentUser = await this.fhirService.getFhirUser();\n    let client = await this.fhirService.getFhirClient();\n\n\t\tvar saveData = {\n\t\t\tid: result.id\n\t\t\t,client_id: this.clientId\n\t\t\t,data: resultToSave\n\t\t\t,assessment: {\n\t\t\t\tid: result.assessment.id\n\t\t\t\t,uid: result.assessment.uid\n\t\t\t\t,version: result.assessment.version\n\t\t\t}\n\t\t\t,client_custom_field_1: this.clientCustomField1\n\t\t};\n\n    let answers = resultToSave._answers.map(a => {\n      let answer = {valueString: a._answer};\n      if (typeof a._answer !== 'string') {\n        answer.valueString = JSON.stringify(a._answer);\n      }\n      return {linkId: a._question_id, answer: [answer]};\n    });\n\n    let questionnaireResponse = {\n      resourceType: 'QuestionnaireResponse'\n      ,questionnaire: '/Questionnaire/' + result.assessment.id\n      ,status: 'completed'\n      ,author: {\n        reference: currentUser\n      }\n      ,source: {\n        reference: currentUser\n      }\n      ,item: answers\n      ,extension: [\n        {\n          url: \"https://www.discoverandchange.com/fhir/\" + this.EXTENSION_NAME + \"-response\"\n          ,valueString: JSON.stringify(saveData)\n        }\n      ]\n    };\n\n    return client.create(questionnaireResponse, {})\n    .then(createdResource => {\n      result.id = createdResource.id;\n      this._results[result.id] = result;\n      this.forceTestRetake = false;\n      return result;\n    })\n    .catch(error => {\n      console.error(\"save failed\", error);\n      throw new Error(\"Save results failed\");\n    });\n\t}\n\n\tprivate getAssessmentResultForSave(result:AssessmentResult) {\n\t\t let transformed = {\n            _id: result.id\n            ,_assignmentItemId: result.assignmentItemId\n\t\t\t,_assessment: {\n\t\t\t\t_id: result.assessment.id\n\t\t\t\t,_uid: result.assessment.uid\n\t\t\t\t,_version: result.assessment.version\n\t\t\t}\n            ,_scaleResults: []\n\t\t\t,_answers: []\n\t\t\t,_flaggedQuestions: result.flaggedQuestions.map(q => q.id)\n        };\n        let scaleResults = result.scaleResults.map(sr => {\n\t\t\tif (!(sr.scale && sr.range)) {\n\t\t\t\tconsole.error(\"ScaleResult missing scale or range.  Check assessment data.  Object: \", sr);\n\t\t\t}\n            return {\n                _scaleId: sr.scale ? sr.scale.id : null\n                ,_score: sr.score\n                ,_rangeId: sr.range ? sr.range.id : null\n            }\n        });\n        transformed._scaleResults = scaleResults;\n\n\t\tlet questionSets = result.assessment.getQuestionSetsForDisplay();\n        questionSets.forEach(qs => qs.questions.forEach(q => {\n            transformed._answers.push({_question_id: q.id, _answer:q.answerForSave, _score: q.getComputedScore()});\n        }));\n\t\treturn transformed;\n\t}\n\n\t// private resolvePendingResults(resultID, serverResponse) {\n\t// \tlet data = serverResponse.json() as any;\n\t// \tvar result:AssessmentResult = this.createAssessmentResultFromJSON(data);\n\n\t// \t// get it from the assessment if we didn't get one in our bound parameters\n\t// \t// this only happens when a client first comes to an assessment and we don't know\n\t// \t// their top result.\n\t// \tif (!resultID) {\n\t// \t\tresultID = result.id;\n\t// \t}\n\n\t// \tthis._results[resultID] = result;\n\t// \tif (!this._pendingResults[resultID]) {\n\t// \t\treturn;\n\t// \t}\n\n\t// \tthis._pendingResults[resultID].forEach((defer) => defer.resolve(result));\n\t// \tdelete this._pendingResults[resultID];\n\t// }\n\n\tprivate addPendingDefer(defer, resultID) {\n\t\tif (!this._pendingResults[resultID]) {\n\t\t\tthis._pendingResults[resultID] = [];\n\t\t}\n\t\tthis._pendingResults[resultID].push(defer);\n\t}\n\n\tgetLatestClientAssessmentResult(clientId:string, assessmentUID:string) {\n\t\tvar requestData = {\n\t\t\t\tclientID: clientId\n\t\t\t\t,assessmentUID: assessmentUID\n\t\t\t\t,resultID: null\n\t\t\t};\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._dac$http.get<AssessmentResult>(\"assessment-results\", requestData)\n\t\t\t\t.then((data) => {\n\t\t\t\t\tvar result:AssessmentResult = this.createAssessmentResultFromJSON(data);\n\t\t\t\t\tthis._results[result.id] = result;\n\t\t\t\t\tresolve(result);\n\t\t\t\t\treturn result;\n\t\t\t\t}, (error) => {\n\t\t\t\t\treject(error);\n\t\t\t\t\treturn error;\n\t\t\t\t});\n\t\t});\n\t}\n\n  async getAssessmentResultWithLatestAssessment(clientId, resultID) {\n    var requestData:any = {\n      clientID: clientId,\n      resultID: resultID\n    };\n    try {\n      let resultData = await this._dac$http.get<{_assessment:any}>(\"assessment-results\", requestData);\n      let resultDataAssessment = resultData._assessment || {_uid:\"\"};\n      let uid = resultDataAssessment._uid || \"\";\n\n      var assessmentVersionData = {\n        clientID: clientId\n      };\n      let assessmentData = await this._dac$http.get<Assessment>(\"assessments/\" + uid, requestData);\n\n      resultData._assessment = assessmentData;\n      return this._resultHydrator.hydrate(resultData);\n    }\n    catch (error) {\n      console.error(error);\n      throw error;\n    }\n  }\n\n  getAssessmentResultList(clientId, resultIds:string[]) : Promise<AssessmentResult[]> {\n    let requestData:any = {\n      clientID: clientId,\n      \"resultIds[]\": resultIds // need to handle php cases when working with arrays\n    };\n    return this._dac$http.get<AssessmentResult[]>(\"assessment-results\", requestData)\n\t\t\t.then((data) => {\n        let results = [];\n        if (data && data.length) {\n          results = data.map(r => this.createAssessmentResultFromJSON(r));\n        }\n\n\t\t\t\treturn results;\n\t\t\t});\n  }\n\n\tgetAssessmentResult(clientId, resultID?:string) : Promise<AssessmentResult> {\n\t\tvar requestData:any = {\n\t\t\t\t\tclientID: clientId,\n\t\t};\n\t\tif (resultID) {\n\t\t\trequestData.resultID = resultID;\n\t\t}\n\t\telse {\n\t\t\trequestData.assessmentUID = this.uid;\n\t\t}\n\n\t\tconsole.log(\"attempting to grab results\");\n\t\treturn this._dac$http.get<AssessmentResult>(\"assessment-results\", requestData)\n\t\t\t.then((data) => {\n\t\t\t\t\tvar result:AssessmentResult = this.createAssessmentResultFromJSON(data);\n\t\t\t\t\treturn result;\n\t\t\t});\n\t// \tlet promise = new Promise((resolve, reject) => {\n\n\t// \t\tthis._dac$http.get(\"assessments/results.json\", requestData)\n\t// \t\t.then((serverResponse) => {\n\t// \t\t\tlet data = serverResponse.json() as any;\n\t// \t\t\t\tvar result:AssessmentResult = this.createAssessmentResultFromJSON(data);\n\n\t// \t\t\t\t// get it from the assessment if we didn't get one in our bound parameters\n\t// \t\t\t\t// this only happens when a client first comes to an assessment and we don't know\n\t// \t\t\t\t// their top result.\n\t// \t\t\t\tif (!resultID) {\n\t// \t\t\t\t\tresultID = result.id;\n\t// \t\t\t\t}\n\t// \t\t}, (error) => {\n\t// \t\t\treject(error);\n\t// \t\t\treturn error;\n\t// \t\t});\n\n\t// \t\tconsole.log(\"promise is: \", promise);\n\t// \t\tif (resultID && this._results[resultID]) {\n\t// \t\t\tresolve(this._results[resultID]);\n\t// \t\t}\n\t// \t\telse if (resultID && this._pendingResults[resultID]) {\n\t// \t\t\tthis.addPendingDefer(promise, resultID);\n\t// \t\t}\n\t// \t\telse {\n\t// \t\t\tvar requestData = {\n\t// \t\t\t\tclientID: clientId\n\t// \t\t\t\t,assessmentUID: this.uid\n\t// \t\t\t\t,resultID: null\n\t// \t\t\t};\n\n\t// \t\t\tlet errorCallback = (error) => {\n\t// \t\t\t\treject(error);\n\t// \t\t\t\treturn error;\n\t// \t\t\t};\n\n\t// \t\t\tif (resultID) {\n\t// \t\t\t\trequestData.resultID = resultID;\n\t// \t\t\t\tthis.addPendingDefer(promise, resultID);\n\t// \t\t\t}\n\t// \t\t\tthis._dac$http.get(\"assessments/results.json\", requestData)\n\t// \t\t\t\t\t.then(this.resolvePendingResults.bind(this, resultID), errorCallback);\n\t// \t\t}\n\t// \t});\n\t// \treturn promise;\n\t// }\n\n\t// clearResultCache() {\n    // // does nothing as we have no caching layer at this point\n    // // TODO: stephen look at removing this function.\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input, ViewContainerRef, ViewChild, ElementRef } from '@angular/core';\n\n@Component({\n  selector: 'legend-color-icon',\n  templateUrl: './legend-color-icon.component.html',\n  styleUrls: ['./legend-color-icon.component.css']\n})\nexport class LegendColorIconComponent implements OnInit {\n  @Input() color:string;\n\n\n  @ViewChild(\"canvas\") colorContainer:ElementRef;\n  @ViewChild(\"img\") imgContainer:ElementRef;\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n    // change the view, render the canvas\n    let element = this.colorContainer.nativeElement as HTMLCanvasElement;\n    let context = element.getContext(\"2d\");\n    context.fillStyle = this.color;\n    context.fillRect(0, 0, element.width, element.height);\n    let imgSrc = element.toDataURL(\"image/png\");\n    this.imgContainer.nativeElement.src = imgSrc;\n    // now hide our current element\n    element.className = \"hidden\";\n  }\n\n}\n","<canvas #canvas></canvas>\n<img #img />","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport { Question } from \"../models/question\";\nimport { ChecklistQuestion } from \"../models/checklist-question\";\nimport { MultipleChoiceQuestion } from \"../models/multiple-choice-question\";\nimport { TextboxQuestion } from \"../models/textbox-question\";\nimport { QuestionType } from \"../models/question-type\";\nimport {SingleChoiceQuestion} from \"../models/single-choice-question\";\n\n@Injectable()\nexport class QuestionFactoryService {\n\n  constructor() { }\n\n  public createQuestionForType(type:QuestionType) : Question {\n    if (type == QuestionType.Textbox) {\n      return new TextboxQuestion();\n    }\n    else if (type == QuestionType.Checklist) {\n      return new ChecklistQuestion();\n    }\n    else if (type == QuestionType.SingleChoice) {\n      return new SingleChoiceQuestion();\n    }\n    return new MultipleChoiceQuestion();\n  }\n\n  public createDefaultEmptyQuestion() {\n    // create an empty multiple choice question.\n    return this.createQuestionForType(QuestionType.MultipleChoice);\n  }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-login-header',\n  templateUrl: './login-header.component.html',\n  styleUrls: ['./login-header.component.css']\n})\nexport class LoginHeaderComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<header id=\"home\" class=\"header\">\n\n  <div id=\"main-nav\" class=\"navbar navbar-inverse bs-docs-nav\" role=\"banner\">\n    <div class=\"container\">\n\n\t\t\t<div class=\"navbar-header responsive-logo\">\n\n\t\t\t\t<button class=\"navbar-toggle collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\".bs-navbar-collapse\">\n\n\t\t\t\t<span class=\"sr-only\">Toggle navigation</span>\n\n\t\t\t\t<span class=\"icon-bar\"></span>\n\n\t\t\t\t<span class=\"icon-bar\"></span>\n\n\t\t\t\t<span class=\"icon-bar\"></span>\n\n\t\t\t\t</button>\n\n        <a href=\"/\" class=\"navbar-brand\"><img src=\"/assets/images/logo-addo.png\" alt=\"Addo Recovery in partnership with Discover and Change.\"></a>\n\t\t\t</div>\n\n\t\t\t<nav class=\"navbar-collapse bs-navbar-collapse collapse\" role=\"navigation\" id=\"site-navigation\" style=\"height: 0px;\">\n\t\t\t\t<a class=\"screen-reader-text skip-link\" href=\"#content\">Skip to content</a>\n\t\t\t\t<ul id=\"menu-menu-1\" class=\"nav navbar-nav navbar-right responsive-nav main-nav-list\">\n          <li id=\"menu-item-32\" \n            class=\"menu-item menu-item-type-custom menu-item-object-custom current-menu-item current_page_item menu-item-home menu-item-32\">\n              <a [routerLink]=\"['/']\">Home</a></li>\n            <li id=\"menu-item-618\" class=\"menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-618\">\n              <a [routerLink]=\"['/login']\">My Account</a>\n            </li>\n            <li id=\"menu-item-619\" class=\"menu-item menu-item-type-post_type menu-item-object-page menu-item-has-children menu-item-619\">\n              <a [routerLink]=\"['/loginAdmin']\">Admin</a>\n            </li>\n          </ul>\t\t\t\n        </nav>\n\n\t\t</div>\n  </div>\n</header>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class QuestionSetLabel\n{\n\tprivate _id:string;\n\tprivate _display_order:number;\n\tprivate _label:string;\n\tprivate _skipScoring:boolean;\n\n\tconstructor() {\n\t\tthis.id = null;\n\t\tthis.display_order = 0;\n\t\tthis.label = \"\";\n\t}\n\n\tpublic get id():string {\n\t\treturn this._id;\n\t}\n\tpublic set id(id:string) {\n\t\tthis._id = id;\n\t}\n\n\tpublic get skipScoring():boolean {\n\t\treturn this._skipScoring;\n\t}\n\tpublic set skipScoring(id:boolean) {\n\t\tthis._skipScoring = id;\n\t}\n\n\tpublic get display_order():number {\n\t\treturn this._display_order;\n\t}\n\tpublic set display_order(order:number) {\n\t\tthis._display_order = order;\n\t}\n\n\tpublic get label() : string {\n\t\treturn this._label;\n\t}\n\n\tpublic set label(lbl:string) {\n\t\tthis._label = lbl;\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {PaginationQueryFunc} from \"../models/pagination-query-func\";\nimport {PaginatedResultsLoader} from \"../models/paginated-results-loader\";\n\nexport class PaginatedResultsLoaderFactory {\n    constructor() {}\n\n    public getResultsLoader<T>(queryFunction:PaginationQueryFunc) : PaginatedResultsLoader<T> {\n        let loader = new PaginatedResultsLoader<T>(queryFunction);\n        return loader;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, ElementRef } from '@angular/core';\nimport { TherapistScaleResultsComponent } from 'app/reports/report-items/therapist-scale-results/therapist-scale-results.component';\nimport { ReportNavigatorService } from 'app/reports/services/report-navigator.service';\nimport { ScaleResult } from 'app/shared/models/scale-result';\n\n@Component({\n  selector: 'dac-client-scale-results',\n  templateUrl: './client-scale-results.component.html',\n  styleUrls: ['./client-scale-results.component.scss']\n})\nexport class ClientScaleResultsComponent extends TherapistScaleResultsComponent implements OnInit {\n\n  constructor(navigator:ReportNavigatorService, el:ElementRef) {\n    super(navigator, el)\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n  hasContent(scaleResult:ScaleResult) {\n    if (scaleResult && scaleResult.range)\n    {\n      return scaleResult.range.clientContent || scaleResult.range.therapistContent;\n    }\n    return false;\n  }\n\n  getContent(scaleResult:ScaleResult) {\n    if (scaleResult && scaleResult.range)\n    {\n      if (scaleResult.range.clientContent) {\n        return scaleResult.range.clientContent;\n      }\n      else {\n        return scaleResult.range.therapistContent;\n      }\n    }\n    return \"\";\n  }\n\n}\n","<div class=\"card card-cascade d-print-block-visible\">\n  <div class=\"view gradient-card-header primary-gradient text-light\">\n      <h3 class='h3-responsive text-center'>{{getTitle()}}</h3>\n  </div>\n  <div class=\"card-body\">\n      <div class=\"report-print-page mb-3 row\"\n      [id]=\"getScaleResultNavigatorId(scaleResult)\"\n      [ngClass]=\"{'force-page-break':shouldPrintBreak(index), 'mb-3': !last}\"\n      *ngFor=\"let scaleResult of ScaleResults;index as index; last as last;\">\n          <div class=\"col\">\n                  <div class=\"card card-cascade\">\n                      <div class=\"view gradient-card-header secondary-gradient text-light\">\n                              <h3 class='h3-responsive text-center'>{{scaleResult.scale?.name}} (Scored {{scaleResult.score}} / {{scaleResult.scale.getMaxScore()}})</h3>\n                      </div>\n                      <div class=\"card-body pt-1 pt-md-3\">\n                          <div class=\"row justify-content-center\" *ngIf=\"scaleResult.range?.hasMedia()\">\n                              <div class=\"col-8 ml-auto mr-auto\">\n                                <video [src]=\"scaleResult.range.mediaURL\" controls=\"\" class=\"embed-responsive\"></video>\n                              </div>\n                          </div>\n                          <div class=\"row justify-content-center\" *ngIf=\"!SkipGraph\">\n                              <div class=\"col-8 ml-auto mr-auto\">\n                                  <app-summary-scales-chart class=\"card card-body row pt-1 pt-md-3\" [showNames]=\"false\" [scaleResults]=\"[scaleResult]\"\n                                  [showRangeScore]=\"ShowRangeScore\"\n                                  [reverseDirection]=\"shouldReverseScaleGraph(scaleResult)\"></app-summary-scales-chart>\n                              </div>\n                          </div>\n                          <div class=\"row mb-0 mt-3\" *ngIf=\"!SkipContent\">\n                              <div *ngIf=\"hasContent(scaleResult)\" class=\"p-2\">\n                                  <div [innerHTML]=\"getContent(scaleResult)\"></div>\n                              </div>\n                          </div>\n                          <div class=\"row\" *ngIf=\"shouldShowQuestionList(scaleResult)\">\n                              <app-scale-questions-list  class=\"col-12 d-report-print-page\"\n                              [QuestionActions]=\"getActionByScale(scaleResult.scale)\"\n                              [Questions]=\"getQuestionsForScaleResult(scaleResult)\"></app-scale-questions-list>\n                          </div>\n                          <div class=\"row\" *ngIf=\"shouldShowSubScalesList(scaleResult)\">\n                              <dac-scale-sub-list class=\"col-12 d-report-print-page\" [SubScales]=\"getSubScales(scaleResult)\"></dac-scale-sub-list>\n                          </div>\n                      </div>\n                  </div>\n          </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {ReportNavigatorService} from '../services/report-navigator.service';\nimport { Component, OnInit, Input } from '@angular/core';\nimport { ScaleResult } from 'app/shared/models/scale-result';\nimport { AssessmentResult } from 'app/shared/models/assessment-result';\nimport { Question } from 'app/shared/models/question';\nimport { Scale } from 'app/shared/models/scale';\nimport { QuestionSet } from 'app/shared/models/question-set';\nimport { PclGraderService } from 'app/reports/services/pcl-grader.service';\n\n@Component({\n  selector: 'app-pcl-summary',\n  templateUrl: './pcl-summary.component.html'\n})\nexport class PclSummaryComponent implements OnInit {\n\n  @Input() summaryScaleResult:ScaleResult;\n  @Input() assessmentResult:AssessmentResult;\n  private _criteria:{name:string, hasPTSD:boolean, scaleResult:ScaleResult}[];\n\n  constructor(private navigator:ReportNavigatorService, private pclGrader:PclGraderService) {\n    this._criteria = [];\n  }\n\n  ngOnInit() {\n    if (this.assessmentResult) {\n      this._criteria = this.pclGrader.getPCLCriteriaFromAssessmentResult(this.assessmentResult);\n    }\n  }\n\n  get Criteria() : {name:string, hasPTSD:boolean, scaleResult:ScaleResult}[] {\n    return this._criteria;\n  }\n\n  public goToScaleResult(scaleResult:ScaleResult) {\n    if (this.navigator.hasNavigationItem(scaleResult.scale.id)) {\n      this.navigator.navigate(scaleResult.scale.id);\n    }\n  }\n\n}\n","<div class=\"row\">\n  <app-summary-scales-chart class=\"col\" \n    [showNames]=\"false\" \n    [scaleResults]=\"[summaryScaleResult]\"></app-summary-scales-chart>\n</div>\n<div class=\"row\">\n  <div class=\"col text-center criteriaContainer mt-1\" \n    [ngClass]=\"{'checked': criteria.hasPTSD}\" *ngFor=\"let criteria of Criteria\"\n    (click)=\"goToScaleResult(criteria.scaleResult)\">\n    <pcl-criteria-icon [criteria]=\"criteria.name\" [checked]=\"criteria.hasPTSD\"></pcl-criteria-icon>\n    <div class='text-center'>\n      <h4 class=\"h4-responsive mb-0\" \n        [ngClass]=\"{'color-red': criteria.hasPTSD, 'color-green': !criteria.hasPTSD}\">\n        <i *ngIf=\"!criteria.hasPTSD\" class=\"fa fa-check-circle\"></i>\n      </h4>\n      <h4 class=\"h4-responsive mb-0\"\n        [ngClass]=\"{'color-red': criteria.hasPTSD, 'color-green': !criteria.hasPTSD}\">\n        <i *ngIf=\"criteria.hasPTSD\" class=\"fa fa-remove\"></i>\n      </h4>\n    </div>\n  </div>\n</div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport enum QuestionSetType {\n    QUESTION_LIST = \"QuestionList\",\n    MULTIPLE_CHOICE_GRID = \"MultipleChoiceGrid\",\n    SINGLE_SELECT_DROPDOWN = \"SingleSelectDropdown\"\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Overlay } from '@angular/cdk/overlay';\nimport { ComponentPortal, PortalInjector } from '@angular/cdk/portal';\nimport { Inject, Injectable, InjectionToken, Injector } from '@angular/core';\nimport { defaultToastConfig, ToastConfig, ToastData, ToastType, TOAST_CONFIG_TOKEN } from './toast-config';\nimport { ToastRef } from './toast-ref';\nimport { ToastComponent } from './toast.component';\n\n// a lot of this was adapted from this medium post https://medium.com/angular-in-depth/creating-a-toast-service-with-angular-cdk-a0d35fd8cc12\n@Injectable({\n  providedIn: 'root'\n})\nexport class ToastService {\n  private lastToast: ToastRef;\n  private toastConfig: ToastConfig;\n\n  constructor(\n    private overlay: Overlay,\n    private parentInjector: Injector\n  ) {\n    // don't need to deal with any injections here.\n    this.toastConfig = defaultToastConfig;\n  }\n\n  error(message:string, title:string, options:ToastConfig) : ToastRef {\n    return this.showToastForType('danger', message, title, options);\n  }\n\n  info(message:string, title:string, options:ToastConfig) : ToastRef {\n    return this.showToastForType('info', message, title, options);\n  }\n\n  success(message:string, title:string, options:ToastConfig) : ToastRef {\n    return this.showToastForType('success', message, title, options);\n  }\n\n  warning(message:string, title:string, options:ToastConfig) : ToastRef {\n    return this.showToastForType('warning', message, title, options);\n  }\n\n  showToast(data: ToastData) : ToastRef {\n    const positionStrategy = this.getPositionStrategy();\n    const overlayRef = this.overlay.create({ positionStrategy });\n    // const overlayRef = this.overlay.create();\n\n    const toastRef = new ToastRef(overlayRef);\n    this.lastToast = toastRef;\n\n    const injector = this.getInjector(data, toastRef, this.parentInjector);\n    const toastPortal = new ComponentPortal(ToastComponent, null, injector);\n\n    overlayRef.attach(toastPortal);\n\n    return toastRef;\n   }\n\n   getInjector(data: ToastData, toastRef: ToastRef, parentInjector: Injector) {\n    const tokens = new WeakMap();\n\n    tokens.set(ToastData, data);\n    tokens.set(ToastRef, toastRef);\n\n    return new PortalInjector(parentInjector, tokens);\n   }\n\n   getPositionStrategy() {\n    const lastToastIsVisible = this.lastToast && this.lastToast.isVisible();\n    let strategy = this.overlay.position()\n      .global()\n      .right(this.toastConfig.position.right + 'px');\n    if (lastToastIsVisible) {\n      let position = this.lastToast.getPosition();\n      return strategy.top((position.top - position.height) + 'px');\n    } else {\n      return strategy.bottom(this.toastConfig.position.bottom + 'px');\n    }\n  }\n\n  private showToastForType(type:ToastType, message:string, title:string, options) {\n    let toastData = {\n      type: type\n      ,text:message\n      ,timeToDisplay: options ? options.timeToDisplay : undefined\n    };\n    return this.showToast(toastData);\n  }\n\n}\n","/*\n *   Copyright (c) 2021 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\nimport {IEnvironment} from \"./ienvironment\";\n\nexport const environment:IEnvironment = {\n  production: false\n  ,applicationLogo: \"assets/images/logo-discoverandchange.dark.png\"\n  ,applicationLogoTitle: \"Discover and Change\"\n  ,applicationTitle: \"Assessment Intake System\"\n  ,token: \"TestRandomAPIKey\"\n  ,stripePublicKey: \"pk_live_50TpAx8uK3zkIXK1SPsiSHTP\"\n  ,freeTrialPeriod: 30\n  ,stripeChargeName: \"Demo Discover and Change\"\n  ,features: {\n    // can you add a client.\n    \"client.add\": true\n    // can you add/edit see the list of assessments on the assessment admin page.\n    ,\"assessments.manage\": true\n    // does the navigation link to the assessments admin show up\n    ,\"admin.assessments.navigation\": true\n    // the link back to addo's home page.\n    ,\"addo.dashboard.admin\": true\n    // can batteries be added, displayed, managed, etc.\n    ,\"assessments.battery.manage\": true\n    // does the client edit assessment email template display\n    ,\"assessments.manage.emailtemplate\": true\n    ,\"wordpress.auth.check\": false\n    ,\"admin.shop\": false\n    ,\"admin.myaccount\": false\n    ,\"menu.contact\": false\n    ,\"menu.companies\": false\n    ,\"menu.system-overview\": false\n    ,\"menu.users\": false\n    ,\"assessments.tokens.enabled\": false\n    ,\"assessments.reports.manage\": true\n    ,\"assessments.reports.saveresult\": false\n    ,\"pdf.printing\": false\n    ,\"debug\": false\n    ,\"footer.large\": false\n    ,\"footer.copyright\": true\n  }\n  // ,apiURL: \"../api/v1/\"\n  ,apiURL: 'https://localhost:9300/apis/default/'\n  // ,apiURL: \"https://localhost:9300/interface/modules/custom_modules/oe-module-dc-assessments/public/api/v1/\"\n  // ,apiURL: \"https://api-aws-test.discoverandchange.com/api/v1/\"\n  //,apiURL: \"https://api.discoverandchange.test:8000/api/v1/\"\n  // ,apiURL: \"https://assessment-api-beta.discoverandchange.com/api/v1/\"\n  ,supportEmail: \"info@discoverandchange.com\"\n  ,supportPhone: \"(385) 233-9626\"\n  ,skinClasses: ['dc-blue-skin']\n  ,navBarClass: 'navbar-light'\n  // use the report header relative link as the base href will fix this.\n  ,reportHeaderImgURL: \"assets/images/report-header1.png\"\n  ,partners: []\n  ,disabledAssessments: []\n  ,copyrightURL: \"https://www.discoverandchange.com/\"\n  ,copyrightTitle: \"Discover and Change, Inc\"\n  ,awsCognitoConfig: {\n    enabled: false,\n    awsCognitoRegion: 'us-east-1',\n    userPool: {\n      userPoolsId:\"us-east-1_wZbWCIog6\",\n      webClientId:\"137s98m2bl96pf4ibbha49qsd4\"\n    }\n  }\n  ,smartConfig: {\n    client_id: 'PJBgflXxxoFRX13gAndq7l5QC-724-s6I8SMCUE6eDo'\n    ,scopes: 'launch user/Patient.read user/Task.read user/Questionnaire.read user/QuestionnaireResponse.read user/QuestionnaireResponse.write api:port api:oemr openid profile offline_access patient/patient.read user/reports.read patient/clients.read user/clients.read user/assignment-groups.write user/assignments.write user/assignments.write user/assessment-groups.read patient/assessment-groups.read user/assessment-groups.write user/assessments.write user/assessment-groups.write user/assessment-reports.read user/assessment-reports.write user/assessment-reports.read user/assessment-reports.write user/assessment-results.read user/assessment-results.write patient/assessment-results.write user/tags.read patient/tags.read user/message-templates.read user/assessment-users.read user/assessment-users.read user/library-assets.read user/library-assets.read patient/library-assets.read user/library-assets.write user/library-asset-results.write patient/library-asset-results.write user/library-asset-results.read user/assessments.read patient/assessments.read user/assessments.write patient/assessments.write user/assessments.read patient/assessments.read user/assessments.write user/announcements.read user/messages.write fhirUser'\n    ,clientScopes: 'fhirUser api:port api:oemr openid launch patient/Patient.read patient/Task.read patient/Task.write patient/Questionnaire.read patient/QuestionnaireResponse.read patient/QuestionnaireResponse.write'\n    ,fhirUrl: 'https://localhost:9300/apis/default/fhir'\n    ,redirectUrl: 'http://localhost:4200/'\n    ,smartStyleUrl: 'https://localhost:9300/oauth2/default/smart/smart-style'\n  }\n\n};\n\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule, NO_ERRORS_SCHEMA } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { LoginModule } from '../login/login.module';\nimport { LoginPageComponent } from './login-page/login-page.component';\nimport { AdminLoginPageComponent } from './admin-login-page/admin-login-page.component';\nimport { ThemeRoutingModule} from \"./theme-routing.module\";\nimport { SharedModule } from \"../shared/shared.module\";\nimport { PageNotFoundComponent } from \"./page-not-found/page-not-found.component\";\nimport { SsoPageComponent } from './sso-page/sso-page.component';\nimport { FooterComponent } from './footer/footer.component';\nimport { SiteContainerComponent } from './site-container/site-container.component';\nimport {MatSidenavModule} from '@angular/material/sidenav';\nimport {MatExpansionModule} from '@angular/material/expansion';\nimport { MatListModule } from '@angular/material/list';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { AdminLoginFinalizePageComponent } from './admin-login-finalize-page/admin-login-finalize-page.component';\nimport { LoginFinalizePageComponent } from './login-finalize-page/login-finalize-page.component';\nimport { StandaloneContainerComponent } from './standalone-container/standalone-container.component';\n\n@NgModule({\n  imports: [\n    RouterModule\n    // ,SidenavModule\n    // ,NavbarModule\n    // ,AccordionModule\n    // ,MDBBootstrapModulesPro\n    ,MatToolbarModule\n    ,MatSidenavModule\n    ,MatExpansionModule\n    ,MatListModule\n    ,LoginModule\n    ,SharedModule\n    ,ThemeRoutingModule\n  ],\n  declarations: [PageNotFoundComponent, LoginPageComponent, LoginFinalizePageComponent\n    , AdminLoginPageComponent, AdminLoginFinalizePageComponent, SsoPageComponent\n    , FooterComponent, SiteContainerComponent, StandaloneContainerComponent\n]\n  ,exports: [PageNotFoundComponent, FooterComponent, SiteContainerComponent, StandaloneContainerComponent]\n  , schemas: [ NO_ERRORS_SCHEMA ]\n  , providers: []\n})\nexport class ThemeModule { }\n","import { Injectable } from \"@angular/core\";\nimport { DacConfig } from \"./dac-config.service\";\nimport { SmartStyleSettings } from \"../models/SmartStyleSettings\";\n\n/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class FhirSmartStyleService {\n  private smartStyles:SmartStyleSettings;\n  constructor(private dacConfig:DacConfig) {\n\n  }\n\n  public async loadSmartStyles() {\n    if (this.dacConfig.smartConfigStyleUrl) {\n      try {\n        let response = await fetch(this.dacConfig.smartConfigStyleUrl);\n        let jsonStyles = await response.json();\n        if (jsonStyles) {\n          this.smartStyles = jsonStyles;\n          this.dacConfig.applicationLogoUrl = jsonStyles.logo_primary;\n          this.dacConfig.smartStyles = jsonStyles;\n        }\n      }\n      catch (error) {\n        console.error(error);\n      }\n    }\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from \"@angular/core\";\nimport { BehaviorSubject, Observable, Subject } from \"rxjs\";\nimport {Auth,CognitoUser} from '@aws-amplify/auth';\nimport { AuthState } from \"../models/AuthState\";\nimport { CognitoUserInterface } from \"../models/CognitoUserInterface\";\nimport { AuthStateEvent } from \"../models/AuthStateEvent\";\nimport { SignupParams } from \"../models/SignupParams\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AmplifyAuthService\n{\n  private readonly INITIAL_STATE:AuthState = AuthState.SIGN_IN;\n  private currentUser:CognitoUserInterface;\n  private currentState:AuthState;\n  private _stateChange:Subject<AuthStateEvent>;\n  constructor() {\n    this._stateChange = new BehaviorSubject<AuthStateEvent>({\n      state: this.INITIAL_STATE\n      ,user: null\n    });\n  }\n\n  public setAuthState(change:AuthStateEvent) {\n    this.currentState = change.state;\n    this.currentUser = change.user;\n    this._stateChange.next({state: this.currentState, user: this.currentUser});\n  }\n\n  /**\n   * Resets the auth state back to the initial state of the service.\n   */\n  public resetAuthState() {\n    this.setAuthState({state: this.INITIAL_STATE, user: null});\n  }\n\n  public authStateChange$() : Observable<AuthStateEvent> {\n    return this._stateChange;\n  }\n\n  public async resendSignUp(email: string) {\n    return Auth.resendSignUp(email);\n  }\n  public async signUp(user:SignupParams) {\n    return Auth.signUp(user);\n  }\n\n  public async confirmSignUp(email: string, code: string) {\n    return Auth.confirmSignUp(email, code);\n  }\n\n  public async confirmSignIn(user:CognitoUserInterface, mfaCode:string, mfaType:\"SMS_MFA\"|\"SOFTWARE_TOKEN_MFA\"|null) {\n    // we only support SMS_MFA for now\n    return Auth.confirmSignIn(user, mfaCode, mfaType);\n  }\n\n  public async forgotPassword(username:string) {\n    return Auth.forgotPassword(username);\n  }\n\n  public async forgotPasswordSubmit(username:string, forgotPasswordCode:string, newPassword:string) {\n    return Auth.forgotPasswordSubmit(username, forgotPasswordCode, newPassword);\n  }\n\n  public async completeNewPassword(user:CognitoUserInterface, newPassword:string, requiredAttributes:any) {\n    return Auth.completeNewPassword(user, newPassword, requiredAttributes)\n  }\n\n  public async signIn(username, password) {\n    return Auth.signIn(username, password);\n  }\n\n  public async signOut(settings?:{ global: boolean }) {\n    let result = await Auth.signOut(settings);\n    this.setAuthState({state:this.INITIAL_STATE});\n    return result;\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport enum SubscriptionStatus\n{\n    ACTIVE = \"active\",\n    PAST_DUE = \"past_due\",\n    UNPAID = \"unpaid\",\n    CANCELED = \"canceled\",\n    CANCEL_PROCESSING = \"cancel-processing\",\n    TERMINATED = \"terminated\",\n    TRIAL = \"trialing\",\n    TRIAL_PERIOD_ENDED = \"trial-ended\"\n};\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\nimport { LoginPageComponent } from './login-page/login-page.component';\nimport { AdminLoginPageComponent } from './admin-login-page/admin-login-page.component';\nimport { SsoPageComponent } from 'app/theme/sso-page/sso-page.component';\nimport { AdminLoginFinalizePageComponent } from './admin-login-finalize-page/admin-login-finalize-page.component';\nimport { LoginFinalizePageComponent } from './login-finalize-page/login-finalize-page.component';\n\nconst routes: Routes = [\n  // { path: 'login', component: LoginPageComponent },\n  // { path: 'loginFinalize', component: LoginFinalizePageComponent },\n  // { path: 'loginAdmin', component: AdminLoginPageComponent },\n  // { path: 'loginAdminFinalize', component: AdminLoginFinalizePageComponent },\n  // { path: 'sso', component: SsoPageComponent },\n  // { path: 'logout', redirectTo: '/', pathMatch: 'full' },\n];\n\n@NgModule({\n  imports: [\n    CommonModule\n    ,RouterModule.forChild(routes)\n  ],\n  exports: [ RouterModule ],\n  declarations: []\n})\nexport class ThemeRoutingModule { }\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport { defaultToastConfig, ToastConfig } from '../toast/toast-config';\nimport { ToastRef } from '../toast/toast-ref';\nimport { ToastService } from '../toast/toast.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AlertService {\n\n  private toasts:ToastRef[];\n\n  constructor(private toastService:ToastService) {\n    this.toasts = [];\n  }\n\n  public error(message:string, timeToDisplay?:number) : number  {\n    let title = '';\n    this.closeAllToasts();\n    let toast = this.toastService.error(message, title, this.getToastConfig(timeToDisplay));\n    return this.addToastToList(toast);\n  }\n\n  public info(message:string, timeToDisplay?:number) : number {\n    let title = '';\n    this.closeAllToasts();\n    let toast = this.toastService.info(message, title, this.getToastConfig(timeToDisplay));\n    return this.addToastToList(toast);\n  }\n\n  public clearAlert(alertId:number) {\n    if (this.toasts[alertId]) {\n      if (this.toasts[alertId].isVisible()) {\n        this.toasts[alertId].close();\n      }\n      // clear out if the toasts are not clear\n      this.toasts[alertId] = null;\n    }\n    this.clearToasts(); // clear out any toasts that no longer are visible.\n  }\n\n  public success(message:string, timeToDisplay?:number) : number {\n    let title = '';\n    this.closeAllToasts();\n    let toast = this.toastService.success(message, title, this.getToastConfig(timeToDisplay));\n    return this.addToastToList(toast);\n  }\n\n  public getAlertCount() {\n    return this.toasts.filter(t => t !== null).length;\n  }\n\n  private closeAllToasts() {\n    this.toasts.forEach((t, index) => {\n      if (t) {\n        this.toasts[index].close();\n        this.toasts[index] = null; // clear up the toasts memory\n      }\n    });\n    this.toasts = [];\n  }\n\n  private getToastConfig(timeToDisplay?:number) {\n    // copy over the properties\n    let options:ToastConfig = Object.assign({}, defaultToastConfig);\n    options.animation = Object.assign({}, defaultToastConfig.animation);\n    options.position = Object.assign({}, defaultToastConfig.position);\n    // options.positionClass = 'toast-bottom-right';\n\n    if (timeToDisplay) {\n      options.timeToDisplay = timeToDisplay;\n    }\n    return options;\n  }\n\n  private addToastToList(toast:ToastRef) : number {\n    // if we have no active alerts we will reset our list so we can start\n    // from zero here and conserve memory\n    if (this.getAlertCount() <= 0) {\n      this.toasts = [];\n    }\n    this.toasts.push(toast);\n    this.clearToasts();\n    return this.toasts.length - 1; // get our index id\n  }\n\n  private clearToasts() {\n    this.toasts.forEach((t, index) => {\n      if (t && !t.isVisible) {\n        this.toasts[index] = null; // clear up the toasts memory\n      }\n    });\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport { HTTPService } from '../../shared/services/http.service';\nimport { LibraryAsset } from '../models/library-asset';\nimport { LibraryAssetResult } from '../models/library-asset-result';\nimport { FhirService } from 'app/shared/services/fhir-service';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AssetService {\n  private readonly EXTENSION_NAME = 'openemr-dac-library-asset';\n  private _assets:LibraryAsset[];\n  private _tags:string[];\n  constructor(private _dac$http: HTTPService, private fhirService:FhirService, private dacConfig:DacConfig) { }\n\n  async getAsset(assetUuid:string) : Promise<LibraryAsset>{\n    let client = await this.fhirService.getFhirClient();\n    return client.request(\"Questionnaire?_id=\" + assetUuid + \"&questionnaire-code=\" + this.EXTENSION_NAME, {flat: true})\n\t\t.then((json) => {\n      let item = Array.isArray(json) && json.length ? json[0] : {};\n      return this.hydrateLibraryAssetFromQuestionnaireItem(item);\n\t\t});\n  }\n\n  hydrateLibraryAssetFromQuestionnaireItem(item) : LibraryAsset {\n    if (item.extension && Array.isArray(item.extension) && item.extension.length) {\n      let extension = item.extension.find(e => e.url == \"https://www.discoverandchange.com/fhir/\" + this.EXTENSION_NAME);\n      if (extension && extension.valueString) {\n        let result = JSON.parse(extension.valueString);\n        let asset = new LibraryAsset();\n        Object.assign(asset, result);\n        return asset;\n      }\n    }\n    throw new Error(\"Failed to find \" + this.EXTENSION_NAME + \" extension\");\n  }\n\n  saveAsset(asset:LibraryAsset) : Promise<LibraryAsset> {\n    return this._dac$http.post<LibraryAsset>(\"library-assets\", asset).then(result => {\n      let savedResult = new LibraryAsset();\n      Object.assign(savedResult, result);\n      return result;\n    });\n  }\n\n  getAssetResult(resultId:string) : Promise<LibraryAssetResult> {\n    return this._dac$http.get<LibraryAssetResult>(\"library-asset-results/\" + resultId).then(jsonResult => {\n      let serverResult = new LibraryAssetResult();\n      let serverAsset = new LibraryAsset();\n      Object.assign(serverResult, jsonResult);\n      if (jsonResult.asset) {\n        Object.assign(serverAsset, jsonResult.asset);\n        serverResult.asset = serverAsset;\n      }\n      return serverResult;\n    });\n  }\n\n  async saveAssetResult(result:LibraryAssetResult) {\n    // let's limit the info that is sent up\n    let client = await this.fhirService.getFhirClient();\n    let currentUser = await this.fhirService.getFhirUser();\n    let resultToSave = Object.assign(new LibraryAssetResult(), result);\n    let asset = new LibraryAsset();\n    asset.id = result.asset.id;\n    resultToSave.asset = asset;\n\n    // TODO: @adunsulag need the canonical url for this resource\n    let questionnaireResponse = {\n      resourceType: 'QuestionnaireResponse'\n      ,questionnaire: '/Questionnaire/' + result.asset.uuid\n      ,status: 'completed'\n      ,author: {\n        reference: currentUser\n      }\n      ,source: {\n        reference: currentUser\n      }\n      ,item: result.answers.map(a => {return {linkId: a.id, answer: {valueString: a.answer}};})\n      ,extension: [\n        {\n          url: \"https://www.discoverandchange.com/fhir/\" + this.EXTENSION_NAME + \"-response\"\n          ,valueString: JSON.stringify(resultToSave)\n        }\n      ]\n    };\n\n    return client.create(questionnaireResponse, {})\n    .then(createdResource => {\n      resultToSave.id = createdResource.id;\n      return resultToSave;\n    });\n  }\n\n  async getAssets() :Promise<LibraryAsset[]>{\n    if (this._assets) {\n      return Promise.resolve(this._assets);\n    }\n\n    let client = await this.fhirService.getFhirClient();\n    return client.request(\"Questionnaire?questionnaire-code=\" + this.EXTENSION_NAME, {flat: true})\n    .then(result => {\n      let items = Array.isArray(result) && result.length ? result : [];\n      return items.map(i => {\n        return this.hydrateLibraryAssetFromQuestionnaireItem(i);\n      })\n    });\n  }\n\n  searchAssets(searchString:string, selectedTag:string, assetType:'All'|'article'|'assignment'|null) {\n    return this.getAssets().then(assets => {\n      assets = assets || [];\n      if (assetType && assetType != 'All') {\n        assets = assets.filter(a => a.type == assetType);\n      }\n      if (selectedTag && selectedTag !='All') {\n        assets= assets.filter(a => a.hasTag(selectedTag));\n      }\n      if (searchString && searchString.trim() !=\"\") {\n        assets = assets.filter(a => a.titleContainsString(searchString.trim()));\n      }\n      return assets;\n    });\n  }\n\n  getTags() : Promise<string[]>{\n    if (this._tags) {\n      return Promise.resolve(this._tags);\n    }\n    return this._dac$http.get<string[]>(\"tags\").then(results => {\n      this._tags = results;\n      return results;\n    });\n  }\n\n  getAssetsByType(type:'article'|'exercise') : Promise<LibraryAsset[]> {\n    return this.getAssets().then(assets => {\n      return assets.filter(a => a.type == type);\n    });\n  }\n\n\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Variable} from '../models/variable';\nimport {AssessmentResult} from '../../shared/models/assessment-result';\nimport { IReportItemComponent } from \"app/reports/models/i-report-item-component\";\nimport { BehaviorSubject ,  Observable } from 'rxjs';\nimport { AfterViewInit, Directive } from '@angular/core';\n\n@Directive()\nexport abstract class BaseReportItemComponent implements IReportItemComponent, AfterViewInit {\n    private _loadSubject:BehaviorSubject<boolean>;\n    constructor() {\n        this._loadSubject = new BehaviorSubject<boolean>(false);\n    }\n\n    abstract setReportData(data: any, results: AssessmentResult[], variables: Variable[]);\n\n    protected notifyItemLoad() {\n        this._loadSubject.next(true);\n        this._loadSubject.complete();\n    }\n    protected notifyItemLoadFailed() {\n        this._loadSubject.next(false);\n        this._loadSubject.complete();\n    }\n\n    public ngAfterViewInit() {\n        // console.log(\"ngAfterViewInit called with \", this);\n        this.notifyItemLoad();\n    }\n    public itemLoaded() : Observable<boolean> {\n        return this._loadSubject.asObservable();\n    }\n    public getHTMLClassNames() : string[] {\n        return [];\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { HTTPService } from \"./http.service\";\nimport { AssessmentGroup } from \"../models/assessment-group\";\nimport { ManagedClient } from \"../models/managed-client\";\nimport { AssignmentHydratorService } from \"./assignment-hydrator.service\";\nimport { AssessmentTokenService } from \"./assessment-token.service\";\nimport { AssignedAssessmentGroup } from \"../models/AssignedAssessmentGroup\";\nimport { Assignment } from \"../models/Assignment\";\nimport { AssignedAssessment } from \"../models/AssignedAssessment\";\nimport { Injectable } from \"@angular/core\";\nimport { FhirService } from \"./fhir-service\";\nimport { AssessmentResult } from \"../models/assessment-result\";\nimport { Assessment } from \"../models/assessment\";\nimport { AssessmentResultAnswer } from \"../models/assessment-result-answer\";\nimport { AssignmentItem } from \"../models/AssignmentItem\";\nimport { ExternalAssignedQuestionnaire } from \"../models/ExternalAssignedQuestionnaire\";\nimport { AssignedQuestionnaire } from \"../models/AssignedQuestionnaire\";\nimport { QuestionSet } from \"../models/question-set\";\nimport { TextboxQuestion } from \"../models/textbox-question\";\n\n@Injectable()\nexport class QuestionnaireService {\n\n    private debug:boolean;\n\n    private questionnairesByUrl = {};\n    constructor(private fhirService:FhirService) {\n      this.debug = true;\n      this.questionnairesByUrl = {};\n    }\n\n    async getQuestionnaires() : Promise<any[]> {\n      let client = await this.fhirService.getFhirClient();\n      let url = \"Questionnaire\";\n      if (this.debug) {\n        url += \"?XDEBUG_SESSION=PHPSTORM\";\n      }\n      return client.request<any[]>(url, {flat: true})\n      .then(qs => {\n        qs.map(q => this.questionnairesByUrl[q.url] = q);\n        return qs;\n      });\n    }\n\n    async getQuestionnaireForUrl(url:string) : Promise<any> {\n      if (this.questionnairesByUrl[url]) {\n        return Promise.resolve(this.questionnairesByUrl[url]);\n      }\n      let client = await this.fhirService.getFhirClient();\n      let questionnaire = await client.request<any>(url);\n      if (questionnaire) {\n        this.questionnairesByUrl[url] = questionnaire;\n      }\n      return questionnaire;\n    }\n\n    async getQuestionnaire(id:string) : Promise<any> {\n      let client = await this.fhirService.getFhirClient();\n      let url = \"Questionnaire/\" + id;\n      if (this.debug) {\n        url += \"?XDEBUG_SESSION=PHPSTORM\";\n      }\n      let questionnaire = await client.request<any>(url);\n      // we want to cache this in case we are fetching it again... we have no way of knowing\n      // beforehand that the unique id matches a unique url we have already cached which is\n      // why we don't check the cache beforehand.\n      if (questionnaire) {\n        this.questionnairesByUrl[questionnaire.url] = questionnaire;\n      }\n      return questionnaire;\n    }\n\n    async saveResponse(questionnaireResponse: any) {\n\n      let client = await this.fhirService.getFhirClient();\n      let url = \"QuestionnaireResponse\";\n      if (this.debug) {\n        url += \"?XDEBUG_SESSION=PHPSTORM\";\n      }\n      /** @ts-ignore */\n      return client.create<any>(questionnaireResponse, {});\n    }\n\n    async getQuestionnairesByTitle(titles:string[]) {\n      let questionnaireTitles = Object.values(this.questionnairesByUrl).map((q:{title:string}) => q.title)\n                                  .reduce((a, b) => { a[b] = b; return a;}, {});\n      let questionnairesToFetch = titles.filter(n => questionnaireTitles[n] === undefined);\n      let client = await this.fhirService.getFhirClient();\n      let url = \"Questionnaire?title=\" + questionnairesToFetch.map(n => encodeURIComponent(n)).join(\",\");\n      if (this.debug) {\n        url += \"&XDEBUG_SESSION=PHPSTORM\";\n      }\n      /** @ts-ignore */\n      return client.request<any[]>(url, {flat: true})\n      .then(qs => {\n        qs.map(q => this.questionnairesByUrl[q.url] = q);\n        return qs;\n      });\n    }\n\n    async getPreviousQuestionnaireResponsesAsAssessmentResults(patientId, questionnaireIds:string[], maxDate:Date, limit:number = 0) : Promise<AssessmentResult[]> {\n      let client = await this.fhirService.getFhirClient();\n      limit = Math.max(limit, 0); // 0 is unlimited\n      // date\n      //       + (maxDate.getFullYear() + \"-\" + maxDate.getMonth().toFixed(2) + \"-\" + maxDate.getDate().toFixed(2)\n\n      let url = \"QuestionnaireResponse?questionnaire=\" + questionnaireIds.join(\",\") + \"&authored=lt\" + maxDate.toISOString()\n      + \"&patient=\" + patientId;\n\n      if (this.debug) {\n        url += \"&XDEBUG_SESSION=PHPSTORM\";\n      }\n      let responses = await client.request(url, {flat: true});\n      if (responses && Array.isArray(responses)) {\n        if (limit > 0 && responses.length > limit) {\n          responses = responses.slice(0, limit);\n        }\n        return await Promise.all(responses.map(r => this.convertResponseToAssessmentResult(r)));\n      }\n      return [];\n    }\n\n    async getQuestionnaireResponseAsAssessmentResult(responseId) : Promise<AssessmentResult> {\n      let response = await this.getQuestionnaireResponse(responseId);\n      return this.convertResponseToAssessmentResult(response);\n    }\n\n    private async convertResponseToAssessmentResult(response:any) {\n      let result = new AssessmentResult();\n      if (response.questionnaire) {\n        let questionnaire = await this.getQuestionnaireForUrl(response.questionnaire);\n        if (!questionnaire) {\n          console.error(\"Failed to find questionnaire for response with url \", response.questionnaire);\n        } else {\n          result.assessment = this.convertQuestionnaireToBasicAssessment(questionnaire);\n        }\n      }\n      if (response.authored) {\n        result.dateCompleted = new Date(response.authored);\n      }\n      let answers:AssessmentResultAnswer[] = [];\n      this.addAnswersToArray(response.item, answers, 0);\n      result.answers = answers;\n      let questions = result.assessment.getQuestionsListById();\n      answers.forEach(a => questions[a.question_id].setSavedAnswer(a.answer, []));\n\n      return result;\n    }\n\n    convertQuestionnaireToBasicAssessment(questionnaire:any) : Assessment {\n      let assessment = new Assessment();\n      assessment.id = questionnaire.id;\n      assessment.uid = questionnaire.title || \"\";\n      assessment.name = questionnaire.title || \"\";\n      assessment['questionnaire'] = questionnaire;\n      let rootGroup = new QuestionSet();\n      if (questionnaire.item) {\n        if (questionnaire.item && Array.isArray(questionnaire.item)) {\n          questionnaire.item.map(i => this.hydrateQuestions(assessment, rootGroup, i));\n        }\n      }\n      // either everything is in a sub-group or there are no questions so skip it.\n      if (rootGroup.questions.length > 0) {\n        assessment.addQuestionSet(rootGroup);\n      }\n      return assessment;\n    }\n\n    async hydrateQuestions(assessment:Assessment, currentGroup:QuestionSet, questionItem:any) {\n      if (questionItem.type == 'group') {\n        let newGroup = new QuestionSet();\n        newGroup.instructions = currentGroup.title;\n        if (questionItem.item && Array.isArray(questionItem.item)) {\n          questionItem.item.map(i => this.hydrateQuestions(assessment, newGroup, i));\n        }\n        assessment.addQuestionSet(newGroup);\n      } else {\n        let question = new TextboxQuestion();\n        question.prompt = questionItem.text;\n        question.id = questionItem.linkId;\n        currentGroup.addQuestion(question);\n      }\n    }\n\n\n\n    async getQuestionnaireResponse(responseId) : Promise<any> {\n      let client = await this.fhirService.getFhirClient();\n      let url = \"QuestionnaireResponse/\" + responseId + \"?\";\n      if (this.debug) {\n        url += \"XDEBUG_SESSION=PHPSTORM&\";\n      }\n      return await client.request<any>(url);\n    }\n\n    async getQuestionnaireResponsesAsAssessmentResults(qrItems:AssignmentItem[]) : Promise<AssessmentResult[]> {\n      let client = await this.fhirService.getFhirClient();\n      let url = \"QuestionnaireResponse?\";\n      if (this.debug) {\n        url += \"XDEBUG_SESSION=PHPSTORM&\";\n      }\n\n      // TODO: @adunsulag at some point we'd like to get back to having typesafety here.\n      // hashmap the ids with the items\n      let map = {};\n      qrItems.forEach(qr => {\n        if (qr.Type == \"ExternalQuestionnaire\" || qr.Type == \"Questionnaire\") {\n          map[qr.ResultId] = qr;\n        }\n      });\n      let qrIds = Object.keys(map);\n      if (!qrIds.length) {\n        return Promise.resolve([]); // nothing to return here as we have no valid items to return results for.\n      }\n      url += \"_id=\" + qrIds.join(\",\");\n      let responses = await client.request<any[]>(url);\n      // only return responses we actually have a questionnaire id to\n      return responses.filter(r => map[r.id] && map[r.id].QuestionnaireId)\n        .map(r => this.convertResponseToAssessmentResultForQuestionnaire(r, map[r.id]));\n    }\n\n    private convertResponseToAssessmentResultForQuestionnaire(r:any, item:ExternalAssignedQuestionnaire|AssignedQuestionnaire) {\n      let result = new AssessmentResult();\n      result.assessment = new Assessment();\n      result.assessment.id = item.QuestionnaireId;\n      result.assessment.name = item.Name;\n      let answers:AssessmentResultAnswer[] = [];\n      this.addAnswersToArray(r.item, answers, 0);\n      result.answers = answers;\n      return result;\n    }\n\n    private addAnswersToArray(items, answers, depthCount) {\n      if (depthCount > 50) {\n        throw new Error(\"Maximum recursion depth reached.  Likely inifinite loop\");\n      }\n      if (items && items.length) {\n        items.forEach(i => {\n\n          // if there is no answer... either they left it blank or its a grouping question.\n          if (i.answer) {\n            let answer = new AssessmentResultAnswer();\n            answer.question_id = i.linkId;\n\n            let answerValues = [];\n            i.answer.forEach(a => {\n              if (a.valueCoding) {\n                answerValues.push(a.valueCoding.display);\n              } else if (a.hasOwnProperty('valueDecimal')) {\n                answerValues.push(a.valueDecimal || 0); // if we don't have a value we are going to set it as 0.\n              } else {\n                let properties = Object.getOwnPropertyNames(a);\n                properties.forEach(p => answerValues.push(a[p]));\n              }\n            });\n            if (answerValues.length == 1) {\n              answer.answer = answerValues[0];\n            } else {\n              answer.answer = answerValues;\n            }\n            answers.push(answer);\n          }\n\n          if (i.item) { // this is plural even though the naming suggests a single.\n            this.addAnswersToArray(i.item, answers, depthCount + 1);\n          }\n        });\n      }\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class PrintSettings {\n    private _showTherapistNotes:boolean;\n    constructor() {\n        this.showTherapistNotes = false;\n    }\n\n\n\tpublic get showTherapistNotes(): boolean {\n\t\treturn this._showTherapistNotes;\n\t}\n\n\tpublic set showTherapistNotes(value: boolean) {\n\t\tthis._showTherapistNotes = value;\n\t}\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { ScaleResult } from '../../shared/models/scale-result';\nimport { CopyClipboardService } from 'app/shared/services/copy-clipboard.service';\n\n@Component({\n  selector: 'dac-scale-sub-list',\n  templateUrl: './scale-sub-list.component.html',\n  styleUrls: ['./scale-sub-list.component.scss']\n})\nexport class ScaleSubListComponent implements OnInit {\n\n  @Input(\"SubScales\") SubScales:ScaleResult[];\n\n  constructor(private copyClipboardService:CopyClipboardService) {\n    this.SubScales = [];\n  }\n\n  ngOnInit() {\n  }\n\n  public copyTable() {\n    let copyTable = [];\n    copyTable.push([\"Sub Scale\", \"Description\", \"Raw Score\",\"Range\"]);\n    if (this.SubScales.length) {\n      this.SubScales.forEach(sr => {\n        let row = [];\n        row.push(sr.scale.name ? '\"' + sr.scale.name + '\"' : '');\n        row.push(sr.scale.descriptionClient ? '\"' + sr.scale.descriptionClient + '\"' : '');\n        row.push(sr.score);\n        row.push(sr.range.name ? '\"' + sr.range.name + '\"' : '');\n        copyTable.push(row);\n      });\n    }\n    this.copyClipboardService.copyTableToText(copyTable);\n  }\n\n}\n","<div class='table table-striped col'>\n  <div class='table-header row secondary-color text-white mt-3'>\n    <div class=\"cell-data col-3\">Sub Scale</div>\n    <div class=\"cell-data col-3\">Description</div>\n    <div class=\"cell-data col-3\">Raw Score</div>\n    <div class=\"cell-data col-3\">Range <i class=\"fa fa-clipboard float-right\" (click)=\"copyTable()\" title=\"Copy Table\" alt=\"Copy Table\"></i></div>\n  </div>\n  <div *ngFor=\"let scaleResult of SubScales\" class=\"row\">\n    <div class=\"cell-data col-3\">\n      {{scaleResult.scale.name}}\n    </div>\n    <div class=\"cell-data col-3 text-small\">\n      {{scaleResult.scale.descriptionClient}}\n    </div>\n    <div class=\"cell-data col-3\">\n      {{scaleResult.score}}\n    </div>\n    <div class=\"cell-data col-3\">\n      {{scaleResult.range.name}}\n    </div>\n  </div>\n</div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, Input, OnInit } from '@angular/core';\nimport { TabsComponent } from 'app/tabs/tabs.component';\n\n@Component({\n  selector: 'dac-tab',\n  templateUrl: './tab.component.html',\n  styleUrls: ['./tab.component.scss']\n})\nexport class TabComponent implements OnInit {\n\n  @Input() heading;\n  @Input() routerLink;\n\n  public isActive:boolean;\n\n  constructor(private tabs:TabsComponent) {\n    this.isActive = false;\n    if (this.tabs) {\n      this.tabs.addTab(this);\n    }\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"tab-content card card-cascade col-12\" *ngIf=\"isActive\">\n  <div class=\"row\">\n      <div class=\"col\">\n        <ng-content></ng-content>\n      </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport enum QuestionType\n{\n    Checklist\n    ,MultipleChoice\n    ,Textbox\n    ,SingleChoice\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { DialogPosition, MatDialog, MatDialogRef, MatDialogState } from \"@angular/material/dialog\";\nimport { Observable } from \"rxjs\";\n\n/**\n * Wrapper class that proxies calls to MatDialogRef so we can swap out the Material CDK\n * components if needed in the future.\n *\n * Represents a modal reference in the system.\n */\nexport class DacModalRef<T, R = any>{\n\n  constructor(private dialogRef:MatDialogRef<T, R>) {}\n\n  /**\n     * Close the dialog.\n     * @param dialogResult Optional result to return to the dialog opener.\n     */\n   close(dialogResult?: R): void {\n     return this.dialogRef.close(dialogResult);\n   }\n   /**\n    * Gets an observable that is notified when the dialog is finished opening.\n    */\n   afterOpened(): Observable<void> {\n     return this.dialogRef.afterOpened();\n   }\n   /**\n    * Gets an observable that is notified when the dialog is finished closing.\n    */\n   afterClosed(): Observable<R | undefined> {\n     return this.dialogRef.afterClosed();\n   }\n   /**\n    * Gets an observable that is notified when the dialog has started closing.\n    */\n   beforeClosed(): Observable<R | undefined> {\n     return this.dialogRef.beforeClosed();\n   }\n   /**\n    * Gets an observable that emits when the overlay's backdrop has been clicked.\n    */\n   backdropClick(): Observable<MouseEvent> {\n     return this.dialogRef.backdropClick();\n   }\n   /**\n    * Gets an observable that emits when keydown events are targeted on the overlay.\n    */\n   keydownEvents(): Observable<KeyboardEvent> {\n     return this.dialogRef.keydownEvents();\n   }\n   /**\n    * Updates the dialog's position.\n    * @param position New dialog position.\n    */\n   updatePosition(position?: DialogPosition): this {\n     this.dialogRef.updatePosition(position);\n     return this;\n   }\n   /**\n    * Updates the dialog's width and height.\n    * @param width New width of the dialog.\n    * @param height New height of the dialog.\n    */\n   updateSize(width?: string, height?: string): this {\n    this.dialogRef.updateSize(width, height);\n    return this;\n   }\n   /** Add a CSS class or an array of classes to the overlay pane. */\n   addPanelClass(classes: string | string[]): this {\n    this.dialogRef.addPanelClass(classes);\n    return this;\n   }\n   /** Remove a CSS class or an array of classes from the overlay pane. */\n   removePanelClass(classes: string | string[]): this {\n    this.dialogRef.removePanelClass(classes);\n    return this;\n   }\n   /** Gets the current state of the dialog's lifecycle. */\n   getState(): MatDialogState {\n     // TODO: stephen it seems like we are wrapping around everything... should we wrap around\n     // the MatDialogState?  Pretty simple primitive it seems to refactor if needed...\n     return this.dialogRef.getState();\n   }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, EventEmitter, Output } from '@angular/core';\nimport { AssetService } from 'app/library-assets/services/asset.service';\nimport { LibraryAsset } from 'app/library-assets/models/library-asset';\n\n@Component({\n  selector: 'dac-asset-picker',\n  templateUrl: './asset-picker.component.html',\n  styleUrls: ['./asset-picker.component.scss']\n})\nexport class AssetPickerComponent implements OnInit {\n  private _assets:LibraryAsset[];\n  public tags:{label:string,value:string}[];\n  public hasLoaded:boolean;\n  public loadFailed:boolean;\n  private selectedTag:string;\n  private assetType:'All'|'article'|'assignment'|null;\n  private assetSearch:string;\n  @Output() selected = new EventEmitter<LibraryAsset>();\n\n  constructor(private assetService:AssetService) { }\n\n  ngOnInit() {\n    this.hasLoaded = false;\n    this.loadFailed = false;\n    let loaders = [];\n    this.tags = [{label:\"Filter by tag...\", value:\"\"}, {label:\"All\", value:\"All\"}];\n    Promise.all([this.assetService.getAssets(), this.assetService.getTags()])\n    .then((results) => {\n      let [assets, tags] = results;\n      this.hasLoaded = true;\n      this._assets = assets;\n      tags.forEach(t => this.tags.push({label:t, value:t}));\n    })\n    .catch(error => {\n      this.loadFailed = true;\n      this.hasLoaded = true;\n      console.error(error);\n    });\n  }\n\n\n\n  get Assets() {\n    return this._assets;\n  }\n\n  public searchTitle(title:string) {\n    this.assetSearch = title.trim();\n    this.runSearch();\n  }\n\n  public searchTag(tag:string) {\n    if (!tag) {\n      this.selectedTag = null;\n    }\n    else {\n      this.selectedTag = tag;\n    }\n    // we seem to be having a timing issue here on select boxes.\n    setTimeout(() => {\n      this.runSearch();\n    }, 100);\n  }\n\n  public searchType(type:'All'|'article'|'assignment') {\n    this.assetType = type;\n    // we seem to be having a timing issue here on select boxes.\n    setTimeout(() => {\n      this.runSearch();\n    }, 100); // there is a major timing i\n    // this.runSearch();\n  }\n\n  private runSearch() {\n    this.assetService.searchAssets(this.assetSearch, this.selectedTag, this.assetType)\n    .then(assets => {\n      this._assets = [];\n      assets.forEach(a => {\n        this._assets.push(a);\n      });\n      // this._assets = assets;\n    });\n  }\n\n  getRouterLink(asset:LibraryAsset) {\n    if (asset.type == 'article') {\n      return ['/admin/library/articles/' + asset.id];\n    }\n    else {\n      return ['/admin/library/exercises/' + asset.id];\n    }\n  }\n\n  public pick(asset: LibraryAsset) {\n    console.log(\"selecting \", asset);\n    this.selected.emit(asset);\n  }\n\n\n}\n","<p *ngIf=\"!hasLoaded\" class=\"alert alert-warning\">Loading...</p>\n<p *ngIf=\"hasLoaded && loadFailed\" class=\"alert alert-warning\">Failed to load homework assignments.  Check your connection or contact support.</p>\n<div *ngIf=\"hasLoaded && !loadFailed\">\n  <input class=\"form-control\" placeholder=\"Filter by name...\" (keyup)=\"searchTitle($event.target.value)\" />\n  <select (change)=\"searchTag($event.target.value)\" class=\"browser-default form-control\">\n    <option *ngFor=\"let tag of tags\" [value]=\"tag.value\">{{tag.label}}</option>\n  </select>\n  <ul class=\"list-group\" *ngIf=\"hasLoaded\">\n    <li class=\"list-group-item d-flex justify-content-between align-items-center list-group-item-action\"\n      *ngFor=\"let asset of Assets\" (click)=\"pick(asset)\">\n      <span *ngIf=\"asset.type == 'article'\"> <a class=\"badge badge-pill badge-primary mr-2\" [routerLink]=\"['/admin','library','articles',asset.id]\"><i class='fa fa-info'></i></a>{{asset.title}} <em class=\"small\">- Article</em></span>\n      <span *ngIf=\"asset.type == 'assignment'\"> <a class=\"badge badge-pill badge-primary mr-2\" [routerLink]=\"['/admin','library','exercises',asset.id]\"><i class='fa fa-info'></i></a>{{asset.title}} <em class=\"small\">- Exercise</em></span>\n      <span class=\"badge badge-primary badge-pill btn btn-sm btn-primary\" alt=\"Assign Homework\"\n        title=\"Assign Homework\">Add\n      </span>\n    </li>\n  </ul>\n</div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'dac-card',\n  templateUrl: './card.component.html',\n  styleUrls: ['./card.component.scss']\n})\nexport class CardComponent implements OnInit {\n\n  @Input() icon:string;\n  @Input() title:string;\n  @Input() color:string;\n\n  constructor() {\n    this.color = \"primary\";\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<div class=\"card card-cascade wider\">\n  <div class=\"view view-cascade gradient-card-header\" [ngClass]=\"[color +'-gradient']\">\n      <h2 class=\"card-header-title\">\n        <i *ngIf=\"icon\" class=\"fa\" [ngClass]=\"['fa-' + icon]\"></i>\n        {{title}}</h2>\n  </div>\n  <div class=\"card-body text-center\">\n    <ng-content></ng-content>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { AlertService } from '../services/alert.service';\nimport { CopyClipboardService } from '../services/copy-clipboard.service';\n\n@Component({\n  selector: 'dac-copy-clipboard',\n  templateUrl: './copy-clipboard.component.html',\n  styleUrls: ['./copy-clipboard.component.scss']\n})\nexport class CopyClipboardComponent implements OnInit, OnChanges {\n\n  @Input() content:string;\n  @Input() iconClass:string;\n\n  constructor(private copyClipboardService:CopyClipboardService) { }\n\n  ngOnInit() {\n    if (!this.iconClass) {\n      this.iconClass = \"fa-clipboard\";\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (!this.iconClass) {\n      this.iconClass = \"fa-clipboard\";\n    }\n  }\n\n  copyContent() : void {\n    this.copyClipboardService.copyText(this.content);\n  }\n\n}\n","<i class=\"fa\" [ngClass]=\"iconClass\" (click)=\"copyContent()\"></i>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, EventEmitter, Output } from '@angular/core';\n\nimport { Assessment } from '../models/assessment';\nimport { AssessmentService } from '../services/assessment.service';\nimport { AssessmentTokenService } from '../services/assessment-token.service';\nimport { AuthService } from 'app/login/services/auth.service';\nimport { Capability } from '../models/capability';\nimport { QuestionnaireService } from '../services/questionnaire.service';\n// import { Questionnaire } from 'fhir/r4';\n\n@Component({\n  selector: 'dac-assessment-picker',\n  templateUrl: './assessment-picker.component.html',\n  styleUrls: ['./assessment-picker.component.css']\n})\nexport class AssessmentPickerComponent implements OnInit {\n\n  @Output() selected = new EventEmitter<Assessment>();\n  @Output() questionnaireSelected = new EventEmitter<any>();\n  @Output() buy = new EventEmitter<Assessment>();\n  private _assessments: Assessment[];\n  private _search: string;\n  private _loadedTokens: boolean;\n  private _hasLoadedAssessments:boolean;\n  private _canBuy:boolean;\n  private _questionnaires:any[];\n\n\n  constructor(private assessmentService:AssessmentService\n  ,private assessmentTokenService:AssessmentTokenService\n  ,private authService:AuthService\n  ,private questionnaireService:QuestionnaireService) {\n    this._loadedTokens = false;\n    this._hasLoadedAssessments = false;\n  }\n\n  public get tokensEnabled() {\n    return this.assessmentTokenService.isTokensEnabled();\n  }\n\n  public get hasLoadedAssessments() {\n    return this._hasLoadedAssessments;\n  }\n\n  ngOnInit() {\n\n    this.authService.getCurrentUser().then(currentUser => {\n      this._canBuy = currentUser.hasCapability(Capability.CAN_SHOP);\n      let queries = [];\n      // queries.push(this.assessmentService.getAssessmentList());\n      queries.push(this.questionnaireService.getQuestionnaires());\n      queries.push(this.assessmentTokenService.loadAssessmentTokens());\n      Promise.all(queries)\n      .then(result => {\n        if (result[0] && result[0].length) {\n          let data = result[0];\n          this._assessments = [];\n          this._questionnaires = [];\n          data.forEach(q => {\n            if (!(q.code || Array.isArray(q.code))) {\n              return;\n            }\n            if (q.code.indexOf('openemr-dac-assessment') >= 0) {\n              let assessment = new Assessment();\n              assessment.uid = q.name;\n              assessment.name = q.title;\n              this._assessments.push(assessment);\n            } else if (q.code.indexOf('openemr-dac-library') < 0) {\n              this._questionnaires.push(q);\n            }\n          });\n        }\n        // this._assessments = result[0];\n        this._hasLoadedAssessments = true;\n        this._loadedTokens = true;\n        // this._questionnaires = result[1];\n      });\n    })\n    .catch(error => {\n      // TODO: stephen do we need to do something with the current user here?\n      console.error(error);\n    })\n  }\n\n  public getRemainingTokens(assessment:Assessment) : any {\n    if (!this._loadedTokens) {\n      return 0;\n    }\n    return this.assessmentTokenService.getRemainingTokens(assessment);\n  }\n\n  public shouldBuyTokens(assessment:Assessment) {\n    if (!this._loadedTokens) {\n      return false;\n    }\n    return this._canBuy && this.assessmentTokenService.getRemainingTokens(assessment) <= 0;\n  }\n\n  public get hasLoaded() {\n    return this._loadedTokens && this._hasLoadedAssessments;\n  }\n\n  public pickAssessment(assessment: Assessment) {\n    console.log(\"selecting \", assessment);\n    this.selected.emit(assessment);\n  }\n\n  public pickQuestionnaire(questionnaire:any) {\n    console.log(\"selecting \", questionnaire);\n    this.questionnaireSelected.emit(questionnaire);\n  }\n\n  get assessments() {\n    return this._assessments;\n  }\n\n  get questionnaires() {\n    return this._questionnaires;\n  }\n\n  get search(): string {\n    return this._search;\n  }\n\n  set search(v: string) {\n    this._search = v;\n  }\n\n  doSearch(): void {\n    alert(\"not implemented yet\");\n  }\n\n  resetSearch(): void {\n    alert(\"not implemented yet\");\n  }\n\n  enterKeySearch(event: any): void {\n      alert(\"not implemented yet\");\n    }\n\n  triggerBuy(item:Assessment) {\n    this.buy.emit(item);\n  }\n}\n","<!--<div>\n  <label>\n            <input type=\"text\" [(ngModel)]=\"search\" (keypress)=\"enterKeySearch($event)\" />\n            <input type=\"button\" value=\"Search\" (click)=\"doSearch()\" />\n            <input type=\"button\" value=\"Reset\" (click)=\"resetSearch()\" />\n        </label>\n</div>-->\n<ul class=\"list-group\" *ngIf=\"!hasLoadedAssessments\">\n  <li class=\"list-group-item d-flex justify-content-between align-items-center list-group-item-action\">\n    <span> <a class=\"badge badge-pill badge-primary mr-2\"><i class='fa fa-info'></i></a>Loading...</span>\n  </li>\n</ul>\n<ul class=\"list-group\" *ngIf=\"hasLoadedAssessments\">\n  <li class=\"list-group-item d-flex justify-content-between align-items-center list-group-item-action\"\n    *ngFor=\"let assessment of assessments\" (click)=\"pickAssessment(assessment)\">\n    <span> <a class=\"badge badge-pill badge-primary mr-2\" [routerLink]=\"['/std', 'admin','assessment','manage',assessment.uid,'view','details']\"><i class='fa fa-info'></i></a>{{assessment.name}}</span>\n    <span *ngIf=\"!hasLoaded\" class=\"badge badge-primary badge-pill\">Loading...</span>\n    <span *ngIf=\"hasLoaded && tokensEnabled && !shouldBuyTokens(assessment)\" class=\"badge badge-primary badge-pill\" alt=\"Tokens Remaining\" title=\"Tokens Remaining\">{{getRemainingTokens(assessment)}}</span>\n    <dac-buy-item-button *ngIf=\"hasLoaded && tokensEnabled && shouldBuyTokens(assessment)\" [item]=\"assessment\" (click)=\"triggerBuy($event)\" ></dac-buy-item-button>\n    <span *ngIf=\"!tokensEnabled\" class=\"badge badge-primary badge-pill btn btn-sm btn-primary\" alt=\"Pick Assessment\"\n      title=\"Assign Assessment\">Add\n    </span>\n  </li>\n  <li class=\"list-group-item d-flex justify-content-between align-items-center list-group-item-action\"\n    *ngFor=\"let questionnaire of questionnaires\" (click)=\"pickQuestionnaire(questionnaire)\">\n    <span>{{questionnaire.title}}</span>\n    <span *ngIf=\"!hasLoaded\" class=\"badge badge-primary badge-pill\">Loading...</span>\n    <span class=\"badge badge-primary badge-pill btn btn-sm btn-primary\" alt=\"Pick Assessment\"\n      title=\"Assign Assessment\">Add\n    </span>\n  </li>\n</ul>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport { Item } from '../../admin/models/item';\nimport {StripePaymentProcessor} from \"./stripe-payment-processor.service\";\nimport {HTTPService} from \"./http.service\";\nimport {AssessmentTokenService} from \"./assessment-token.service\";\nimport {Assessment} from \"../models/assessment\";\nimport {OrderService} from \"./order.service\";\n\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\nimport { Order } from '../models/order';\n\n@Injectable()\nexport class ShoppingService {\n\n  private _checkoutStatus:BehaviorSubject<string>;\n  private _cartItems:Item[];\n  private _shopItems:Item[];\n  private _singleItemCheckout:boolean;\n  private _singleItemCheckoutReturnUrl:string;\n\n  constructor(\n    private stripe:StripePaymentProcessor\n    ,private tokenService:AssessmentTokenService\n    ,private http:HTTPService\n    ,private orderService:OrderService\n    ,private dacConfig:DacConfig\n  ) {\n    this._cartItems = [];\n    this._shopItems = [];\n    this._singleItemCheckout = false;\n    this._checkoutStatus = new BehaviorSubject<string>(\"PRE_ORDER\");\n  }\n\n  public get hasItems() {\n    return this._cartItems && this._cartItems.length;\n  }\n\n  private hydrateItem(i:any) : Item{\n    if (!i) {\n      return new Item();\n    }\n    var subItems = [];\n    if (i.subItems) {\n      subItems = i.subItems.map((subItem) => this.hydrateItem(subItem))\n      .filter(i => !i.assessment_uid || this.dacConfig.isAssessmentEnabled(i.assessment_uid))\n    }\n    let item:Item = Object.assign(new Item(), i);\n    item.subItems = subItems;\n    return item;\n  }\n\n  public getItemForAssessment(item:{uid:string}) {\n    return this.getAvailableItems().then(items  => {\n      return items.find(i => i.assessment_uid == item.uid);\n    });\n  }\n\n  public getItemForAssessmentGroup(item:{id:number, name:string}) {\n    return this.getAvailableItems().then(items  => {\n      // can we really key off the name?? That seems risky...\n      return items.find(i => i.name == item.name && i.assessment_uid == null); // I don't think these are the same...?\n    });\n  }\n\n  public startSingleCheckoutOrder(checkoutReturnUrl:string) {\n    this._singleItemCheckout = true;\n    this._singleItemCheckoutReturnUrl = checkoutReturnUrl;\n  }\n\n  public isSingleCheckoutOrder() {\n    return this._singleItemCheckout;\n  }\n\n  public endSingleItemCheckout() {\n    this._singleItemCheckout = false;\n    this._singleItemCheckoutReturnUrl = null;\n    // if there is anything in the cart we want to empty it.\n    this.emptyCart();\n    this._checkoutStatus.next(\"ORDER_CANCELLED\");\n  }\n\n  public getSingleItemCheckoutReturnUrl() {\n    return this._singleItemCheckoutReturnUrl;\n  }\n\n  public getAvailableItems() : Promise<Item[]> {\n    return this.http.get<Item[]>(\"/items/\").then((responseItems) => {\n        console.log(responseItems);\n        return responseItems.map((i) => this.hydrateItem(i)).filter(i => !i.assessment_uid || this.dacConfig.isAssessmentEnabled(i.assessment_uid));\n    });\n  }\n\n  public addItemToCart(item:Item) {\n    // even though this is synchronous it could become async so we are going to promisify it.\n    return new Promise((resolve, reject) => {\n      let existingItem = this._cartItems.find((i) => i.id === item.id);\n      if (existingItem) {\n        existingItem.quantity += item.quantity;\n      }\n      else {\n        // push a copy.\n        this._cartItems.push(Object.assign(new Item(), item))\n      }\n      resolve();\n    });\n  }\n\n  public removeItemFromCart(item:Item) {\n    return new Promise((resolve, reject) => {\n      this._cartItems = this._cartItems.filter((i) => i.id !== item.id);\n      resolve();\n    });\n  }\n\n\n  get cartItems() {\n    return this._cartItems;\n  }\n\n  get cartTotal() {\n    // let sum = 0.0;\n    let sum = this._cartItems.reduce((a, b) => a + b.totalPrice, 0);\n    return +(sum).toFixed(2); // make sure we round correctly same as on server.\n  }\n\n  getCheckoutStatus() : Observable<string> {\n    return this._checkoutStatus;\n  }\n  checkout(useSavedCard:boolean) {\n\n    let items = this._cartItems.map((i) => { return {\"id\": i.id, \"quantity\":i.quantity}; });\n    this._checkoutStatus.next(\"ORDER_START\");\n    // we can't just send a raw array or else the token doesn't pass through.\n    return this.http.post<Order>(\"/orders/\", {items: items}).then((order) => {\n      console.log(\"order created\", order);\n      // return order;\n      if (order.total <= 0) {\n        return this.handleFreeOrder(order);\n      }\n      else {\n        return this.handlePaidOrder(order, useSavedCard);\n      }\n    });\n  }\n\n  handleFreeOrder(order) {\n    let data = {\n      pmtProcessorToken: \"FREE\"\n      // pmtProcessorToken: \"blah\"\n      ,orderId:order.id\n    };\n    return this.purchaseTokens(data);\n  }\n\n  handlePaidOrder(order, useSavedCard:boolean) {\n    let amount = order.total * 100;\n    this._checkoutStatus.next(\"PAYMENT_PREPARE\");\n    let stripeCharge;\n    if (useSavedCard) {\n      stripeCharge = Promise.resolve({orderId: order.id, useSavedCard:useSavedCard});\n    }\n    else {\n      stripeCharge = this.stripe.charge(amount, \"Assessments\")\n      .then((token:string) => {\n        let data = {\n          pmtProcessorToken: token\n          // pmtProcessorToken: \"blah\"\n          ,orderId:order.id\n          ,useSavedCard: useSavedCard\n        };\n        return data;\n      });\n    }\n    return stripeCharge.then((chargeData) => {\n      this._checkoutStatus.next(\"ORDER_FINALIZE\");\n      return this.purchaseTokens(chargeData);\n    });\n  }\n\n  emptyCart() {\n    this._cartItems = [];\n  }\n\n  private purchaseTokens(data) {\n    return this.http.post<{order:Order}>(\"tokens/purchase\", data).then((purchaseResult) => {\n      this._checkoutStatus.next(\"ORDER_COMPLETE\");\n      this.orderService.storeLastOrder(purchaseResult.order);\n      this.emptyCart();\n      console.log(\"purchase complete navigate to order page\");\n      return purchaseResult.order;\n    });\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit,Input, ElementRef, Output, EventEmitter } from '@angular/core';\nimport {ScaleResult} from '../../shared/models/scale-result';\nimport {ChartService} from \"../services/chart.service\";\nimport { ScaleResultColorService } from 'app/assessment-charts/services/scale-result-color.service';\nimport { BaseChartComponent } from 'app/assessment-charts/base-chart/base-chart.component';\nimport * as Chart from 'chart.js';\n\n@Component({\n  selector: 'app-scale-chart',\n  templateUrl: './scale-chart.component.html',\n  styleUrls: ['./scale-chart.component.css']\n})\nexport class ScaleChartComponent extends BaseChartComponent implements OnInit {\n  @Input(\"scale-result\") scaleResult:ScaleResult;\n  @Input(\"show-scale-name\") showScaleName:Boolean;\n  @Input(\"show-ranges\") showRanges:Boolean;\n  @Output() complete = new EventEmitter<any>();\n  private _labelData:any[];\n  private _barData:any[];\n\n  constructor(private el:ElementRef, private chartService:ChartService\n    , private scaleResultColorService:ScaleResultColorService) {\n      super(el, chartService);\n    }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n  }\n  protected handleChartAnimationComplete(e:any) {\n    var chartInstance = this.getChart(),\n        ctx = chartInstance.ctx;\n    ctx.font = Chart.helpers.fontString('16px', 700, Chart.defaults.global.defaultFontFamily);\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'bottom';\n\n    chartInstance.data.datasets.forEach(function (dataset, i) {\n        var meta = chartInstance.controller.getDatasetMeta(i);\n        meta.data.forEach(function (bar, index) {\n            var data = dataset.data[index];\n            ctx.fillText(data, bar._model.x, bar._model.y - 5);\n        });\n    });\n    this.complete.emit(e);\n  }\n\n  protected setupChartData() {\n    let barColor = \"rgba(92,141,181, .75)\";\n    let hoverBackgroundColor = \"rgba(92,141,181, .75)\";\n    if (this.scaleResult) {\n      let name = this.scaleResult.scale ? this.scaleResult.scale.name : \"Score\";\n      let score = this.scaleResult.score ? this.scaleResult.score : 0;\n      this._barData = [{data: [score], label: \"Your Score\", yAxisID:'y-axis-0', xAxisID:'x-axis-0'\n        , hoverBackgroundColor: hoverBackgroundColor, backgroundColor: barColor}];\n    }\n    else {\n      this._barData = [{data: [], label: \"Your Score\", hoverBackgroundColor: hoverBackgroundColor, backgroundColor: barColor}];\n    }\n\n    // if (this.scaleResult) {\n    //   this._labelData = [this.scaleResult.scale ? name : \"Your Score\"];\n    // }\n    // else {\n      this._labelData = [\"Your Score\"];\n    // }\n    // if (!this.showScaleName) {\n    //   this._labelData = [\"\"];\n    // }\n\n  }\n  protected getLabelData() : any {\n    return this._labelData;\n  }\n  protected getDatasets() : any {\n    return this._barData;\n  }\n\n  protected getMaxYAxisTick() : number {\n    let range = this.scaleResult.scale.getMaxRange();\n    return range ? range.rangeEnd : 1;\n  }\n\n  protected setupChartConfiguration() {\n    let configuration = super.setupChartConfiguration();\n    configuration.title = {\n      // display: this.showScaleName\n      text: this.scaleResult.scale.name\n    };\n    configuration.scales.xAxes[0].display = true; //this.showScaleName;\n    configuration.scales.xAxes[0].barPercentage = 0.25;\n    configuration.scales.xAxes[0].padding = 0;\n    configuration.scales.xAxes[0].ticks.display = false;\n    configuration.scales.xAxes[0].scaleLabel.fontSize = parseFloat(this.getComputedProperty('font-size', 12)); // get the float value\n    configuration.scales.xAxes[0].scaleLabel.display = true;\n    configuration.scales.xAxes[0].scaleLabel.labelString = \"YOUR SCORE\";\n    configuration.scales.xAxes[0].scaleLabel.fontStyle = this.getComputedProperty('font-style', 'normal');\n    configuration.scales.xAxes[0].scaleLabel.fontFamily = this.getComputedProperty('font-family', \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\");\n    // configuration.scales.xAxes[0].scaleLabel.fontWeight = this.getComputedProperty('font-weight', 400);\n    configuration.scales.xAxes[0].scaleLabel.lineHeight = this.getComputedProperty('line-height', 1.2);\n    configuration.scales.xAxes[0].scaleLabel.fontColor = this.getComputedProperty('color', '#666');\n    configuration.scales.xAxes[0].gridLines.display = false;\n\n    configuration.scales.yAxes[0].scaleLabel.display = true;\n    configuration.scales.yAxes[0].ticks.padding = 0;\n    configuration.annotation.annotations = this.setupAnnotations();\n    configuration.legend.display = false;\n    configuration.tooltips.enabled = false;\n\n\n    return configuration;\n  }\n  private getComputedProperty(property:string, defaultValue:string|number = \"\") {\n    let window = this.el.nativeElement.ownerDocument.defaultView || {};\n    let value = null;\n    if (window.getComputedStyle) {\n      value = window.getComputedStyle(this.el.nativeElement).getPropertyValue(property) || null;\n    }\n    if (value === null) {\n      value = defaultValue;\n    }\n    return value;\n  }\n\n  private setupAnnotations() : any[] {\n    let annotations = [];\n    if (this.showRanges && this.scaleResult && this.scaleResult.scale) {\n      let even = false;\n      this.scaleResult.scale.ranges.forEach((r) => {\n        even = !even;\n\n        let line = {\n          drawTime: 'afterDraw', // overrides annotation.drawTime if set\n          type: 'line',\n          mode: 'horizontal',\n          scaleID: 'y-axis-0',\n          value: r.midPoint,\n          borderColor: \"rgba(0,0,0,0)\",\n          borderWidth: 0,\n          label: {\n              backgroundColor: \"rgba(0,0,0,0)\",\n              fontColor: \"black\",\n              position: \"left\",\n              yAdjust: 10,\n              content: r.displayName,\n              enabled: true\n          },\n        }\n        annotations.push(line);\n\n        if (even) { // we are only adding even boxes as the grid lines cause problems\n          let box = {\n              drawTime: \"beforeDatasetsDraw\",\n              type: \"box\",\n              yScaleID: \"y-axis-0\",\n              yMin: r.rangeStart,\n              yMax: r.rangeEnd,\n              backgroundColor: (even) ? \"rgba(68, 170, 213, 0.1)\" : \"rgba(0,0,0,0)\",\n              borderColor: \"rgb(0, 0, 0, 0)\",\n              borderWidth: 0\n            };\n          annotations.push(box);\n        }\n      });\n    }\n    return annotations;\n  }\n\n  get hasResult() {\n    return this.scaleResult != null;\n  }\n}\n","<div *ngIf=\"hasResult\" class=\"d-flex h-100 scale-chart-container\"></div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable }             from '@angular/core';\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot }    from '@angular/router';\nimport { AuthService }            from './auth.service';\nimport { Role } from 'app/shared/models/role';\n\n@Injectable()\nexport class AuthGuardLogin implements CanActivate {\n    constructor(private authService: AuthService, private router: Router) {}\n\n      canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n        return this.authService.getCurrentUser()\n        .then(user => {\n          if (user && user.role == Role.Client) {\n            return true; // not authenticated or no user... so let's pop open our process here.\n          } else {\n            this.router.navigate(['/login'], {\n                queryParams: {\n                    return: state.url\n                    ,loginType: 2 // client\n                }\n            });\n            return false;\n          }\n\n          // // if we are on the login screen, are a client and authenticated, send them to the /assessments endpoint\n          // if (user.role === Role.Client) {\n          //   this.router.navigate(['/assessments'], {\n          //     queryParams: {\n          //         return: state.url\n          //     }\n          //   });\n          //   return false;\n          // }\n          // else {\n          //   // if we are on the login screen, are a user and authenticated, send them to the /admin endpoint\n          //     this.router.navigate(['/admin'], {\n          //       queryParams: {\n          //           return: state.url\n          //       }\n          //     });\n          //     return false;\n          // }\n        }).catch (error => {\n          // default login is to probably go to the admin login page\n          // TODO: @adunsulag do we want the default to be the patient login page?\n            this.router.navigate(['/login'], {\n              queryParams: {\n                  return: state.url\n                  ,loginType: 2 // client\n              }\n          });\n\n          return false;\n        });\n      }\n\n    canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {\n        return this.canActivate(route, state);\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport enum ErrorCode {\n    // 400 errors\n    INVALID_REQUEST = \"INVALID_REQUEST\",\n    INVALID_BILLING_CARD = \"INVALID_BILLING_CARD\",\n    DUP_ENTRY = \"DUP_ENTRY\",\n    VALIDATE_DATA_MISSING = \"VALIDATE_DATA_MISSING\",\n    VALIDATION_FAILED = \"VALIDATION_FAILED\",\n\n    // 401 errors\n    AUTHORIZATION_REQUIRED = \"AUTHORIZATION_REQUIRED\",\n    MUST_AUTHENTICATE = \"MUST_AUTHENTICATE\",\n\n    // 402 errors\n    ASSESSMENT_QUOTA_REACHED = \"ASSESSMENT_QUOTA_REACHED\",\n\n    // 404 errors\n    RECORD_NOT_FOUND = \"RECORD_NOT_FOUND\",\n\n    // 500 errors\n    SYSTEM_ERROR = \"SYSTEM_ERROR\",\n    RECORD_CREATE_FAILED = \"RECORD_CREATE_FAILED\",\n}\n\nexport class ErrorCodeStatus {\n    private codeMap:any;\n    static instance:ErrorCodeStatus;\n\n    constructor() {\n        this.codeMap = {};\n        this.codeMap[ErrorCode.DUP_ENTRY] = 400;\n        this.codeMap[ErrorCode.INVALID_REQUEST] = 400;\n        this.codeMap[ErrorCode.VALIDATE_DATA_MISSING] = 400;\n        this.codeMap[ErrorCode.VALIDATION_FAILED] = 400;\n        this.codeMap[ErrorCode.INVALID_BILLING_CARD] = 400;\n        this.codeMap[ErrorCode.AUTHORIZATION_REQUIRED] = 401;\n        this.codeMap[ErrorCode.MUST_AUTHENTICATE] = 401;\n        this.codeMap[ErrorCode.ASSESSMENT_QUOTA_REACHED] = 402;\n        this.codeMap[ErrorCode.RECORD_NOT_FOUND] = 404;\n        this.codeMap[ErrorCode.SYSTEM_ERROR] = 500;\n        this.codeMap[ErrorCode.RECORD_CREATE_FAILED] = 500;\n    }\n    static getStatusForErrorCode(code:ErrorCode) : number {\n        if (!ErrorCodeStatus.instance) {\n            ErrorCodeStatus.instance = new ErrorCodeStatus();\n        }\n\n        let status = ErrorCodeStatus.instance.codeMap[ErrorCode.SYSTEM_ERROR];\n        if (ErrorCodeStatus.instance.codeMap[code]) {\n            status =  ErrorCodeStatus.instance.codeMap[code];\n        }\n        return status;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Assignment } from \"../models/Assignment\";\nimport { AssignedAssessmentGroup } from \"../models/AssignedAssessmentGroup\";\nimport { AssignedAssessment } from \"../models/AssignedAssessment\";\nimport { Injectable } from \"@angular/core\";\nimport { AssignedLibraryAsset } from \"../models/AssignedLibraryAsset\";\nimport { AssignmentSingle } from \"../models/AssignmentSingle\";\nimport { AssignedQuestionnaire } from \"../models/AssignedQuestionnaire\";\nimport { AssignedTemplateProfile } from \"../models/AssignedTemplateProfile\";\nimport { AssignmentItem } from \"../models/AssignmentItem\";\n\n@Injectable()\nexport class AssignmentHydratorService\n{\n\n\tpublic hydrateAssignment(record:any) : Assignment\n\t{\n\t\tlet assignment:Assignment;\n\t\tif (record.type == \"AssessmentGroup\") {\n\t\t\tassignment = Object.assign(new AssignedAssessmentGroup(), record) as AssignedAssessmentGroup;\n      assignment.Items = record.items.map(i => this.hydrateAssignmentItem(i));\n\t\t}\n    else if (record.type == 'TemplateProfile') {\n      assignment = Object.assign(new AssignedTemplateProfile(), record) as AssignedTemplateProfile;\n      assignment.Items = record.items.map(i => this.hydrateAssignmentItem(i));\n    }\n\t\telse {\n\t\t\tassignment = Object.assign(new AssignmentSingle(), record);\n\t\t\tlet recordItem = record.items && record.items.length ? record.items[0] : {};\n\t\t\tlet item = this.hydrateAssignmentItem(recordItem);\n\t\t\tassignment.Items = [item];\n\t\t}\n\t\treturn assignment;\n\t}\n\n  private hydrateAssignmentItem(recordItem:any) : AssignmentItem {\n    let item;\n\t\t\tif (recordItem.type == \"Assessment\")\n\t\t\t{\n\t\t\t\titem = Object.assign(new AssignedAssessment(), recordItem);\n\t\t\t}\n\t\t\telse if (recordItem.type == \"LibraryAsset\")\n\t\t\t{\n\t\t\t\titem = Object.assign(new AssignedLibraryAsset(), recordItem);\n\t\t\t}\n      else if (recordItem.type == \"Questionnaire\")\n      {\n        item = Object.assign(new AssignedQuestionnaire(), recordItem);\n      }\n\t\t\telse {\n\t\t\t\tconsole.error(\"Failed to find valid assignment \", recordItem);\n\t\t\t\titem = Object.assign(new AssignedAssessment(), recordItem); // default it to an assessment\n\t\t\t}\n      return item;\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport {Company } from \"../models/company\";\nimport { User } from \"../models/user\";\n// TODO: stephen only used for mocking the service right now...\nimport {UserService} from \"./user.service\";\nimport { HTTPService } from 'app/shared/services/http.service';\n\nclass CompanyUserStatistic {\n    role_name:string;\n    role_id:number;\n    username:string;\n    id:number;\n    client_count:number;\n}\n\n@Injectable()\nexport class CompanyService {\n\n    constructor(private userService:UserService, private http:HTTPService) {\n    }\n\n    getCompany(id:number) {\n        return this.http.get<Company>(\"/admin/companies/\" + id + \".json\").then((data) => {\n            return this.hydrateCompanyFromData(data);\n        });\n    }\n\n    getCompanies() : Promise<Company[]> {\n        return this.http.get<{results:Company[]}>(\"/admin/companies\", {limit: 1000}).then((data) => {\n            if (!(data.results && data.results.length)) {\n                return [];\n            }\n            return data.results.map(r => this.hydrateCompanyFromData(r));\n        });\n    }\n\n    getUserStatistics(companyId:number) : Promise<CompanyUserStatistic[]> {\n        return this.http.get<CompanyUserStatistic[]>(\"/admin/companies/\" + companyId + \"/users\").then((data) => {\n            return data;\n        });\n    }\n\n    getOrderStatistics(companyId:number) : Promise<{orders:number, failedOrders:number, revenueAverage:number, revenue:number}[]> {\n        return this.http.get<{orders:number, failedOrders:number, revenueAverage:number, revenue:number}[]>(\"/admin/companies/\" + companyId + \"/orders\").then((data) => {\n            return data;\n        });\n    }\n\n    createCompany(company:Company) : Promise<Company> {\n        // TODO: stephen need to handle the new user password\n      return this.http.post<Company>(\"/admin/companies\", company).then((data) => {\n        return this.hydrateCompanyFromData(data);\n      });\n    }\n\n    registerNewCompany(company:Company, authToken:string) : Promise<Company>{\n      // TODO: stephen need to handle the new user password\n      return this.http.post<Company>(\"/companies\", {company: company, authToken:authToken}).then((data) => {\n        return this.hydrateCompanyFromData(data);\n      });\n    }\n\n    saveAccountOwnerCompany(company:Company) {\n\n        return this.http.post<Company>(\"/companies/\" + company.id + \".json\", company).then((data) => {\n            return this.hydrateCompanyFromData(data);\n        });\n    }\n\n    getAccountOwnerCompany(id:number) {\n        return this.http.get<Company>(\"/companies/\" + id + \".json\").then((data) => {\n            return this.hydrateCompanyFromData(data);\n        });\n    }\n\n    private hydrateCompanyFromData(record:any) {\n        let company = new Company();\n        Object.assign(company, record);\n        company.email = record._primaryContactEmail;\n        let user = new User();\n        Object.assign(user, record._user);\n        company.user = user;\n        return company;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { ComponentType } from '@angular/cdk/portal';\nimport { Injectable } from '@angular/core';\nimport {MatDialog, MatDialogConfig} from '@angular/material/dialog';\nimport { DacModalRef } from '../models/DacModalRef';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ModalService {\n\n  constructor(private dialog: MatDialog) {\n\n  }\n\n  openDialog<T, D=any,R=any>(component: ComponentType<T>, data?:D) : DacModalRef<T, R> {\n    let config:MatDialogConfig = {\n      data: data\n    };\n    const dialogRef = this.dialog.open(component, config);\n    let dacRef = new DacModalRef(dialogRef);\n    return dacRef;\n  }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n// ./app/shared/if.directive.ts\nimport { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core';\nimport { DacConfig } from \"../services/dac-config.service\";\n\n@Directive({ selector: '[ifFeatureEnabled]' })\nexport class IfFeatureEnabled {\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainer: ViewContainerRef,\n    private dacConfig: DacConfig\n    ) { }\n\n  @Input() set ifFeatureEnabled(feature: string) {\n    if (this.dacConfig.isFeatureEnabled(feature)) {\n      // If condition is true add template to DOM\n      this.viewContainer.createEmbeddedView(this.templateRef);\n    } else {\n     // Else remove template from DOM\n      this.viewContainer.clear();\n    }\n  }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { HTTPService } from \"./http.service\";\nimport { AssessmentGroup } from \"../models/assessment-group\";\nimport { ManagedClient } from \"../models/managed-client\";\nimport { AssignmentHydratorService } from \"./assignment-hydrator.service\";\nimport { AssessmentTokenService } from \"./assessment-token.service\";\nimport { AssignedAssessmentGroup } from \"../models/AssignedAssessmentGroup\";\nimport { Assignment } from \"../models/Assignment\";\nimport { AssignedAssessment } from \"../models/AssignedAssessment\";\nimport { Injectable } from \"@angular/core\";\n\n@Injectable()\nexport class AssignmentService {\n    constructor(private _dac$http: HTTPService\n        ,private assignmentHydrator:AssignmentHydratorService\n        ,private tokenService:AssessmentTokenService) {\n\n    }\n\n    createClientGroupAssignment(client: ManagedClient, group: AssessmentGroup, appointmentId?:string) : Promise<Assignment> {\n\t\treturn this._dac$http.post<{assignment:Assignment}>(\"clients/\" + client.id + \"/assignment-groups\", {id: group.Id, appointmentId:appointmentId, profileId: group.ProfileId})\n\t\t\t.then((response) => {\n        let serverAssignment = this.assignmentHydrator.hydrateAssignment(response.assignment) as AssignedAssessmentGroup;\n\t\t\t\treturn serverAssignment;\n\t\t\t});\n\t}\n\n\tsaveClientAssignment(client: ManagedClient, assignment: Assignment) : Promise<Assignment> {\n\t\tif (assignment.Id) {\n\t\t\treturn this.updateClientAssignment(client, assignment);\n\t\t}\n\t\telse {\n\t\t\treturn this.createClientAssignment(client, assignment);\n\t\t}\n\t}\n\tremoveClientAssignment(client: ManagedClient, assignment: Assignment)  : Promise<Assignment> {\n\t\treturn this._dac$http.delete(\"clients/\" + client.id + \"/assignments/\" + assignment.Id).then((response) => {\n      if (assignment.Type == 'Assessment') {\n        let item = assignment.Items[0] as AssignedAssessment;\n        this.tokenService.freeToken(item.Uid);\n      }\n\t\t\treturn assignment;\n\t\t});\n  }\n\n  private createClientAssignment(client: ManagedClient, assignment: Assignment) : Promise<Assignment> {\n\t\treturn this._dac$http.post<{assignment: Assignment}>(\"clients/\" + client.id + \"/assignments\", assignment)\n\t\t\t.then((response) => {\n\t\t\t\tlet serverAssignment = this.assignmentHydrator.hydrateAssignment(response.assignment) as Assignment;\n\t\t\t\treturn serverAssignment;\n\t\t\t});\n\t\t// TODO: stephen need to handle errors here.\n\t}\n\n\tprivate updateClientAssignment(client: ManagedClient, assignment: Assignment) : Promise<Assignment> {\n\t\treturn this._dac$http.post(\"clients/\" + client.id + \"/assignments/\" + assignment.Id, assignment)\n\t\t\t.then((serverResponse) => {\n\t\t\t\t// TODO: stephen anything we need to do w/ the server response?\n\t\t\t\treturn assignment;\n\t\t\t});\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { User } from '../../shared/models/user';\nimport { UserService } from '../../shared/services/user.service';\n\n@Component({\n  selector: 'username-checker',\n  templateUrl: './username-checker.component.html',\n  styleUrls: ['./username-checker.component.css']\n})\nexport class UsernameCheckerComponent implements OnInit {\n  public usernameDuplicate:boolean;\n  public usernameValid:boolean;\n  @Input() user:User;\n\n  constructor(private userService:UserService) {\n    this.usernameDuplicate = false;\n    this.usernameValid = false;\n  }\n\n  ngOnInit() {\n  }\n\n  checkUsername(newUsername:string) {\n    this.user.username = newUsername;\n    // TODO: stephen need to add some debounce stuff in here...\n    this.userService.isDuplicateUsername(this.user.username).then((isDuplicate) => {\n      this.usernameDuplicate = false;\n      this.usernameValid = false;\n      if (isDuplicate) {\n        this.usernameDuplicate = true;\n      }\n      else {\n        this.usernameValid = true;\n      }\n    });\n  }\n\n\n}\n","<input class=\"form-control\" #username \n  id=\"username\" type=\"text\" (keyup.enter)=\"checkUsername(username.value)\"\n  (blur)=\"checkUsername(username.value)\" />\n<p class=\"alert alert-success\" *ngIf=\"usernameValid\">Username is available!</p>\n<p class=\"alert alert-danger\" *ngIf=\"usernameDuplicate\">Username is not available.</p>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\nimport { FhirClientComponent } from './fhir-client/fhir-client.component';\n\nconst routes: Routes = [\n  { path: 'debug', pathMatch: 'full', redirectTo: 'fhirClient' },\n  { path: 'fhirClient', component: FhirClientComponent},\n];\n\n@NgModule({\n  imports: [\n    CommonModule\n    ,RouterModule.forChild(routes)\n  ],\n  exports: [ RouterModule ],\n  declarations: []\n})\nexport class DebugRoutingModule { }\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Question} from \"./question\";\nimport { QuestionSetLabel } from \"./question-set-label\";\nimport { Utility } from \"app/shared/models/utility\";\n\nexport abstract class ListQuestion extends Question {\n    private _customLabels:QuestionSetLabel[];\n\n    public constructor() {\n        super();\n        this._customLabels = [];\n    }\n\n    public get CustomLabels() {\n        return this._customLabels;\n    }\n    public set CustomLabels(v:QuestionSetLabel[]) {\n        this._customLabels = v;\n    }\n\n    public addLabel(lbl:QuestionSetLabel) {\n        this._customLabels.push(lbl);\n    }\n\n    public removeLabel(lbl:QuestionSetLabel) {\n        this._customLabels = this._customLabels.filter(l => l.id != lbl.id);\n    }\n\n    public shiftUpLabel(lbl:QuestionSetLabel) {\n        Utility.shiftCollectionUp(this._customLabels, lbl);\n    }\n\n    public shiftDownLabel(lbl:QuestionSetLabel) {\n        Utility.shiftCollectionDown(this._customLabels, lbl);\n    }\n\n    public abstract get answerDisplayText();\n\n\tpublic abstract get answerForSave();\n\n\tpublic abstract setSavedAnswer(data:any, labels:QuestionSetLabel[]);\n\n\tpublic abstract hasAnswer(answer:any);\n\n\tpublic abstract get isFilledOut() : boolean;\n\n}","/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n\nimport { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { FhirService } from \"app/shared/services/fhir-service\";\nimport { AuthService } from \"../services/auth.service\";\nimport { Role } from \"app/shared/models/role\";\n\n@Component({\n  selector: 'app-admin-login-finalize',\n  templateUrl: './admin-login-finalize.component.html'\n})\nexport class AdminLoginFinalizeComponent implements OnInit {\n\n  private _errorMessage;\n\n  constructor(private fhirService:FhirService, private router:Router, private authService:AuthService) {\n  }\n\n  public get hasError() {\n    return this.errorMessage != null;\n  }\n\n  public get errorMessage() {\n    return this._errorMessage;\n  }\n\n  async ngOnInit(): Promise<void> {\n    try {\n      let client = await this.fhirService.fhirClientReady();\n      if (!client) {\n        throw new Error(\"client was not returned from clientReady\");\n      }\n      await this.fhirService.loadFhirStylesFromClient(client);\n      let redirectUrl = '/'; // let default be go back and let the route guard send to the admin page or the regular page now that we are ready\n      let dcUrl = sessionStorage.getItem(\"dc-return-url\");\n      if (dcUrl) {\n        sessionStorage.removeItem('dc-return-url'); // remove it so we don't have the chance of using it again.\n      }\n      let intent = this.fhirService.getIntentFromClient(client);\n      let appointment = this.fhirService.getFhirContextFromClient(client, 'Appointment');\n\n      // we are only going to have an intent for ehr-launch and the intent takes priority over any\n      // direct linkage.\n      if (intent) {\n          // see if we can get an intent out of this\n          if (intent === 'patient.demographics.dialog' || intent === 'encounter.forms.dialog')\n          {\n            // admin side and we are going to launch into our admin view page\n            if (client && client.patient && client.patient.id) {\n              redirectUrl = \"/ehr/admin/client/\" + client.patient.id;\n            }\n        } else if (intent == 'appointment.edit.dialog' && client && client.patient && appointment) {\n          redirectUrl = \"/ehr/admin/client-appointment/\" + client.patient.id;\n        }\n      }\n\n      if (dcUrl) {\n        redirectUrl = dcUrl;\n      } else {\n          // no intent and no url to return to... standard login so lets' go to our regular locations.\n          let user = await this.authService.getCurrentUser()\n          if (user.role == Role.Client) {\n            redirectUrl = \"/std/assessments/dashboard\";\n          } else if (user.role < Role.Client) {\n            redirectUrl = \"/std/admin/client\";\n          }\n      }\n      this.router.navigateByUrl(redirectUrl);\n    }\n    catch (error) {\n      if (error.needsAuthentication) {\n        // somehow they cancelled the navigation or need to go back.. relaunch the nnavigation window\n        this.router.navigate([\"loginAdmin\"]);\n      } else {\n        this._errorMessage = error.message;\n      }\n    }\n  }\n}\n","<div class=\"alert alert-error\" *ngIf=\"hasError\">\n  {{errorMessage}}\n</div>\n<div class=\"alert alert-info\" *ngIf=\"!hasError\">\n  Processing login.\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class Utility {\n\n\tstatic shiftCollectionUp(collection:any[], item:any) {\n\t\tlet index = collection.indexOf(item);\n\t\tif (index <= 0) {\n\t\t\treturn; // already at the highest 'to the user' point\n\t\t}\n\n\t\t// now add the label up.\n\t\tcollection.splice(index, 1);\n\t\tcollection.splice(index-1, 0, item);\n\t}\n\n\tstatic shiftCollectionDown(collection:any[], item:any) {\n\t\tlet index = collection.indexOf(item);\n\t\tif (index >= collection.length - 1) {\n\t\t\treturn; // already at the maximum\n\t\t}\n\n\t\tif (index >= 0) {\n\t\t\tcollection.splice(index, 1);\n\t\t\tcollection.splice(index+1, 0, item);\n\t\t}\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input, OnDestroy, ChangeDetectorRef } from '@angular/core';\nimport {AuthService} from \"../services/auth.service\";\nimport {Router, ActivatedRoute} from \"@angular/router\";\nimport { AlertService } from 'app/shared/services/alert.service';\nimport { Subscription } from 'rxjs';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\n// import { AmplifyAuthService } from '../services/amplify-auth-service';\nimport { AuthState } from '../models/AuthState';\nimport { CognitoUserInterface } from '../models/CognitoUserInterface';\nimport { FhirService } from 'app/shared/services/fhir-service';\n\n@Component({\n  selector: 'app-admin-login',\n  templateUrl: './admin-login.component.html',\n  styleUrls: ['./admin-login.component.scss']\n})\nexport class AdminLoginComponent implements OnInit,OnDestroy {\n\n  private returnUrl: string = '';\n  private _user:CognitoUserInterface;\n  private _authState:string;\n  private _authSubscription:Subscription;\n\n  @Input() disableRegistration:boolean;\n\n  constructor(\n    private router:Router\n    ,private route:ActivatedRoute\n    ,private authService:AuthService\n    ,private fhirService:FhirService\n  ) {\n    // TODO: @adunsulag how to handle the refresh token\n\n    this._authSubscription = this.authService.authStateChange$().subscribe(authState => {\n      console.log(\"Auth state is \", authState);\n      this._authState = authState.state;\n      if (this._authState === AuthState.SIGNED_IN) {\n        // either going back to the original requested url or going to the dashboard.\n        this.router.navigateByUrl(this.returnUrl);\n      }\n      this._user = authState.user;\n    });\n  }\n\n  get user() : CognitoUserInterface {\n    return this._user;\n  }\n\n  ngOnInit() {\n    let loginType = this.route.snapshot.queryParams['loginType'] || 1;\n    // TODO: @adunsulag if we are already authorized we want to skip this step.\n    if (loginType == 1) {\n      this.fhirService.authorizeUserAdmin('/loginFinalize');\n    } else {\n      this.fhirService.authorizeClient('/loginFinalize');\n    }\n    // this.route.queryParams\n    //   .subscribe(params => this.returnUrl = params['return'] || '/admin/');\n  }\n\n  ngOnDestroy() {\n    if (this._authSubscription) {\n      this._authSubscription.unsubscribe();\n    }\n  }\n\n  public get authState() {\n    return this._authState;\n  }\n\n  public isForgotPassword() {\n    return this._authState == AuthState.FORGOT_PASSWORD;\n  }\n\n  public isRequireNewPassword() {\n    return this._authState == AuthState.REQUIRE_NEW_PASSWORD;\n  }\n\n  public isSignIn() {\n    return this._authState == AuthState.SIGN_IN;\n  }\n\n  public isConfirmSignIn() {\n    return this._authState == AuthState.CONFIRM_SIGN_IN;\n  }\n}\n","<!-- <dac-forgot-password *ngIf=\"isForgotPassword()\" [user]=\"user\"></dac-forgot-password>\n<dac-require-new-password *ngIf=\"isRequireNewPassword()\" [user]=\"user\"></dac-require-new-password>\n<dac-sign-in *ngIf=\"isSignIn()\"></dac-sign-in>\n<dac-confirm-sign-in *ngIf=\"isConfirmSignIn()\" [user]=\"user\"></dac-confirm-sign-in> -->\n\n<p class=\"alert alert-info\">Loading Login Authorization Form</p>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { SubscriptionPlanUnitType } from \"./subscription-plan-unit-type\";\n\nexport class SubscriptionPlan {\n    id:number;\n    name:string;\n    amountPerUnit:number;\n    unitType:SubscriptionPlanUnitType;\n\n    public getUnitTypeNameForQuantity(quantity:number) {\n        if (quantity == 1 && this.unitType.endsWith(\"s\")) {\n            return this.getSingularUnitType();\n        }\n        return this.unitType;\n    }\n    public getSingularUnitType() {\n        return this.unitType.substring(0, this.unitType.length - 1);\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {UniqueIdService} from '../../../shared/services/unique-id.service';\nimport {Variable} from '../../models/variable';\nimport {AssessmentResult} from '../../../shared/models/assessment-result';\nimport { Component, OnInit } from '@angular/core';\nimport { ScaleResult } from 'app/shared/models/scale-result';\nimport { Assessment } from 'app/shared/models/assessment';\nimport { Question } from 'app/shared/models/question';\nimport { ReportNavigationItem } from 'app/reports/models/report-navigation-item';\nimport { BaseReportItemComponent } from 'app/reports/models/base-report-item-component';\n\n@Component({\n  selector: 'app-flagged-questions-list',\n  templateUrl: './flagged-questions-list.component.html'\n})\nexport class FlaggedQuestionsListComponent extends BaseReportItemComponent implements OnInit {\n\n  private _itemTitle:string;\n  private _itemId:string;\n  private _scales_per_page:number;\n  private _assessments:Assessment[];\n  private _questionsByAssessments:Map<Assessment, Question[]>;\n  private _description:string;\n\n  constructor() {\n    super();\n    this._questionsByAssessments = new Map<Assessment, Question[]>();\n  }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n\n  /**\n   * data => {\n   * 'assessments' => [\n   *   'assessment: 'dass-21', 'scale': '88....'\n   *  ]\n   * }\n   * @param data\n   * @param results\n   * @param variables\n   */\n  public setReportData(data:any, results:AssessmentResult[], variables:Variable[]) {\n    if (!data || !results) {\n      return;\n    }\n    this._itemTitle = data.title;\n    this._description = data.description;\n\n    if (data.assessments) {\n      this._assessments = [];\n      let assessments = data.assessments.forEach(c => {\n        let result = results.find(r => r.assessment.uid == c);\n        if (!result) {\n          return;\n        }\n        let questions = result.assessment.getFlaggedQuestions();\n        if (questions.length) {\n          this._questionsByAssessments.set(result.assessment, questions);\n          this._assessments.push(result.assessment);\n        }\n      });\n    }\n  }\n\n  public shouldPrintBreak(index:number) {\n    // since index is 0 based the the user scales per page is 1 based we convert.\n    return ((index + 1) == this._scales_per_page);\n  }\n\n  get ScalesPerPage() {\n    return this._scales_per_page;\n  }\n\n  get Assessments() {\n    return this._assessments;\n  }\n\n  public getQuestionsForAssessment(assessment:Assessment) {\n    return this._questionsByAssessments.get(assessment);\n  }\n\n  get hasFocusQuestions() {\n    return this._questionsByAssessments.size > 0;\n  }\n\n  get description() {\n    return this._description;\n  }\n  get title() {\n    return this._itemTitle;\n  }\n}\n","<div class=\"card card-wider card-cascade\">\n    <div class=\"view gradient-card-header primary-gradient text-light\">\n        <h3 class='h3-responsive text-center'>{{title}}</h3>\n    </div>\n    <div class=\"card-body\">\n        <div *ngIf=\"description\" [innerHTML]=\"description\"></div>\n        <div *ngIf=\"!hasFocusQuestions\" class=\"card card-cascade wider\">\n            <div class=\"view gradient-card-header secondary-gradient text-light\">\n                <h3 class='h3-responsive text-center'>Items of Concern</h3>\n            </div>\n            <div class=\"card-body\">\n                    <p>This client has no items of concern to address.</p>\n            </div>\n        </div>\n        <div class=\"card card-cascade wider d-print-visible-block page-break-inside-avoid\" *ngFor=\"let assessment of Assessments\">\n            <div class=\"view gradient-card-header secondary-gradient text-light\">\n                <h3 class='h3-responsive text-center'>{{assessment.name}}</h3>\n            </div>\n            <div class=\"card-body pt-1\">\n                <app-scale-questions-list [Questions]=\"getQuestionsForAssessment(assessment)\"></app-scale-questions-list>\n            </div>\n        </div>\n    </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup, ValidatorFn, Validators } from '@angular/forms';\nimport { ActivatedRoute, Route } from '@angular/router';\nimport { AlertService } from 'app/shared/services/alert.service';\nimport { UniqueIdService } from 'app/shared/services/unique-id.service';\nimport { LibraryAsset } from '../models/library-asset';\nimport { AssetService } from '../services/asset.service';\n\nfunction tagValidator(control: AbstractControl): {[key: string]: any} | null {\n    let value = control.value || \"\";\n    if (value !== \"\") {\n      let list = value.trim().split(\",\").map(v => v.trim()).filter(v => v != \"\");\n      if (list.length < 0) {\n        return {'tags': 'Tags must be a comma separated list with values'};\n      }\n    }\n    return null;\n}\n\n@Component({\n  selector: 'dac-asset-new',\n  templateUrl: './asset-new.component.html',\n  styleUrls: ['./asset-new.component.scss']\n})\nexport class AssetNewComponent implements OnInit {\n\n  public assetForm:FormGroup;\n  private assetTypes = ['assignment', 'article'];\n  private assetType:'assignment'|'article';\n  public isSaving:boolean;\n\n  constructor(private formBuilder:FormBuilder, private assetService:AssetService\n    , private route:ActivatedRoute\n    , private alertService:AlertService\n    , private uuidService: UniqueIdService) {\n    this.isSaving = false;\n    this.assetForm = this.formBuilder.group({\n      title: [null, Validators.required],\n      description: [null, Validators.required],\n      type: [this.assetTypes[0], Validators.required],\n      originalCreator: [null, Validators.required],\n      creatorLink: [null, Validators.required],\n      content: [null, Validators.required],\n      journal: [],\n      tags: [null, tagValidator]\n    });\n  }\n\n  ngOnInit(): void {\n    this.route.params.subscribe(params => {\n      let type = params.type || this.assetTypes[0];\n      if (type == 'exercises') {\n        type = this.assetTypes[0];\n      } else {\n        type = this.assetTypes[1];\n      }\n      this.assetType = type;\n    });\n  }\n\n  public save() {\n    this.isSaving = true;\n    let values = this.assetForm.value;\n    let tags = this.assetForm.value.tags || \"\";\n    let tagList = tags.split(\",\").map(v => v.trim()).filter(v => v != \"\");\n\n\n    // now we need to generate any asset ids if we have them.\n    let saveData = Object.assign(new LibraryAsset(), values);\n    let template = document.createElement('template');\n    template.innerHTML = saveData.content;\n    let answers = template.content.querySelectorAll('.exercise-answer');\n    if (answers && answers.length) {\n      // we don't support IE11 anymore so this is safe.\n      answers.forEach((el) => {\n        if (!el.hasAttribute('id'))\n        {\n          el.id = saveData.getAnswerIdPrefix() + this.uuidService.generate();\n        }\n      });\n      // now grab the updated content and lets store it off\n      // server will sanitize this in case there's any junk here.\n      saveData.content = template.innerHTML;\n    }\n\n    saveData.tags = tagList;\n    saveData.type = this.assetType;\n    this.alertService.info(\"Saving \" + saveData.title);\n    this.assetService.saveAsset(saveData).then(result => {\n      this.isSaving = false;\n      this.alertService.success(saveData.title + \" has saved\");\n    })\n    .catch(error => {\n      this.alertService.error(saveData.title + \" failed to save\");\n      console.error(error);\n      this.isSaving = false;\n    });\n  }\n\n}\n","<div class=\"row\">\n  <div class=\"col-1\">\n    <app-back-button></app-back-button>\n  </div>\n  <div class=\"col\">\n    <h2 class=\"h2-responsive text-center\">New Asset</h2>\n  </div>\n</div>\n<div class=\"row\">\n  <div class=\"col\">\n    <div class=\"card card-cascade narrower\">\n        <div class=\"view gradient-card-header primary-gradient text-light\">\n            <h3 class='h3-responsive text-center'>{{assetForm.get('title')?.value}}</h3>\n        </div>\n        <div class=\"card-body\">\n          <form [formGroup]=\"assetForm\">\n            <div class=\"form-group\">\n              <label for=\"name\">Title:</label>\n              <input class=\"form-control\" type=\"text\" formControlName=\"title\" />\n            </div>\n            <div class=\"form-group\">\n                <label for=\"description\">Description:</label>\n                <textarea class=\"form-control\" formControlName=\"description\"></textarea>\n            </div>\n\n            <div class=\"form-group\">\n                <label for=\"creator\">Creator:</label>\n                <input class=\"form-control\" type=\"text\" formControlName=\"originalCreator\" />\n            </div>\n            <div class=\"form-group\">\n                <label for=\"creator\">Creator Url:</label>\n                <input class=\"form-control\" type=\"text\" formControlName=\"creatorLink\" />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"description\">Content:</label>\n              <textarea class=\"form-control\" formControlName=\"content\"></textarea>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"description\">Journal:</label>\n              <textarea class=\"form-control\" formControlName=\"journal\"></textarea>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"description\">Tags (comma separated):</label>\n              <textarea class=\"form-control\" formControlName=\"tags\"></textarea>\n            </div>\n            <input type=\"submit\" class=\"btn btn-primary\" (click)=\"save()\" [disabled]=\"!assetForm.valid || isSaving\" value=\"Save Asset\">\n        </form>\n    </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\n\n@Component({\n  selector: 'dac-footer',\n  templateUrl: './footer.component.html',\n  styleUrls: ['./footer.component.scss']\n})\nexport class FooterComponent implements OnInit {\n\n  @Input() fixedBottom:boolean;\n\n  get showLargeFooter() {\n    return this.dacConfig.isFeatureEnabled(\"footer.large\");\n  }\n\n  get showCopyrightFooter() {\n    return this.dacConfig.isFeatureEnabled(\"footer.copyright\");\n  }\n\n  get currentYear() {\n    return (new Date()).getFullYear();\n  }\n\n  constructor(private dacConfig:DacConfig) {\n    this.fixedBottom = false;\n  }\n\n  ngOnInit() {\n  }\n\n  get supportEmail() {\n    return this.dacConfig.supportEmail;\n  }\n\n  get supportPhone() {\n    return this.dacConfig.supportPhone;\n  }\n\n  get copyrightTitle() {\n    return this.dacConfig.copyrightTitle;\n  }\n\n  get mailLink() {\n    return \"mailto:\" + this.supportEmail;\n  }\n  get phoneLink() {\n    return \"tel:\" + this.supportPhone;\n  }\n  get copyrightURL() {\n    return this.dacConfig.copyrightURL;\n  }\n\n}\n","<footer class=\"page-footer center-on-small-only mt-0 primary-color\" [ngClass]=\"{'fixed-bottom': fixedBottom}\">\n  <!--/.Call to action-->\n  <!--Copyright-->\n  <div class=\"footer-info\" *ngIf=\"showLargeFooter\">\n      <div class=\"container-fluid\">\n        <div class=\"row\">\n          <div class=\"col-sm\">\n            <h5 class=\"h5-responsive mt-3\">\n              <i class=\"fa fa-envelope green-text\" aria-hidden=\"true\"></i>\n              <a [href]='mailLink'>{{supportEmail}}</a>\n            </h5>\n          </div>\n          <div class=\"col-sm\">\n            <h5 class=\"h5-responsive mt-3\">\n              <i class=\"fa fa-phone blue-text\" aria-hidden=\"true\"></i>\n              <a [href]='phoneLink'>{{supportPhone}}</a>\n            </h5>\n          </div>\n          <div class=\"col-sm\">\n            <h5 class=\"h5-responsive mt-3\">\n                <i class=\"fa fa-copyright\" aria-hidden=\"true\"></i> 2018 <a [href]=\"copyrightURL\">{{copyrightTitle}}</a>\n                <ul>\n                <li><a [routerLink]=\"['/terms-and-conditions']\">Terms and Conditions</a></li>\n                <li><a [routerLink]=\"['/privacy']\">Privacy Policy</a></li>\n                <li><a [routerLink]=\"['/baa']\">Business Associates Agreement</a></li>\n                </ul>\n            </h5>\n          </div>\n        </div>\n      </div>\n  </div>\n  <!--/.Copyright-->\n  <div class=\"footer-info\" *ngIf=\"showCopyrightFooter\">\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-sm\">\n          <h5 class=\"h5-responsive mt-3 mb-3 text-center\">\n              <i class=\"fa fa-copyright\" aria-hidden=\"true\"></i> {{currentYear}} Powered By <a [href]=\"copyrightURL\">{{copyrightTitle}}</a>\n          </h5>\n        </div>\n      </div>\n    </div>\n</div>\n\n</footer>\n<!--/.Footer-->\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Role } from \"./role\";\nimport { Capability } from \"./capability\";\nimport { Subscription } from \"./subscription\";\n\nexport class User {\n    private _username:string;\n    private _firstName:string;\n    private _lastName:string;\n    private _password:string;\n    private _enabled:boolean;\n    private _id:number;\n    private _role:Role;\n    private _caps:Capability[];\n    private _companyID:number;\n    private _companyName:string;\n    private _companyPrimaryContact:string;\n    private _subscription:Subscription;\n\n    constructor() {\n        this._role = Role.Registered;\n        this._caps = [];\n        this._enabled = true;\n    }\n\n    public get companyPrimaryContact() : string {\n\t\treturn this._companyPrimaryContact;\n\t}\n\n\tpublic set companyPrimaryContact(v:string) {\n\t\tthis._companyPrimaryContact = v;\n\t}\n\n    public get companyName() : string {\n\t\treturn this._companyName;\n\t}\n\n\tpublic set companyName(v: string) {\n\t\tthis._companyName = v;\n\t}\n\n    public get enabled() : boolean {\n\t\treturn this._enabled;\n\t}\n\n\tpublic set enabled(value: boolean) {\n\t\tthis._enabled = value;\n\t}\n\n    set companyID(v:number) {\n        this._companyID = v;\n    }\n\n    get companyID() {\n        return this._companyID;\n    }\n\n    get username() {\n        return this._username;\n    }\n    set username(v:string) {\n        this._username = v;\n    }\n\n    set password(v:string) {\n        this._password = v;\n    }\n\n    get password() {\n        return this._password;\n    }\n\n    set id(v:number) {\n        this._id = v;\n    }\n\n    get id() {\n        return this._id;\n    }\n\n    get capabilities() {\n        return this._caps;\n    }\n\n    set capabilities(v:Capability[]) {\n        this._caps = v;\n    }\n\n    set role(v:Role) {\n        this._role = v;\n    }\n    get role() {\n        return this._role;\n    }\n\n    get roleName() {\n        return Role[this._role];\n    }\n\n    set firstName(v:string) {\n        this._firstName = v;\n    }\n    get firstName() {\n        return this._firstName;\n    }\n    set lastName(v:string) {\n        this._lastName = v;\n    }\n    get lastName() {\n        return this._lastName;\n    }\n\n    set subscription(v:Subscription) {\n        this._subscription = v;\n    }\n\n    get subscription() {\n        return this._subscription;\n    }\n\n    public hasCapability(cap:Capability) {\n        return this._caps && this._caps.some(c => c == cap);\n    }\n\n    public getDisplayName() {\n        let displayName = [];\n        if (this.firstName) {\n            displayName.push(this.firstName);\n        }\n        if (this.lastName) {\n            displayName.push(\" \");\n            displayName.push(this.lastName);\n        }\n        if (!displayName.length) {\n            displayName = [this._username];\n        }\n        return displayName.join(\"\");\n    }\n\n    public hasActiveSubscription() {\n        if (this.subscription) {\n            return this.subscription.isActiveSubscription();\n        }\n \n       // for people who do not have a subscription object, we return true here.\n        return true;\n    }\n\n\n}","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { ThemeModule } from '../theme/theme.module';\nimport { SharedModule } from '../shared/shared.module';\nimport { LoginModule } from '../login/login.module';\nimport { CompaniesRoutingModule } from './companies-routing.module';\nimport { SignupComponent } from './signup/signup.component';\nimport { PricingTableComponent } from '../pricing-table/pricing-table.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [\n    CommonModule\n    ,ThemeModule\n    ,SharedModule\n    ,FormsModule\n    ,ReactiveFormsModule\n    ,LoginModule\n    ,CompaniesRoutingModule\n  ],\n  declarations: [SignupComponent, PricingTableComponent]\n})\nexport class CompaniesModule { }\n\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport { Order } from \"../models/order\"\nimport { OrderItem } from \"../models/order-item\"\nimport { HTTPService } from \"./http.service\";\nimport { PaginatedResultResponse } from 'app/shared/models/paginated-results-response';\nimport { PaginatedResultsLoader } from 'app/shared/models/paginated-results-loader';\nimport { PaginatedResultsLoaderFactory } from 'app/shared/services/pagination-results-loader-factory.service';\n\n@Injectable()\nexport class OrderService {\n  private _lastOrder:Order;\n  private _orders:Order[];\n  private _resultsLoader:PaginatedResultsLoader<Order>;\n\n  constructor(\n    private http:HTTPService,\n    private _paginationFactory:PaginatedResultsLoaderFactory\n  ) {\n    // this._lastOrder = new Order();\n    // this._lastOrder.status = 'paid';\n    // this._lastOrder.id = 1;\n\n    // let item = new OrderItem();\n    // item.price = 5.00;\n    // item.quantity = 5;\n    // item.item = {name: \"Sexual Addiction\"};\n    // item.total = 25.00;\n    // this._lastOrder.items.push(item);\n    // this._lastOrder.total = item.total;\n  }\n\n  public getOrder(orderId:number) : Promise<Order> {\n    return this.http.get<Order>(\"/orders/\" + orderId).then((orderData) => {\n      return this.populateOrder(orderData);\n    });\n  }\n\n  public storeLastOrder(order) {\n    this._lastOrder = order;\n  }\n\n  public getLastOrder() {\n    if (this._lastOrder) {\n      return Promise.resolve(this._lastOrder);\n    }\n\n    return this.getPaginatedOrderHistory().then((data:PaginatedResultResponse<Order>) => {\n      if (data.results.length) {\n        // return the first order since they are in reverse order.\n        this._lastOrder = data.results[0];\n      }\n      else {\n        this._lastOrder = null;\n      }\n      return this._lastOrder;\n    });\n  }\n\n  public getOrderHistory() {\n    let queryFunction = this.getPaginatedOrderHistory.bind(this);\n    this._resultsLoader = this._paginationFactory.getResultsLoader<Order>(queryFunction);\n    return this._resultsLoader.getResults()\n        .then((orders:Order[]) => {\n            this._orders = orders;\n            return orders;\n    });\n  }\n\n  public hasMoreResults() : boolean {\n    return this._resultsLoader.hasMoreResults();\n  }\n\n  public loadMore() : Promise<Order[]> {\n      // load more results\n      return this._resultsLoader.loadMore()\n      .then((results:Order[]) => {\n          console.log(results);\n          this._orders = results;\n          return results;\n      });\n  }\n\n  private getPaginatedOrderHistory(offset?:number) : Promise<PaginatedResultResponse<Order>> {\n    var data: any = {\n\t\t\t_offset: offset || null\n\t\t\t, _limit: 10\n\t\t};\n\n    return this.http.get<PaginatedResultResponse<Order>>(\"/orders/\", data).then((data) => {\n      if (data && data.results.length) {\n        data.results.map(o => {\n          return this.populateOrder(o);\n        });\n\n      }\n      return data;\n    });\n  }\n\n  private populateOrder(src:any) {\n    let object = Object.assign(new Order(), src);\n    object.creation_date = new Date(src.creation_date);\n    object.last_update_date = new Date(src.last_update_date);\n    return object;\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { UniqueIdService } from './unique-id.service';\nimport { Injectable } from '@angular/core';\nimport { Assessment } from \"../models/assessment\";\nimport { ScaleResult } from \"../models/scale-result\";\nimport { Question } from \"../models/question\";\nimport { QuestionSet } from \"../models/question-set\";\nimport { MultipleChoiceQuestion } from \"../models/multiple-choice-question\";\nimport { QuestionType } from \"../models/question-type\";\nimport { AssessmentResult } from \"../models/assessment-result\";\nimport { SingleChoiceQuestion } from 'app/shared/models/single-choice-question';\nimport { Scale } from '../models/scale';\n\n// TODO: stephen would it make sense to rename this ScaleResultNode to something else as it can be confused with ScaleResult\nclass ScaleResultNode {\n\tprivate _children:ScaleResultNode[];\n\tprivate _data:ScaleResult;\n\tprivate _calculated:boolean;\n\tprivate _calculatorStategy:IScaleCalculatorStrategy;\n\n\tconstructor(data:ScaleResult) {\n\t\tthis._children = [];\n\t\tthis._data = data;\n\t\tthis._calculated = false;\n\t\tif (data.scale.type == \"CriteriaThreshold\") {\n\t\t\tthis._calculatorStategy = new ScaleCalculatorCriteriaThresholdStrategy(data.scale);\n\t\t}\n\t\telse if (data.scale.type == \"Mean\") {\n\t\t\tthis._calculatorStategy = new ScaleCalculatorMeanStrategy();\n\t\t}\n\t\telse {\n\t\t\tthis._calculatorStategy = new ScaleCalculatorSumStrategy();\n\t\t}\n\t}\n\n\tget children() {\n\t\treturn this._children;\n\t}\n\tset children(v:ScaleResultNode[]) {\n\t\tthis._children = v;\n\t}\n\tget data() {\n\t\treturn this._data;\n\t}\n\tget calculated() {\n\t\treturn this._calculated;\n\t}\n\n\tcalculateQuestion(question:Question) {\n\t\tthis._data = this._calculatorStategy.calculate(this._data, question);\n\t}\n\tcalculateTotal(limit?:number) {\n\t\tif (!limit) {\n\t\t\tlimit = 0;\n\t\t}\n\t\tif (limit > 50) {\n\t\t\tthrow new Error(\"Recursive limit reached.  Maximum child depth was greater than 50 nodes\");\n\t\t}\n\n\t\tlet score = this.data.score;\n\t\tif (!this.calculated && this.children.length) {\n\t\t\tthis.children.forEach(c => c.calculateTotal(limit + 1));\n\t\t\tthis.data.score = this.children.reduce((prev, current) => current.data.score + prev, score);\n\t\t}\n\t\tthis._calculated = true;\n\t}\n}\n\ninterface IScaleCalculatorStrategy{\n\tcalculate(scaleResult:ScaleResult, question:Question) : ScaleResult\n}\n\nclass ScaleCalculatorSumStrategy implements IScaleCalculatorStrategy {\n\tconstructor() {\n\n\t}\n\n\tcalculate(scaleResult:ScaleResult, question:Question) : ScaleResult {\n\t\tscaleResult.score += question.getComputedScore();\n\t\treturn scaleResult;\n\t}\n}\n\nclass ScaleCalculatorMeanStrategy implements IScaleCalculatorStrategy {\n\n\tprivate itemCount:number;\n\tprivate sum:number;\n\n\tconstructor() {\n\t\tthis.itemCount = 0;\n\t\tthis.sum = 0;\n\t}\n\n\tcalculate(scaleResult:ScaleResult, question:Question) {\n\t\tthis.itemCount += 1;\n\t\tthis.sum += question.getComputedScore();\n\t\tscaleResult.score = this.sum / this.itemCount;\n\t\treturn scaleResult;\n\t}\n}\n\nclass ScaleCalculatorCriteriaThresholdStrategy implements IScaleCalculatorStrategy\n{\n\tprivate requiredQuestions:number;\n\tprivate requiredScoreThreshold:number;\n\tprivate currentQuestionsMatchingThreshold:number;\n\n\tconstructor(scale:Scale) {\n\t\tlet gradingData = scale.gradingData;\n\n\t\tthis.requiredQuestions = gradingData.requiredQuestions || 0;\n\t\tthis.requiredScoreThreshold = gradingData.requiredScoreThreshold || 0;\n\t\tthis.currentQuestionsMatchingThreshold = 0;\n\t}\n\n\tcalculate(scaleResult:ScaleResult, question:Question) : ScaleResult {\n\t\tlet score = question.getComputedScore();\n\t\tif (score >= this.requiredScoreThreshold) {\n\t\t\tthis.currentQuestionsMatchingThreshold += 1;\n\t\t}\n\t\tif (this.currentQuestionsMatchingThreshold >= this.requiredQuestions) {\n\t\t\tscaleResult.score = 1; // we've met the diagnostic criteria\n\t\t}\n\t\telse {\n\t\t\tscaleResult.score = 0;\n\t\t}\n\t\treturn scaleResult;\n\t}\n}\n\n\n@Injectable()\nexport class AssessmentGraderService {\n\n\tconstructor(private _uuid: UniqueIdService) { }\n\n\tpublic grade(assessment: Assessment): AssessmentResult {\n\t\tif (!assessment) {\n\t\t\tthrow new Error(\"assessment is missing.  Cannot grade\");\n\t\t}\n\n\t\tvar result = new AssessmentResult();\n\t\tresult.id = this._uuid.generate();\n\t\tresult.assessment = Object.assign(new Assessment(), assessment);\n\t\tresult.scaleResults = this.gradeScales(assessment);\n\t\tresult.flaggedQuestions = this.flagQuestions(assessment);\n\t\treturn result;\n\n\t}\n\n\tprivate flagQuestions(assessment: Assessment): Question[] {\n\t\treturn assessment.question_sets.map(qs => {\n\t\t\treturn qs.questions.map(q => {\n\t\t\t\tif (q.hasFlagCondition\n\t\t\t\t\t&& q.flaggedCondition.shouldFlagQuestion(q, qs)) {\n\t\t\t\t\t// set flag here\n\t\t\t\t\tq.isFlaggedForReview = true;\n\t\t\t\t\treturn q;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t})\n\t\t\t\t.filter(q => q != null);\n\t\t})\n\t\t\t.filter(questions => questions.length)\n\t\t\t.reduce((prev, curr) => curr = curr.concat(prev), []);\n\t}\n\n\tprivate gradeScales(assessment: Assessment): ScaleResult[] {\n\t\tvar scaleResults = assessment.scales.map(s => {\n\t\t\tlet scaleResult = new ScaleResult();\n\t\t\tscaleResult.scale = s;\n\t\t\tscaleResult.range = s.ranges[0] ? s.ranges[0] : null;\n\t\t\treturn scaleResult;\n\t\t});\n\n\t\tvar resultsByScale: Map<String, ScaleResultNode> = new Map<String, ScaleResultNode>();\n\n\t\t// create the initial loop\n\t\tscaleResults.forEach(sr => {\n\t\t\tif (!resultsByScale[sr.scale.id]) {\n\t\t\t\tresultsByScale[sr.scale.id] = new ScaleResultNode(sr);\n\t\t\t}\n\t\t});\n\t\t// now create the children\n\t\tscaleResults.forEach(sr => {\n\t\t\t// now we are going to populate the trees\n\t\t\tif (sr.scale.hasSubScales()) {\n\t\t\t\tresultsByScale[sr.scale.id].children = sr.scale.getSubScaleIds().map(id => resultsByScale[id]);\n\t\t\t}\n\t\t});\n\n\t\t// if there are any branching or skip-logic questions we want to only grade those.\n\t\tlet questionSets = assessment.getQuestionSetsForDisplay();\n\t\tquestionSets.forEach(qs => {\n\t\t\tqs.questions.forEach(q => {\n\t\t\t\tif (this.shouldGradeQuestion(q)) {\n\t\t\t\t\tlet resultNode:ScaleResultNode = resultsByScale[q.assessment_scale.id];\n\t\t\t\t\tthis.gradeQuestion(q, qs, resultNode);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t// now that the scales are graded we go through and do depth first calculation\n\n\n\n\t\tscaleResults.forEach(sr => {\n\t\t\tlet resultNode:ScaleResultNode = resultsByScale[sr.scale.id];\n\t\t\tresultNode.calculateTotal(); // calculate out the tree of the item.\n\t\t\tsr.range = sr.scale.getRangeForScore(sr.score);\n\t\t});\n\n\t\treturn scaleResults;\n\t}\n\n\tprivate calculateScoreWithSubScores(resultsByScale:Map<String, ScaleResult>, result:ScaleResult, limit:number) {\n\t\tif (!result.scale.hasSubScales()) {\n\t\t\treturn result.score;\n\t\t}\n\t\tif (limit >= 50) {\n\t\t\tthrow new Error(\"recursive limit reached for scale calculation.  Check scales for cycles\");\n\t\t}\n\t\t// TODO: stephen if we introduced a strategy pattern here as well we could deal with different kinds\n\t\t// of sub-scal summations -- thresholds, means, averages, etc.\n\t\tlet score = result.score;\n\t\tlet scales = result.scale.getSubScaleIds()\n\t\t\t\t\t\t.forEach(scaleId => {\n\t\t\t\t\t\t\tlet subScaleResult = resultsByScale[scaleId];\n\t\t\t\t\t\t\tscore += this.calculateScoreWithSubScores(resultsByScale, subScaleResult, limit + 1);\n\t\t\t\t\t\t});\n\t\treturn score;\n\t}\n\n\tprivate shouldGradeQuestion(q: Question) {\n\t\tif (q.skip_scoring) {\n\t\t\treturn false;\n\t\t}\n\t\tif (q.type != QuestionType.MultipleChoice\n\t\t\t&& q.type != QuestionType.SingleChoice) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate gradeSingleChoice(q: SingleChoiceQuestion, qs: QuestionSet, scaleResult: ScaleResultNode) {\n\t\tlet addScore = q.is_reversed ? 0 : 1;\n\t\tlet score = qs.answer_start_value;\n\n\t\tif (q.answerForSave.isSelected) {\n\t\t\t// start is 0, answer is 1, reverse, answer is 0\n\t\t\tscore += qs.answer_start_value + addScore;\n\t\t}\n\n\t\t// add in the multiplier... defaults to 1\n\t\t// 0 is disabled, so don't multiply.\n\t\tif (q.assessment_scale.multiplier != 0) {\n\t\t\tscore = score * q.assessment_scale.multiplier;\n\t\t}\n\t\tq.setComputedScore(score);\n\t\tscaleResult.calculateQuestion(q);\n\t}\n\tprivate gradeMultipleChoice(q: MultipleChoiceQuestion, qs: QuestionSet, scaleResult: ScaleResultNode) {\n\t\t// we are only allowing multiple choice questions to be graded right now\n\t\tlet labels = q.CustomLabels.length ? q.CustomLabels : qs.labels;\n\t\tlet totalAnswers = labels.length;\n\t\tlet score = labels.indexOf(q.answer);\n\t\t// if we can't find the label we have issues\n\n\n\t\tif (score < 0) {\n\t\t\tconsole.error(\"Scale not found for question \" + q.id);\n\t\t\treturn;\n\t\t}\n\t\tlet label = labels[score];\n\n\t\t// if the label is something like Not Applicable\n\t\t// we want to skip over scoring that question.\n\t\tif (label.skipScoring) {\n\t\t\treturn;\n\t\t}\n\n\t\t// grab the actual scale\n\t\tif (q.is_reversed) {\n\t\t\t// since the startValue is inclusive we must subtract one from the count\n\t\t\tlet endValue = qs.answer_start_value + totalAnswers - 1;\n\t\t\tlet interval = score - qs.answer_start_value;\n\t\t\tscore = endValue - score;\n\t\t}\n\t\telse {\n\t\t\tscore = qs.answer_start_value + score;\n\t\t}\n\n\t\t// add in the multiplier... defaults to 1\n\t\t// 0 is disabled, so don't multiply.\n\t\tif (q.assessment_scale.multiplier != 0) {\n\t\t\tscore = score * q.assessment_scale.multiplier;\n\t\t}\n\t\tq.setComputedScore(score);\n\t\tscaleResult.calculateQuestion(q);\n\t}\n\tprivate gradeQuestion(question: Question, qs: QuestionSet, scaleResult: ScaleResultNode) {\n\t\tif (question.type == QuestionType.MultipleChoice) {\n\t\t\treturn this.gradeMultipleChoice(question as MultipleChoiceQuestion, qs, scaleResult);\n\t\t}\n\t\telse if (question.type == QuestionType.SingleChoice) {\n\t\t\treturn this.gradeSingleChoice(question as SingleChoiceQuestion, qs, scaleResult);\n\t\t}\n\t}\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Location} from \"@angular/common\";\nimport {Injectable, Inject} from \"@angular/core\";\nimport {IEnvironment, IFeatureHash, AWSCognitoConfig} from \"../../../environments/ienvironment\";\nimport { SmartStyleSettings } from \"../models/SmartStyleSettings\";\n\n@Injectable()\nexport class DacConfig {\n    private _api_url:string;\n    private _is_dev_environment:Boolean = false;\n    private window: Window;\n    private _take_test_url:string;\n    private _enabledFeatures:IFeatureHash;\n    private _stripePublicKey:String;\n    private _stripeChargeName:String;\n    private _applicationTitle:string;\n    private _applicationLogoUrl:string;\n    private _applicationLogoTitle:string;\n    private _supportEmail:string;\n    private _supportPhone:string;\n    private _reportHeaderImgURL:string;\n    private _ssoIssuer:string;\n    private _skinClasses:string[];\n    private _cognitoConfig:AWSCognitoConfig;\n    private _freeTrialPeriod:number;\n    private _smartConfigStyleUrl:string;\n    private _smartStyles:SmartStyleSettings;\n\n    /**\n     * When the application is embedded inside another app such as in an iframe we want\n     * to hide the components such as navigation so it looks seamless.\n     */\n    private _seamlessMode:boolean;\n\n    constructor(\n        @Inject(\"Environment\") private _environment:IEnvironment\n    ) {\n        this._enabledFeatures = this._environment.features;\n        this._stripePublicKey = this._environment.stripePublicKey;\n        this._stripeChargeName = this._environment.stripeChargeName;\n        this._applicationTitle = this._environment.applicationTitle;\n        this._applicationLogoUrl = this._environment.applicationLogo;\n        this._applicationLogoTitle = this._environment.applicationLogoTitle;\n        this._api_url = this._environment.apiURL;\n        this._supportEmail = this._environment.supportEmail;\n        this._supportPhone = this._environment.supportPhone;\n        this._reportHeaderImgURL = this._environment.reportHeaderImgURL;\n        this._cognitoConfig = this._environment.awsCognitoConfig;\n        this._freeTrialPeriod = this._environment.freeTrialPeriod;\n\n        this.window = window as Window;\n        let host = this.window.location.host;\n        this._take_test_url = this.window.location.protocol + \"//\" + host + \"/login\";\n\n        this._skinClasses = this._environment.skinClasses || [];\n        this._seamlessMode = sessionStorage.getItem(\"seamlessMode\") === \"true\";\n        if (this._seamlessMode) {\n            this.setupSeamlessModeForSession(sessionStorage.getItem('skin'));\n        }\n        else if (sessionStorage.getItem('skin')) {\n            this.setupSkinForSession(sessionStorage.getItem('skin'));\n        }\n        this._ssoIssuer = sessionStorage.getItem(\"ssoIssuer\");\n\n        if (this._environment.smartConfig && this._environment.smartConfig.smartStyleUrl) {\n          this._smartConfigStyleUrl = this._environment.smartConfig.smartStyleUrl;\n        }\n        this._smartStyles = null;\n    }\n\n    private getAWSConfig() {\n\n    }\n\n    private setupSkinForSession(skin:string) {\n        this._skinClasses = skin.split(\" \");\n    }\n\n    private is_dev_host(host:string) {\n        return host === \"discoverandchange.dev\" || host === \"localhost:8080\"\n            || host === \"localhost:4200\"\n            || host === 'addo-dev.discoverandchange.com';\n    }\n\n\n    public get smartStyles() : SmartStyleSettings {\n      return this._smartStyles;\n    }\n\n\n    public set smartStyles(v : SmartStyleSettings) {\n      this._smartStyles = v;\n    }\n\n\n\n    get smartConfigStyleUrl() {\n      return this._smartConfigStyleUrl;\n    }\n\n    set smartConfigStyleUrl(v:string) {\n      this._smartConfigStyleUrl = v;\n    }\n\n    get freeTrialPeriod() {\n      return this._freeTrialPeriod;\n    }\n\n    get take_test_url() {\n        return this._take_test_url;\n    }\n\n    get api_url() : string {\n        return this._api_url;\n    }\n\n    get is_dev_environment() : Boolean {\n        return this._is_dev_environment;\n    }\n\n    get stripe_charge_name() : String {\n        return this._stripeChargeName;\n    }\n\n    get stripe_public_key() : String {\n        return this._stripePublicKey;\n    }\n\n    public isFeatureEnabled(feature:string) {\n        return this._enabledFeatures[feature] === true;\n    }\n\n\n\tpublic get applicationLogoTitle(): string {\n\t\treturn this._applicationLogoTitle;\n\t}\n\n\tpublic set applicationLogoTitle(value: string) {\n\t\tthis._applicationLogoTitle = value;\n\t}\n\n\tpublic get applicationLogoUrl(): string {\n\t\treturn this._applicationLogoUrl;\n\t}\n\n\tpublic set applicationLogoUrl(value: string) {\n\t\tthis._applicationLogoUrl = value;\n\t}\n\n\tpublic get applicationTitle(): string {\n\t\treturn this._applicationTitle;\n\t}\n\n\tpublic set applicationTitle(value: string) {\n\t\tthis._applicationTitle = value;\n\t}\n\n\tpublic set supportEmail(value: string) {\n\t\tthis._supportEmail = value;\n    }\n\n\n\tpublic get supportPhone(): string {\n\t\treturn this._supportPhone;\n\t}\n\n\tpublic set supportPhone(value: string) {\n\t\tthis._supportPhone = value;\n    }\n\n    public get skinClasses() : string[] {\n        return this._skinClasses;\n    }\n\n    public replaceSkinClasses(skinClasses:string[]) {\n        if (!skinClasses && skinClasses.length <= 0) {\n            throw new Error(\"Invalid Skin Classes.  Must be an array with length greater than 0\");\n        }\n        this._skinClasses = skinClasses;\n        sessionStorage.setItem('skin', skinClasses.join(\" \"));\n    }\n\n    public addSkinClass(skinClass:string) {\n        if (skinClass.length <= 0) {\n            throw new Error(\"Skin class must be set \");\n        }\n        this._skinClasses.push(skinClass);\n    }\n\n    public get navBarClass() : string {\n        return this._environment.navBarClass;\n    }\n\n\n\tpublic get reportHeaderImgURL(): string {\n\t\treturn this._reportHeaderImgURL;\n\t}\n\n\tpublic set reportHeaderImgURL(value: string) {\n\t\tthis._reportHeaderImgURL = value;\n    }\n\n    public hasPartner(partner:string) {\n        return this._environment.partners.indexOf(partner) >= 0;\n    }\n\n    public isAssessmentEnabled(uid:string) {\n        if (this._environment.disabledAssessments.length == 0) {\n            return true;\n        }\n        else {\n            return this._environment.disabledAssessments.indexOf(uid) < 0;\n        }\n    }\n\n    public get copyrightURL() {\n        return this._environment.copyrightURL;\n    }\n\n    public get copyrightTitle() {\n        return this._environment.copyrightTitle;\n    }\n\n    public get seamlessMode() {\n        return this._seamlessMode;\n    }\n\n    public set seamlessMode(v:boolean) {\n        this._seamlessMode = v;\n\n    }\n\n    public get ssoIssuer() {\n        return this._ssoIssuer;\n    }\n\n    public set ssoIssuer(v:string) {\n        this._ssoIssuer = v;\n    }\n\n    public setupSSOIssuerForSession(issuer:string) {\n        this._ssoIssuer = issuer;\n        sessionStorage.setItem(\"ssoIssuer\", issuer);\n    }\n    public setupSeamlessModeForSession(skin?:string) {\n        this.seamlessMode = true;\n        sessionStorage.setItem('seamlessMode', \"true\");\n        let skins = ['seamless'];\n        if (skin) {\n            skins.push(skin);\n\n        }\n        this.replaceSkinClasses(skins);\n    }\n    public clearSeamlessModeForSession() {\n      this.seamlessMode = false;\n      sessionStorage.removeItem('seamlessMode');\n    }\n\n    public get awsCognitoConfig() {\n        return this._cognitoConfig;\n    }\n};\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Location } from '@angular/common';\nimport { Component, OnInit, AfterViewInit, ElementRef, Input, ViewChild } from '@angular/core';\nimport { Router,ActivatedRoute } from '@angular/router';\n\nimport { AssessmentService } from \"../../shared/services/assessment.service\";\nimport { AssessmentResult } from \"../../shared/models/assessment-result\";\nimport { ScaleResult } from \"../../shared/models/scale-result\";\nimport { Subscription } from 'rxjs';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\nimport { ModalService } from 'app/shared/services/modal.service';\nimport { PrintDialogComponent } from '../print-dialog/print-dialog.component';\nimport { AssessmentGraderService } from 'app/shared/services/assessment-grader.service';\nimport { AssessmentResultHydrator } from 'app/shared/services/assessment-result-hydrator.service';\nimport { ScaleResultsTableSummaryComponent } from '../scale-results-table-summary/scale-results-table-summary.component';\nimport { TherapistScaleResultsComponent } from '../report-items/therapist-scale-results/therapist-scale-results.component';\n\n@Component({\n  selector: 'app-assessment-result-view',\n  templateUrl: './assessment-result-view.component.html',\n  styleUrls: ['./assessment-result-view.component.css']\n})\nexport class AssessmentResultViewComponent implements OnInit, AfterViewInit {\n\n    private queryParamsSubscription: Subscription;\n    private _result:AssessmentResult;\n    private _clientId:string;\n\n    public hasLoadedResults:boolean;\n\n    @ViewChild(\"tableSummary\") public scaleResultsTableSummaryComponent:ScaleResultsTableSummaryComponent;\n\n    @ViewChild(\"therapistScaleResults\") public scaleResultsComponent:TherapistScaleResultsComponent;\n\n  /**\n   * Whether to show therapist note information in the report.  Otherwise it's hidden so it can be\n   * given to a client or print off a shorter report.\n   */\n  public displayTherapistNotes:boolean;\n\n  /**\n   * Whether to show the print dialog or not.\n   */\n  public showPrintDialog:boolean;\n\n  public allowPrinting:boolean;\n\n  private _visibleScaleResults:ScaleResult[];\n\n  private rescoreResults:boolean;\n\n\n    constructor(\n      private route:ActivatedRoute\n      ,private router:Router\n\t\t  ,private _assessmentService:AssessmentService\n      ,private _grader:AssessmentGraderService\n      ,private _resultHydrator:AssessmentResultHydrator\n      ,private location:Location\n      ,private elementRef:ElementRef\n      ,private dacConfig:DacConfig\n      ,private modalService:ModalService) {\n        this._visibleScaleResults = [];\n        this.allowPrinting = this.dacConfig.isFeatureEnabled('pdf.printing');\n    }\n\n  showCommandButtons() {\n      return !this.dacConfig.seamlessMode;\n  }\n\n  ngOnInit() {\n    this.queryParamsSubscription = this.route.queryParams.subscribe(params => {\n      if (params['notes'] && params['notes'] == '1') {\n        this.displayTherapistNotes = true;\n      }\n      else {\n        this.displayTherapistNotes = false;\n      }\n      if (params['rescore'] && params['rescore'] == '1') {\n        this.rescoreResults = true;\n      } else {\n        this.rescoreResults = false;\n      }\n    });\n\n\n\n    // TODO: stephen do we need the rx switchTo piece?\n    this.route.params.subscribe(async (params) => {\n          this._clientId = params['id'];\n          let resultId = params['resultId'];\n          this.hasLoadedResults = false;\n          try {\n\n            let result;\n            if (this.rescoreResults) {\n              let latestResult = await this._assessmentService.getAssessmentResultWithLatestAssessment(this._clientId, resultId);\n              result = this._grader.grade(latestResult.assessment); // regrade with our latest assessment\n              console.log(\"Regraded score is \", result);\n            } else {\n              result = await this._assessmentService.getAssessmentResult(this._clientId, resultId);\n            }\n\n            this.hasLoadedResults = true;\n            this.result = result;\n\n            if (this.result == null || !this.result.scaleResults || this.result.scaleResults.length < 1) {\n              // this.goBack();\n            } else {\n              this._visibleScaleResults = this.result.scaleResults.filter(sr => sr.scale && sr.scale.includeInReports === true);\n            }\n          } catch(error) {\n            console.error(error);\n            if (error && error.status === 404 || error.status === 400) {\n              // this.goBack();\n            }\n          };\n        });\n    }\n\n    public generatePdfHtml() {\n      let rootNode = this.elementRef.nativeElement as HTMLElement;\n      let itemsContainer = rootNode.querySelector(\".itemsContainer\");\n\n      let textArea = rootNode.querySelector(\".dc-assignment-textarea\");\n      if (itemsContainer && textArea) {\n        let docFragment = new DocumentFragment();\n        docFragment.append(itemsContainer.cloneNode(true));\n        let clonedAppScaleResultsTableSummary = docFragment.querySelector(\"app-scale-results-table-summary\");\n        let clonedTherapistScales = docFragment.querySelector(\"app-therapist-scale-results\");\n        clonedAppScaleResultsTableSummary.replaceWith(this.scaleResultsTableSummaryComponent.getPrintContent());\n        clonedTherapistScales.replaceWith(this.scaleResultsComponent.getPrintContent());\n        let node = docFragment.querySelector('.itemsContainer') as HTMLElement;\n        textArea.textContent = node.innerHTML;\n      }\n    }\n\n    public get allowRescoreResults()\n    {\n      return  this.dacConfig.isFeatureEnabled(\"assessments.reports.saveresult\");\n    }\n\n    public saveRescoredResult()\n    {\n      console.log(\"Saving result \", this.result);\n      this._assessmentService.clientId = this._clientId;\n      this._assessmentService.saveAssessmentResult(this.result);\n    }\n\n    ngAfterViewInit() {\n      // we need to let outside listeners like the server pdf generator know we have finished loading so we can generate the report\n      console.log(\"adding dac-report-loaded class\");\n      document.body.classList.add(\"dac-report-loaded\");\n\n    }\n\n    ngAfterContentInit() {\n    }\n\n    public get scaleResults () {\n      return this._visibleScaleResults;\n    }\n\n\n    public goBack() {\n      this.location.back();\n  }\n\n    public get clientID() : string {\n        return this._clientId;\n    }\n\n    public get result() : AssessmentResult {\n\t\treturn this._result;\n\t}\n\n\tpublic set result(v:AssessmentResult) {\n\t\tthis._result = v;\n  }\n\n  public browserPrint() {\n    if (window && window.print) {\n      window.print();\n    }\n  }\n\n  public print() {\n    this.modalService.openDialog(PrintDialogComponent);\n  }\n\n}\n","<div class=\"col itemsContainer d-print-block-visible\" [ngClass]=\"{'display-therapist-notes': displayTherapistNotes}\">\n    <div class=\"row report-controls\">\n        <div class=\"col-2\" *ngIf=\"showCommandButtons()\">\n            <input class=\"btn btn-primary\" type=\"button\" (click)=\"goBack()\" value=\"Back\" />\n        </div>\n        <div [ngClass]=\"{'col-8': showCommandButtons(),  'col-12 text-center': !showCommandButtons()}\">\n            <h1 class=\"h1-responsive report-name text-center\">{{result?.assessment.name}}</h1>\n        </div>\n        <div class=\"col-2 ml-auto\" *ngIf=\"showCommandButtons()\">\n            <!-- <input class=\"btn btn-secondary\" type=\"button\" *ngIf=\"allowPrinting\" (click)=\"print()\" value=\"Download PDF\" /> -->\n            <input class=\"btn btn-secondary\" type=\"button\" *ngIf=\"allowPrinting\" (click)=\"browserPrint()\" value=\"Download PDF\" />\n            <input class=\"btn btn-secondary\" type=\"button\" *ngIf=\"allowRescoreResults\" (click)=\"saveRescoredResult()\" value=\"Save Result\" />\n        </div>\n    </div>\n    <div class=\"row\" *ngIf=\"!hasLoadedResults\">\n        <div class=\"col\">\n            <p class=\"alert alert-warning\">\n                <app-spin-icon></app-spin-icon> Loading Report data...</p>\n        </div>\n    </div>\n    <div class=\"row d-print-block-visible\" *ngIf=\"hasLoadedResults\">\n        <div class=\"col d-print-block-visible\">\n            <div class=\"row mb-3\">\n                <div class=\"card card-cascade wider col\">\n                    <div class=\"view gradient-card-header primary-gradient text-light\">\n                        <h3 class=\"h3-responsive text-center\">Summary</h3>\n                    </div>\n                    <div class=\"card-body\">\n                        <div class=\"row\">\n                            <app-scale-results-table-summary #tableSummary class=\"col\" [scaleResults]=\"scaleResults\"></app-scale-results-table-summary>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <app-therapist-scale-results class=\"col\" #therapistScaleResults [resultTitle]=\"'Detailed Responses'\" [assessmentResult]=\"result\" [scaleResults]=\"scaleResults\"></app-therapist-scale-results>\n            </div>\n        </div>\n    </div>\n\n\n\n  <!-- <div class=\"dc-assignment-print-box row mt-5\">\n    <div class=\"col\">\n      <input type=\"button\" class=\"btn btn-primary\" value=\"Generate PDF HTML\" (click)=\"generatePdfHtml()\" />\n      <textarea class=\"form-control dc-assignment-textarea\"></textarea>\n    </div>\n  </div> -->\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { ListQuestion } from \"./list-question\";\nimport { QuestionSetLabel } from \"./question-set-label\";\nimport { QuestionType } from \"app/shared/models/question-type\";\n\nexport class MultipleChoiceQuestion extends ListQuestion\n{\n    private _answer:QuestionSetLabel;\n\n    constructor() {\n\t\tsuper();\n\t\tthis.type = QuestionType.MultipleChoice;\n    }\n\n\n\tpublic get answer() : QuestionSetLabel {\n\t\treturn this._answer;\n\t}\n\n\n\tpublic set answer(v : QuestionSetLabel) {\n\t\tthis._answer = v;\n\t}\n\n\tpublic hasAnswer(ans:QuestionSetLabel) {\n\t\treturn this.isAnswer(ans);\n\t}\n\n\tpublic get isFilledOut() : boolean {\n\t\treturn this._answer != null;\n\t}\n\n    isAnswer(ans:QuestionSetLabel) {\n\t\tif (this.answer) {\n\t\t\treturn this.answer.id === ans.id;\n\t\t}\n\t\treturn false;\n\t}\n\n    public setSavedAnswer(answer:any, labels:QuestionSetLabel[]) {\n        this.answer = labels.find(l => l.id == answer);\n\t}\n\n\tpublic get answerDisplayText() {\n\t\tif (!this.answer) {\n\t\t\treturn \"\";\n\t\t}\n\n        return this.answer.label;\n\t}\n\n    public get answerForSave() {\n\t\tif (!this._answer) {\n\t\t\treturn null;\n\t\t}\n        return this._answer.id;\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule, InjectionToken, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { Authenticator } from './services/authenticator';\nimport { DacConfig } from './services/dac-config.service';\nimport {AssessmentHydrator} from \"./services/assessment-hydrator.service\";\nimport {AssessmentResultHydrator} from \"./services/assessment-result-hydrator.service\";\nimport {UniqueIdService} from \"./services/unique-id.service\";\nimport { PaginatedResultsLoaderFactory } from \"./services/pagination-results-loader-factory.service\";\nimport { HTTPService } from \"./services/http.service\";\nimport { AssessmentService } from \"./services/assessment.service\";\nimport { ClientService } from \"./services/client.service\";\nimport { AssessmentPickerComponent } from './assessment-picker/assessment-picker.component';\nimport { StripePaymentProcessor } from \"./services/stripe-payment-processor.service\";\nimport { AssessmentTokenService } from \"./services/assessment-token.service\";\nimport { SpinIconComponent } from './spin-icon/spin-icon.component';\nimport { AssessmentCompressorService } from \"./services/assessment-compressor.service\";\nimport { IfFeatureEnabled } from \"./feature-enabled/feature-enabled\";\nimport { ConditionEditComponent } from './condition-edit/condition-edit.component';\nimport { QuestionFactoryService } from './services/question-factory.service';\nimport { AssessmentGraderService } from './services/assessment-grader.service';\nimport { QuestionAnswerPopulator } from \"./services/question-answer-populator.service\";\nimport { SearchInputComponent } from './search-input/search-input.component';\nimport { BackButtonComponent } from './back-button/back-button.component';\nimport { UserService } from \"./services/user.service\";\nimport { CompanyService } from './services/company.service';\nimport { AlertService } from './services/alert.service';\nimport { UserSelectorComponent } from './user-selector/user-selector.component';\nimport { UsernameCheckerComponent } from './username-checker/username-checker.component';\nimport { RoleSelectorComponent } from './role-selector/role-selector.component';\nimport { Pako } from 'app/shared/services/pako.service';\nimport { PdfService } from \"./services/pdf.service\";\nimport { PdfGenerateBtnComponent } from \"./pdf-generate-btn/pdf-generate-btn.component\";\nimport { HttpClientModule } from '@angular/common/http';\n\n// AOT compiler for production build was not recognizing third party library injection using \"useValue\"\n// when a string literal was specified.  This blog post showed that using a factory fixed the problem\n// https://stackoverflow.com/questions/43445947/window-is-undefined-when-used-as-usevalue-provider-with-angular-4-aot\nexport function windowFactory() {\n  return window;\n}\nexport const windowToken = new InjectionToken<Window>('Window');\nexport const windowProvider = { provide: windowToken, useValue: window };\nimport {HostSiteService} from\"./services/host-site.service\";\nimport { SsoCrossDomainMessenger } from './services/sso-cross-domain-messenger';\nimport { BuyItemButtonComponent } from './buy-item-button/buy-item-button.component';\nimport { OrderService } from './services/order.service';\nimport { ShoppingService } from './services/shopping.service';\nimport { BillingDetailsComponent } from './billing-details/billing-details.component';\nimport { BillingCardComponent } from './billing-card/billing-card.component';\nimport { BillingService } from './services/billing.service';\nimport { AssignmentHydratorService } from './services/assignment-hydrator.service';\nimport { AssignmentService } from './services/assignment.service';\nimport { CopyClipboardComponent } from './copy-clipboard/copy-clipboard.component';\nimport { CopyClipboardService } from './services/copy-clipboard.service';\n\nimport { AssessmentGroupListComponent } from './assessment-group-list/assessment-group-list.component';\nimport { AssessmentGroupService } from './services/assessment-group.service';\nimport { SubscriptionHydratorService } from './services/subscription-hydrator.service';\nimport { MetricsService } from './services/metrics.service';\nimport { TabsComponent } from '../tabs/tabs.component';\nimport { TabComponent } from '../tab/tab.component';\nimport { CardComponent } from './card/card.component';\nimport {MatSelectModule} from '@angular/material/select';\nimport { ToastModule } from './toast/toast.module';\nimport { FhirService } from './services/fhir-service';\nimport { QuestionnaireService } from './services/questionnaire.service';\nimport { FhirSmartStyleService } from './services/fhir-smart-style.service';\n// import { MatDialogModule } from '@angular/material/dialog';\n\n\n@NgModule({\n  imports: [\n    CommonModule\n    ,FormsModule\n    ,RouterModule\n    ,HttpClientModule\n    ,MatSelectModule\n    ,ToastModule\n  ],\n  declarations: [AssessmentPickerComponent, SpinIconComponent, IfFeatureEnabled, ConditionEditComponent\n      ,SearchInputComponent, BackButtonComponent, UserSelectorComponent, RoleSelectorComponent\n      , UsernameCheckerComponent, PdfGenerateBtnComponent,\n      BuyItemButtonComponent\n      ,BillingDetailsComponent,\n      BillingCardComponent,\n      CopyClipboardComponent,\n      AssessmentGroupListComponent,\n      TabsComponent,\n      TabComponent,\n      CardComponent\n    ],\n\n  // TODO: stephen just found out according to this documentation that all of my lazy loaded modules\n  // create distinct copies of these services I'm sharing...  So I need to figure out what to do with\n  // all the providers I want to be singletons...\n  // https://angular.io/guide/ngmodule#!#shared-module\n  providers: [],\n  exports: [\n    AssessmentPickerComponent, SpinIconComponent, IfFeatureEnabled, ConditionEditComponent\n    , SearchInputComponent, BackButtonComponent, UserSelectorComponent\n    , RoleSelectorComponent, UsernameCheckerComponent, BuyItemButtonComponent\n    , BillingDetailsComponent, BillingCardComponent, AssessmentGroupListComponent\n    ,CommonModule\n    ,FormsModule\n    ,PdfGenerateBtnComponent\n    ,CopyClipboardComponent\n    ,TabsComponent\n    ,TabComponent\n    ,CardComponent\n  ]\n})\nexport class SharedModule {\n\n  static forRoot(): ModuleWithProviders<SharedModule> {\n    return {\n      ngModule: SharedModule,\n      providers: [windowProvider,\n        Authenticator, DacConfig, PaginatedResultsLoaderFactory, AssessmentService, AssessmentResultHydrator\n        , AssessmentHydrator,HTTPService, UniqueIdService, ClientService, StripePaymentProcessor\n        , FhirService\n        , AssessmentTokenService, AssessmentCompressorService, QuestionFactoryService, AssessmentGraderService\n        , QuestionAnswerPopulator, UserService, CompanyService, AlertService, Pako, PdfService, HostSiteService\n        , SsoCrossDomainMessenger, ShoppingService, OrderService, BillingService,AssignmentHydratorService\n        , AssignmentService, CopyClipboardService, AssessmentGroupService, SubscriptionHydratorService, MetricsService\n        , QuestionnaireService, FhirSmartStyleService ]\n    };\n  }\n}\n","/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class AssessmentResultAnswer {\n\n  private _question_id:string;\n  private  _answer:any;\n  private _score:number;\n\n  constructor() {\n    this._score = 0;\n    this._question_id = null;\n    this._answer = null;\n  }\n\n\n  public get question_id() : string {\n    return this._question_id;\n  }\n\n\n  public set question_id(v : string) {\n    this._question_id = v;\n  }\n\n\n  public get score() : number {\n    return this._score;\n  }\n\n\n  public set score(v : number) {\n    this._score = v;\n  }\n\n\n  public get answer() : any {\n    return this._answer;\n  }\n\n\n  public set answer(v : any) {\n    this._answer = v;\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { AssignmentItem } from \"./AssignmentItem\";\n\nexport class AssignedQuestionnaire extends AssignmentItem\n{\n    private questionnaireId:string|null;\n    private documentTemplateId:number|null;\n    private documentId:number|null;\n\n    public constructor() {\n        super();\n        this.Type = \"Questionnaire\";\n    }\n\n    public get QuestionnaireId() {\n        return this.questionnaireId;\n    }\n\n    public set QuestionnaireId(v:string) {\n        this.questionnaireId = v;\n    }\n\n    public get DocumentTemplateId() {\n        return this.documentTemplateId;\n    }\n\n    public set DocumentTemplateId(v:number|null) {\n        this.documentTemplateId = v;\n    }\n\n    public get DocumentId() {\n        return this.documentId;\n    }\n\n    public set DocumentId(v:number|null) {\n        this.documentId = v;\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Assignment } from \"./Assignment\";\nimport { AssignedAssessment } from \"./AssignedAssessment\";\n\nexport class AssignedAssessmentGroup extends Assignment\n{\n    private assessmentGroupId:number|null;\n    private name:string;\n\n    public constructor() {\n        super();\n        this.Type = \"AssessmentGroup\";\n    }\n\n    public get AssessmentGroupId() : number {\n        return this.assessmentGroupId;\n    }\n    public set AssessmentGroupId(v:number) {\n        this.assessmentGroupId = v;\n    }\n\n    public getAssessmentItems() : AssignedAssessment[] {\n        return this.Items.filter(i => i.Type == \"Assessment\").map(i => i as AssignedAssessment);\n    }\n\n    public get Name(): string {\n        return this.name;\n    }\n    public set Name(v: string) {\n        this.name = v;\n    }\n\n    public get isGroup() {\n      return true;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {AssessmentResult} from '../../shared/models/assessment-result';\nimport { Injectable } from '@angular/core';\nimport { ScaleResult } from 'app/shared/models/scale-result';\nimport { Question } from 'app/shared/models/question';\nimport { QuestionSet } from 'app/shared/models/question-set';\n\n@Injectable()\nexport class PclGraderService {\n\n\n  constructor() {\n  this\n   }\n\n  // TODO: stephen look at caching these results...\n  getPCLCriteriaFromAssessmentResult(assessmentResult:AssessmentResult) {\n\n    let questionSetsByQuestion:Map<Question, QuestionSet> = new Map<Question, QuestionSet>();\n\n    assessmentResult.assessment\n    .question_sets.forEach(qs => qs.questions\n    .forEach(q => questionSetsByQuestion.set(q, qs)));\n\n    return assessmentResult.scaleResults.map(sr => {\n      let questions = assessmentResult.assessment.getQuestionsForScale(sr.scale);\n      let hasPTSD = this.checkScaleForPTSD(sr, questions, questionSetsByQuestion);\n      return {\n        name: this.getShortName(sr.scale.name), hasPTSD: hasPTSD, scaleResult: sr\n      }\n    });\n  }\n\n  private getShortName(criteriaName:string) {\n    return criteriaName.replace(\"Criteria \", \"\");\n  }\n\n  private checkScaleForPTSD(scaleResult:ScaleResult, questions:Question[], questionSetsByQuestion:Map<Question, QuestionSet>) {\n    // no point in checking if the score is 0\n    if (scaleResult.score <= 0) {\n      return false;\n    }\n    // @see https://www.ptsd.va.gov/professional/assessment/documents/using-PCL5.pdf\n    // for the grading criteria\n\n    // Labels are 0 Not at all, 1 = A little bit, 2 = Moderate, 3 Quite a bit, 4 = Extremely\n    // so a score of 2 for a single question trigger works, or a label index of 2 for two questions works\n    // on the other criteria\n\n    // on the simple criteria they only have to answer 1 question to mark it as PTSD\n    if (scaleResult.scale.id == '6cfb2519-68af-1a4a-32bf-25db6b71d904' // criteria B\n        || scaleResult.scale.id == '8b4e65f1-12d3-22aa-23d5-edccd6bccd68') // criteria C\n    {\n      return scaleResult.score > 0;\n    }\n    // the other criteria require at least one answer (which in this case is an answer > the default of Not at all)\n    else if (scaleResult.scale.id == '4870117d-27af-a6fe-9d25-ee568cca6c47' // criteria D\n        || scaleResult.scale.id == '48b296d3-101a-e80e-5205-9ff01f832bf8')  // criteria E\n    {\n        let matchedQuestions = questions.map(q => {\n          let questionSet = questionSetsByQuestion.get(q);\n          let labelIndex = questionSet.labels.findIndex(l => q.answerForSave == l.id);\n          return labelIndex >= 2;\n        }).filter(result => result);\n\n        return matchedQuestions.length > 2;\n    }\n    return false;\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {ListQuestion} from '../models/list-question';\nimport { Injectable,Inject } from '@angular/core';\nimport { Scale } from \"../models/scale\";\nimport { ScaleRange } from \"../models/scale-range\";\nimport { Assessment } from \"../models/assessment\";\nimport { QuestionSet } from \"../models/question-set\";\nimport { QuestionSetLabel } from \"../models/question-set-label\";\nimport { Question } from \"../models/question\";\nimport { DisplayCondition } from \"../models/display-condition\";\nimport { QuestionFactoryService } from \"./question-factory.service\";\nimport {extend, omit} from \"lodash\";\nimport { FlaggedCondition } from 'app/shared/models/flagged-condition';\n\n@Injectable()\nexport class AssessmentHydrator\n{\n\tprivate scales:Map<String, Scale>;\n\n\tconstructor(\n\t\tprivate questionFactory:QuestionFactoryService) {\n    this.scales = new Map();\n\t}\n\n\tpublic hydrate(data: any) : Assessment {\n\t\tlet assessment = new Assessment();\n\t\textend(assessment, data);\n\n\n\t\tlet qs = data._question_sets || data.question_sets;\n\t\tlet scales = data._scales || data.scales;\n\t\tif (scales) {\n\t\t\t// we need to hydrate the scale, then populate the map, finally hydrate the sub scales as they may refer to each other\n\t\t\t// since we likely won't have more than 20-50 items this should be fine for runtime.\n\t\t\tassessment.scales = scales.map(s => this.hydrateScale(s));\n\t\t\tassessment.scales.forEach(s => this.scales[s.id] = s);\n\t\t\tassessment.scales.forEach(s => this.populateSubScaleProxies(s));\n\t\t}\n\n\t\tif (qs) {\n\t\t\tassessment.question_sets = qs.map(s => this.hydrateQuestionSet(s));\n\t\t\tthis.hydrateDisplayConditions(assessment);\n\t\t}\n\t\tif (this.shouldMigrateAssessment(assessment.uid)) {\n\t\t\tthis.migrateAssessment(assessment);\n\t\t}\n\t\treturn assessment;\n\t}\n\n\tprivate shouldMigrateAssessment(uid:string) {\n\t\tlet migrateAssessments = ['perceived-social-support', 'couples-satisfaction-index'];\n\t\tif (migrateAssessments.indexOf(uid) >= 0) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\tprivate migrateAssessment(assessment:Assessment) {\n\t\t// force the couples-satisfaction-index to have the negative to positive flag\n\t\tlet negToPosAssessments = ['perceived-social-support', 'couples-satisfaction-index'];\n\t\tif (negToPosAssessments.indexOf(assessment.uid) >= 0) {\n\t\t\tassessment.scales.forEach(s => s.negativeToPositiveRanges = true);\n\t\t}\n\t}\n\n\tprivate hydrateDisplayConditions(assessment:Assessment) {\n\t\tassessment.question_sets.forEach(qs => {\n\t\t\tif (qs.display_conditions.length) {\n\t\t\t\tqs.display_conditions = qs.display_conditions.map((dc:any) => {\n\t\t\t\t\tlet result = new DisplayCondition();\n\t\t\t\t\tresult.displayType = dc._displayType;\n\t\t\t\t\tresult.questionSet = assessment.getQuestionSetById(dc._questionSetId);\n\t\t\t\t\tif (result.questionSet) {\n\t\t\t\t\t\tresult.question = result.questionSet.getQuestionById(dc._questionId);\n\t\t\t\t\t\tif (result.question instanceof ListQuestion && result.question.CustomLabels) {\n\t\t\t\t\t\t\tresult.answer = result.question.CustomLabels.find(l => l.id == dc._answerId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// try looking in the questionSet if we don't have anything with the question.\n\t\t\t\t\t\tif (!result.answer) {\n\t\t\t\t\t\t\tresult.answer = result.questionSet.labels.find(l => l.id == dc._answerId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate hydrateQuestionSet(data:any) : QuestionSet{\n\t\tlet item:QuestionSet = extend(new QuestionSet(), data);\n\t\tlet labels = data._labels || data.labels;\n\t\tlet questions = data._questions || data.questions;\n\t\tlet display_conditions = data._display_conditions || data.display_conditions;\n\n\t\tif (labels) {\n\t\t\tlet newLabels = labels.map(i => this.hydrateQuestionSetLabel(i));\n\t\t\titem.labels = newLabels;\n\t\t}\n\t\tif (questions) {\n\t\t\tlet newQuestions = questions.map(i => this.hydrateQuestion(i, item));\n\t\t\titem.questions = newQuestions;\n\t\t}\n\t\tif (display_conditions) {\n\t\t\titem.display_conditions = display_conditions;\n\t\t}\n\t\treturn item;\n\t}\n\n\tprivate hydrateQuestionSetLabel(data:any) : QuestionSetLabel {\n\t\treturn extend(new QuestionSetLabel(), data);\n\t}\n\n\tpublic hydrateScaleRange(data:any) : ScaleRange {\n\t\treturn extend(new ScaleRange(), data);\n\t}\n\n\tpublic hydrateScale(data:any) : Scale {\n\t\tlet scale:Scale = extend(new Scale(), data);\n\t\tlet ranges = data._ranges || data.ranges;\n\t\tif (ranges) {\n\t\t\tscale.ranges = ranges.map(r => this.hydrateScaleRange(r));\n\t\t}\n\t\tlet scaleIds = data._subScaleIds || data.subScaleIds;\n\t\tif (scaleIds && scaleIds.length > 0) {\n\t\t\t// create proxy objects that we will fill in once everything is done.\n\t\t\tscaleIds.map(id => Object.assign(new Scale(), {id: id}))\n\t\t\t\t.forEach(s => {\n\t\t\t\t\tif (s) {\n\t\t\t\t\t\tscale.addSubScale(s);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\treturn scale;\n\t}\n\n\tprivate populateSubScaleProxies(scale:Scale) {\n\t\tfor (let id of scale.getSubScaleIds()) {\n\t\t\tlet proxy = scale.SubScales[id];\n\t\t\tif (this.scales[id]) { // replace the sub scale with the hydrated one\n\t\t\t\tscale.addSubScale(this.scales[id]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.error(\"Failed to find sub scale with id \" + id + \" in scale \" + scale.id);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate hydrateQuestion(data:any, questionSet:QuestionSet) : Question {\n\t\tlet type = data.type || data._type;\n\t\tlet question = this.questionFactory.createQuestionForType(type);\n\t\tvar item:Question = extend(question, omit(data, '_answers')); // skip over the _answers for the QuestionSet Answer\n\t\t// let answer = data._answer || data.answer;\n\t\tlet scale = data._scale || data.scale;\n\t\tlet flaggedCondition = data._flaggedCondition || data.flaggedCondition;\n\t\tlet customLabels = data._customLabels || data.customLabels;\n\n\t\tif (scale) {\n\t\t\t// grab the scale from our populated scales\n\t\t\t// so we can deal with the reference pointers\n\t\t\tlet scaleId = scale._id || scale.id;\n\t\t\tif (this.scales[scaleId]) {\n\t\t\t\titem.assessment_scale = this.scales[scaleId];\n\t\t\t}\n\t\t}\n\t\tif (flaggedCondition) {\n\t\t\tlet flag:FlaggedCondition = extend(new FlaggedCondition(), flaggedCondition);\n\t\t\t// overwrite the labels so we use what's in the question set.\n\t\t\tlet lbls = questionSet.labels;\n\t\t\tlet flagValues = flaggedCondition._flagValues || flaggedCondition.flagValues;\n\t\t\tflag.clearFlagValues();\n\t\t\tflagValues.forEach(fv => {\n\t\t\t\tlet id = fv.id || fv._id;\n\t\t\t\tlet qsl = questionSet.labels.find(qsl => id == qsl.id);\n\t\t\t\tif (qsl) {\n\t\t\t\t\tflag.addFlagValue(qsl)\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconsole.log(\"question set did not have label with id \", fv.id);\n\t\t\t\t}\n\t\t\t});\n\t\t\tquestion.flaggedCondition = flag;\n\t\t}\n\t\t// TODO: stephen not sure I like this as there's too much type checking here.\n\t\tif (customLabels) {\n\t\t\tlet labels = customLabels.map(cl => extend(new QuestionSetLabel(), cl));\n\t\t\tlet listType = question as ListQuestion;\n\t\t\tlistType.CustomLabels = labels;\n\t\t}\n\t\treturn item;\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Variable} from './variable';\nimport {AssessmentResult} from '../../shared/models/assessment-result';\nimport {IReportItemComponent} from './i-report-item-component';\nimport { ScaleResult } from 'app/shared/models/scale-result';\nimport { BaseReportItemComponent } from \"./base-report-item-component\";\nimport { Directive } from \"@angular/core\";\n\n@Directive()\nexport abstract class ScaleDataSectionComponent extends BaseReportItemComponent implements IReportItemComponent {\n\n      private _assessmentResult:AssessmentResult;\n      private _scaleResults:ScaleResult[];\n\n      constructor() {\n        super();\n        this._scaleResults = [];\n      }\n\n      public setReportData(data:any, results:AssessmentResult[], variables:Variable[]) {\n        if (!data || !results) {\n          return;\n        }\n        if (data.assessment) {\n          this._assessmentResult = results.find(r => r.assessment.uid == data.assessment);\n        }\n        else if (data.computed_result) {\n          this._assessmentResult = results.find(r => r.id === data.computed_result);\n        }\n        if (this._assessmentResult) {\n          // normally we take all the scales... but we can filter them here\n          if (data.scales && data.scales.length) {\n            this._scaleResults = this._assessmentResult.scaleResults\n              .filter(sr => data.scales.indexOf(sr.scale.id) >= 0);\n          }\n          else {\n            this._scaleResults = this._assessmentResult.scaleResults;\n          }\n          this._assessmentResult.scaleResults.forEach(s => console.log(this._assessmentResult.assessment.name, \"=>\",s.scale.name , \"(\", s.scale.id, \")\"));\n        }\n      }\n\n      ngOnInit() {\n\n      }\n      ngAfterViewInit() {\n        super.ngAfterViewInit();\n      }\n\n      get ScaleResults() {\n        return this._scaleResults;\n      }\n      get AssessmentResult() {\n        return this._assessmentResult;\n      }\n      set AssessmentResult(v:AssessmentResult) {\n        this._assessmentResult = v;\n      }\n    }\n","var map = {\n\t\"./af\": \"K/tc\",\n\t\"./af.js\": \"K/tc\",\n\t\"./ar\": \"jnO4\",\n\t\"./ar-dz\": \"o1bE\",\n\t\"./ar-dz.js\": \"o1bE\",\n\t\"./ar-kw\": \"Qj4J\",\n\t\"./ar-kw.js\": \"Qj4J\",\n\t\"./ar-ly\": \"HP3h\",\n\t\"./ar-ly.js\": \"HP3h\",\n\t\"./ar-ma\": \"CoRJ\",\n\t\"./ar-ma.js\": \"CoRJ\",\n\t\"./ar-sa\": \"gjCT\",\n\t\"./ar-sa.js\": \"gjCT\",\n\t\"./ar-tn\": \"bYM6\",\n\t\"./ar-tn.js\": \"bYM6\",\n\t\"./ar.js\": \"jnO4\",\n\t\"./az\": \"SFxW\",\n\t\"./az.js\": \"SFxW\",\n\t\"./be\": \"H8ED\",\n\t\"./be.js\": \"H8ED\",\n\t\"./bg\": \"hKrs\",\n\t\"./bg.js\": \"hKrs\",\n\t\"./bn\": \"kEOa\",\n\t\"./bn.js\": \"kEOa\",\n\t\"./bo\": \"0mo+\",\n\t\"./bo.js\": \"0mo+\",\n\t\"./br\": \"aIdf\",\n\t\"./br.js\": \"aIdf\",\n\t\"./bs\": \"JVSJ\",\n\t\"./bs.js\": \"JVSJ\",\n\t\"./ca\": \"1xZ4\",\n\t\"./ca.js\": \"1xZ4\",\n\t\"./cs\": \"PA2r\",\n\t\"./cs.js\": \"PA2r\",\n\t\"./cv\": \"A+xa\",\n\t\"./cv.js\": \"A+xa\",\n\t\"./cy\": \"l5ep\",\n\t\"./cy.js\": \"l5ep\",\n\t\"./da\": \"DxQv\",\n\t\"./da.js\": \"DxQv\",\n\t\"./de\": \"tGlX\",\n\t\"./de-at\": \"s+uk\",\n\t\"./de-at.js\": \"s+uk\",\n\t\"./de-ch\": \"u3GI\",\n\t\"./de-ch.js\": \"u3GI\",\n\t\"./de.js\": \"tGlX\",\n\t\"./dv\": \"WYrj\",\n\t\"./dv.js\": \"WYrj\",\n\t\"./el\": \"jUeY\",\n\t\"./el.js\": \"jUeY\",\n\t\"./en-au\": \"Dmvi\",\n\t\"./en-au.js\": \"Dmvi\",\n\t\"./en-ca\": \"OIYi\",\n\t\"./en-ca.js\": \"OIYi\",\n\t\"./en-gb\": \"Oaa7\",\n\t\"./en-gb.js\": \"Oaa7\",\n\t\"./en-ie\": \"4dOw\",\n\t\"./en-ie.js\": \"4dOw\",\n\t\"./en-nz\": \"b1Dy\",\n\t\"./en-nz.js\": \"b1Dy\",\n\t\"./eo\": \"Zduo\",\n\t\"./eo.js\": \"Zduo\",\n\t\"./es\": \"iYuL\",\n\t\"./es-do\": \"CjzT\",\n\t\"./es-do.js\": \"CjzT\",\n\t\"./es.js\": \"iYuL\",\n\t\"./et\": \"7BjC\",\n\t\"./et.js\": \"7BjC\",\n\t\"./eu\": \"D/JM\",\n\t\"./eu.js\": \"D/JM\",\n\t\"./fa\": \"jfSC\",\n\t\"./fa.js\": \"jfSC\",\n\t\"./fi\": \"gekB\",\n\t\"./fi.js\": \"gekB\",\n\t\"./fo\": \"ByF4\",\n\t\"./fo.js\": \"ByF4\",\n\t\"./fr\": \"nyYc\",\n\t\"./fr-ca\": \"2fjn\",\n\t\"./fr-ca.js\": \"2fjn\",\n\t\"./fr-ch\": \"Dkky\",\n\t\"./fr-ch.js\": \"Dkky\",\n\t\"./fr.js\": \"nyYc\",\n\t\"./fy\": \"cRix\",\n\t\"./fy.js\": \"cRix\",\n\t\"./gd\": \"9rRi\",\n\t\"./gd.js\": \"9rRi\",\n\t\"./gl\": \"iEDd\",\n\t\"./gl.js\": \"iEDd\",\n\t\"./gom-latn\": \"DKr+\",\n\t\"./gom-latn.js\": \"DKr+\",\n\t\"./he\": \"x6pH\",\n\t\"./he.js\": \"x6pH\",\n\t\"./hi\": \"3E1r\",\n\t\"./hi.js\": \"3E1r\",\n\t\"./hr\": \"S6ln\",\n\t\"./hr.js\": \"S6ln\",\n\t\"./hu\": \"WxRl\",\n\t\"./hu.js\": \"WxRl\",\n\t\"./hy-am\": \"1rYy\",\n\t\"./hy-am.js\": \"1rYy\",\n\t\"./id\": \"UDhR\",\n\t\"./id.js\": \"UDhR\",\n\t\"./is\": \"BVg3\",\n\t\"./is.js\": \"BVg3\",\n\t\"./it\": \"bpih\",\n\t\"./it.js\": \"bpih\",\n\t\"./ja\": \"B55N\",\n\t\"./ja.js\": \"B55N\",\n\t\"./jv\": \"tUCv\",\n\t\"./jv.js\": \"tUCv\",\n\t\"./ka\": \"IBtZ\",\n\t\"./ka.js\": \"IBtZ\",\n\t\"./kk\": \"bXm7\",\n\t\"./kk.js\": \"bXm7\",\n\t\"./km\": \"6B0Y\",\n\t\"./km.js\": \"6B0Y\",\n\t\"./kn\": \"PpIw\",\n\t\"./kn.js\": \"PpIw\",\n\t\"./ko\": \"Ivi+\",\n\t\"./ko.js\": \"Ivi+\",\n\t\"./ky\": \"lgnt\",\n\t\"./ky.js\": \"lgnt\",\n\t\"./lb\": \"RAwQ\",\n\t\"./lb.js\": \"RAwQ\",\n\t\"./lo\": \"sp3z\",\n\t\"./lo.js\": \"sp3z\",\n\t\"./lt\": \"JvlW\",\n\t\"./lt.js\": \"JvlW\",\n\t\"./lv\": \"uXwI\",\n\t\"./lv.js\": \"uXwI\",\n\t\"./me\": \"KTz0\",\n\t\"./me.js\": \"KTz0\",\n\t\"./mi\": \"aIsn\",\n\t\"./mi.js\": \"aIsn\",\n\t\"./mk\": \"aQkU\",\n\t\"./mk.js\": \"aQkU\",\n\t\"./ml\": \"AvvY\",\n\t\"./ml.js\": \"AvvY\",\n\t\"./mr\": \"Ob0Z\",\n\t\"./mr.js\": \"Ob0Z\",\n\t\"./ms\": \"6+QB\",\n\t\"./ms-my\": \"ZAMP\",\n\t\"./ms-my.js\": \"ZAMP\",\n\t\"./ms.js\": \"6+QB\",\n\t\"./my\": \"honF\",\n\t\"./my.js\": \"honF\",\n\t\"./nb\": \"bOMt\",\n\t\"./nb.js\": \"bOMt\",\n\t\"./ne\": \"OjkT\",\n\t\"./ne.js\": \"OjkT\",\n\t\"./nl\": \"+s0g\",\n\t\"./nl-be\": \"2ykv\",\n\t\"./nl-be.js\": \"2ykv\",\n\t\"./nl.js\": \"+s0g\",\n\t\"./nn\": \"uEye\",\n\t\"./nn.js\": \"uEye\",\n\t\"./pa-in\": \"8/+R\",\n\t\"./pa-in.js\": \"8/+R\",\n\t\"./pl\": \"jVdC\",\n\t\"./pl.js\": \"jVdC\",\n\t\"./pt\": \"8mBD\",\n\t\"./pt-br\": \"0tRk\",\n\t\"./pt-br.js\": \"0tRk\",\n\t\"./pt.js\": \"8mBD\",\n\t\"./ro\": \"lyxo\",\n\t\"./ro.js\": \"lyxo\",\n\t\"./ru\": \"lXzo\",\n\t\"./ru.js\": \"lXzo\",\n\t\"./sd\": \"Z4QM\",\n\t\"./sd.js\": \"Z4QM\",\n\t\"./se\": \"//9w\",\n\t\"./se.js\": \"//9w\",\n\t\"./si\": \"7aV9\",\n\t\"./si.js\": \"7aV9\",\n\t\"./sk\": \"e+ae\",\n\t\"./sk.js\": \"e+ae\",\n\t\"./sl\": \"gVVK\",\n\t\"./sl.js\": \"gVVK\",\n\t\"./sq\": \"yPMs\",\n\t\"./sq.js\": \"yPMs\",\n\t\"./sr\": \"zx6S\",\n\t\"./sr-cyrl\": \"E+lV\",\n\t\"./sr-cyrl.js\": \"E+lV\",\n\t\"./sr.js\": \"zx6S\",\n\t\"./ss\": \"Ur1D\",\n\t\"./ss.js\": \"Ur1D\",\n\t\"./sv\": \"X709\",\n\t\"./sv.js\": \"X709\",\n\t\"./sw\": \"dNwA\",\n\t\"./sw.js\": \"dNwA\",\n\t\"./ta\": \"PeUW\",\n\t\"./ta.js\": \"PeUW\",\n\t\"./te\": \"XLvN\",\n\t\"./te.js\": \"XLvN\",\n\t\"./tet\": \"V2x9\",\n\t\"./tet.js\": \"V2x9\",\n\t\"./th\": \"EOgW\",\n\t\"./th.js\": \"EOgW\",\n\t\"./tl-ph\": \"Dzi0\",\n\t\"./tl-ph.js\": \"Dzi0\",\n\t\"./tlh\": \"z3Vd\",\n\t\"./tlh.js\": \"z3Vd\",\n\t\"./tr\": \"DoHr\",\n\t\"./tr.js\": \"DoHr\",\n\t\"./tzl\": \"z1FC\",\n\t\"./tzl.js\": \"z1FC\",\n\t\"./tzm\": \"wQk9\",\n\t\"./tzm-latn\": \"tT3J\",\n\t\"./tzm-latn.js\": \"tT3J\",\n\t\"./tzm.js\": \"wQk9\",\n\t\"./uk\": \"raLr\",\n\t\"./uk.js\": \"raLr\",\n\t\"./ur\": \"UpQW\",\n\t\"./ur.js\": \"UpQW\",\n\t\"./uz\": \"Loxo\",\n\t\"./uz-latn\": \"AQ68\",\n\t\"./uz-latn.js\": \"AQ68\",\n\t\"./uz.js\": \"Loxo\",\n\t\"./vi\": \"KSF8\",\n\t\"./vi.js\": \"KSF8\",\n\t\"./x-pseudo\": \"/X5v\",\n\t\"./x-pseudo.js\": \"/X5v\",\n\t\"./yo\": \"fzPg\",\n\t\"./yo.js\": \"fzPg\",\n\t\"./zh-cn\": \"XDpg\",\n\t\"./zh-cn.js\": \"XDpg\",\n\t\"./zh-hk\": \"SatO\",\n\t\"./zh-hk.js\": \"SatO\",\n\t\"./zh-tw\": \"kOpN\",\n\t\"./zh-tw.js\": \"kOpN\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"RnhZ\";","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Assignment } from \"./Assignment\";\n\nexport class AssignmentSingle extends Assignment {\n    public get Name(): string {\n        if (this.Items.length < 1) {\n            return \"\";\n        }\n        return this.Items[0].Name;\n    }\n    public set Name(v: string) {\n        if (this.Items.length < 1) {\n            return;\n        }\n        this.Items[0].Name = v;\n    }\n\n    public get ResultId(): string {\n        if (this.Items.length < 1) {\n            return \"\";\n        }\n        return this.Items[0].ResultId;\n    }\n    public set ResultId(v: string) {\n        if (this.Items.length < 1) {\n            return;\n        }\n        this.Items[0].ResultId = v;\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from \"@angular/core\";\n\ndeclare var _paq;  // our external tracking variable\n\n@Injectable()\nexport class MetricsService {\n    constructor() {\n\n    }\n    public trackEvent(category, action, name?:string, value?:string) {\n        let data = ['trackEvent', category, action];\n        if (name) {\n            data.push(name);\n        }\n        if (value !== undefined) {\n            data.push(value);\n        }\n        if (_paq) {\n          _paq.push(data);\n        }\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { DacConfig } from \"./shared/services/dac-config.service\";\nimport { AuthService } from './login/services/auth.service';\nimport { ActivatedRoute, ActivatedRouteSnapshot, NavigationEnd, Router } from '@angular/router';\nimport { filter } from 'rxjs/operators';\nimport { SiteContainerComponent } from './theme/site-container/site-container.component';\nimport { HTTPService } from './shared/services/http.service';\nimport { ModalService } from './shared/services/modal.service';\nimport { LoginDialogComponent } from './login/login-dialog/login-dialog.component';\nimport { DacModalRef } from './shared/models/DacModalRef';\nimport { MatDialogState } from '@angular/material/dialog';\nimport { SubscriptionLike as ISubscription } from 'rxjs';\nimport { Authenticator } from './shared/services/authenticator';\nimport { FhirSmartStyleService } from './shared/services/fhir-smart-style.service';\nimport { SmartStyleSettings } from './shared/models/SmartStyleSettings';\ndeclare var _paq;\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent  implements OnInit, OnDestroy {\n\n  @Input() isAdmin:boolean;\n  @Input() authToken:string;\n  @ViewChild(\"siteContainer\") siteContainer:SiteContainerComponent;\n\n  private _httpSubscription:ISubscription;\n  private loginDialogRef:DacModalRef<LoginDialogComponent>;\n\n  constructor(\n    private authService:AuthService\n    , private dacConfig:DacConfig\n    , private route:ActivatedRoute\n    , private router:Router\n    , private httpService:HTTPService\n    , private modalService:ModalService\n    , private authenticator:Authenticator\n    , private fhirStyleService:FhirSmartStyleService\n    ) {\n    // authService.isAdmin = true;\n      var currentUrl = this.route.snapshot.url.join(\"/\");\n      const navEndEvent$ = router.events.pipe(\n        filter(e => e instanceof NavigationEnd)\n      );\n      navEndEvent$.subscribe((e: NavigationEnd) => {\n        _paq.push(['setReferrerUrl', currentUrl]);\n        currentUrl = e.urlAfterRedirects;\n        _paq.push(['setCustomUrl', currentUrl]);\n        // _paq.push(['setDocumentTitle', 'My New Title']);\n\n        // remove all previously assigned custom variables, requires Matomo (formerly Piwik) 3.0.2\n        _paq.push(['deleteCustomVariables', 'page']);\n        _paq.push(['setGenerationTimeMs', 0]);\n        _paq.push(['trackPageView']);\n      });\n  }\n\n  hasSmartStyles() {\n    return this.dacConfig.smartStyles;\n  }\n\n  smartStyles() : SmartStyleSettings {\n    return this.dacConfig.smartStyles;\n  }\n\n  ngOnInit() {\n    this.fhirStyleService.loadSmartStyles();\n    // if (this.authToken) {\n    //   this.authenticator.AuthenticationToken = this.authToken;\n    // }\n\n    // test assumption that this always fires even if there are no parameters...\n    this.route.queryParams.subscribe(params => {\n      // console.log(\"Query params are subscribed inside ngAfterViewInit()\", params);\n      if (params.seamless) {\n        this.dacConfig.setupSeamlessModeForSession(params.skin);\n      }\n      else if (params.skin && params.skin.length) {\n        this.dacConfig.replaceSkinClasses([params.skin]);\n      }\n      // console.log(\"Config file skin classes are now \", this.dacConfig.skinClasses);\n\n      let body = document.querySelector(\"body\");\n      let className = this.dacConfig.skinClasses.join(\" \");\n      body.className = className;\n      if (this.siteContainer) {\n        this.siteContainer.showSideNav = this.dacConfig.seamlessMode !== true;\n      }\n    });\n\n    this._httpSubscription = this.httpService.currentStatus().subscribe((statusCode) => {\n      if (this.shouldOpenLoginDialog(statusCode, this.route.snapshot)) {\n        this.openLoginDialog();\n      }\n    });\n  }\n  ngAfterViewInit() {\n    if (this.dacConfig.seamlessMode && this.siteContainer) {\n      this.siteContainer.showSideNav = false;\n    }\n  }\n  ngOnDestroy() {\n    if (this._httpSubscription) {\n      this._httpSubscription.unsubscribe();\n      this._httpSubscription = null;\n    }\n  }\n\n  private shouldOpenLoginDialog(statusCode:number, snapshot:ActivatedRouteSnapshot) {\n    if (statusCode === 401) {\n      let childUrl = snapshot.firstChild ? snapshot.firstChild.url.join(\"\").trim() : \"\";\n      if (childUrl == \"\"\n          || childUrl.endsWith(\"home\")\n          || childUrl.endsWith(\"login\")\n          || childUrl.endsWith(\"loginAdmin\")\n          || childUrl.endsWith(\"logout\")) {\n        return false;\n      }\n\n      // check if the dialog is already open\n      if (this.loginDialogRef && this.loginDialogRef.getState() === MatDialogState.OPEN) {\n        return false;\n      }\n      return true;\n    }\n    return false;\n  }\n\n  private openLoginDialog() {\n    // reset our dialog\n    this.loginDialogRef = this.modalService.openDialog(LoginDialogComponent);\n  }\n}\n","<router-outlet></router-outlet>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from \"@angular/core\";\nimport { ScaleResult } from \"app/shared/models/scale-result\";\nimport { AssessmentResult } from \"app/shared/models/assessment-result\";\nimport { Variable } from \"app/reports/models/variable\";\nimport { Assessment } from \"app/shared/models/assessment\";\nimport { BaseReportItemComponent } from \"app/reports/models/base-report-item-component\";\nimport { IReportItemComponent } from \"app/reports/models/i-report-item-component\";\n\ninterface ScaleChart {\n  scaleResult: ScaleResult\n  , assessment: Assessment\n}\n@Component({\n  selector: \"app-scale-results-summary\",\n  templateUrl: \"./scale-results-summary.component.html\"\n})\nexport class ScaleResultsSummaryComponent extends BaseReportItemComponent implements OnInit, IReportItemComponent {\n  public charts: ScaleChart[];\n  public mainChart: ScaleChart;\n\n  private _scales_per_page: number;\n  private _assessmentResult: AssessmentResult;\n  private _scaleResults: ScaleResult[];\n  private _assessmentResults: AssessmentResult[];\n  private _resultByUid: Map<any, AssessmentResult>;\n  private _title: string;\n  private _description: string;\n\n  private _sections: any[];\n\n\n  get sections() {\n    if (this._sections && this._sections.length) {\n      return this._sections;\n    }\n    return [];\n  }\n\n  constructor() {\n    super();\n    this.charts = [];\n    this._resultByUid = new Map<any, AssessmentResult>();\n    this._sections = [];\n  }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n\n  getPrintClasses(section:{printHide?:boolean, printDisplayOnly?:boolean}) {\n    let styles = {\n      'd-print-none': section.printHide\n      , 'd-none d-print-block': section.printDisplayOnly\n      , 'section-page-break': !section.printHide\n    };\n    return styles;\n  }\n\n  getChartClasses(item:any) {\n    if (item.chartSize) {\n      let result = \"p-\" + item.chartSize + \"-chart\";\n      return [result];\n    }\n    else {\n      return [\"p-small-chart\"];\n    }\n  }\n\n  public getAssessmentResult(uid: any): AssessmentResult {\n    if (this._resultByUid.has(uid)) {\n      return this._resultByUid.get(uid);\n    }\n    return null;\n  }\n\n  public getScaleResultItems(scaleResults: { assessmentUid: string, scaleId: string }[]) {\n    if (!(scaleResults && scaleResults.length)) {\n      return [];\n    }\n\n    return scaleResults.map(sr => this.getScaleResult(sr.assessmentUid, sr.scaleId));\n  }\n\n  public getScaleResult(uid: any, scaleId: string) {\n    if (this._resultByUid.has(uid)) {\n      return this._resultByUid.get(uid).getScaleResultByScaleId(scaleId);\n    }\n    return null;\n  }\n\n  getScaleResultLabels(uid: any, scaleId: string) {\n    let result = this.getScaleResult(uid, scaleId);\n    if (result) {\n      return result.scale.ranges.map(r => r.displayName);\n    }\n  }\n\n  public hasAssessment(uid: any) {\n    return this._resultByUid.has(uid);\n  }\n\n  /**\n   * data => {\n   * \"charts\" => [{\n   *   \"assessment: \"dass-21\", \"scale\": \"88....\"\n   *  }]\n   * }\n   * @param data\n   * @param results\n   * @param variables\n   */\n  public setReportData(data: any, results: AssessmentResult[], variables: Variable[]) {\n    if (!data || !results) {\n      return;\n    }\n\n    this._title = data.title;\n    this._description = data.description;\n\n    // if there are multiples... this uses the last instance they took...\n    results.forEach(rs => {\n      this._resultByUid.set(rs.assessment.uid, rs);\n    });\n\n    if (data.sections) {\n      this._sections = data.sections;\n    }\n    else {\n      this._sections = [];\n    }\n  }\n\n  public shouldPrintBreak(index: number) {\n    // since index is 0 based the the user scales per page is 1 based we convert.\n    return ((index + 1) == this._scales_per_page);\n  }\n\n  get ScalesPerPage() {\n    return this._scales_per_page;\n  }\n\n  get ScaleResults() {\n    return this._scaleResults;\n  }\n  get AssessmentResult() {\n    return this._assessmentResult;\n  }\n\n  get title() {\n    return this._title;\n  }\n\n  get description() {\n    return this._description;\n  }\n\n}\n","<div class=\"card card-wider card-cascade\">\n    <div class=\"view gradient-card-header primary-gradient text-light\">\n        <h3 class='h3-responsive text-center'>{{title}}</h3>\n    </div>\n    <div class=\"card-body\">\n        <div class='row'>\n            <div class='col' *ngIf=\"description\" [innerHTML]=\"description\"></div>\n        </div>\n        <div *ngFor=\"let section of sections\" class=\"row d-print-block-visible\">\n            <div class=\"col-12 d-print-block-visible\">\n                <!-- two-column template -->\n                <div *ngIf=\"section.template == 'two-column'\" class=\"row mb-3 section section-two-column\" [ngClass]=\"getPrintClasses(section)\">\n                    <dac-summary-section-graph-item *ngFor=\"let item of section.components\" class=\"col-6\" [item]=\"item\" [assessmentResult]=\"getAssessmentResult(item.data.assessmentUid)\"\n                        [scaleResults]=\"getScaleResultItems(item.data.scaleResults)\">\n                    </dac-summary-section-graph-item>\n                </div>\n                <div *ngIf=\"section.template == 'three-graph'\" class=\"row mb-3 mb-print-0 section section-three-graph\" [ngClass]=\"getPrintClasses(section)\">\n                    <div class=\"col-12\">\n                        <div class=\"row\">\n                            <dac-summary-section-graph-item *ngFor=\"let item of section.components; let last = last;\" [ngClass]=\"{'col-6': !last, 'col-12 mt-md-3 mt-print-0': last}\"\n                                [item]=\"item\" [assessmentResult]=\"getAssessmentResult(item.data.assessmentUid)\" [scaleResults]=\"getScaleResultItems(item.data.scaleResults)\">\n                            </dac-summary-section-graph-item>\n                        </div>\n                    </div>\n                </div>\n                <!-- one-column-table -->\n                <div *ngIf=\"section.template == 'one-column-table'\" class=\"row mb-3  section section-one-column-table\" [ngClass]=\"getPrintClasses(section)\">\n                    <div class=\"col-12\">\n                        <div class=\"row\">\n                            <div class=\"col-12\">\n                                <div class=\"card card-cascade\">\n                                    <div class=\"view gradient-card-header secondary-gradient text-light mt-0\">\n                                        <h3 class='h3-responsive text-center'>{{section.title}}</h3>\n                                    </div>\n                                    <div class=\"card-body pt-1 pt-md-3\">\n                                        <div class=\"row justify-content-center\">\n                                            <app-summary-scales-chart *ngFor=\"let item of section.components\" class=\"col chart\" [ngClass]=\"getChartClasses(item)\" [showNames]=\"item.data.showNames\"\n                                                [scaleResults]=\"getScaleResultItems(item.data.scaleResults)\" [chartScaleNames]=\"item.data.chartScaleNames\"\n                                                [showRangeScore]=\"item.data.showRangeScore\"\n                                                [chartRangeNames]=\"item.data.chartRangeNames\" [reverseDirection]=\"item.data.reverseDirection\"></app-summary-scales-chart>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <app-scale-results-table-summary class=\"col\" [scaleResults]=\"getScaleResultItems(section.tableComponent.data.scaleResults)\"\n                                [highlightScaleResults]=\"getScaleResultItems(section.tableComponent.data.highlightScaleResults)\"></app-scale-results-table-summary>\n                        </div>\n                    </div>\n                </div>\n                <!-- two-column-table -->\n                <div *ngIf=\"section.template == 'two-column-table'\" class=\"row mb-3  section section-two-column-table\" [ngClass]=\"getPrintClasses(section)\">\n                    <div class=\"col-12\">\n                        <div class=\"row\">\n                            <div class=\"col-6\" *ngFor=\"let item of section.components\">\n                                <div class=\"card card-cascade h-100\">\n                                    <div class=\"view gradient-card-header secondary-gradient text-light\">\n                                        <h3 class='h3-responsive text-center'>{{item.title}}</h3>\n                                    </div>\n                                    <div class=\"card-body pt-1 pt-md-3\">\n                                        <div class=\"row\">\n                                            <app-summary-scales-chart class=\"col chart\" [ngClass]=\"getChartClasses(item)\" [showNames]=\"item.data.showNames\" [scaleResults]=\"getScaleResultItems(item.data.scaleResults)\"\n                                                [chartScaleNames]=\"item.data.chartScaleNames\" [chartRangeNames]=\"item.data.chartRangeNames\"\n                                                [showRangeScore]=\"item.data.showRangeScore\"\n                                                [reverseDirection]=\"item.data.reverseDirection\"></app-summary-scales-chart>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"col-12\">\n                        <div class=\"row\">\n                            <app-scale-results-table-summary class=\"col\" [scaleResults]=\"getScaleResultItems(section.tableComponent.data.scaleResults)\"\n                                [highlightScaleResults]=\"getScaleResultItems(section.tableComponent.data.highlightScaleResults)\"></app-scale-results-table-summary>\n                        </div>\n                    </div>\n                </div>\n                <div *ngIf=\"section.template == 'table'\" class=\"row mb-3 section section-table\" [ngClass]=\"getPrintClasses(section)\">\n                    <div class=\"col\">\n                        <div class=\"card card-cascade\">\n                            <div class=\"view gradient-card-header secondary-gradient text-light\" *ngIf=\"section.title\">\n                                <h3 class='h3-responsive text-center'>{{section.title}}</h3>\n                            </div>\n                            <div class=\"card-body pt-1 pt-md-3\">\n                                <div class=\"row\">\n                                    <app-scale-results-table-summary class=\"col\" [scaleResults]=\"getScaleResultItems(section.tableComponent.data.scaleResults)\"\n                                        [highlightScaleResults]=\"getScaleResultItems(section.tableComponent.data.highlightScaleResults)\"></app-scale-results-table-summary>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {ScaleResult} from \"./scale-result\";\nimport {Assessment} from \"./assessment\";\nimport {QuestionSet} from \"./question-set\";\nimport {Question} from \"./question\";\nimport { AssessmentResultAnswer } from \"./assessment-result-answer\";\n\nexport class AssessmentResult {\n\tprivate _id:string;\n\tprivate _assignmentItemId:number;\n\tprivate _assessment:Assessment;\n\tprivate _scaleResults:ScaleResult[];\n\tprivate _flaggedQuestions:Question[];\n  private _answers: AssessmentResultAnswer[];\n  private _answersByQuestionId:Map<string, AssessmentResultAnswer>;\n  private _dateCompleted:Date;\n\n\tconstructor() {\n\t\tthis._scaleResults = [];\n    this._answers = [];\n    this._answersByQuestionId = new Map<string, AssessmentResultAnswer>();\n    this._dateCompleted = new Date();\n\t}\n\n\n  public get dateCompleted() : Date {\n    return this._dateCompleted;\n  }\n\n  public set dateCompleted(v : Date) {\n    this._dateCompleted = v;\n  }\n\n\tpublic get assignmentItemId() : number {\n\t\treturn this._assignmentItemId;\n\t}\n\n\tpublic set assignmentItemId(v:number) {\n\t\tthis._assignmentItemId = v;\n\t}\n\tpublic get id() :string {\n\t\treturn this._id;\n\t}\n\n\tpublic set id(v:string) {\n\t\tthis._id = v;\n\t}\n\n\tpublic get assessment() : Assessment {\n\t\treturn this._assessment;\n\t}\n\n\tpublic set assessment(v : Assessment) {\n\t\tthis._assessment = v;\n\t}\n\n\n\tpublic get scaleResults() : ScaleResult[] {\n\t\treturn this._scaleResults;\n\t}\n\n\tpublic set scaleResults(v : ScaleResult[]) {\n\t\tthis._scaleResults = v;\n\t}\n\n\tpublic get hasResources() : boolean {\n\t\treturn this.assessment.resourcesURL && this.assessment.resourcesURL != \"\";\n\t}\n\n\tpublic get hasHomework() : boolean {\n\t\treturn this.scaleResults.some(this.scaleHasHomework);\n\t}\n\n\tpublic getScalesWithHomework() : ScaleResult[] {\n\t\treturn this.scaleResults.filter(this.scaleHasHomework);\n\t}\n\n\tpublic get flaggedQuestions(): Question[] {\n\t\treturn this._flaggedQuestions;\n\t}\n\n\tpublic set flaggedQuestions(value: Question[]) {\n\t\tthis._flaggedQuestions = value;\n\t}\n\n  public get answers(): AssessmentResultAnswer[] {\n    return this._answers;\n  }\n\n\n  public set answers(v : AssessmentResultAnswer[]) {\n    this._answers = v;\n    this._answersByQuestionId.clear();\n    this._answers.forEach(a => this._answersByQuestionId.set(a.question_id, a));\n  }\n\n  public addAnswer(answer:AssessmentResultAnswer) {\n    this._answers.push(answer);\n    this._answersByQuestionId.set(answer.question_id, answer);\n  }\n\n  public getAnswerForQuestionId(questionId:string) : AssessmentResultAnswer|null {\n    if (this._answersByQuestionId.has(questionId)) {\n      return this._answersByQuestionId.get(questionId);\n    }\n    return null;\n  }\n\n\tpublic getScaleResultByScaleId(scaleId:string) :  ScaleResult {\n\t\t// TODO: stephen optimize this later.\n\t\tlet results:ScaleResult[] = this.scaleResults.filter(s => {\n\t\t\treturn s.scale != null && s.scale.id === scaleId;\n\t\t});\n\t\tif (results.length) {\n\t\t\treturn results[0];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate scaleHasHomework(scaleResult:ScaleResult) : boolean {\n\t\treturn scaleResult.range &&\n\t\t\tscaleResult.range.assignmentURL != null &&\n\t\t\tscaleResult.range.assignmentURL != null &&\n\t\t\tscaleResult.range.assignmentURL != \"\";\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Injectable} from '@angular/core';\nimport { HTTPService } from './http.service';\n@Injectable()\nexport class HostSiteService {\n\n    constructor(private http:HTTPService) {\n\n    }\n\n    getHostSites() :Promise<any[]>{\n        return this.http.get<{id:number, name:string}[]>(\"/hostsites/\").then((data) => {\n            if (data.length) {\n                return data.map(i => {\n                    return {\n                        \"id\": i.id,\n                        \"name\": i.name\n                    };\n                });\n            }\n            return [];\n        });\n        // return [{id: 1, name: \"Discover and Change\"}, {id: 2, name:\"Addo Recovery\"}, {id: 3, name:\"Addo Recovery Network\"}, {id: 4, name:\"APSATS\"}];\n    }\n}\n","/*\n *   Copyright (c) 2021 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Inject, Injectable } from \"@angular/core\";\nimport { HttpClient, HttpHeaders, HttpResponse, HttpParams, HttpUrlEncodingCodec} from '@angular/common/http';\nimport { Authenticator } from \"./authenticator\";\nimport { DacConfig } from \"./dac-config.service\";\nimport { Pako } from \"./pako.service\";\n\n\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport Client from \"fhirclient/lib/Client\";\nimport { FhirService } from \"./fhir-service\";\n\nclass GhQueryEncoder extends HttpUrlEncodingCodec {\n  encodeKey(k: string): string {\n      k = super.encodeKey(k);\n      return k.replace(/\\+/gi, '%2B');\n  }\n  encodeValue(v: string): string {\n      v = super.encodeKey(v);\n      return v.replace(/\\+/gi, '%2B');\n  }\n}\n\n@Injectable()\nexport class HTTPService {\n    private _httpStatusSubject:BehaviorSubject<number>;\n    // private _useClientApis:boolean;\n    // private _clientApiUrl:string;\n    // private _userApiUrl:string;\n    private _apiUrl:string;\n    private _useClientApis:boolean;\n\n    constructor(\n        private _$http:HttpClient,\n        private _authenticator:Authenticator,\n        private _dacConfig:DacConfig,\n        private _pako:Pako, // needs to be Pako\n        private _fhirClient:FhirService\n    ) {\n        // TODO: @adunsulag is this going to create timing issues?\n        this._httpStatusSubject = new BehaviorSubject<number>(200);\n        // let fhirUser = this._fhirClient.getFhirUserType()\n        // .then(fhirRole => {\n        //   if (fhirRole == 'Patient') {\n        //     this._useClientApis = true;\n          //   this._apiUrl = this._dacConfig.api_url + \"portal/dc-assessment\";\n\n\n          // } else if (fhirRole == 'Practitioner' || fhirRole == 'Person') { // Person occurs if its an admin who does not have NPI\n            this._useClientApis = false;\n            this._apiUrl = this._dacConfig.api_url;\n          // }\n        // });\n    }\n\n    public async generateUrl(path:string, addToken:boolean = false) {\n        // TODO: stephen I think this will have an error if the path already contained a query parameter...\n        // we need to find a better way to do this.\n        let type = await this._fhirClient.getFhirUserType();\n        let baseUrl = this._dacConfig.api_url + \"api/\";\n        if (type == 'Patient') {\n          baseUrl = this._dacConfig.api_url + \"portal/\";\n        }\n        let url = baseUrl + path + \"?XDEBUG_SESSION=PHPSTORM\";\n        // let url = baseUrl + \"?API_REQUEST=\" + encodeURIComponent(path) + \"&XDEBUG_SESSION=PHPSTORM\";\n        // if (addToken) {\n          // TODo: @adunsulag we need to remove the auth token from the get string\n            // url += \"?token=\" + this._authenticator.AuthenticationToken;\n            // url += \"&token=\" + this.getAuthorizationHeaderFromFhirClient();\n        // }\n        return url;\n    }\n\n    /**\n     * For communicating to the base api endpoints without any suffix path based on the authenticated user (client, or user)\n     * @param path The path to fetch from the raw base path\n     * @param data\n     * @returns\n     */\n    public async rawGetRequest<T>(path:string, data?:any) {\n      let url = this._dacConfig.api_url + path + \"?XDEBUG_SESSION=PHPSTORM\";\n      if (!data) {\n        data = {};\n    }\n    let searchParams = new HttpParams({fromObject:data, encoder: new GhQueryEncoder()});\n    let headers = await this.getHttpHeaders();\n      return this._$http.get<T>(url, {\n        params: searchParams\n        ,withCredentials: false\n        ,observe: 'response'\n        ,headers: headers\n      }).toPromise()\n      .then((val:HttpResponse<T>) => {\n          if (val && val.status) {\n              this._httpStatusSubject.next(val.status);\n          }\n          return val.body;\n      })\n      .catch((error) => {\n          if (error && error.status) {\n              this._httpStatusSubject.next(error.status);\n          }\n          throw error;\n      });\n    }\n\n    /**\n     * Returns an observable that sends the most recent http status code\n     */\n    public currentStatus() : Observable<number> {\n        return this._httpStatusSubject.asObservable();\n    }\n\n    private getAuthorizationHeaderFromFhirClient() {\n      // just has the Bearer <token> piece.\n      return this._fhirClient.getAuthorizationHeader();\n    }\n\n    private async getHttpHeaders() : Promise<HttpHeaders> {\n      let headers:HttpHeaders = new HttpHeaders();\n      let clientState = await this._fhirClient.refreshIfNeeded();\n      // TODO: @adunsulag how do I determine if the refresh failed?\n      headers = headers.append(\"Authorization\", await this.getAuthorizationHeaderFromFhirClient());\n      return headers;\n    }\n\n    public async get<T>(url:string, data?:any) : Promise<T> {\n        if (this.isFhirUrl(url)) {\n          let client = await this._fhirClient.getFhirClient();\n          client.request<T>(url);\n        }\n        if (!data) {\n            data = {};\n        }\n\n        // TODO: @adunsulag does the token need to be wrapped in here anymore?\n        // data.token = await this.getAuthorizationHeaderFromFhirClient();\n        // IE 11 aggressively caches when we really don't want it to.  We fix it by introducing a cache busting solution...\n        // Even though a server side header should solve this, it appears that IE11 doesn't always respect that.\n        // so we lose the advantage of caching a number of get requests... but from an API we really want the most current result set\n        data.cacheBuster = new Date().getTime();\n        // in order to fix the improper coding of the + sign, we are going to change the url encode\n        // @see https://github.com/angular/angular/issues/11058#issuecomment-247367318\n        let searchParams = new HttpParams({fromObject:data, encoder: new GhQueryEncoder()});\n        let headers = await this.getHttpHeaders();\n        let apiUrl = await this.generateUrl(url);\n        return this._$http.get<T>(apiUrl, {\n          params: searchParams\n          ,withCredentials: false\n          ,observe: 'response'\n          ,headers: headers\n        }).toPromise()\n        .then((val:HttpResponse<T>) => {\n            if (val && val.status) {\n                this._httpStatusSubject.next(val.status);\n            }\n            return val.body;\n        })\n        .catch((error) => {\n            if (error && error.status) {\n                this._httpStatusSubject.next(error.status);\n            }\n            throw error;\n        });\n    }\n\n    public async post<T>(url, data) : Promise<T> {\n        // TODO: @adunsulag does the token need to be wrapped in here anymore?\n        // data.token = this.getAuthorizationHeaderFromFhirClient();\n        let headers = await this.getHttpHeaders();\n        return this.postWithOptions<T>(url, data, {withCredentials:false, headers: headers});\n    }\n\n    public async securePost<T>(url, data, securityToken) : Promise<T> {\n        // note the authentication token is different then the JWT token\n        // TODO: stephen we need to look at changing this token to be a JWT.\n        // TODO: @adunsulag does the token need to be wrapped in here anymore?\n        // data.token = this.getAuthorizationHeaderFromFhirClient();\n        // let headers:HttpHeaders = new HttpHeaders({\n        //   \"Authorization\": \"Bearer \" + securityToken\n        // });\n        let headers = await this.getHttpHeaders();\n        let options = {withCredentials:false, headers: headers};\n        return this.postWithOptions<T>(url, data, options);\n    }\n\n    private isFhirUrl(url:string) :boolean {\n      return url == \"Questionnaire\";\n    }\n\n    private async postWithOptions<T>(url, data, options:{withCredentials?:boolean, headers?:HttpHeaders}) : Promise<T> {\n        options = options || {};\n        let apiUrl = await this.generateUrl(url);\n        return this._$http.post<any>(apiUrl, data, {\n          observe: 'response'\n          // ,withCredentials: options.withCredentials || false\n          ,headers: options.headers || {}\n        })\n        .toPromise()\n        .then((val:HttpResponse<any>) => {\n            if (val && val.status) {\n                this._httpStatusSubject.next(val.status);\n            }\n            return val.body;\n        })\n        .catch((error) => {\n            if (error && error.status) {\n                this._httpStatusSubject.next(error.status);\n            }\n            throw error;\n        });\n    }\n\n    public async delete<T>(url, data?:any) : Promise<T> {\n        data = data || {};\n        // TODO: @adunsulag does the token need to be wrapped in here anymore?\n        // data.token = this.getAuthorizationHeaderFromFhirClient();\n        let headers = await this.getHttpHeaders();\n        let apiUrl = await this.generateUrl(url);\n        return this._$http.delete<T>(apiUrl,  {observe: 'response', withCredentials: false, params: data, headers: headers} )\n        .toPromise()\n        .then((val) => {\n            if (val && val.status) {\n                this._httpStatusSubject.next(val.status);\n            }\n            return val.body;\n        })\n        .catch((error) => {\n            if (error && error.status) {\n                this._httpStatusSubject.next(error.status);\n            }\n            throw error;\n        });\n    }\n\n    public async compressedPost<T>(url, data, responseType:XMLHttpRequestResponseType = 'json') : Promise<T> {\n        // TODO: @adunsulag does the token need to be wrapped in here anymore?\n        let header = await this.getAuthorizationHeaderFromFhirClient();\n        // data.token = header;\n        var binaryData:Uint8Array = this._pako.gzip(JSON.stringify(data));\n        let clientState = await this._fhirClient.refreshIfNeeded();\n        // TODO: @adunsulag we need to figure out what to do if refresh token fails.\n       let postUrl = await this.generateUrl(url);\n        return new Promise((resolve, reject) => {\n            var http = new XMLHttpRequest();\n            http.withCredentials = false; // make sure to send http cookies.\n            http.onload = () => {\n                this._httpStatusSubject.next(http.status);\n                if (http.status >= 200 && http.status < 300) {\n                    resolve(http.response);\n                } else {\n                    reject({\n                    status: http.status,\n                    statusText: http.statusText,\n                    response: http.response\n                    });\n                }\n            };\n            http.onerror = () => {\n                this._httpStatusSubject.next(http.status);\n                reject({\n                    status: http.status,\n                    statusText: http.statusText,\n                    response: http.response\n                });\n            };\n            http.open(\"POST\", postUrl);\n            http.setRequestHeader(\"Content-Type\", \"application/json\");\n            http.setRequestHeader(\"Content-Encoding\", \"gzip\");\n            http.setRequestHeader(\"Authorization\", header);\n            http.responseType = responseType;\n\n            http.send(binaryData);\n        });\n        // TODO: stephen pako returns a Uint8Array and angular2 doesn't seem to know how to handle this\n        // as it attempts to treat it as a string, angular1 handled this just fine... until we have a solution here\n        // we'll leave this commented out.\n\n        // // var binaryData:ArrayBuffer = this._pako.gzip(JSON.stringify(data)).buffer;\n        // var binaryData:Blob = new Blob([this._pako.gzip(JSON.stringify(data))]);\n\n        // var headers = new Headers();\n        // headers.append(\"Content-Type\", \"application/json\");\n        // headers.append(\"Content-Encoding\", \"gzip\");\n        // let optionArgs:RequestOptionsArgs = {\n        //     headers: headers\n        // };\n        // return this._$http.post(this._dacConfig.api_url + url, binaryData, optionArgs).toPromise();\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-sso-page',\n  templateUrl: './sso-page.component.html',\n  styleUrls: ['./sso-page.component.css']\n})\nexport class SsoPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<app-sso></app-sso>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport {IReportItemComponent} from \"../../models/i-report-item-component\";\nimport { AssessmentResult } from \"../../../shared/models/assessment-result\";\nimport { ScaleResult } from \"../../../shared/models/scale-result\";\nimport { Scale } from \"../../../shared/models/scale\";\nimport { AssessmentHydrator } from \"../../../shared/services/assessment-hydrator.service\";\nimport { Variable } from \"../../models/variable\";\nimport { BaseReportItemComponent } from 'app/reports/models/base-report-item-component';\n\ninterface Computation {\n  assessmentUid:string;\n  scaleId:string;\n}\n\n@Component({\n  selector: 'app-computed-scale',\n  templateUrl: './computed-scale.component.html'\n})\nexport class ComputedScaleComponent extends BaseReportItemComponent implements OnInit, IReportItemComponent {\n\n  private _scaleResult:ScaleResult;\n  private _assessmentsUids:string[];\n  private _calculation:string;\n  @Input(\"data\") public data:any;\n  @Input(\"data\") public results:AssessmentResult[];\n\n  constructor(private hydrator:AssessmentHydrator) {\n    super();\n  }\n\n  public setReportData(data:any, results:AssessmentResult[], variables:Variable[]) {\n    this._scaleResult = new ScaleResult();\n    if (data) {\n      if (data.scale) {\n        this._scaleResult.scale = this.hydrator.hydrateScale(data.scale);\n      }\n      // calculation, assessments\n      this._calculation = data.calculation || \"SUM\";\n      if (data.items) {\n        data.items.forEach(i => this.addCalculation(i))\n        this._scaleResult.range = this._scaleResult.scale.getRangeForScore(this._scaleResult.score);\n      }\n    }\n  }\n\n  ngOnInit() {}\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n\n  public get scaleResult() {\n    return this._scaleResult;\n  }\n\n  private addCalculation(item:Computation) {\n    let result = this.results.find(r => r.assessment.uid == item.assessmentUid);\n    let scaleResult = result ? result.scaleResults.find(sr => sr.scale.id == item.scaleId) : null;\n    if (!(result && scaleResult)) {\n      return;\n    }\n    if (this._calculation === \"SUM\") {\n      this._scaleResult.score += scaleResult.score;\n    }\n  }\n}\n","<div class=\"well row col-xs-12\">\n    <div class=\"row\">\n        <h3 class=\"col-xs-12 text-center\" [id]=\"scaleResult.scale.name\" >\n            <em>{{scaleResult.scale.name}}</em>\n            <small><em>Score:</em> {{scaleResult.score}}</small>\n        </h3>\n        <h4 class=\"col-xs-12 text-center\"><em>Range:</em> {{scaleResult.range.displayName}}</h4>\n        <div class=\"col-xs-12 col-sm-offset-1 col-sm-10 col-md-offset-2 col-md-8\">\n            <app-scale-chart [scale-result]=\"scaleResult\"></app-scale-chart> \n        </div>\n        <div class=\"col-xs-12\" *ngIf=\"scaleResult?.range?.clientContent\" [innerHTML]=\"scaleResult?.range?.clientContent\"></div>\n    </div>\n</div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { InjectionToken, TemplateRef } from '@angular/core';\n\nexport class ToastData {\n  type: ToastType;\n  text?: string;\n  timeToDisplay?: number;\n  template?: TemplateRef<any>;\n  templateContext?: {};\n}\n\nexport type ToastType = 'danger' | 'warning' | 'info' | 'success';\n\nexport interface ToastConfig {\n    position?: {\n        bottom: number;\n        right: number;\n    };\n    animation?: {\n        fadeOut: number;\n        fadeIn: number;\n    };\n    timeToDisplay?: number;\n    spacer?: number;\n}\n\nexport const defaultToastConfig: ToastConfig = {\n    position: {\n        bottom: 40,\n        right: 20,\n    },\n    animation: {\n        fadeOut: 2500,\n        fadeIn: 300,\n    },\n    timeToDisplay: 5000,\n    spacer: 30,\n};\n\nexport const TOAST_CONFIG_TOKEN = new InjectionToken('toast-config');\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { LibraryAsset } from \"./library-asset\";\nimport { LibraryExerciseAnswer } from \"./LibraryExerciseAnswer\";\n\nexport class LibraryAssetResult {\n    public id:string;\n\tpublic assignmentItemId:number;\n\tpublic asset:LibraryAsset;\n\tpublic answers: LibraryExerciseAnswer[];\n\tpublic journal:string;\n\n\tconstructor() {\n        this.answers = [];\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Question} from \"./question\";\nimport { QuestionSetLabel } from \"./question-set-label\";\nimport { QuestionType } from \"./question-type\";\n\nexport class TextboxQuestion extends Question {\n    private _answer:string;\n\n    constructor() {\n        super();\n        this.type = QuestionType.Textbox;\n        this.skip_scoring = true;\n    }\n\n    public setSavedAnswer(answer:string, labels:QuestionSetLabel[]) {\n        this._answer = answer;\n\t}\n\n    // public set skip_scoring(v:boolean) {\n    //     // make sure it always skip scoring.\n    //     this.skip_scoring = true;\n    // }\n\n    public get answer() {\n        return this._answer;\n    }\n    public set answer(v:string) {\n        this._answer = v;\n    }\n\n    public get answerDisplayText() {\n        return this._answer;\n    }\n\n    public get answerForSave() {\n        return this._answer;\n    }\n\n    public hasAnswer(answer:string) {\n        return this._answer == answer;\n    }\n\n    public get isFilledOut() : boolean {\n\t\treturn this._answer != null;\n    }\n}","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {ReportNavigatorService} from '../services/report-navigator.service';\nimport { Component, OnInit, Input, ElementRef } from '@angular/core';\nimport { ScaleResult } from 'app/shared/models/scale-result';\nimport { Scale } from 'app/shared/models/scale';\nimport { ScaleRange } from 'app/shared/models/scale-range';\nimport { CopyClipboardService } from 'app/shared/services/copy-clipboard.service';\n\n@Component({\n  selector: 'app-scale-results-table-summary',\n  templateUrl: './scale-results-table-summary.component.html'\n})\nexport class ScaleResultsTableSummaryComponent implements OnInit {\n  @Input() scaleResults:ScaleResult[];\n  @Input() severityLabels:string[];\n  @Input() rangeLabelMapping:any;\n  @Input() highlightScaleResults:ScaleResult[];\n  @Input() showViewLink:boolean;\n  public tableSummaryContent:string;\n\n  constructor( private navigator:ReportNavigatorService\n    , private copyClipboardService:CopyClipboardService\n    , private elementRef:ElementRef) {\n    this.showViewLink = true;\n  }\n\n  ngOnInit() {\n\n  }\n\n  public getPrintContent() {\n    // table can just return a clone of the native element.\n    return this.elementRef.nativeElement.cloneNode(true);\n  }\n\n  public copyTable() {\n    let copyTable = [];\n    copyTable.push([\"Scale\", \"Description\", \"Raw Score / Total\",\"Severity\"]);\n    if (this.scaleResults.length) {\n      this.scaleResults.forEach(sr => {\n        let row = [];\n        row.push(sr.scale.name ? '\"' + sr.scale.name + '\"' : '');\n        row.push(sr.scale.descriptionTherapist ? '\"' + sr.scale.descriptionTherapist + '\"' : '');\n        row.push('\"' + sr.score + \" / \" + sr.scale.getMaxScore() + '\"');\n        row.push('\"' + this.getLabelNameForRange(sr) + '\"');\n        copyTable.push(row);\n      });\n    }\n    this.copyClipboardService.copyTableToText(copyTable);\n  }\n\n  public getMaxName(obj:any) {\n    if (typeof obj.name !== 'string') {\n      return '';\n    }\n\n    let strLen = Math.min(obj.name.length, 255);\n    return obj.name.substring(0, strLen);\n  }\n\n  public getScaleResultClassNames(scaleResult:ScaleResult) {\n    if (this.highlightScaleResults && this.highlightScaleResults.length)\n    {\n      if (this.highlightScaleResults.find(hs => hs.scale.id == scaleResult.scale.id)) {\n        return [\"primary-color text-light highlight-result\"];\n      }\n    }\n    return [];\n  }\n\n  public goToScaleResult(scaleResult:ScaleResult) {\n    if (this.navigator.hasNavigationItem(scaleResult.scale.id)) {\n      this.navigator.navigate(scaleResult.scale.id);\n    }\n  }\n\n  public getTotalPossibleForResult(scaleResult:ScaleResult) {\n    return scaleResult.scale.getMaxScore();\n  }\n\n  public getLabelNameForRange(scaleResult:ScaleResult) {\n    let name = scaleResult.getRangeDisplayName();\n    if (this.rangeLabelMapping &&\n      this.rangeLabelMapping[scaleResult.scale.id]) {\n      let scaleMap = this.rangeLabelMapping[scaleResult.scale.id];\n      if (scaleMap[scaleResult.range.id]) {\n        name = scaleMap[scaleResult.range.id];\n      }\n    }\n    return name;\n  }\n\n}\n","<table class='table table-striped col'>\n  <tr class='table-header row secondary-color text-white mt-3'>\n    <th class=\"cell-data col d-print-none\" *ngIf=\"showViewLink\">View</th>\n    <th class=\"cell-data col\">Scale</th>\n    <th class=\"cell-data col-3\">Description</th>\n    <th class=\"cell-data col\">Raw Score / Total</th>\n    <th class=\"cell-data col\">Severity <i class=\"fa fa-clipboard float-right d-print-none\" (click)=\"copyTable()\" title=\"Copy Table\" alt=\"Copy Table\"></i></th>\n  </tr>\n  <tr *ngFor=\"let scaleResult of scaleResults\" class=\"row\" [ngClass]=\"getScaleResultClassNames(scaleResult)\">\n    <td class=\"col d-print-none cell-data\" *ngIf=\"showViewLink\">\n        <button class=\"m-0 btn btn-primary btn-sm\" (click)=\"goToScaleResult(scaleResult)\">\n            <span class=\"fa fa-bar-chart\"></span>\n          </button>\n        </td>\n    <td class=\"col cell-data\">\n        {{getMaxName(scaleResult.scale)}}\n    </td>\n    <td class=\"col-3 cell-data text-small\">{{scaleResult.scale.descriptionTherapist}}</td>\n    <td class=\"col cell-data\">{{scaleResult.score}} / {{getTotalPossibleForResult(scaleResult)}}</td>\n    <td class=\"col cell-data\">{{getLabelNameForRange(scaleResult)}}</td>\n  </tr>\n</table>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ScaleChartComponent } from './scale-chart/scale-chart.component';\nimport { ChartService } from \"./services/chart.service\";\nimport { ScaleResultColorService } from './services/scale-result-color.service';\nimport { ScaleChartLegendComponent } from './scale-chart-legend/scale-chart-legend.component';\nimport { LegendColorIconComponent } from './legend-color-icon/legend-color-icon.component';\nimport { SummaryScalesChartComponent } from './summary-scales-chart/summary-scales-chart.component';\nimport { BaseChartComponent } from './base-chart/base-chart.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n    // ,ChartsModule\n  ]\n  ,providers: [ScaleResultColorService]\n  ,declarations: [ScaleChartComponent, ScaleChartLegendComponent, LegendColorIconComponent, SummaryScalesChartComponent]\n  ,exports: [ScaleChartComponent, ScaleChartLegendComponent, SummaryScalesChartComponent]\n})\nexport class AssessmentChartsModule { }\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { AlertService } from \"./alert.service\";\nimport { Injectable } from \"@angular/core\";\n\n@Injectable()\nexport class CopyClipboardService {\n\n    constructor(private alertService:AlertService) { }\n\n    public copyTableToText(table:string[][]) {\n        if (!table) {\n            throw new Error(\"Invalid table passed\");\n        }\n        this.copyText(table.map(row => row.join(\",\")).join(\"\\r\\n\"));\n    }\n\n    public copyText(content:string) {\n        try {\n            var textarea = document.createElement(\"textarea\");\n            textarea.id = \"dac-copytext-textarea\";\n            textarea.value = content;\n            document.body.appendChild(textarea);\n\n            var copyTextarea = document.getElementById(\"dac-copytext-textarea\") as HTMLInputElement;\n            copyTextarea.select();\n            var successful = document.execCommand('copy');\n            document.body.removeChild(textarea);\n            this.alertService.success(\"Copied To Clipboard!\");\n          } catch (err) {\n            if (textarea) {\n              document.body.removeChild(textarea);\n            }\n            this.alertService.error(\"Uh Oh! Looks like your browser doesn't support this feature.  Highlight the text and press Ctrl+C or CMD+C\", 5000);\n          }\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Client} from \"./client\";\nimport {User} from \"./user\";;\nimport { Assignment } from \"./Assignment\";\nimport { AssignedAssessmentGroup } from \"./AssignedAssessmentGroup\";\nimport { AssignedAssessment } from \"./AssignedAssessment\";\nimport { AssignmentItem } from \"./AssignmentItem\";\nimport { AssignedLibraryAsset } from \"./AssignedLibraryAsset\";\n\n// TODO: stephen look at moving this into the models\nexport class ManagedClient extends Client {\n    // TODO: stephen move these into private getter/setters.\n    public assignments:Assignment[];\n    public firstName:string;\n    public lastName:string;\n    public displayName:string; // display name of the client used on the client side only for now.\n    public email:string;\n    private assignedUser:User;\n\n    public constructor() {\n        super();\n        this.assignments = [];\n    }\n\n    public get user() {\n        return this.assignedUser;\n    }\n    public set user(v:User) {\n        this.assignedUser = v;\n    }\n\n    public getAssessmentGroups()  : AssignedAssessmentGroup[] {\n        let groups:AssignedAssessmentGroup[] = [];\n        this.assignments.forEach(a => {\n            if ( a.Type == \"AssessmentGroup\") {\n                groups.push(a as AssignedAssessmentGroup);\n            }\n        });\n        return groups;\n    }\n\n    /**\n     * Looks for the passed in assignment and removes it if it is found\n     * in the current client.  If it is not found it's treated as a no-op.\n     */\n    public removeAssignment(assignment:Assignment) {\n        let indexOf = this.assignments.indexOf(assignment);\n        if (indexOf >= 0) {\n            this.assignments.splice(indexOf, 1);\n        }\n    }\n\n    public getAssignmentsCompleted() {\n        return this.assignments.filter((a) => a.IsComplete).length;\n    }\n    public hasNoAssignments() {\n        return this.assignments.length == 0;\n    }\n    public hasFinishedAllAssignments() {\n        if (this.assignments.length) {\n            return this.assignments.every(a => a.IsComplete);\n        }\n        return false;\n    }\n    public getNextAssignmentItemToComplete() : AssignmentItem {\n        // find the first assignment that is not complete.\n\n        let assignment = this.assignments.find((a) => !a.IsComplete);\n        if (!assignment) {\n            return null;\n        }\n        let item = assignment.getNextAssignmentItemToComplete();\n        if (!item) {\n            console.error(\"Assignment marked as incomplete but items are complete. Assignment:\", assignment);\n        }\n        return item;\n    }\n\n    public getAssignment(id:number) {\n        if (!this.assignments) {\n            return null;\n        }\n\n        return this.assignments.find(a => a.Id == id);\n    }\n\n    public findAssignmentItem(id:number) {\n        let assignment = null;\n        this.assignments.some(a => {\n            let item = a.Items.find(i => i.Id == id);\n            if (item) {\n                assignment = item;\n                return true;\n            }\n            return false;\n        });\n        return assignment;\n    }\n\n    public hasStartedAssignments() {\n        return this.assignments && this.assignments.length && this.assignments[0].IsComplete;\n    }\n\n    public getDisplayString() {\n        let name = [];\n\n        if (this.firstName || this.lastName) {\n            if (this.firstName) {\n                name.push(\" \");\n                name.push(this.firstName);\n            }\n            if (this.lastName) {\n                name.push(\" \");\n                name.push(this.lastName);\n            }\n        }\n        else {\n            name.push(\"<NAME MISSING>\");\n        }\n        return name.join(\"\");\n    }\n\n    public findAssignmentForAssignmentItem(item:AssignmentItem) {\n        return this.assignments.find((a) => a.hasItem(item));\n    }\n\n    public findAssignmentItemForAssessmentUid(uid:string) : AssignedAssessment {\n        let assignment = this.assignments.find((a) => {\n\t\t\tif (a.Type == \"Assessment\" && a.Items.length) {\n\t\t\t\tlet assignedAssessment = a.Items[0] as AssignedAssessment;\n\t\t\t\tif (assignedAssessment.Uid == uid) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n        });\n        if (assignment) {\n            return assignment.Items[0] as AssignedAssessment;\n        }\n        return null;\n    }\n\n    public findAssignmentItemForAssetId(assetId:number) : AssignedLibraryAsset {\n        let assignment = this.assignments.find((a) => {\n\t\t\tif (a.Type == \"LibraryAsset\") {\n\t\t\t\tlet assignedAsset = a.Items[0] as AssignedLibraryAsset;\n\t\t\t\tif (assignedAsset.AssetId == assetId) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n        });\n        if (assignment) {\n            return assignment.Items[0] as AssignedLibraryAsset;\n        }\n        return null;\n    }\n\n    public markAssignmentCompleted(item:AssignmentItem) {\n        if (!(item && item.Id)) {\n            throw new Error(\"Missing item or item id\");\n        }\n\n        let assignment = this.findAssignmentForAssignmentItem(item);\n        if (assignment) {\n            assignment.markCompleted(item);\n        } else {\n            throw new Error(\"Failed to find assignment for item\" + item.Id);\n        }\n    }\n}\n","import { Component, OnInit } from \"@angular/core\";\nimport { DacConfig } from \"app/shared/services/dac-config.service\";\nimport { FhirService } from \"app/shared/services/fhir-service\";\n\n/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n@Component({\n  selector: 'dac-fhir-client',\n  templateUrl: './fhir-client.component.html'\n})\nexport class FhirClientComponent implements OnInit {\n\n  constructor(private fhirService:FhirService, private dacConfig:DacConfig) { }\n\n  ngOnInit() {\n    if (this.dacConfig.isFeatureEnabled(\"debug\")) {\n      console.log(\"debug is enabled\");\n    } else {\n      console.log(\"debug is disabled\");\n    }\n  }\n\n  public refreshToken() {\n\n    this.fhirService.refreshToken().then(result => {\n      console.log(\"Refresh token occurred\");\n    })\n    .catch(error => {\n      console.error(error);\n    })\n  }\n\n}\n","<div class=\"container-fluid mb-3\">\n  <div class=\"row justify-content-center\">\n      <div class=\"col-12 col-md-8 col-lg-4\">\n          Fhir debug settings go here\n          <input type=\"button\" class=\"btn btn-primary\" value=\"Refresh Token\" (click)=\"refreshToken()\" />\n      </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { IReportItemComponent } from \"../models/i-report-item-component\";\nimport { AssessmentResult } from \"../../shared/models/assessment-result\";\nimport { Variable } from \"../models/variable\";\nimport { BaseReportItemComponent } from 'app/reports/models/base-report-item-component';\n\n@Component({\n  selector: 'app-text-item',\n  templateUrl: './text-item.component.html'\n})\nexport class TextItemComponent extends BaseReportItemComponent implements OnInit, IReportItemComponent {\n\n  private data:any;\n\n  constructor() {\n    super();\n   }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n\n  public setReportData(data:any, results:AssessmentResult[], variables:Variable[]) {\n    this.data = data;\n  }\n\n}\n","<p>\n  text-item works!\n</p>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {QuestionSet} from \"./question-set\";\nimport {Question} from \"./question\";\nimport {Scale} from \"./scale\";\nimport {Utility} from \"./utility\";\n\nexport class Assessment\n{\n\tprivate _id:string;\n\tprivate _uid:string;\n\tprivate _name:string;\n\tprivate _display_order:number;\n\tprivate _enabled:number;\n\tprivate _instructions:string;\n\tprivate _display_client_results:boolean;\n\tprivate _question_sets:QuestionSet[];\n\tprivate _scales:Scale[];\n\tprivate _version:number;\n\tprivate _resourcesURL:string;\n\tprivate _creator:string;\n\tprivate _creatorUrl:string;\n\tprivate _description:string;\n\tprivate _therapistDescription:string;\n\tprivate _isPublic:boolean;\n\n\tconstructor() {\n\t\tthis.id = null;\n\t\tthis.display_order = 1;\n\t\tthis.enabled = 1;\n\t\tthis.instructions = \"\";\n\t\tthis.display_client_results = true;\n\t\tthis.question_sets = [];\n\t\tthis.scales = [];\n\t\tthis.version = 1;\n\t\t// TODO: stephen when we expand to other tests we need to change this.\n\t\tthis.name = \"\";\n\t\tthis.uid = \"\";\n\t\tthis.resourcesURL = \"\";\n\t\tthis.creator = \"\";\n\t\tthis.creatorUrl = \"\";\n\t\tthis.description = \"\";\n\t\tthis.isPublic = false;\n\t}\n\n\tpublic get creator() : string {\n\t\treturn this._creator;\n\t}\n\n\tpublic set creator(v:string) {\n\t\tthis._creator = v;\n\t}\n\n\tpublic get description() : string {\n\t\treturn this._description;\n\t}\n\n\tpublic set description(v:string) {\n\t\tthis._description = v;\n\t}\n\n\n\tpublic get creatorUrl() : string {\n\t\treturn this._creatorUrl;\n\t}\n\n\tpublic set creatorUrl(v:string) {\n\t\tthis._creatorUrl = v;\n\t}\n\tpublic get resourcesURL() : string {\n\t\treturn this._resourcesURL;\n\t}\n\n\tpublic set resourcesURL(v : string) {\n\t\tthis._resourcesURL = v;\n\t}\n\n\tpublic get uid() : string {\n\t\treturn this._uid;\n\t}\n\n\tpublic set uid(v : string) {\n\t\tthis._uid = v;\n\t}\n\n\tpublic get name() : string {\n\t\treturn this._name;\n\t}\n\n\tpublic set name(v : string) {\n\t\tthis._name = v;\n\t}\n\n\tpublic get id():string {\n\t\treturn this._id;\n\t}\n\tpublic set id(id:string) {\n\t\tthis._id = id;\n\t}\n\n\tpublic get display_order():number {\n\t\treturn this._display_order;\n\t}\n\tpublic set display_order(order:number) {\n\t\tthis._display_order = order;\n\t}\n\n\tpublic get enabled():number {\n\t\treturn this._enabled;\n\t}\n\tpublic set enabled(enable:number) {\n\t\tthis._enabled = enable;\n\t}\n\tpublic get instructions() : string {\n\t\treturn this._instructions;\n\t}\n\tpublic set instructions(desc:string) {\n\t\tthis._instructions = desc;\n\t}\n\n\tpublic get display_client_results() : boolean {\n\t\treturn this._display_client_results;\n\t}\n\tpublic set display_client_results(display:boolean) {\n\t\tthis._display_client_results = display;\n\t}\n\n\tpublic get question_sets() : QuestionSet[] {\n\t\treturn this._question_sets;\n\t}\n\tpublic set question_sets(sets:QuestionSet[]) {\n\t\tthis._question_sets = sets;\n\t}\n\n\tpublic get scales() : Scale[] {\n\t\treturn this._scales;\n\t}\n\tpublic set scales(scales:Scale[]) {\n\t\tthis._scales = scales;\n\t}\n\tpublic get version() : number {\n\t\treturn this._version;\n\t}\n\tpublic set version(version:number) {\n\t\tthis._version = version;\n\t}\n\n\n\tpublic get therapistDescription(): string {\n\t\treturn this._therapistDescription;\n\t}\n\n\tpublic set therapistDescription(value: string) {\n\t\tthis._therapistDescription = value;\n\t}\n\n\tpublic get isPublic(): boolean {\n\t\treturn this._isPublic;\n\t}\n\n\tpublic set isPublic(value: boolean) {\n\t\tthis._isPublic = value;\n\t}\n\n\taddQuestionSet(qs:QuestionSet) {\n\t\tthis.question_sets.push(qs);\n\t}\n\tremoveQuestionSet(qs:QuestionSet) {\n\t\tlet index = this.question_sets.indexOf(qs);\n\t\tif (index >= 0) {\n\t\t\tthis.question_sets.splice(index,1);\n\t\t}\n\t}\n\taddScale(scale:Scale) {\n\t\tthis.scales.push(scale);\n\t}\n\tremoveScale(scale:Scale) {\n\t\tlet index = this.scales.indexOf(scale);\n\t\tif (index >= 0) {\n\t\t\tthis.scales.splice(index,1);\n\t\t\tthis.question_sets.forEach(q => q.removeScale(scale));\n\t\t}\n\t}\n\n\tgetQuestionsForScale(scale:Scale) {\n\t\tlet questions:Question[] = [];\n\t\tthis.question_sets.forEach(qs => {\n\t\t\tlet qsQuestions = qs.questions.filter(q => q.assessment_scale.id === scale.id);\n\t\t\tquestions = questions.concat(qsQuestions);\n\t\t});\n\t\treturn questions;\n\t}\n\n\tshiftScaleUp(scale:Scale) {\n\t\tUtility.shiftCollectionUp(this._scales, scale);\n\t}\n\tshiftScaleDown(scale:Scale) {\n\t\tUtility.shiftCollectionDown(this._scales, scale);\n\t}\n\n\tshiftQuestionSetUp(questionSet:QuestionSet) {\n\t\tUtility.shiftCollectionUp(this._question_sets, questionSet);\n\t}\n\n\tshiftQuestionSetDown(questionSet:QuestionSet) {\n\t\tUtility.shiftCollectionDown(this._question_sets, questionSet);\n\t}\n\n\tgetQuestionSetsForDisplay() : QuestionSet[] {\n\t\treturn this._question_sets.filter(qs => this.shouldDisplayQuestionSet(qs));\n\t}\n\tprivate shouldDisplayQuestionSet(qs:QuestionSet) {\n\t\tlet displayConditions = qs.getDisplayConditions();\n\t\tif (!displayConditions || !displayConditions.length) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet showRatings = displayConditions.map(dc => dc.getDisplay(this));\n\t\t// TODO: stephen when we can have multiple conditions we need to have some kind of point ranking\n\t\t// or other system for this\n\t\tif (showRatings.length) {\n\t\t\tif (showRatings[0] === 'hide') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\n\tgetFirstQuestionSetToDisplay() {\n\t\tlet questionSets = this.getQuestionSetsForDisplay();\n\t\tif (questionSets.length) {\n\t\t\treturn questionSets[0];\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetQuestionSetById(id:string) {\n\t\tlet set = this._question_sets.find(qs => qs.id == id);\n\t\treturn set;\n\t}\n\n  getQuestionsList() {\n    return (this._question_sets || [])\n    .map(qs => qs.questions || []) // grab the questions\n    .reduce((prev, curr) => prev.concat(curr), []); // concatenate all the arrays\n  }\n\n\tgetQuestionsListById() : Map<string, Question> {\n    let initQuestionList:Map<string,Question> = new Map<string,Question>();\n\t\tlet questionsById = (this._question_sets || [])\n\t\t\t.map(qs => qs.questions || []) // grab the questions\n\t\t\t.reduce((prev, curr) => prev.concat(curr), []) // concatenate all the arrays\n\t\t\t.reduce((prev, curr) => { prev[curr.id] = curr; return prev;}, initQuestionList); // now return the questions by their ids, every question id is unique\n\t\treturn questionsById;\n\t}\n\n\tgetNextQuestionSetToDisplay(questionSet:QuestionSet) {\n\t\tlet index = this._question_sets.indexOf(questionSet);\n\t\tif (index < 0) {\n\t\t\tthrow new Error(\"The question set could not be found with id \" + questionSet.id);\n\t\t}\n\n\t\tfor (var i = index + 1; i < this._question_sets.length; i++) {\n\t\t\tif (this.shouldDisplayQuestionSet(this._question_sets[i])) {\n\t\t\t\treturn this._question_sets[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tgetPreviousQuestionSetToDisplay(questionSet:QuestionSet) {\n\t\tlet index = this._question_sets.indexOf(questionSet);\n\t\tif (index < 0) {\n\t\t\tthrow new Error(\"The question set could not be found with id \" + questionSet.id);\n\t\t}\n\n\t\tfor (var i = index - 1; i >= 0; i--) {\n\t\t\tif (this.shouldDisplayQuestionSet(this._question_sets[i])) {\n\t\t\t\treturn this._question_sets[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tgetFlaggedQuestions() : Question[] {\n\t\tlet questions = [];\n\t\tlet flaggedQuestions = this.question_sets.map(qs => {\n\t\t\treturn qs.questions.filter(q => q.isFlaggedForReview);\n\t\t})\n\t\t.filter(questions => questions.length)\n\t\t.reduce((prev, cur) => {\n\t\t\treturn cur.concat(prev);\n\t\t}, []);\n\t\treturn flaggedQuestions;\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Role} from '../models/role';\nimport {AuthService} from '../../login/services/auth.service';\nimport { Component, OnInit, Input, Output, EventEmitter, OnChanges, AfterViewInit, ElementRef, ViewChild } from '@angular/core';\nimport { User} from \"../../shared/models/user\";\nimport { UserService } from \"../../shared/services/user.service\";\nimport { MatSelectChange } from '@angular/material/select';\n\n@Component({\n  selector: 'user-selector',\n  templateUrl: './user-selector.component.html',\n  styleUrls: ['./user-selector.component.css']\n})\nexport class UserSelectorComponent implements OnInit, OnChanges  {\n  @Output() selected = new EventEmitter<User>();\n  @Input() allowEmpty:boolean;\n  @Input() user:User;\n  @Input() filter:(user:User) => boolean;\n\n  public selectedUser:User;\n  public selectOptions:{label: string, value: string, selected: boolean}[];\n  private users:User[];\n  private _selectedUserId:string;\n\n  constructor(private userService:UserService, private authService:AuthService) {\n    this.users = [];\n  }\n\n  ngOnInit() {\n    this.authService.getCurrentUser().then(currentUser => {\n\n      let getUsers = Promise.resolve([currentUser]);\n      if (currentUser.role <= Role.Admin) {\n        getUsers = this.userService.getUsers();\n      }\n\n      getUsers.then((users) => {\n        let activeUsers = users.filter(u => u.enabled); // only display activated users.\n        if (this.filter) {\n          this.users = activeUsers.filter(this.filter);\n        } else {\n          this.users = activeUsers;\n        }\n\n        this.setupSelectedUser();\n      });\n    });\n\n  }\n  ngAfterContentInit() {\n\n  }\n  ngOnChanges() {\n    this.setupSelectedUser();\n  }\n\n  private setupSelectedUser() {\n    if (!this.user) {\n      this.selectedUser = null;\n    } else {\n      this.selectedUser = this.users.find(u => u.id == this.user.id);\n    }\n  }\n\n  public get Users() {\n    return this.users;\n  }\n\n  public get selectedUserId() {\n    return this._selectedUserId;\n  }\n\n  public set selectedUserId(v:string) {\n    this._selectedUserId = v;\n  }\n\n  public selectUser(selected:MatSelectChange) {\n    let user = selected.value;\n    this.selected.emit(user);\n  }\n}\n","\n<mat-select #select (selectionChange)=\"selectUser($event)\"\n    [(value)]=\"selectedUser\"\n    placeholder=\"Choose a user\" class=\"colorful-select dropdown-primary\">\n    <mat-option>None</mat-option>\n    <mat-option *ngFor=\"let u of Users\" [value]=\"u\"\n    >{{u.getDisplayName()}}</mat-option>\n</mat-select>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {OrderItem} from \"./order-item\";\n\nexport class Order {\n    public id:number\n    public status:string\n    public orderItems:OrderItem[]\n    public total:number;\n    public discount:number;\n    public customer_id:number;\n    public customer:string;\n    public creation_date:Date;\n    public last_update_date:Date;\n\n    constructor() {\n        this.id = null;\n        this.status = 'pending';\n        this.orderItems = [];\n        this.total = 0;\n        this.discount = 0;\n        this.creation_date = new Date();\n        this.last_update_date = new Date();\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { LoginComponent } from './login/login.component';\nimport { AuthGuard } from './services/auth-guard.service';\nimport { AdminGuard } from './services/admin-guard.service';\nimport { LogoutComponent } from './logout/logout.component';\nimport { SharedModule } from '../shared/shared.module';\nimport { AdminLoginComponent } from './admin-login/admin-login.component';\nimport { LoginHeaderComponent } from './login-header/login-header.component';\nimport { LoginDialogComponent } from './login-dialog/login-dialog.component';\nimport { HasPermissionDirective } from 'app/login/has-permission/has-permission';\nimport { SsoComponent } from './sso/sso.component';\nimport { CommonModule } from '@angular/common';\n// import { ForgotPasswordComponent } from './forgot-password/forgot-password.component';\n// import { AmplifyAuthService } from './services/amplify-auth-service';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n// import { RequireNewPasswordComponent } from './require-new-password/require-new-password.component';\n// import { SignInComponent } from './sign-in/sign-in.component';\n// import { ConfirmSignInComponent } from './confirm-sign-in/confirm-sign-in.component';\nimport { AuthGuardLogin } from './services/auth-guard-login.service';\nimport { AdminLoginFinalizeComponent } from './admin-login-finalize/admin-login-finalize.component';\nimport { LoginFinalizeComponent } from './login-finalize/login-finalize.component';\n\n@NgModule({\n  imports: [\n    CommonModule\n    ,RouterModule\n    ,FormsModule\n    ,ReactiveFormsModule\n    // ,AmplifyAngularModule\n    ,SharedModule\n  ],\n  entryComponents: [LoginDialogComponent],\n  declarations: [LoginComponent, LogoutComponent, AdminLoginComponent, AdminLoginFinalizeComponent,LoginFinalizeComponent\n    , LoginHeaderComponent, LoginDialogComponent, HasPermissionDirective, SsoComponent\n    // , ForgotPasswordComponent, RequireNewPasswordComponent, SignInComponent, ConfirmSignInComponent\n  ]\n  ,providers: [AuthGuard, AdminGuard, AuthGuardLogin\n    // , AmplifyAuthService\n    // ,{\n    //   provide: AMPLIFY_AUTH_SERVICE, useValue: Auth\n    // }\n]\n  ,exports: [LogoutComponent, LoginComponent, AdminLoginComponent\n    , AdminLoginFinalizeComponent, LoginFinalizeComponent\n    , HasPermissionDirective, SsoComponent]\n})\nexport class LoginModule { }\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { ToastData, TOAST_CONFIG_TOKEN, ToastConfig, defaultToastConfig, ToastType } from './toast-config';\nimport { AnimationEvent } from '@angular/animations';\nimport { Component, Inject } from '@angular/core';\nimport { toastAnimations, ToastAnimationState } from './toast-animation';\nimport { ToastRef } from './toast-ref';\n\n@Component({\n  selector: 'dac-toast',\n  templateUrl: './toast.component.html',\n  animations: [toastAnimations.fadeToast],\n})\nexport class ToastComponent {\n  animationState: ToastAnimationState = 'default';\n  iconClass: string;\n  type:ToastType;\n\n  private intervalId: null | ReturnType<typeof setTimeout>;\n  private toastConfig:ToastConfig;\n\n  constructor(\n    readonly data: ToastData,\n    readonly ref: ToastRef\n    // @Inject(TOAST_CONFIG_TOKEN) private toastConfig: ToastConfig\n    ) {\n      this.toastConfig = defaultToastConfig;\n      this.type = data.type;\n      switch (data.type) {\n        case 'success':\n          this.iconClass = 'check';\n        break;\n        case 'danger':\n        case 'warning':\n          this.iconClass = 'exclamation-circle';\n        break;\n        case 'info':\n          this.iconClass = 'info-circle';\n        break;\n      }\n  }\n  ngOnInit() {\n    let delay = this.data.timeToDisplay || this.toastConfig.timeToDisplay || 5000;\n    this.intervalId = setTimeout(() => {\n      this.close();\n    }, delay);\n  }\n\n  ngOnDestroy() {\n    clearTimeout(this.intervalId);\n  }\n\n  close() {\n    this.ref.close();\n  }\n\n  onFadeFinished(event: AnimationEvent) {\n    const { toState } = event;\n    const isFadeOut = (toState as ToastAnimationState) === 'closing';\n    const itFinished = this.animationState === 'closing';\n\n    if (isFadeOut && itFinished) {\n      this.close();\n    }\n  }\n\n  public get Config() : ToastConfig {\n    return this.toastConfig;\n  }\n}\n","<div class=\"alert\" [ngClass]=\"['alert-' + type]\"\n     [@fadeAnimation]=\"{value: animationState, params:\n        { fadeIn: Config.animation.fadeIn, fadeOut: Config.animation.fadeOut }}\"\n     (@fadeAnimation.done)=\"onFadeFinished($event)\">\n  <i class=\"alert-type-icon fa\" [ngClass]=\"['fa-' + iconClass]\" aria-hidden=\"true\"></i>\n  <div class='alert-message'>{{ data.text }}</div>\n  <i class=\"fa fa-times\" (click)=\"close()\" aria-hidden=\"true\"></i>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { AssignmentItem } from \"./AssignmentItem\";\n\nexport abstract class Assignment\n{\n    private id:number;\n    private dateAssigned:Date;\n    private dateCompleted:Date;\n    private type:\"Assessment\"|\"AssessmentGroup\"|\"LibraryAsset\"|\"Questionnaire\"|\"ExternalQuestionnaire\"|\"TemplateProfile\";\n    private items:AssignmentItem[];\n    private appointmentId:string|null;\n\n    public constructor() {\n        this.dateAssigned = null;\n        this.appointmentId = null;\n        this.type = \"Assessment\";\n        this.items = [];\n    }\n\n    public get Id() : number {\n        return this.id;\n    }\n\n    public set Id(v:number) {\n        this.id = v;\n    }\n\n    public get AppointmentId() : string {\n      return this.appointmentId;\n    }\n\n    public set AppointmentId(v:string|null) {\n      this.appointmentId = v;\n    }\n\n    public abstract get Name();\n\n    public abstract set Name(v : string);\n\n\n    public get DateAssigned() : Date {\n        return this.dateAssigned;\n    }\n\n    public set DateAssigned(v : Date) {\n        this.dateAssigned = v;\n    }\n\n    public get DateCompleted() : Date {\n        return this.dateCompleted;\n    }\n\n    public set DateCompleted(v : Date) {\n        this.dateCompleted = v;\n    }\n\n    public setDateAssigned(time:number) : Date {\n        this.DateAssigned = new Date(time);\n        return this.DateAssigned;\n    }\n\n\n    public get IsComplete() : boolean {\n        return this.dateCompleted != null;\n    }\n\n    public get Type() : \"Assessment\"|\"AssessmentGroup\"|\"LibraryAsset\"|\"Questionnaire\"|\"ExternalQuestionnaire\"|\"TemplateProfile\" {\n        return this.type;\n    }\n\n    public set Type(v:\"Assessment\"|\"AssessmentGroup\"|\"LibraryAsset\"|\"Questionnaire\"|\"ExternalQuestionnaire\"|\"TemplateProfile\") {\n        this.type = v;\n    }\n\n    public get Items() : AssignmentItem[] {\n        return this.items;\n    }\n\n    public set Items(v:AssignmentItem[]) {\n        v = v || []; // make sure we always get an array here\n\n        this.items = v;\n    }\n\n    public get isGroup() {\n      return false;\n    }\n\n    public hasItem(v:AssignmentItem) {\n        if (!(v && v.Id)) {\n            return false;\n        }\n\n        if (this.items.find(i => i.Id == v.Id) !== undefined) {\n            return true;\n        }\n        return false;\n    }\n\n    public getTotalAssignments() {\n        return this.items.length;\n    }\n\n    public getAssignmentsCompleted() {\n        return this.items.filter(i => i.IsComplete).length;\n    }\n\n    public get hasStarted() {\n        return this.getAssignmentsCompleted() > 0;\n    }\n\n    public getNextAssignmentItemToComplete() : AssignmentItem {\n        return this.items.find(i => !i.IsComplete);\n    }\n\n    public markCompleted(assignment:AssignmentItem) {\n        let item = this.items.find(i => i.Id == assignment.Id);\n        if (item) {\n            item.DateCompleted = new Date();\n        }\n        if (this.Items.every(i => i.IsComplete)) {\n            this.DateCompleted = new Date();\n        }\n    }\n\n    public getResultIds() {\n        return this.Items.filter(i => i.IsComplete).map(i => i.ResultId);\n    }\n\n    public getAssessmentResultIds() {\n      return this.Items.filter(i => i.IsComplete && i.Type == 'Assessment').map(i => i.ResultId);\n    }\n\n    public getQuestionnaireResponseItems() {\n      return this.Items.filter(i => i.IsComplete && (i.Type == 'Questionnaire' || i.Type == 'ExternalQuestionnaire'));\n    }\n\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { AssignmentItem } from \"./AssignmentItem\";\n\nexport class AssignedLibraryAsset extends AssignmentItem\n{\n    private assetId:number|null;\n    private assetUuid:string|null;\n\n    public constructor() {\n        super();\n    }\n\n\n    public get AssetUuid() : string {\n      return this.assetUuid;\n    }\n\n\n    public set AssetUuid(v : string) {\n      this.assetUuid = v;\n    }\n\n\n    public get AssetId() {\n        return this.assetId;\n    }\n\n    public set AssetId(v:number) {\n        this.assetId = v;\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport enum Role {\n    SuperUser = 1\n    ,Owner\n    ,Admin\n    ,Registered\n    ,Client\n    ,UnAuthenticated\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Variable} from '../../models/variable';\nimport {AssessmentResult} from '../../../shared/models/assessment-result';\nimport { Component, OnInit, Input, OnDestroy, ElementRef, ViewChild } from '@angular/core';\nimport { ScaleDataSectionComponent } from 'app/reports/models/scale-list-data-component';\nimport { Assessment } from 'app/shared/models/assessment';\nimport { ScaleResult } from 'app/shared/models/scale-result';\nimport { ReportNavigatorService } from 'app/reports/services/report-navigator.service';\nimport { Scale } from 'app/shared/models/scale';\nimport { Question } from 'app/shared/models/question';\nimport { SummaryScalesChartComponent } from 'app/assessment-charts/summary-scales-chart/summary-scales-chart.component';\n\n\ninterface ActionsByScale {\n  [scaleId: string] : {scale:Scale, question:Question, action:string, label: string, data:any}[]\n}\n@Component({\n  selector: 'app-therapist-scale-results',\n  templateUrl: './therapist-scale-results.component.html'\n})\nexport class TherapistScaleResultsComponent extends ScaleDataSectionComponent implements OnInit, OnDestroy  {\n\n  // TODO: stephen is it good to have this as a dynamic report item and as a\n  // usable component??? seems to mix the uses and causes ugly hacks in ngOnInit.\n  @Input() expandContent:boolean;\n  @Input(\"scalesPerPage\") externalScalesPerPage:number;\n  @Input(\"scaleResults\") externalScaleResults:ScaleResult[];\n  @Input(\"assessmentResult\") externalAssessmentResult:AssessmentResult;\n  @Input(\"resultTitle\") externalTitle:string;\n  @ViewChild(\"summaryScaleChart\") summaryScaleChartComponent:SummaryScalesChartComponent;\n  private _scales_per_page:number;\n  private _title:string;\n  private _skipGraph:boolean;\n  private _skipContent:boolean;\n  private _skipTable:boolean;\n  private _showRangeScore:boolean;\n  private _questionActionsByScale:ActionsByScale;\n  private _rollUpQuestions:boolean;\n\n  private _questionActions:any[];\n\n\n\n  constructor(private navigator:ReportNavigatorService, private el:ElementRef) {\n    super();\n    this._skipContent = false;\n    this._skipGraph = false;\n    this._skipTable = false;\n    this._showRangeScore = true;\n    this._rollUpQuestions = false;\n  }\n\n  ngOnInit() {\n    // coming from the decorator.\n    // assign all the data that comes from the navigator.\n    if (this.externalScalesPerPage) {\n      this._scales_per_page = this.externalScalesPerPage;\n    }\n    if (this.externalScaleResults) {\n      this.ScaleResults.push(...this.externalScaleResults);\n    }\n    if (this.externalAssessmentResult) {\n      this.AssessmentResult = this.externalAssessmentResult;\n    }\n    if (this.externalTitle) {\n      this._title = this.externalTitle;\n    }\n  }\n  ngAfterViewInit() {\n    if (this.ScaleResults) {\n      this.populateNavigator(this.ScaleResults);\n    }\n    super.ngAfterViewInit();\n  }\n  ngOnDestroy() {\n    this.cleanupNavigator();\n  }\n\n  public getPrintContent() {\n    let documentFragment = new DocumentFragment();\n    // clone ourselves so we can manipulate our dom\n    documentFragment.appendChild(this.el.nativeElement.cloneNode(true));\n    let chartContainer = documentFragment.querySelector(\".scale-chart-container\") as HTMLElement;\n    let chartImage = this.summaryScaleChartComponent.getChartAsHtmlImageElement();\n    chartImage.className = chartContainer.className;\n    chartContainer.replaceWith(chartImage);\n    return documentFragment.firstElementChild;\n  }\n\n  public getLegendLabels(scaleResult:ScaleResult) {\n    return scaleResult.scale.ranges.map(r => r.displayName);\n  }\n\n  getTitle() {\n    return this._title;\n  }\n\n  public setReportData(data:any, results:AssessmentResult[], variables:Variable[]) {\n    super.setReportData(data, results, variables);\n\n    if (data && data.hasOwnProperty('expandContent') && data.expandContent === false) {\n      this.expandContent = false;\n    }\n\n    if (data && data.title) {\n      this._title = data.title;\n    }\n    else {\n      this._title = this.Assessment.name;\n    }\n\n    if (data && data.scales_per_page) {\n      this._scales_per_page = +data.scales_per_page;\n    }\n    else if (this.ScaleResults) {\n      // this makes it so we never force a page break here.\n      this._scales_per_page = this.ScaleResults.length + 1;\n    }\n    else {\n      console.error(\"No scales found for component\");\n      this._scales_per_page = 0;\n    }\n    if (data) {\n      this._skipTable = data.skipTable == true;\n      this._skipGraph = data.skipGraph == true;\n      this._skipContent = data.skipContent == true;\n      // default is to show them... so we want to check for false instead of true.\n      // so that old reports always shows the score range...\n      this._showRangeScore = data.showRangeScore !== false;\n      this._rollUpQuestions = data.rollUpQuestions == true;\n\n      if (data.hasTableAction) {\n        let questionById = this.Assessment.getQuestionsListById();\n        this._questionActions = (data.tableActions || []).map(ta => {\n          let question = questionById[ta.questionId] || {};\n          return {\n            scale: question.scale\n            ,question: question\n            ,action: ta.action\n            ,label: data.tableActionLabel\n            ,data: ta.data\n          };\n        });\n        // this._questionActionsByScale = {};\n        // (data.tableActions || []).forEach(ta => {\n        //\n        //   let scaleResult = this.ScaleResults.find(sr => sr.scale.id == ta.scaleId);\n        //   if (!scaleResult) {\n        //     console.error(\"Could not find scale result with scale id \", ta.scaleId);\n        //   } else if (!this._questionActionsByScale[scaleResult.scale.id]) {\n        //     this._questionActionsByScale[scaleResult.scale.id] = [];\n        //   }\n        //   let action = {\n        //     scale: scaleResult.scale\n        //     ,question: questions[ta.questionId]\n        //     ,action: ta.action\n        //     ,label: data.tableActionLabel\n        //     ,data: ta.data\n        //   };\n        //   this._questionActionsByScale[ta.scaleId].push(action);\n        // })\n      }\n    }\n  }\n\n  public shouldShowQuestionList(scaleResult) {\n    if (this.SkipTable) {\n      return false;\n    }\n    if (this.hasSubScales(scaleResult)  && !this.shouldRollUpQuestions(scaleResult)) {\n      return false;\n    }\n   return true;\n  }\n\n  public shouldRollUpQuestions(scaleResult:ScaleResult) {\n    if (this.RollUpQuestions) {\n      return true;\n    }\n    return scaleResult && scaleResult.scale && scaleResult.scale.rollUpSubScales === true;\n  }\n\n  public shouldShowSubScalesList(scaleResult) {\n    if (this.SkipTable) {\n      return false;\n    }\n    if (this.hasSubScales(scaleResult)) {\n      if (!this.shouldRollUpQuestions(scaleResult)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  private getQuestionsForScaleResult(scaleResult, depth = 0) {\n    let questionList = [];\n    if (depth > 50) {\n      console.error(\"Max recursive depth reached\");\n      return questionList;\n    }\n    if (this.hasSubScales(scaleResult)) {\n      let subScaleResults = this.getSubScales(scaleResult);\n      questionList = subScaleResults.map(sr => this.getQuestionsForScaleResult(sr, depth + 1))\n                    .reduce((prev, curr) => prev.concat(curr), []);\n    }\n    else {\n      questionList = this.Assessment.getQuestionsForScale(scaleResult.scale);\n    }\n    return questionList;\n  }\n\n  public getActionByScale(scale) {\n    return this._questionActions; // for now we just return everything\n    // return this._questionActionsByScale[scale.id];\n  }\n\n  private populateNavigator(scaleResults:ScaleResult[]) {\n    scaleResults.forEach(sr => {\n      let rootElement = this.el.nativeElement as HTMLElement;\n      let element = rootElement.querySelector(\"#\" + this.getScaleResultNavigatorId(sr));\n      if (element) {\n        this.navigator.registerItem(sr.scale.id, element);\n      }\n    });\n  }\n\n  public getScaleResultNavigatorId(scaleResult:ScaleResult) {\n    return \"id-\" + scaleResult.scale.id;\n  }\n\n  private cleanupNavigator() {\n    this.ScaleResults.forEach(sr => {\n      this.navigator.unregisterItem(sr.scale.id);\n    });\n  }\n\n  public shouldPrintBreak(index:number) {\n    // since index is 0 based the the user scales per page is 1 based we convert.\n    return ((index + 1) % this._scales_per_page == 0);\n  }\n\n  public shouldReverseScaleGraph(scaleResult:ScaleResult) {\n    return scaleResult && scaleResult.scale && scaleResult.scale.negativeToPositiveRanges;\n  }\n\n  get ScalesPerPage() {\n    return this._scales_per_page;\n  }\n\n  get Assessment() : Assessment {\n    if (this.AssessmentResult) {\n      return this.AssessmentResult.assessment;\n    }\n    return null;\n  }\n\n  get SkipContent() : boolean {\n    return this._skipContent;\n  }\n\n  get SkipGraph() : boolean {\n    return this._skipGraph;\n  }\n\n  get SkipTable() : boolean {\n    return this._skipTable;\n  }\n\n  get ShowRangeScore() : boolean {\n    return this._showRangeScore;\n  }\n\n  get RollUpQuestions() : boolean {\n    return this._rollUpQuestions;\n  }\n\n  public hasSubScales(scaleResult:ScaleResult) {\n    return scaleResult && scaleResult.scale && scaleResult.scale.hasSubScales();\n  }\n  public getSubScales(scaleResult:ScaleResult) {\n    if (scaleResult.scale.hasSubScales()) {\n      return scaleResult.scale.getSubScaleIds().map(si => this.AssessmentResult.getScaleResultByScaleId(si));\n    }\n    return [];\n  }\n\n}\n","<div class=\"card card-cascade d-print-block-visible\">\n    <div class=\"view gradient-card-header primary-gradient text-light\">\n        <h3 class='h3-responsive text-center'>{{getTitle()}}</h3>\n    </div>\n    <div class=\"card-body\">\n        <div class=\"report-print-page mb-3 row\"\n        [id]=\"getScaleResultNavigatorId(scaleResult)\"\n        [ngClass]=\"{'force-page-break':shouldPrintBreak(index), 'mb-3': !last}\"\n        *ngFor=\"let scaleResult of ScaleResults;index as index; last as last;\">\n            <div class=\"col\">\n                    <div class=\"card card-cascade\">\n                        <div class=\"view gradient-card-header secondary-gradient text-light\">\n                                <h3 class='h3-responsive text-center'>{{scaleResult.scale?.name}} (Scored {{scaleResult.getScoreForDisplay()}} / {{scaleResult.scale.getMaxScore()}})</h3>\n                        </div>\n                        <div class=\"card-body pt-1 pt-md-3\">\n                            <div class=\"row justify-content-center\" *ngIf=\"!SkipGraph\">\n                                <div class=\"col-8 ml-auto mr-auto\">\n                                    <app-summary-scales-chart #summaryScaleChart class=\"card card-body row pt-1 pt-md-3\" [showNames]=\"false\" [scaleResults]=\"[scaleResult]\"\n                                    [showRangeScore]=\"ShowRangeScore\"\n                                    [reverseDirection]=\"shouldReverseScaleGraph(scaleResult)\"></app-summary-scales-chart>\n                                </div>\n                            </div>\n                            <div class=\"row mb-0 mt-3\" *ngIf=\"!SkipContent\">\n                                <app-scale-range-content class=\"col\" [scaleResult]=\"scaleResult\"></app-scale-range-content>\n                            </div>\n                            <div class=\"row\" *ngIf=\"shouldShowQuestionList(scaleResult)\">\n                                <app-scale-questions-list  class=\"col-12 d-report-print-page\"\n                                [QuestionActions]=\"getActionByScale(scaleResult.scale)\"\n                                [Questions]=\"getQuestionsForScaleResult(scaleResult)\"></app-scale-questions-list>\n                            </div>\n                            <div class=\"row\" *ngIf=\"shouldShowSubScalesList(scaleResult)\">\n                                <dac-scale-sub-list class=\"col-12 d-report-print-page\" [SubScales]=\"getSubScales(scaleResult)\"></dac-scale-sub-list>\n                            </div>\n                        </div>\n                    </div>\n            </div>\n    </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n/**\n * Used for more granular permissions\n */\nexport enum Capability {\n    // Can the user access the shop, buy from the shop, etc.\n    CAN_SHOP = 1,\n    CAN_BUY_TOKENS = 2\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Output, Input, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { LibraryAsset } from 'app/library-assets/models/library-asset';\nimport { LibraryAssetResult } from 'app/library-assets/models/library-asset-result';\n\n@Component({\n  selector: 'dac-article',\n  templateUrl: './article.component.html',\n  styleUrls: ['./article.component.scss']\n})\nexport class ArticleComponent implements OnInit {\n\n  @Input() article:LibraryAsset;\n  @Input() result:LibraryAssetResult;\n  @Output() onSubmit = new EventEmitter<LibraryAssetResult>();\n  @Input(\"disabled\") disabled:Boolean;\n  @Input() hideHeaders:boolean;\n  @ViewChild('journal') journal:ElementRef;\n\n  public ArticleContent:string;\n\n  constructor() {\n    this.hideHeaders = false;\n  }\n\n  ngOnInit() {\n    // we've sanitized this on the server, and we need to get the ids\n    if (this.article && this.article.content) {\n      this.ArticleContent = this.article.content;\n    }\n  }\n\n  public print() {\n    if (window && window.print) {\n      window.print();\n    }\n  }\n\n  public get hasJournal() {\n    if (this.article.journal) {\n      return true;\n    }\n    return false;\n  }\n\n  private populateExerciseJournal(journal:string) {\n    if (this.journal && journal) {\n      this.journal.nativeElement.innerText = journal;\n    }\n  }\n\n  public submit() {\n\n    let journalEntry = null;\n    if (this.journal) {\n      journalEntry = this.journal.nativeElement.innerText;\n    }\n\n    let result = new LibraryAssetResult();\n    result.asset = this.article;\n    result.answers = []; // answers have to be an empty array\n    result.journal = journalEntry;\n    this.onSubmit.next(result);\n  }\n\n}\n","<div class=\"row p-2\" *ngIf=\"!hideHeaders\">\n  <div class=\"col-md-12 card card-body\">\n    <div class=\"row\">\n      <div class=\"col-6 col-sm-3 col-md-2 order-1\">\n      </div>\n      <div class=\"col-12 col-sm-6 col-md-8 text-center order-3 order-md-2\">\n        <h4 class=\"h4-responsive\">{{article?.title}}</h4>\n      </div>\n      <div class=\"col-6 col-sm-3 col-md-2 text-right order-2 order-md-3\">\n        <input type=\"button\" class=\"btn btn-secondary d-print-none\" value=\"Print\" (click)=\"print()\" />\n      </div>\n    </div>\n  </div>\n</div>\n<div [innerHTML]=\"ArticleContent\"></div>\n<div class=\"card card-cascade wider mt-4 col-md-8 journalContainer\" *ngIf=\"hasJournal\">\n  <div class=\"view gradient-card-header secondary-gradient\">\n      <h4 class=\"h4-responsive\"><i class=\"fa fa-pencil p-2\"></i>Time for Reflection</h4>\n  </div>\n  <div class=\"card-body\">\n    <h5 class=\"text-center\">{{article?.journal}}</h5>\n    <div *ngIf=\"!result\" #journal contenteditable=\"true\" class=\"form-control journal\"></div>\n    <div *ngIf=\"result\" #journal class=\"form-control journal\"></div>\n  </div>\n</div>\n<div class=\"row p-2 d-print-none\" *ngIf=\"!hideHeaders\">\n  <div class=\"col card card-body\">\n    <div class=\"row\">\n      <div class=\"col-6 col-sm-3 col-md-2 order-1\">\n      </div>\n      <div class=\"col-12 col-sm-6 col-md-8 text-center order-3 order-md-2\">\n        <h4 class=\"h4-responsive\">{{article?.title}}</h4>\n      </div>\n      <div class=\"col-6 col-sm-3 col-md-2 text-right order-2 order-md-3\">\n        <input [disabled]=\"disabled\" type=\"button\" class=\"btn btn-primary\" value=\"Next\" (click)=\"submit()\" />\n      </div>\n    </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule, NO_ERRORS_SCHEMA } from '@angular/core';\n\nimport { AppRoutingModule } from \"./app-routing.module\";\nimport { SharedModule } from './shared/shared.module';\nimport { LoginModule } from './login/login.module';\nimport { AppComponent } from './app.component';\n// import { HomeComponent } from './home/home.component';\nimport { ThemeModule } from \"./theme/theme.module\";\nimport { ReportsModule } from \"./reports/reports.module\";\nimport { CompaniesModule } from \"./companies/companies.module\";\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n// import { HelpComponent } from './help/help.component';\nimport { AccountOwnerSettingsComponent } from './account-owner-settings/account-owner-settings.component';\n// import { BaaComponent } from './baa/baa.component';\n// import { PrivacyComponent } from './privacy/privacy.component';\n// import { TermsAndConditionsComponent } from './terms-and-conditions/terms-and-conditions.component';\nimport { NavigationComponent } from './navigation/navigation.component';\nimport { LayoutModule } from '@angular/cdk/layout';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatListModule } from '@angular/material/list';\nimport { MatDialogModule, MatDialogRef, MAT_DIALOG_DEFAULT_OPTIONS } from '@angular/material/dialog';\nimport { DebugModule } from './debug/debug.module';\n// import { ToastModule } from './shared/toast/toast.module';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    AccountOwnerSettingsComponent,\n    NavigationComponent,\n  ],\n  imports: [\n    BrowserAnimationsModule,\n    MatDialogModule,\n    // Not sure why we have to import the MDB modules here in root\n    // instead of in our theme folder but I guess this works.\n    SharedModule.forRoot(),\n    LoginModule,\n    ReportsModule,\n    ThemeModule,\n    CompaniesModule,\n    DebugModule,\n    AppRoutingModule,\n    LayoutModule,\n    MatToolbarModule,\n    MatButtonModule,\n    MatSidenavModule,\n    MatIconModule,\n    MatListModule,\n  ],\n  schemas: [ NO_ERRORS_SCHEMA ],\n  providers: [\n    {provide: MAT_DIALOG_DEFAULT_OPTIONS, useValue: {\n      panelClass: ['d-block', 'white', 'mr-3', 'ml-3']\n      , hasBackdrop: true\n      , closeOnNavigation: true\n    }}\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { AfterContentInit, Component, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\nimport { TabComponent } from 'app/tab/tab.component';\nimport { filter, map } from 'rxjs/operators';\n\n@Component({\n  selector: 'dac-tabs',\n  templateUrl: './tabs.component.html',\n  styleUrls: ['./tabs.component.scss']\n})\nexport class TabsComponent implements OnInit, AfterContentInit {\n\n  /**\n   * If we want to improve the way these tabs work, or deal with dynamic tabs\n   * we can follow these tutorials:\n   * https://juristr.com/blog/2016/02/learning-ng2-creating-tab-component/\n   * https://juristr.com/blog/2017/07/ng2-dynamic-tab-component/\n   *\n   * Used this share to figure out the routing piece.\n   * https://stackoverflow.com/a/55100616\n   */\n  // typescript needs to know what properties will exist on class instances\n  tabs: TabComponent[] = [];\n\n  private activeRoute:string;\n  private activeTab:TabComponent;\n\n  @Input() router:boolean;\n  @Input() headerColor:string;\n\n  constructor(private _router:Router, private route:ActivatedRoute) {\n    this.router = false;\n    this.headerColor = \"primary\";\n    this._router.events.pipe(\n      filter(event => event instanceof NavigationEnd)\n      ,map((endEvent) => {\n        let child = this.route.firstChild;\n        if (child && child.snapshot && child.snapshot.url && child.snapshot.url.length) {\n          return child.snapshot.url[0].path;\n        }\n      }),\n    )\n    .subscribe(activeRoute => {\n      this.activeRoute = activeRoute;\n      this.setupActiveTabFromRoute(this.activeRoute);\n    });\n  }\n\n  get tabGroupClasses() {\n    if (this.headerColor) {\n      return this.headerColor + \"-color\";\n    }\n  }\n\n  ngOnInit(): void {\n\n  }\n  ngAfterContentInit() {\n    if (this.tabs) {\n      if (!this.router) {\n        this.toggleActive(this.tabs[0]);\n      }\n      else {\n        let missingRouters = this.tabs.filter(t => !t.routerLink);\n        missingRouters.forEach((t, i) => {\n          console.error(\"routerLink is missing from tab[\",i,\"] with title\", t.heading);\n        });\n        this.setupActiveTabFromRoute(this.activeRoute);\n      }\n    }\n  }\n\n  private setupActiveTabFromRoute(activeRoute:string) {\n    if (this.tabs.length) {\n      let tab = this.tabs.find(t => t.routerLink == activeRoute);\n      this.toggleActive(tab);\n    }\n  }\n\n  addTab(tab:TabComponent) {\n    this.tabs.push(tab);\n  }\n\n  toggleActive(tab:TabComponent) {\n    if (this.activeTab != tab) {\n      this.tabs.forEach(t => t.isActive = t === tab);\n      this.activeTab = tab;\n      if (this.router) {\n        this._router.navigate([tab.routerLink], {relativeTo: this.route});\n      }\n    }\n  }\n\n}\n","<div class=\"container-fluid\">\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n\n      <ul [ngClass]=\"tabGroupClasses\" class=\"nav nav-tabs tabs-3 primary-color\" role=\"group\">\n      <!-- <div [ngClass]=\"tabGroupClasses\" class=\"tab-header btn-group d-flex justify-content-center\" role=\"group\"> -->\n        <li class=\"nav-item\" *ngFor=\"let tab of tabs\" [ngClass]=\"{active: tab.isActive}\" (click)=\"toggleActive(tab)\">\n          <a class=\"nav-link waves-light z-depth-0\"\n              [ngClass]=\"{active: tab.isActive}\" >\n              {{tab.heading}}\n            </a>\n        </li>\n\n      </ul>\n  </div>\n  <div class=\"col-md-12\">\n    <ng-content *ngIf=\"!router; else routerContent\"></ng-content>\n  </div>\n</div>\n<ng-template #routerContent>\n  <div class=\"tab-content card card-cascade col-12\">\n    <div class=\"row\">\n        <div class=\"col\">\n          <router-outlet></router-outlet>\n        </div>\n    </div>\n  </div>\n</ng-template>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { ScaleResult } from 'app/shared/models/scale-result';\n\n@Component({\n  selector: 'app-scale-summary',\n  templateUrl: './scale-summary.component.html'\n})\nexport class ScaleSummaryComponent implements OnInit {\n  @Input() scaleResult:ScaleResult;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<div class=\"chart\">\n    <div class=\"row col-xs-12 no-gutter\">\n        <p *ngIf=\"!scaleResult\">No scale result found\"</p>\n        <app-scale-chart\n        *ngIf=\"scaleResult\"\n        [show-ranges]=\"false\"\n        [scale-result]=\"scaleResult\"\n        [show-scale-name]=\"false\"></app-scale-chart>\n    </div>\n    <div class=\"row col-xs-12 no-gutter\">\n        <h4 class='text-center graph-title scale-name'>{{scaleResult?.scale?.name}}</h4>\n        <h5 class='text-center graph-title range-name'>{{scaleResult?.range?.displayName}}</h5>\n    </div>\n</div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class ScaleRange\n{\n\tprivate _id:string;\n\tprivate _rangeStart:number;\n\tprivate _rangeEnd:number;\n\tprivate _name:string;\n\tprivate _displayName:string;\n\tprivate _content:string;\n\tprivate _mediaURL:string;\n\tprivate _mediaType:string;\n\tprivate _assignmentURL:string;\n\tprivate _clientDisplayName:string;\n\tprivate _clientContent:string;\n\n\tconstructor() {\n\t\tthis.id = null;\n\t\tthis.rangeStart = 0;\n\t\tthis.rangeEnd = 0;\n\t\tthis.name = \"\";\n\t\tthis.displayName = \"\";\n\t\tthis.clientContent = \"\";\n\t\tthis.therapistContent = \"\";\n\t\t// for now we go to video... if we change to anything\n\t\t// else we can handle it from this flag.\n\t\tthis.mediaType = \"video\";\n\t\tthis.mediaURL = null;\n\t\tthis.assignmentURL = null;\n\t}\n\n\n\tpublic get id() : string {\n\t\treturn this._id;\n\t}\n\n\tpublic set id(v : string) {\n\t\tthis._id = v;\n\t}\n\n\tpublic get mediaType() : string {\n\t\treturn this._mediaType;\n\t}\n\n\tpublic set mediaType(v:string) {\n\t\tthis._mediaType = v;\n\t}\n\n\tpublic get mediaURL() : string {\n\t\treturn this._mediaURL;\n\t}\n\n\tpublic set mediaURL(v : string) {\n\t\tthis._mediaURL = v;\n\t}\n\n\tpublic hasMedia() {\n\t\treturn this._mediaType == 'video' && this._mediaURL;\n\t}\n\n\n\tpublic get assignmentURL() : string {\n\t\treturn this._assignmentURL;\n\t}\n\n\n\tpublic set assignmentURL(v : string) {\n\t\tthis._assignmentURL = v;\n\t}\n\n\n\tpublic get midPoint() : number {\n\t\tlet mid = this.rangeStart + Math.ceil(Math.abs(this.rangeEnd - this.rangeStart) / 2);\n\t\treturn mid;\n\t}\n\n\tpublic getPercentageForRange(score:number) {\n\t\tlet minRange = this.rangeStart;\n\t\tlet maxRange = this.rangeEnd;\n\n\t\tif (score < minRange || score > maxRange) {\n\t\t\tthrow new Error(\"Score(\" + score + \") is out of range(\" + minRange + \",\" + maxRange + \")\");\n\t\t}\n\n\t\t// we make it inclusive and start our scores off one based if the rangeStart is a 0\n\n\n\t\t// if (minRange > 0) {\n\t\t// \t// we are inclusive so we are adding one to the endInterval\n\t\t// \tmaxRange += 1;\n\t\t// }\n\n\t\tlet maxInterval = Math.max(maxRange - minRange, 1);\n\t\tlet interval = score - minRange;\n\t\tlet normalizedPercentage = 0;\n\t\t// NOTE: APSATS request, if the interval range is only 1, and a user scores a 0 value we want the graph to show in the middle\n\t\t// instead of at the very beginning of the range.\n\t\tif (maxInterval == 1) {\n\t\t\tnormalizedPercentage = interval == 0 ? 50 : 100;\n\t\t}\n\t\telse {\n\t\t\tnormalizedPercentage = Math.round((interval / maxInterval) * 100);\n\t\t}\n\t\treturn normalizedPercentage;\n\n\t}\n\n\tpublic get rangeStart() : number {\n\t\treturn this._rangeStart;\n\t}\n\n\tpublic set rangeStart(v : number) {\n\t\tthis._rangeStart = v;\n\t}\n\tpublic get rangeEnd() : number {\n\t\treturn this._rangeEnd;\n\t}\n\n\tpublic set rangeEnd(v : number) {\n\t\tthis._rangeEnd = v;\n\t}\n\n\tpublic get name() : string {\n\t\treturn this._name;\n\t}\n\n\tpublic set name(v : string) {\n\t\tthis._name = v;\n\t}\n\n\tpublic get displayName() : string {\n\t\treturn this._displayName;\n\t}\n\n\tpublic set displayName(v : string) {\n\t\tthis._displayName = v;\n\t}\n\n\tpublic get therapistContent() : string {\n\t\treturn this._content;\n\t}\n\n\tpublic set therapistContent(v : string) {\n\t\tthis._content = v;\n\t}\n\n\n\tpublic get clientContent(): string {\n\t\treturn this._clientContent;\n\t}\n\n\tpublic set clientContent(value: string) {\n\t\tthis._clientContent = value;\n\t}\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Assessment} from \"../../shared/models/assessment\";\n\nexport class AssessmentGroup {\n    private id: number;\n    private name: string;\n    private profileId: string|null;\n    private assessments:Assessment[];\n    private created:Date;\n    private updated:Date;\n\n    constructor() {\n        this.assessments = [];\n        this.created = new Date();\n        this.updated = new Date();\n    }\n\n    get ProfileId() {\n      return this.profileId;\n    }\n    set ProfileId(id:string|null) {\n      this.profileId = id;\n    }\n    get Id() {\n        return this.id;\n    }\n    set Id(v:number) {\n        this.id = v;\n    }\n\n    get Name() {\n        return this.name;\n    }\n    set Name(v:string) {\n        this.name = v;\n    }\n\n    get Assessments() {\n        return this.assessments;\n    }\n    set Assessments(v:Assessment[]) {\n        this.assessments = v;\n    }\n\n    get Created() {\n        return this.created;\n    }\n    set Created(v) {\n        this.created = v;\n    }\n    get Updated() {\n        return this.updated;\n    }\n    set Updated(v) {\n        this.updated = v;\n    }\n\n\n\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'app-spin-icon',\n  templateUrl: './spin-icon.component.html',\n  styleUrls: ['./spin-icon.component.css']\n})\nexport class SpinIconComponent implements OnInit {\n\n  @Input() spinnerType;\n\n  constructor() {\n    this.spinnerType = \"small\";\n  }\n\n  ngOnInit() {\n  }\n\n}\n","<div *ngIf=\"spinnerType=='big';else smallSpinner\" class=\"spinner-border text-info\" style=\"width: 3rem; height: 3rem;\" role=\"status\">\n  <span class=\"sr-only\">Loading...</span>\n</div>\n<ng-template #smallSpinner>\n  <div class=\"spinner-border text-info\" style=\"width: 3rem; height: 3rem;\" role=\"status\">\n    <span class=\"sr-only\">Loading...</span>\n  </div>\n</ng-template>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {ChecklistQuestion} from './checklist-question';\nimport {MultipleChoiceQuestion} from './multiple-choice-question';\nimport { Question } from \"app/shared/models/question\";\nimport { QuestionSet } from \"app/shared/models/question-set\";\nimport { QuestionType } from \"app/shared/models/question-type\";\nimport { QuestionSetLabel } from \"app/shared/models/question-set-label\";\n\nexport class FlaggedCondition {\n\n    private _flagDirection:string;\n    private _flagValues:QuestionSetLabel[];\n\n    constructor() {\n        this.flagDirection = null;\n        this.clearFlagValues();\n    }\n\n    public clearFlagValues() {\n        this._flagValues = [];\n    }\n\n    public addFlagValue(lbl:QuestionSetLabel) {\n        let index = this._flagValues.findIndex(fl => fl.id == lbl.id);\n        if (index !== -1) {\n            this._flagValues[index] = lbl;\n        }\n        this._flagValues.push(lbl);\n    }\n    public removeFlagValue(lbl:QuestionSetLabel) {\n        this._flagValues = this._flagValues.filter(fl => fl.id != lbl.id);\n    }\n\n    public get flagValues() {\n        return this._flagValues;\n    }\n\n    public set flagDirection(v:string) {\n        this._flagDirection = v;\n    }\n    public get flagDirection() {\n        return this._flagDirection;\n    }\n\n    public shouldFlagQuestion(question:Question, questionSet:QuestionSet) {\n\n        if (!question.hasAnswer) {\n            return false;\n        }\n\n        if (question.type == QuestionType.Textbox\n            || question.type == QuestionType.SingleChoice) {\n            return true;\n        }\n        // TODO: Stephen need to handle custom labels here, which we are not handling flagged questions for.\n        let lbls = questionSet.labels;\n        if (question.type == QuestionType.MultipleChoice) {\n            let mcQuestion = question as MultipleChoiceQuestion;\n            // there is only one with multiple choice questions\n            let flagValue = this._flagValues[0];\n            let index = lbls.findIndex(l => l.id == flagValue.id);\n            let answerIndex = lbls.findIndex(l => l.id == mcQuestion.answer.id);\n            if (this.flagDirection == 'greaterOrEqual') {\n                return answerIndex >= index;\n            }\n            else {\n                return answerIndex <= index;\n            }\n        }\n        if (question.type == QuestionType.Checklist) {\n            let clQuestion = question as ChecklistQuestion;\n            let answers = clQuestion.answerForSave;\n            let flagAnswer = lbls.some(l => answers[l.id]);\n            return flagAnswer;\n        }\n        return false;\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {IReportItemComponent} from '../../models/i-report-item-component';\nimport { Component, OnInit, Input } from '@angular/core';\nimport { AssessmentResult } from \"../../../shared/models/assessment-result\";\nimport { ScaleResult } from \"../../../shared/models/scale-result\";\nimport { Variable } from \"../../models/variable\";\nimport { ScaleDataSectionComponent } from 'app/reports/models/scale-list-data-component';\n\n@Component({\n  selector: 'app-scale-results-sections-list',\n  templateUrl: './scale-results-sections-list.component.html'\n})\nexport class ScaleResultsSectionsListComponent extends ScaleDataSectionComponent implements OnInit {\n\n  constructor() {\n    super();\n  }\n\n  public getHTMLClassNames() : string[] {\n    return [\"scale-results\", \"report-item-component\"];\n  }\n\n  ngOnInit() {\n\n  }\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n}\n","<div class=\"well row col-xs-12 assessment-overview\">\n  <h1>{{AssessmentResult?.assessment.name}}</h1>\n  <h2 *ngIf=\"AssessmentResult?.assessment.creator\">{{AssessmentResult?.assessment.creator}}</h2>\n  <h2 *ngIf=\"AssessmentResult?.assessment.creatorUrl\">{{AssessmentResult?.assessment.creatorUrl}}</h2>\n  <div [innerHTML]=\"AssessmentResult?.assessment.description\"></div>\n</div>\n<div class=\"well row col-xs-12 assessment-scale-result\" *ngFor=\"let scaleResult of ScaleResults\">\n        <div class=\"row\">\n            <h3 class=\"col-xs-12 text-center\" [id]=\"scaleResult.id\" >\n                <em>{{scaleResult.name}}</em>\n                <small><em>Score:</em> {{scaleResult.score}}</small>\n            </h3>\n            <h4 class=\"col-xs-12 text-center\"><em>Your Category:</em> {{scaleResult.range?.displayName}}</h4>\n            <div class=\"col-xs-12 col-sm-offset-1 col-sm-10 col-md-offset-2 col-md-8\">\n                <app-scale-chart [scale-result]=\"scaleResult\"></app-scale-chart> \n            </div>\n            <div class=\"col-xs-12\" *ngIf=\"scaleResult?.range?.clientContent\" [innerHTML]=\"scaleResult?.range?.clientContent\"></div>\n            <app-scale-questions-list  class=\"col-xs-12\" \n                *ngIf=\"scaleResult.questions\" [Questions]=\"scaleResult.questions\"></app-scale-questions-list>\n        </div>\n    </div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Injectable} from \"@angular/core\";\nimport {Assessment} from \"../models/assessment\";\nimport {AssessmentGroup} from \"../models/assessment-group\";\nimport {HTTPService} from \"./http.service\";\nimport {DacConfig} from \"./dac-config.service\";\nimport { AuthService } from \"app/login/services/auth.service\";\nimport { Capability } from \"../models/capability\";\n\ninterface AssessmentTokenQuota {\n    assessment_uid:string;\n    assessment_name:string;\n    used_tokens:number;\n    total_tokens:number;\n    remaining_tokens:number;\n}\n\n@Injectable()\nexport class AssessmentTokenService {\n    private assessmentQuotas:Map<string,AssessmentTokenQuota>;\n    private tokensEnabled:boolean;\n\n    constructor(\n      // TODO: stephen replace $http here with our dac$http\n      private _dac$http:HTTPService\n      ,private authService:AuthService\n      ,private dacConfig:DacConfig\n    ) {\n        this.authService.getLoginState().subscribe(state => {\n            this.tokensEnabled = false;\n            if (!this.dacConfig.isFeatureEnabled(\"assessments.tokens.enabled\")) {\n                return;\n            }\n            if (state.isLoggedIn && state.user) {\n                this.tokensEnabled = state.user.hasCapability(Capability.CAN_BUY_TOKENS);\n            }\n        });\n\n        // TODO: stephen if we remove tokens all together we want to remove this feature.\n        if (this.dacConfig.isFeatureEnabled(\"assessments.tokens.enabled\")) {\n            this.tokensEnabled = true;\n            this.authService.getCurrentUser().then(user => {\n                if (!user.hasCapability(Capability.CAN_BUY_TOKENS)) {\n                    this.tokensEnabled = false;\n                }\n            });\n        }\n        else\n        {\n            this.tokensEnabled = false;\n        }\n        this.assessmentQuotas = new Map<string,AssessmentTokenQuota>();\n    }\n\n    isTokensEnabled() {\n        return this.tokensEnabled;\n    }\n\n    getGroupRemainingTokens(group:AssessmentGroup) {\n        let numTests = group.Assessments ? group.Assessments.length : 0;\n        if (numTests <= 0) {\n        return 0;\n        }\n\n        var tokensRemaining = 9999999999; // obscenely large number\n        // the smallest number of tokens in the group determines how much more the group\n        // can be used.\n        group.Assessments.forEach((a) => {\n        let testCount = this.getRemainingTokens(a);\n        tokensRemaining = Math.min(testCount, tokensRemaining);\n        });\n        return tokensRemaining;\n    }\n\n    hasTokens(assessment:Assessment) :boolean {\n        return this.getRemainingTokens(assessment) > 0;\n    }\n\n    getTotalTokens(assessment:Assessment) : number {\n        let quota = this.getItemForUid(assessment.uid);\n        return quota ? quota.total_tokens : 0;\n    }\n\n    getUsedTokens(assessment:Assessment) : number {\n        let quota = this.getItemForUid(assessment.uid);\n        return quota ? quota.used_tokens : 0;\n    }\n\n    getRemainingTokens(assessment:Assessment) : number {\n        let quota = this.getItemForUid(assessment.uid);\n        return quota ? quota.remaining_tokens : 0;\n    }\n\n    consumeToken(assessmentUid:string) {\n        // TODO: do we throw an exception if there are no tokens?\n        let quota = this.getItemForUid(assessmentUid);\n        if (quota) {\n            quota.remaining_tokens -= 1;\n            quota.used_tokens += 1;\n        }\n        else {\n            console.error(\"No quota found for assessment with uid \",assessmentUid);\n        }\n    }\n\n    freeToken(assessmentUid:string) {\n        let quota = this.getItemForUid(assessmentUid);\n        if (quota) {\n            quota.remaining_tokens += 1;\n            quota.used_tokens -= 1;\n        }\n        else {\n            console.error(\"No quota found for assessment with uid \",assessmentUid);\n        }\n    }\n\n    addTokensForGroup(group:AssessmentGroup, tokens:number) {\n        group.Assessments.map(a => this.addTokens(a, tokens));\n    }\n    addTokens(assessment:Assessment, tokens:number) {\n        let quota = this.getItemForUid(assessment.uid);\n        if (quota) {\n            quota.remaining_tokens += tokens;\n        }\n        else {\n            console.error(\"No quota found for assessment with uid \",assessment.uid);\n        }\n    }\n\n    loadAssessmentTokens() {\n      // nothing to do here if the tokens are not enabled.\n      if (!this.tokensEnabled) {\n        return Promise.resolve();\n      }\n        return this._dac$http.get<AssessmentTokenQuota[]>(\"tokens\").then((data) => {\n            data.forEach((item) => {\n                this.assessmentQuotas[item.assessment_uid] = item;\n            });\n        });\n    }\n\n    private getItemForUid(uid:string) : AssessmentTokenQuota {\n        return this.assessmentQuotas[uid];\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { Question } from 'app/shared/models/question';\nimport { QuestionActionService } from '../services/question-action.service';\nimport { CopyClipboardService } from 'app/shared/services/copy-clipboard.service';\n\n@Component({\n  selector: 'app-scale-questions-list',\n  templateUrl: './scale-questions-list.component.html'\n})\nexport class ScaleQuestionsListComponent implements OnInit {\n  @Input() Questions:Question[];\n  @Input() QuestionActions:any[];\n  @Input() flagPrompts:boolean;\n  @Input() displayScale:boolean;\n\n  public QuestionDisplays:any[];\n  private hasThirdColumn = false;\n  public hasQuestionActions = true;\n\n  constructor(private actionService:QuestionActionService, private copyClipboardService:CopyClipboardService) {\n    // by default flag the prompts\n    this.flagPrompts = true;\n    this.hasThirdColumn = false;\n    this.hasQuestionActions = false;\n    this.displayScale = false;\n    this.QuestionActions = [];\n  }\n\n  ngOnInit() {\n    let actionsByQuestionId = (this.QuestionActions || []).reduce((prev, curr) => { prev[curr.question.id] = curr; return prev;}, {});\n    if (this.QuestionActions && this.QuestionActions.length) {\n      this.hasQuestionActions = true;\n      this.hasThirdColumn = true;\n    }\n    this.QuestionDisplays = this.Questions.map(q => {\n      let display:any = {prompt: q.prompt, answerDisplayText: q.answerDisplayText, scale:\"\"};\n      if (q.assessment_scale && q.assessment_scale.name) {\n        display.scale = q.assessment_scale.name;\n      }\n      if (actionsByQuestionId[q.id]) {\n        display.action = actionsByQuestionId[q.id];\n        display.actionLabel = display.action.label;\n      }\n      display.isFlaggedForReview = this.flagQuestion(q);\n      display.computedScore = q.getComputedScore();\n\n      return display;\n    });\n    this.hasThirdColumn = this.displayScale == true;\n  }\n\n  public copyTable() {\n    /**\n     * <div class=\"cell-data col-8 col-md-9\" *ngIf=\"!HasThirdColumn\">Question</div>\n        <div class=\"cell-data col-4 col-md-3\" *ngIf=\"!HasThirdColumn\">Answer</div>\n\n        <div class=\"cell-data col-7 col-md-8\" *ngIf=\"HasThirdColumn\">Question</div>\n        <div class=\"cell-data col-2 col-md-2\" *ngIf=\"HasThirdColumn\">Answer</div>\n        <div class=\"cell-data col-2 col-md-2\" *ngIf=\"HasThirdColumn && hasQuestionActions\">Action</div>\n        <div class=\"cell-data col-2 col-md-2\" *ngIf=\"HasThirdColumn && displayScale\">Scale</div>\n     */\n    let copyTable = [];\n    copyTable.push([\"Question\", \"Answer\"]);\n    if (this.hasThirdColumn && this.displayScale) {\n      copyTable[0].push(\"Scale\");\n    }\n    if (this.QuestionDisplays.length) {\n      this.QuestionDisplays.forEach(qd => {\n        let row = [];\n        row.push('\"' + qd.prompt + '\"');\n        row.push('\"' + qd.answerDisplayText + '\"');\n        if (this.hasThirdColumn && this.displayScale) {\n          row.push('\"' + qd.scale + '\"');\n        }\n        copyTable.push(row);\n      });\n    }\n    this.copyClipboardService.copyTableToText(copyTable);\n  }\n\n  public get HasThirdColumn() {\n    return this.hasThirdColumn;\n  }\n\n  public shouldDisplayScale(scale) {\n    return this.displayScale === true;\n  }\n\n  public shouldDisplayEmptyActionColumn(question:{prompt:string,answerDisplayText:string,action:string}) {\n    if (!this.displayScale && this.hasQuestionActions) {\n      return question.action === \"\" || question.action === undefined;\n    }\n    return false;\n  }\n\n  public shouldDisplayActionColumn(question:{prompt:string,answerDisplayText:string,action:string}) {\n    if (!this.displayScale && this.hasQuestionActions) {\n      return question.action !== \"\" && question.action !== undefined;\n    }\n    return false;\n  }\n\n  public flagQuestion(question:Question) {\n    return this.flagPrompts && question.isFlaggedForReview;\n  }\n\n  public handleAction(questionDisplay:any) {\n    console.log(\"Handling action: \", questionDisplay.action);\n    this.actionService.handleAction(questionDisplay.action);\n  }\n\n}\n","<table class='table table-striped col'>\n  <tr class='table-header row secondary-color text-white mt-3'>\n      <th class=\"cell-data col-8 col-md-9\" *ngIf=\"!HasThirdColumn\">Question</th>\n      <th class=\"cell-data col-4 col-md-3\" *ngIf=\"!HasThirdColumn\">Answer <i class=\"fa fa-clipboard float-right\" (click)=\"copyTable()\" title=\"Copy Table\" alt=\"Copy Table\"></i></th>\n\n      <th class=\"cell-data col-7 col-md-8\" *ngIf=\"HasThirdColumn\">Question</th>\n      <th class=\"cell-data col-2 col-md-2\" *ngIf=\"HasThirdColumn\">Answer</th>\n      <th class=\"cell-data col-2 col-md-2\" *ngIf=\"HasThirdColumn && hasQuestionActions\">Action <i class=\"fa fa-clipboard float-right\" (click)=\"copyTable()\" title=\"Copy Table\" alt=\"Copy Table\"></i></th>\n      <th class=\"cell-data col-2 col-md-2\" *ngIf=\"HasThirdColumn && displayScale\">Scale <i class=\"fa fa-clipboard float-right\" (click)=\"copyTable()\" title=\"Copy Table\" alt=\"Copy Table\"></i></th>\n  </tr>\n  <tr *ngFor=\"let question of QuestionDisplays\" [ngClass]=\"{flagged:question.isFlaggedForReview}\" class=\"row\">\n      <td data-label=\"Question\" class=\"col-8 col-md-9 cell-data prompt\" [ngClass]=\"{'col-8 col-md-9': !HasThirdColumn, 'col-7 col-md-8': HasThirdColumn}\">\n          <h3 *ngIf=\"question.isFlaggedForReview\" class='h3-responsive d-inline red-text'>\n              <i class=\"fa fa-flag\"></i>\n          </h3>\n          <em>{{question.prompt}}</em>\n      </td>\n      <td data-label=\"Answer\" class=\"col-4 col-md-3 cell-data answer\" [ngClass]=\"{'red-text':question.isFlaggedForReview, 'col-4 col-md-3': !HasThirdColumn, 'col-3 col-md-2': HasThirdColumn}\">\n          {{question.answerDisplayText}}\n          <div class=\"d-inline-block\" *hasPermission=\"'SuperUser'\">({{question.computedScore}})</div>\n      </td>\n      <td data-label=\"Scale\" class=\"cell-data col-2\" *ngIf=\"shouldDisplayScale(question.scale)\">{{question.scale}}</td>\n      <td data-label=\"Action\" class=\"cell-data col-2\" *ngIf=\"shouldDisplayEmptyActionColumn(question)\"></td>\n      <td data-label=\"Action\" class=\"cell-data col-2\" *ngIf=\"shouldDisplayActionColumn(question)\">\n          <a (click)=\"handleAction(question)\" class=\"btn btn-sm btn-secondary\">{{question.actionLabel}}</a>\n      </td>\n    </tr>\n</table>\n","import { AfterViewInit, ChangeDetectorRef, Component, Input, OnInit, ViewChild } from \"@angular/core\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { AssessmentResult } from \"app/shared/models/assessment-result\";\nimport { AlertService } from \"app/shared/services/alert.service\";\nimport { DacConfig } from \"app/shared/services/dac-config.service\";\nimport { ModalService } from \"app/shared/services/modal.service\";\nimport { QuestionnaireService } from \"app/shared/services/questionnaire.service\";\nimport { TherapistScaleResultsComponent } from \"../report-items/therapist-scale-results/therapist-scale-results.component\";\nimport { Question } from \"app/shared/models/question\";\nimport { TextboxQuestion } from \"app/shared/models/textbox-question\";\nimport { PrintDialogComponent } from \"../print-dialog/print-dialog.component\";\nimport { Location } from \"@angular/common\";\n\n/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n@Component({\n  selector: 'dac-questionnaire-result-view',\n  templateUrl: './questionnaire-result-view.component.html'\n})\nexport class QuestionnaireResultViewComponent implements OnInit, AfterViewInit {\n\n  public disable = true;\n  public result:AssessmentResult;\n  public hasLoadedResults:boolean;\n  public allowPrinting = false;\n  public _questions:Question[];\n\n   /**\n   * Whether to show the print dialog or not.\n   */\n   public showPrintDialog:boolean;\n\n  @ViewChild(\"therapistScaleResults\") therapistScaleResults:TherapistScaleResultsComponent;\n\n  constructor(private route:ActivatedRoute, private questionnaireService:QuestionnaireService,\n    private alertService:AlertService\n    ,private changeDetection:ChangeDetectorRef\n    , private location:Location,private modalService:ModalService, private dacConfig:DacConfig) {\n      // this.allowPrinting = this.dacConfig.isFeatureEnabled(\"pdf.printing\");\n      this.allowPrinting = true;\n      this._questions = [];\n    }\n\n  ngOnInit() {\n    this.route.params.subscribe((params) => {\n      let resultId = params['resultId'];\n      this.hasLoadedResults = false;\n      this.questionnaireService.getQuestionnaireResponseAsAssessmentResult(resultId)\n      .then(response => {\n        this.hasLoadedResults = true;\n        this._questions = response.assessment.getQuestionsList();\n        this.changeDetection.detectChanges(); // make sure we update before saying the report loaded.\n        this.result = response;\n            // we need to let outside listeners like the server pdf generator know we have finished loading so we can generate the report\n        console.log(\"adding dac-report-loaded class\");\n        document.body.classList.add(\"dac-report-loaded\");\n      })\n      .catch((error) => {\n        console.error(error);\n        if (error && error.status === 404 || error.status === 400) {\n          this.alertService.error(\"404 This item could not be found\");\n        } else {\n          this.alertService.error(\"There was a server error in loading this item.  Check your internet connection or contact support\");\n        }\n      });\n    });\n  }\n  ngAfterViewInit() {\n  }\n\n  isPeerQuestionnaire(result:AssessmentResult) {\n    if (!result || !result.assessment) {\n      return false;\n    }\n    return result.assessment.uid == 'PEER Initial Assessment' || result.assessment.uid == 'PEER Follow Up Assessment' || result.assessment.uid == 'PEER After Visit Assessment';\n  }\n\n  get Questions() : Question[] {\n    return this._questions;\n  }\n\n\n  public goBack() {\n    this.location.back();\n  }\n\n  public closePrintDialog() {\n    // reset it once we've closed the dialog.\n    this.showPrintDialog = false;\n  }\n\n  public showCommandButtons() {\n      return !this.dacConfig.seamlessMode;\n  }\n\n  public print() {\n    window.print();\n    // this.modalService.openDialog(PrintDialogComponent, {hideNotesOption: true});\n  }\n}\n","<div class=\"col itemsContainer d-print-block-visible\">\n    <div class=\"row report-controls\">\n        <div class=\"col-2\" *ngIf=\"showCommandButtons()\">\n            <input class=\"btn btn-primary\" type=\"button\" (click)=\"goBack()\" value=\"Back\" />\n        </div>\n        <div [ngClass]=\"{'col-8': showCommandButtons(),  'col-12 text-center': !showCommandButtons()}\">\n            <h1 class=\"h1-responsive report-name text-center\">{{result?.assessment.name}}</h1>\n        </div>\n        <div class=\"col-2 ml-auto\" *ngIf=\"showCommandButtons()\">\n            <input class=\"btn btn-secondary\" type=\"button\" (click)=\"print()\" *ngIf=\"allowPrinting\" value=\"Print\" />\n        </div>\n    </div>\n    <div class=\"row d-none d-print-block-visible\">\n        <div class='col-12 text-center'>\n            <h1 class=\"h1-responsive report-name text-center\">{{result?.assessment.name}}</h1>\n        </div>\n    </div>\n  <div class=\"row\" *ngIf=\"!hasLoadedResults\">\n      <div class=\"col\">\n          <p class=\"alert alert-warning\">\n              <app-spin-icon></app-spin-icon> Loading Report data...</p>\n      </div>\n  </div>\n  <div class=\"row d-print-block-visible\" *ngIf=\"hasLoadedResults\">\n      <div class=\"col d-print-block-visible\">\n          <div class=\"row\">\n            <dac-peer-clinic-result-viewer class=\"col-12 col-md-8 ml-auto mr-auto\" *ngIf=\"isPeerQuestionnaire(result)\" [result]=\"result\"></dac-peer-clinic-result-viewer>\n            <app-scale-questions-list  *ngIf=\"!isPeerQuestionnaire(result)\" class=\"col-12 d-report-print-page\"\n                                [Questions]=\"Questions\"></app-scale-questions-list>\n          </div>\n      </div>\n  </div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-admin-login-finalize-page',\n  templateUrl: './admin-login-finalize-page.component.html'\n})\nexport class AdminLoginFinalizePageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n    console.log(\"got here\");\n  }\n\n}\n","<div class=\"container-fluid mb-3\">\n  <div class=\"row justify-content-center\">\n      <div class=\"col-12 col-md-8 col-lg-4\">\n        <app-admin-login-finalize></app-admin-login-finalize>\n        <!-- <dac-card [icon]=\"'lock'\" [title]=\"'Therapist Login'\" class=\"mt-4\">\n\n        </dac-card> -->\n      </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-login-page',\n  templateUrl: './login-page.component.html',\n  styleUrls: ['./login-page.component.css']\n})\nexport class LoginPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<div class=\"container-fluid mb-3\">\n  <div class=\"row justify-content-center\">\n      <div class=\"col-12 col-md-8 col-lg-4\">\n          <dac-card [icon]=\"'lock'\" [title]=\"'Client Login'\" [color]=\"'primary'\" class=\"mt-4\">\n            <app-login></app-login>\n          </dac-card>\n      </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { Assessment } from \"../../shared/models/assessment\";\nimport { DisplayCondition } from \"../../shared/models/display-condition\";\nimport { ListQuestion } from '../models/list-question';\n\n@Component({\n  selector: 'condition-edit',\n  templateUrl: './condition-edit.component.html',\n  styleUrls: ['./condition-edit.component.css']\n})\nexport class ConditionEditComponent implements OnInit {\n\n  @Input(\"condition\") condition:DisplayCondition;\n  @Input(\"assessment\") assessment:Assessment;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  getLabels() {\n    let labels = [];\n    if (this.condition && this.condition.question) {\n      let question = this.condition.question;\n      if (question instanceof ListQuestion) {\n        labels = question.CustomLabels ? question.CustomLabels : [];\n      }\n      else {\n        labels = this.condition.questionSet ? this.condition.questionSet.labels : [];\n      }\n    }\n    return labels;\n  }\n\n  hasLabels() {\n    return this.getLabels().length > 0;\n  }\n\n  hasQuestion() {\n    return this.condition.question != null;\n  }\n\n}\n","<div class=\"row\">\n  <div class='col-sm-12 col-md-4'>Type</div>\n  <div class='col-sm-12 col-md-8'>\n    <select class=\"browser-default form-control\" [(ngModel)]=\"condition.displayType\">\n      <option value=\"show\">Show</option>\n      <option value=\"hide\">Hide</option>\n    </select>\n  </div>\n</div>\n<div class=\"row\">\n  <div class='col-sm-12 col-md-4'>Question Set</div>\n  <div class='col-sm-12 col-md-8'>\n    <select class=\"browser-default form-control w-100\" [(ngModel)]=\"condition.questionSet\">\n      <option *ngFor=\"let question_set of assessment.question_sets\" [ngValue]=\"question_set\">{{question_set.title}}</option>\n    </select>\n  </div>\n</div>\n<div class=\"row\">\n  <div class=\"col-sm-12 col-md-4\">Question</div>\n  <div class='col-sm-12 col-md-8'>\n    <select class=\"browser-default form-control w-100\" *ngIf=\"condition.questionSet\" [(ngModel)]=\"condition.question\">\n      <option *ngFor=\"let question of condition.questionSet.questions\" [ngValue]=\"question\">{{question.prompt}}</option>\n    </select>\n  </div>\n</div>\n<div class=\"row\" *ngIf=\"hasQuestion()\">\n  <div class=\"col-sm-12 col-md-4\">Answer</div>\n  <div class='col-sm-12 col-md-8'>\n    <select class=\"browser-default form-control w-100\" *ngIf=\"hasLabels()\" [(ngModel)]=\"condition.answer\">\n      <option *ngFor=\"let label of getLabels()\" [ngValue]=\"label\">{{label.label}}</option>\n    </select>\n    <p class=\"alert alert-danger\" *ngIf=\"!hasLabels()\">This question has no answers to key off of.</p>\n  </div>\n</div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { ScaleDataSectionComponent } from 'app/reports/models/scale-list-data-component';\nimport { AssessmentResult } from 'app/shared/models/assessment-result';\nimport { Variable } from 'app/reports/models/variable';\nimport { ScaleResult } from 'app/shared/models/scale-result';\nimport { Question } from 'app/shared/models/question';\nimport { QuestionActionService } from 'app/reports/services/question-action.service';\nimport { ScaleResultQuestionFinderService } from 'app/reports/services/scale-result-question-finder.service';\n\n@Component({\n  selector: 'dac-question-action-list',\n  templateUrl: './question-action-list.component.html',\n  styleUrls: ['./question-action-list.component.scss']\n})\nexport class QuestionActionListComponent extends ScaleDataSectionComponent implements OnInit {\n\n  private _questionActions: any;\n  private _questionsByScale: any;\n  private _title:string;\n\n\n  constructor(private questionActionService:QuestionActionService, private questionFinder:ScaleResultQuestionFinderService) {\n    super();\n    this._questionsByScale = {};\n    this._questionActions = {};\n  }\n\n  ngOnInit() {\n  }\n\n  public setReportData(data:any, results:AssessmentResult[], variables:Variable[]) {\n    super.setReportData(data, results, variables);\n\n    this._title = data.title || \"Questions\";\n\n    let questionById = this.AssessmentResult.assessment.getQuestionsListById();\n    this._questionActions = {};\n    (data.tableActions || []).forEach(ta => {\n      let question = {scale: null};\n      if (questionById.has(ta.questionId)) {\n        question = questionById.get(ta.questionId);\n      }\n\n      this._questionActions[ta.questionId] = {\n        scale: question.scale\n        ,question: question\n        ,action: ta.action\n        ,label: data.tableActionLabel\n        ,data: ta.data\n      };\n    });\n\n    this._questionsByScale = {};\n    this.ScaleResults.forEach(sr => {\n      this._questionsByScale[sr.scale.id] = this.questionFinder.getQuestionsForScaleResult(this.AssessmentResult, sr);\n    })\n  }\n\n  getTitle() {\n    return this._title;\n  }\n\n  public getQuestionsForScaleResult(scaleResult:ScaleResult) {\n    //\n    if (this._questionsByScale[scaleResult.scale.id]) {\n      return this._questionsByScale[scaleResult.scale.id];\n    }\n    return [];\n  }\n\n  getActionLabel(question:Question) {\n    if (this._questionActions[question.id]) {\n      return this._questionActions[question.id].label;\n    }\n    return \"\";\n  }\n\n  hasAction(question:Question) {\n    return this._questionActions[question.id] !== undefined;\n  }\n\n  handleAction(question:Question) {\n    let questionAction = this._questionActions[question.id];\n    if (questionAction) {\n      this.questionActionService.handleAction(questionAction);\n    }\n    else {\n      console.error(\"handleAction called with question \" + question.id + \" and no action found for it \");\n    }\n  }\n\n}\n","<div class=\"card card-cascade d-print-block-visible\">\n  <div class=\"view gradient-card-header primary-gradient text-light\">\n    <h3 class='h3-responsive text-center'>{{getTitle()}}</h3>\n  </div>\n  <div class=\"card-body pl-1 pr-1 pl-sm-2 pr-sm-2\" *ngFor=\"let scaleResult of ScaleResults;index as index; last as last;\">\n    <div class=\"view gradient-card-header secondary-gradient text-light\">\n      <h3 class='h3-responsive text-center'>{{scaleResult.scale?.name}}</h3>\n    </div>\n    <div class='table table-striped col'>\n      <div class='table-header row secondary-color text-white mt-3'>\n        <div class=\"cell-data d-none d-sm-block col-7 col-md-8\">Question</div>\n        <div class=\"cell-data d-none d-sm-block col-2 col-md-2\">Answer</div>\n        <div class=\"cell-data d-none d-sm-block col-2 col-md-2 text-center\">Action</div>\n      </div>\n      <div *ngFor=\"let question of getQuestionsForScaleResult(scaleResult)\"\n        class=\"row\">\n        <div data-label=\"Question\" class=\"col-12 col-sm-7 col-md-8 cell-data prompt\">\n          <span class=\"d-block d-sm-none view primary-gradient text-light text-center h6-responsive p-2 mb-2\">Question</span>\n          <em class=\"text-center text-sm-left\">{{question.prompt}}</em>\n        </div>\n        <div data-label=\"Answer\" class=\"col-12 col-sm-2 col-md-2 cell-data answer p-2 mb-2 text-center text-sm-left\">\n          <span class=\"d-block d-sm-none view primary-gradient text-light text-center h6-responsive p-2 mb-2\">Answer</span>\n          {{question.answerDisplayText}}\n          <div class=\"d-inline-block\" *hasPermission=\"'SuperUser'\">({{question.computedScore}})</div>\n        </div>\n        <div data-label=\"Action\" class=\"cell-data col-12 col-sm-2 col-md-2 text-center mt-xs-0\">\n          <a *ngIf=\"hasAction(question)\" (click)=\"handleAction(question)\" class=\"btn btn-sm btn-secondary\">{{getActionLabel(question)}}</a></div>\n      </div>\n    </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../services/auth.service';\nimport { MatDialogRef } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-login-dialog',\n  templateUrl: './login-dialog.component.html',\n  styleUrls: ['./login-dialog.component.css']\n})\nexport class LoginDialogComponent implements OnInit,OnDestroy {\n\n  // private _userSubscription:ISubscription;\n\n  constructor(\n    private authService:AuthService\n    ,private router:Router\n    , private dialogRef: MatDialogRef<LoginDialogComponent>\n  ) {\n  }\n\n  public close() {\n    this.closeDialog();\n  }\n  public goToAdminLogin() {\n    this.authService.logout().then(() => {\n      this.router.navigate(['/loginAdmin']).then(() => {\n        this.closeDialog();\n      });\n    });\n  }\n  public goToClientLogin() {\n\n    this.authService.logout().then(() => {\n      this.router.navigate(['/login']).then(() => {\n        this.closeDialog();\n      });\n    });\n  }\n\n  private closeDialog() {\n    this.dialogRef.close();\n  }\n  ngOnInit() {\n\n    // if we are logging in... this dialog should not even be open... unless we allow the login to happen\n    // inside the dialog...\n    // this._userSubscription = this.authService.getLoginState().subscribe((loginState) => {\n    //   if (loginState.isLoggedIn) {\n    //     this.closeDialog();\n    //   }\n    // });\n  }\n\n  ngOnDestroy() {\n    // this._userSubscription.unsubscribe();\n  }\n\n}\n","<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col\">\n      <h4 class=\"h4-responsive modal-title text-center\">\n        Login Required\n        <i class=\"fa fa-times float-right\" (click)=\"close()\"></i>\n      </h4>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col\">\n      <hr />\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col text-center\">\n        <p>You've requested access to a secure resource or you have been logged out.</p>\n        <p>Please login again.</p>\n    </div>\n  </div>\n  <div class=\"row\">\n      <div class=\"col text-center\">\n          <input type=\"button\" class=\"btn btn-primary\" value=\"Client Login\" (click)=\"goToClientLogin()\" />\n          <input type=\"button\" class=\"btn btn-primary\" value=\"Therapist Login\" (click)=\"goToAdminLogin()\" />\n      </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col\">\n      <hr />\n    </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { ScaleRange } from \"./scale-range\";\ninterface SubScaleMap {\n\t[key: string] : Scale;\n}\nexport class Scale {\n\n\tprivate _id: string;\n\tprivate _name: string;\n\tprivate _instructions: string;\n\tprivate _answer_start_value: number;\n\tprivate _display_order: number;\n\tprivate _ranges: ScaleRange[];\n\tprivate _deleted: boolean;\n\tprivate _multiplier: number;\n\tprivate _descriptionClient: string;\n\tprivate _descriptionTherapist: string;\n\tprivate _negativeToPositiveRanges: boolean;\n\tprivate _subScales:SubScaleMap;\n\tprivate _type:\"Sum\"|\"CriteriaThreshold\"|\"Mean\";\n\tprivate _gradingData:{}|{requiredQuestions:number,requiredScoreThreshold:number};\n\tprivate _includeInReports:boolean;\n\tprivate _rollUpSubScaleQuestions:boolean;\n\n\tconstructor() {\n\t\tthis.id = null;\n\t\tthis.name = \"\";\n\t\tthis.instructions = \"\";\n\t\tthis.answer_start_value = 1;\n\t\tthis.display_order = 1;\n\t\tthis.ranges = [];\n\t\tthis.isDeleted = false;\n\t\tthis.multiplier = 1;\n\t\tthis.negativeToPositiveRanges = false;\n\t\tthis._subScales = {};\n\t\tthis._type = \"Sum\";\n\t\tthis._gradingData = {};\n\t\tthis._includeInReports = true;\n\t\tthis._rollUpSubScaleQuestions = false;\n\t}\n\n\tpublic get type() {\n\t\treturn this._type;\n\t}\n\n\tpublic set type(v:\"Sum\"|\"CriteriaThreshold\"|\"Mean\") {\n\t\tthis._type = v;\n\t}\n\n\tpublic get gradingData() {\n\t\treturn this._gradingData;\n\t}\n\n\tpublic set gradingData(v:any) {\n\t\tthis._gradingData = v;\n\t}\n\n\n\tpublic hasSubScales(): boolean {\n\t\treturn this.getSubScaleIds().length > 0;\n\t}\n\n\tpublic getSubScaleIds() {\n\t\treturn Object.keys(this._subScales);\n\t}\n\n\tpublic addSubScale(scale: Scale): void {\n\t\tif (!scale) {\n\t\t\tthrow new Error(\"scale object cannot be null\");\n\t\t}\n\t\tif (!scale.id) {\n\t\t\tthrow new Error(\"scale object must have an id\");\n\t\t}\n\n\t\tthis._subScales[scale.id] = scale;\n\t}\n\tpublic removeSubScale(scale: Scale): void {\n\t\tif (!scale) {\n\t\t\tthrow new Error(\"scale object cannot be null\");\n\t\t}\n\t\tif (!scale.id) {\n\t\t\tthrow new Error(\"scale object must have an id\");\n\t\t}\n\n\t\tif (!this._subScales[scale.id]) {\n\t\t\tthrow new Error(\"Subscale \" + scale.id + \" not found to be removed inside scale \" + this.id);\n\t\t}\n\t\tdelete this._subScales[scale.id];\n\t}\n\tpublic hasSubScale(scale: Scale): boolean {\n\t\tif (!scale) {\n\t\t\tthrow new Error(\"scale object cannot be null\");\n\t\t}\n\t\tif (!scale.id) {\n\t\t\tthrow new Error(\"scale object must have an id\");\n\t\t}\n\t\treturn this._subScales[scale.id] !== undefined && this._subScales[scale.id] !== null;\n\t}\n\n\tpublic getAvailableSubScales(potentialScales: Scale[]): Map<Scale, boolean> {\n\t\tlet availableScales = new Map<Scale, boolean>();\n\t\tpotentialScales = potentialScales.filter(s => s.id != this.id); // filter out ourselves.\n\t\t// first init everything as true\n\t\tpotentialScales.forEach(ps => {\n\t\t\tavailableScales.set(ps, true);\n\t\t});\n\t\tpotentialScales.forEach(ps => {\n\t\t\t// turn off all scales reachable by current sub scales.\n\t\t\tif (this._subScales[ps.id]) {\n\t\t\t\tavailableScales.set(ps, false);\n\t\t\t\t// now set all the sub to be false\n\t\t\t\t// TODO: stephen we still working on the reachability aspect of this but we'll punt on this for now.\n\t\t\t\t// this.getConnectedSubScales(ps, 0).forEach(s => availableScales.set(s, false));\n\t\t\t}\n\t\t\t// if we are a sub scale of the potential scale we need to skip it...\n\t\t\tif (ps.hasSubScale(this)) {\n\t\t\t\tavailableScales.set(ps, false);\n\t\t\t}\n\t\t});\n\t\treturn availableScales;\n\t}\n\n\tprivate getConnectedSubScales(scale:Scale, depth:number) : Scale[] {\n\t\tlet uniqueScales:SubScaleMap = {};\n\t\tif (!scale.SubScales) {\n\t\t\treturn [];\n\t\t}\n\t\tif (depth > 50) {\n\t\t\tthrow new Error(\"Exceeded scale depth limit on getConnectedSubScales()  scale depth should not exceed count of 50\");\n\t\t}\n\n\t\tfor(let id in scale.SubScales) {\n\t\t\tif (scale.SubScales.hasOwnProperty(id)) {\n\t\t\t\tthis.getConnectedSubScales(scale.SubScales[id], depth + 1).forEach(ss => uniqueScales[ss.id] = ss);\n\t\t\t}\n\t\t}\n\t\treturn Object.keys(uniqueScales).map(id => uniqueScales[id]);\n\t}\n\n\tpublic get SubScales() {\n\t\treturn this._subScales;\n\t}\n\n\tpublic get negativeToPositiveRanges(): boolean {\n\t\treturn this._negativeToPositiveRanges;\n\t}\n\n\tpublic set negativeToPositiveRanges(value: boolean) {\n\t\tthis._negativeToPositiveRanges = value;\n\t}\n\n\tpublic get multiplier(): number {\n\t\treturn this._multiplier;\n\t}\n\n\tpublic set multiplier(v: number) {\n\t\tthis._multiplier = v;\n\t}\n\n\tpublic get isDeleted(): boolean {\n\t\treturn this._deleted;\n\t}\n\n\n\tpublic set isDeleted(v: boolean) {\n\t\tthis._deleted = v;\n\t}\n\n\tpublic get id(): string {\n\t\treturn this._id;\n\t}\n\tpublic set id(id: string) {\n\t\tthis._id = id;\n\t}\n\n\tpublic get display_order(): number {\n\t\treturn this._display_order;\n\t}\n\tpublic set display_order(order: number) {\n\t\tthis._display_order = order;\n\t}\n\n\tpublic get name(): string {\n\t\treturn this._name;\n\t}\n\n\tpublic set name(v: string) {\n\t\tthis._name = v;\n\t}\n\n\tpublic get instructions(): string {\n\t\treturn this._instructions;\n\t}\n\n\tpublic set instructions(v: string) {\n\t\tthis._instructions = v;\n\t}\n\n\tpublic get answer_start_value(): number {\n\t\treturn this._answer_start_value;\n\t}\n\n\tpublic set answer_start_value(v: number) {\n\t\tthis._answer_start_value = v;\n\t}\n\n\n\tpublic get ranges(): ScaleRange[] {\n\t\treturn this._ranges;\n\t}\n\n\tpublic set ranges(v: ScaleRange[]) {\n\t\tthis._ranges = v;\n\t}\n\n\n\tpublic get descriptionClient(): string {\n\t\treturn this._descriptionClient;\n\t}\n\n\tpublic set descriptionClient(value: string) {\n\t\tthis._descriptionClient = value;\n\t}\n\n\n\tpublic get descriptionTherapist(): string {\n\t\treturn this._descriptionTherapist;\n\t}\n\n\tpublic set descriptionTherapist(value: string) {\n\t\tthis._descriptionTherapist = value;\n\t}\n\n\tpublic get includeInReports() {\n\t\treturn this._includeInReports;\n\t}\n\n\tpublic set includeInReports(value: boolean) {\n\t\tthis._includeInReports = value;\n\t}\n\n\tpublic get rollUpSubScales() {\n\t\treturn this._rollUpSubScaleQuestions;\n\t}\n\n\tpublic set rollUpSubScales(value: boolean) {\n\t\tthis._rollUpSubScaleQuestions = value;\n\t}\n\n\taddRange(range: ScaleRange) {\n\t\tthis.ranges.push(range);\n\t}\n\n\tremoveRange(range: ScaleRange) {\n\t\tlet index = this.ranges.indexOf(range);\n\t\tif (index >= 0) {\n\t\t\tthis.ranges.splice(index, 1);\n\t\t}\n\t}\n\n\tgetMaxRange() {\n\t\tif (!this.ranges.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet maxRange = this.ranges[0];\n\t\tfor (var index in this.ranges) {\n\t\t\tif (this.ranges.hasOwnProperty(index)) {\n\t\t\t\tif (this.ranges[index].rangeEnd > maxRange.rangeEnd) {\n\t\t\t\t\tmaxRange = this.ranges[index];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn maxRange;\n\t}\n\n\tgetRangeForScore(score: number) {\n\t\t// there should only be one here...\n\t\tif (this.ranges.length) {\n\t\t\tlet minRange = this.ranges[0];\n\t\t\tlet maxRange = this.ranges[this.ranges.length - 1];\n\t\t\t// if the score is lower than the smallest range, return the first one\n\t\t\tif (score < minRange.rangeStart) {\n\t\t\t\treturn minRange;\n\t\t\t}\n\t\t\t// if the score is greater than the largest range just return the highest range.\n\t\t\tif (score > maxRange.rangeEnd) {\n\t\t\t\treturn maxRange;\n\t\t\t}\n\t\t\tvar ranges = this.ranges.filter(r => r.rangeStart <= score && r.rangeEnd >= score);\n\t\t\tif (ranges.length) {\n\t\t\t\treturn ranges[0];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetIntervalPercentage(startInterval: number, endInterval: number) {\n\t\t// we make it inclusive and start our scores off one based if the rangeStart is a 0\n\t\tlet minRange = this.ranges[0].rangeStart;\n\t\tlet maxRange = this.ranges[this.ranges.length - 1].rangeEnd;\n\t\tif (startInterval > 0) {\n\t\t\t// we are inclusive so we are adding one to the endInterval\n\t\t\tendInterval += 1;\n\t\t}\n\n\t\tlet maxInterval = Math.max(maxRange - minRange, 1);\n\t\tlet interval = endInterval - startInterval;\n\t\tlet normalizedPercentage = Math.round((interval / maxInterval) * 100);\n\t\treturn normalizedPercentage;\n\t}\n\n\tgetMaxScore(): number {\n\t\tlet range = this.getMaxRange();\n\t\tif (range) {\n\t\t\treturn range.rangeEnd;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tgetPercentageForScore(score: number) {\n\t\tif (!this.ranges.length) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (score < 0) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlet minRange = this.ranges[0].rangeStart;\n\t\tlet maxRange = this.ranges[this.ranges.length - 1].rangeEnd;\n\t\treturn this.getIntervalPercentage(minRange, score);\n\t\t// // interval needs to at least be 1\n\t\t// let interval = Math.max(maxRange - minRange, 1);\n\t\t// let scoreBottom = score - minRange;\n\n\t\t// let normalizedScore = Math.round(scoreBottom * 100 / interval * 100) / 100;\n\t\t// return normalizedScore;\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { BillingCard } from \"./billing-card\";\nimport { Subscription } from \"./subscription\";\n\nexport class BillingDetails {\n    private _customerId:string;\n    private _email:string;\n    private _cards:BillingCard[];\n    private _subscriptions:Subscription[];\n\n    constructor() {\n        this._cards = [];\n        this._subscriptions = [];\n        // let sub = new BillingSubscription(\"Active\");\n        // sub.dateCanceled = new Date();\n        // sub.dateRenewal = new Date();\n        // sub.id = \"Sub-1\";\n        // sub.name = \"Discover and Change Membership\";\n        // sub.price = 2230;\n        // sub.quantity = 77;\n        // sub.unit = \"Users\";\n        // this._subscriptions = [sub];\n    }\n\n    public get subscriptions() : Subscription[] {\n        return this._subscriptions;\n    }\n\n    public set subscriptions(v:Subscription[]) {\n        this._subscriptions = v;\n    }\n\n\n    /**\n     * Getter email\n     * @return {string}\n     */\n\tpublic get email(): string {\n\t\treturn this._email;\n\t}\n\n    /**\n     * Setter email\n     * @param {string} value\n     */\n\tpublic set email(value: string) {\n\t\tthis._email = value;\n\t}\n\n\n    /**\n     * Getter customerId\n     * @return {string}\n     */\n\tpublic get customerId(): string {\n\t\treturn this._customerId;\n\t}\n\n    /**\n     * Setter customerId\n     * @param {string} value\n     */\n\tpublic set customerId(value: string) {\n\t\tthis._customerId = value;\n\t}\n\n    /**\n     * Getter cards\n     * @return {BillingCard[]}\n     */\n\tpublic get cards(): BillingCard[] {\n\t\treturn this._cards;\n\t}\n\n    /**\n     * Setter cards\n     * @param {BillingCard[]} value\n     */\n\tpublic set cards(value: BillingCard[]) {\n\t\tthis._cards = value;\n    }\n\n    public hasCards() {\n        return this.cards && this.cards.length > 0;\n    }\n\n    public hasSubscriptions() {\n        return this.subscriptions && this.subscriptions.length > 0;\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { AbstractControl, ValidatorFn } from \"@angular/forms\";\n\nexport function passwordStrengthValidator() : ValidatorFn {\n  return (control: AbstractControl) => {\n    let password = control.value;\n    let passwordPolicyMsg = \"Password must be 8 characters or more, contain at least one number(0-9), one uppercase letter(a-z), and one lowercase letter(A-Z)\";\n    let errors = [];\n    if (!password || password.length < 8) {\n      errors.push(passwordPolicyMsg);\n    }\n    else if (!password.match(/[0-9]+/)) {\n      errors.push(passwordPolicyMsg);\n    }\n    else if (!password.match(/[A-Z]+/)) {\n      errors.push(passwordPolicyMsg);\n    }\n    else if (!password.match(/[a-z]+/)) {\n      errors.push(passwordPolicyMsg);\n    }\n    if (errors.length) {\n      return {\"passwordStrength\": errors.join(\"\")};\n    }\n    return null;\n  };\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { AuthService } from '../services/auth.service';\nimport { AlertService } from 'app/shared/services/alert.service';\nimport { FhirService } from 'app/shared/services/fhir-service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n  private _token:string;\n  private _tokenInvalid:boolean;\n  private _serverError:boolean;\n  public openTermsAndConditions:boolean;\n  public termsAndConditionsAgreed:boolean;\n\n\n\n  constructor(\n    private authService:AuthService\n    ,private router:Router\n    ,private alertService: AlertService\n    ,private fhirService:FhirService\n  ) {\n    this.termsAndConditionsAgreed = false;\n  }\n\n  ngOnInit() {\n    // TODO: @adunsulag if we are already authorized we want to skip this step.\n    this.fhirService.authorizeClient('/loginFinalize');\n    // this.route.queryParams\n    //   .subscribe(params => this.returnUrl = params['return'] || '/admin/');\n  }\n\n  get token() {\n    return this._token;\n  }\n\n  set token(v:string) {\n    this._token = v;\n  }\n\n  handleSubmit(event:KeyboardEvent) {\n    if (event && event.charCode === 13) {\n      this.login();\n    }\n  }\n\n  login() {\n    if (!this._token || this._token.trim() === \"\") {\n      this.alertService.error(\"Enter in your client token to continue\");\n      return;\n    }\n    // if (!this.termsAndConditionsAgreed) {\n    //   this.alertService.error(\"You must agree to the terms and conditions before continuing.\");\n    //   return;\n    // }\n\n    // clear out any spaces\n    this.authService.authenticateClient(this._token.trim())\n    .then((clientId) => {\n        this.router.navigate([\"/assessments/dashboard\"]);\n    })\n    .catch((error) => {\n      console.error(error);\n      this.alertService.error(error.message);\n    });\n  }\n}\n","<p class=\"alert alert-info\">Loading Login Authorization Form</p>\n<!-- <div class=\"form-group\">\n  <label for=\"token\">Login Token</label>\n  <input class=\"form-control\" type=\"text\" id=\"token\" name=\"token\" [(ngModel)]=\"token\" (keypress)=\"handleSubmit($event)\" />\n</div>\n<div class=\"form-group\">\n  <input class=\"btn btn-primary\" type=\"submit\" value=\"Continue\" (click)=\"login()\" />\n</div>\n<div class=\"form-group\">\n  <p class=\"alert alert-info\">Provide the unique code that your therapist has given you to login.  Contact your therapist if you have not received a login token.</p>\n</div>\n<p class=\"small\">By clicking Continue, you agree to our <a target=\"_blank\" [routerLink]=\"['/terms-and-conditions']\">Terms of Service</a>, and <a target=\"_blank\" [routerLink]=\"['/privacy']\">Privacy Policy.</a></p> -->\n","import {Injectable,Inject} from \"@angular/core\";\n/**\n * Eventually will handle JWT authentication tokens, but for now it simply wraps around\n * a shared token.\n */\n@Injectable()\nexport class Authenticator {\n\n    constructor(\n        @Inject(\"AuthToken\") private _token:string\n    ) {}\n\n    public get AuthenticationToken() {\n        return this._token;\n    }\n\n    public set AuthenticationToken(v:string) {\n        this._token = v;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, EventEmitter, SimpleChanges, ViewChild, Input, Output, OnChanges, Inject } from '@angular/core';\nimport {PrintSettings} from \"../models/print-settings\";\nimport { PdfService } from \"../../shared/services/pdf.service\";\nimport { AlertService } from \"../../shared/services/alert.service\";\nimport { Assignment } from \"app/shared/models/Assignment\";\nimport { MetricsService } from 'app/shared/services/metrics.service';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n@Component({\n  selector: 'dac-print-dialog',\n  templateUrl: './print-dialog.component.html',\n  styleUrls: ['./print-dialog.component.scss']\n})\nexport class PrintDialogComponent implements OnInit {\n\n  public assignment:Assignment;\n  public hideNotesOption:boolean;\n  public printing:boolean;\n  private _hasPrinted:boolean;\n  private printSettings:PrintSettings;\n  private filePrintId:string;\n  private readonly METRICS_CATEGORY=\"PrintDialog\";\n\n  constructor(\n    private pdfService:PdfService\n    , private alertService:AlertService\n    , private metrics:MetricsService\n    // this feels like a leaky extraction.. not sure I like it.\n    , @Inject(MAT_DIALOG_DATA) private data: {assignment?:Assignment, hideNotesOption?:boolean}\n    , private dialogRef: MatDialogRef<PrintDialogComponent>\n    ) {\n    this.hideNotesOption = false;\n\n    if (this.data) {\n      if (this.data.assignment) {\n        this.assignment = this.data.assignment;\n      }\n      if (this.data.hideNotesOption === true) {\n        this.data.hideNotesOption = true;\n      }\n    }\n    this.printSettings = new PrintSettings();\n    this._hasPrinted = false;\n    this.hideNotesOption = false;\n   }\n\n  ngOnInit() {\n  }\n\n  public get printingComplete() {\n    return !this.printing && this._hasPrinted;\n  }\n\n  handlePrint() {\n    this._hasPrinted = false;\n    this.printing = true;\n    let url = window.location.href;\n    let metricMessage = \"Print called \" + (this.assignment ? \"with\" : \"without\") + \" assignment\";\n    if (this.printSettings.showTherapistNotes) {\n      url += \"?notes=1\";\n      metricMessage +=  \" and therapist notes\";\n      this.metrics.trackEvent(this.METRICS_CATEGORY, 'handlePrint', metricMessage);\n    }\n    // 2 minutes to time out for generating the report.\n    let alert = this.alertService.info(\"Generating PDF Report\", 120000);\n    this.pdfService.generate(url, this.assignment)\n    .then((fileId:string) => {\n      this.metrics.trackEvent(this.METRICS_CATEGORY, 'handlePrint', \"PDF report generated\");\n      this.filePrintId = fileId;\n      this.alertService.clearAlert(alert);\n      this.printing = false;\n      this._hasPrinted = true;\n      this.alertService.success(\"PDF report successfully generated\");\n    })\n    .catch((error) => {\n      this.metrics.trackEvent(this.METRICS_CATEGORY, 'handlePrint', \"PDF report failed to generate\");\n      this.printing = false;\n      console.error(error);\n      this.alertService.clearAlert(alert);\n      this.alertService.error(\"PDF failed to generate.  Check your internet connection and try again.  Contact customer support if you keep experiencing problems\");\n    });\n  }\n\n  get downloadFileUrl() {\n    if (!this.printingComplete) {\n      return \"\";\n    }\n    return this.pdfService.getPDFUrl(this.filePrintId);\n  }\n\n  updateTherapistNoteSettings(event:Event) {\n    let target = event.target as HTMLInputElement;\n    this.printSettings.showTherapistNotes = target.checked;\n  }\n\n  close() {\n    this.dialogRef.close();\n  }\n}\n","<div class=\"container\">\n  <div class=\"row\">\n    <div class=\"col\">\n      <h4 class=\"h4-responsive modal-title text-center\">\n        PDF Report Configuration\n        <i class=\"fa fa-times float-right\" (click)=\"close()\"></i>\n      </h4>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col\">\n      <hr />\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col text-center\" *ngIf=\"!hideNotesOption\">\n        <input id='printSettingsDialogIncludeTherapistNotes' (click)=\"updateTherapistNoteSettings($event)\" type=\"checkbox\" class=\"form-control\" />\n        <label for='printSettingsDialogIncludeTherapistNotes'>Include Therapist Notes?</label>\n    </div>\n  </div>\n  <div class=\"row\">\n      <div class=\"col text-center\">\n          <input *ngIf=\"!printing\" type=\"button\" class=\"btn btn-primary\" value=\"Generate Report\" (click)=\"handlePrint()\" />\n          <input *ngIf=\"printing\" type=\"button\" class=\"btn btn-secondary\" disabled value=\"Generating PDF...\" />\n          <a *ngIf=\"printingComplete\" class=\"btn btn-secondary\" [href]=\"downloadFileUrl\">Download PDF</a>\n      </div>\n  </div>\n  <div class=\"row\">\n      <h6>Important Notice</h6>\n      <p>Note the pdf printing can take a few seconds up to a few minutes depending on how large the report is and how many reports are currently being printed.</p>\n  </div>\n  <div class=\"row\">\n    <div class=\"col\">\n      <hr />\n    </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { CompanyService } from 'app/shared/services/company.service';\nimport { Company } from 'app/shared/models/company';\nimport { AuthService } from 'app/login/services/auth.service';\nimport { AlertService } from 'app/shared/services/alert.service';\n\n@Component({\n  selector: 'dac-account-owner-settings',\n  templateUrl: './account-owner-settings.component.html',\n  styleUrls: ['./account-owner-settings.component.scss']\n})\nexport class AccountOwnerSettingsComponent implements OnInit {\n\n  public isSaving:boolean;\n  public loaded:boolean;\n  private _company:Company;\n\n  constructor(private companyService:CompanyService, private authService:AuthService, private alertService:AlertService) { }\n\n  ngOnInit() {\n    this.loaded = false;\n    this.authService.getCurrentUser().then(user => {\n      this.companyService.getAccountOwnerCompany(user.companyID).then(c => {\n        this.loaded = true;\n        this._company = c;\n      })\n      .catch(e => {\n        this.alertService.error(\"Failed to get company settings.  Check your internet connection and try again\");\n        console.error(e);\n      });\n    }).catch(error => {\n      console.error(error);\n      this.alertService.error(\"Failed to retrieve account settings.  Check your internet connection and try again\");\n    });\n  }\n\n  public save() {\n    this.isSaving = true;\n    this.companyService.saveAccountOwnerCompany(this._company).then(result => {\n      this._company = result;\n      this.isSaving = false;\n      this.alertService.success(\"Company settings saved!\");\n    })\n    .catch(e => {\n      this.alertService.error(\"Failed to save company settings.  Check your internet connection and try again.\");\n      console.error(e);\n      this.isSaving = false;\n    });\n  }\n\n  public get Company() {\n    return this._company;\n  }\n\n}\n","<div class=\"col\">\n  <div class=\"col-md-10 col-lg-8 col-12 ml-auto mr-auto card card-cascade wider\">\n    <div class=\"view view-cascade gradient-card-header secondary-gradient pt-2 pb-2\">\n      <h4>Update Settings</h4>\n    </div>\n    <div class=\"card-body-cascade card-body\">\n      <p class=\"alert alert-danger\" *ngIf=\"!loaded\">Loading settings</p>\n      <div class=\"form-horizontal\" *ngIf=\"loaded\">\n        <div class=\"form-group\">\n          <input class=\"form-control\" id=\"sendAssessmentsCompleteNotifications\" type=\"checkbox\"\n            [(ngModel)]=\"Company.sendAssessmentsCompleteNotifications\" /> <label\n            for=\"sendAssessmentsCompleteNotifications\">Send Email Notifications When Client Completes All\n            Assignments</label>\n        </div>\n        <div class=\"form-group\">\n          <input class=\"form-control\" id=\"sendNotificationsToPrimaryContact\" type=\"checkbox\"\n            [(ngModel)]=\"Company.sendNotificationsToPrimaryContact\" /> <label\n            for=\"sendNotificationsToPrimaryContact\">Send all\n            Notifications to Primary Account Holder</label>\n        </div>\n        <div class=\"form-group\" *ngIf=\"Company.sendNotificationsToPrimaryContact\">\n          <input class=\"form-control\" id=\"sendNotificationsCopyToRegularUsers\" type=\"checkbox\"\n            [(ngModel)]=\"Company.sendNotificationsCopyToRegularUsers\" /> <label\n            for=\"sendNotificationsCopyToRegularUsers\">\n            Send notification copies to Non-Admin assigned users</label>\n        </div>\n        <div class=\"form-group\">\n          <input class=\"form-control\" id=\"disableShopAccess\" type=\"checkbox\"\n            [(ngModel)]=\"Company.disableShopRegisteredUsers\" /> <label for=\"disableShopAccess\">Disable shop access from\n            everyone except administrators</label>\n        </div>\n        <div class=\"form-group text-center\">\n          <div class=\"col-sm-12\">\n            <input [disabled]=\"isSaving\" class=\"btn btn-primary\" type=\"button\" value=\"Save\" (click)=\"save()\" />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {AssessmentGroup} from \"../../shared/models/assessment-group\";\n\nexport class AssessmentGroupDisplay extends AssessmentGroup {\n  Show:boolean;\n  ShowAdd:boolean;\n  constructor() {\n    super();\n    this.ShowAdd = false;\n    this.Show = false;\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {DacConfig} from '../../shared/services/dac-config.service';\nimport {NavBarItem} from '../../theme/models/nav-bar-item';\nimport {NavBarService} from '../../theme/services/nav-bar.service';\nimport {UniqueIdService} from '../../shared/services/unique-id.service';\nimport {FlaggedQuestionsListComponent} from '../report-items/flagged-questions-list/flagged-questions-list.component';\nimport {IReportItemComponent} from \"../models/i-report-item-component\";\nimport {HtmlContentItemComponent } from \"../report-items/html-content-item/html-content-item.component\";\nimport {ScaleResultsSectionsListComponent } from \"../report-items/scale-results-sections-list/scale-results-sections-list.component\";\nimport {TextItemComponent} from \"../text-item/text-item.component\";\nimport {ComputedScaleComponent} from \"../report-items/computed-scale/computed-scale.component\";\n\nimport {AssessmentResult} from \"../../shared/models/assessment-result\";\nimport {AssessmentService} from \"../../shared/services/assessment.service\";\nimport {ClientService} from \"../../shared/services/client.service\"\nimport {Variable} from \"../models/variable\";\nimport {ResultComputation} from \"../models/result-computation\";\nimport {AddoScaleResultsComponent} from \"../report-items/addo-scale-results/addo-scale-results.component\";\n\nimport {Assessment} from \"../../shared/models/assessment\";\nimport {ScaleResult} from \"../../shared/models/scale-result\";\nimport { AssessmentHydrator } from \"../../shared/services/assessment-hydrator.service\";\nimport { ReportService } from \"../services/report.service\";\n\nimport { Component, OnInit\n  , ViewChild, ViewContainerRef\n  , ComponentFactoryResolver\n  , ComponentRef,\n  OnDestroy,\n  ElementRef\n} from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ScaleResultsSummaryComponent } from \"app/reports/report-items/scale-results-summary/scale-results-summary.component\";\nimport { TherapistScaleResultsComponent } from \"app/reports/report-items/therapist-scale-results/therapist-scale-results.component\";\nimport { PclAssessmentResultsComponent } from 'app/reports/report-items/pcl-assessment-results/pcl-assessment-results.component';\nimport { Subscription } from 'rxjs';\nimport { AssessmentQuestionsListComponent } from 'app/reports/report-items/assessment-questions-list/assessment-questions-list.component';\n\n\nimport { QuestionActionListComponent } from '../report-items/question-action-list/question-action-list.component';\nimport { ClientScaleResultsComponent } from '../report-items/client-scale-results/client-scale-results.component';\nimport { SsoCrossDomainMessenger } from 'app/shared/services/sso-cross-domain-messenger';\nimport { FlaggedQuestionsListSimpleComponent } from '../report-items/flagged-questions-list-simple/flagged-questions-list-simple.component';\nimport { Assignment } from 'app/shared/models/Assignment';\nimport { ManagedClient } from 'app/shared/models/managed-client';\nimport { ModalService } from 'app/shared/services/modal.service';\nimport { PrintDialogComponent } from '../print-dialog/print-dialog.component';\nimport { IReport } from '../models/i-report';\nimport { QuestionnaireService } from 'app/shared/services/questionnaire.service';\n\n\n@Component({\n  selector: 'dac-report-viewer',\n  templateUrl: './report-viewer.component.html',\n  host: {'class': 'row d-print-block-visible'}\n})\nexport class ReportViewerComponent implements OnInit, OnDestroy {\n\n  @ViewChild(\"container\", { read: ViewContainerRef }) container;\n  private _reportData:any;\n  public menuItems:{id:string, name:string, hasIcon:boolean, iconClasses:string[]}[];\n  private componentItems:ComponentRef<IReportItemComponent>[];\n  private componentItemsById:Map<string, ComponentRef<IReportItemComponent>>;\n  public hasLoadedResults:boolean;\n  private _reportItemClassNames = [\"report-item-component\"];\n  public assignment:Assignment;\n\n  /**\n   * Whether to show therapist note information in the report.  Otherwise it's hidden so it can be\n   * given to a client or print off a shorter report.\n   */\n  public displayTherapistNotes:boolean;\n\n  public reportId:string;\n\n  public report:IReport;\n\n  public assessmentResults:AssessmentResult[];\n\n  /**\n   * Whether to show the print dialog or not.\n   */\n  public showPrintDialog:boolean;\n\n  private routeParamsSubscription:Subscription;\n  private navBarSubscription:Subscription;\n  private queryParamsSubscription:Subscription;\n\n constructor(private resolver: ComponentFactoryResolver\n ,private assessmentService:AssessmentService\n ,private clientService:ClientService\n ,private hydrator:AssessmentHydrator\n ,private route:ActivatedRoute\n ,private reportService:ReportService\n ,private uniqueIdService:UniqueIdService\n ,private navBarService:NavBarService\n ,private dacConfig:DacConfig\n ,private crossDomainMessenger:SsoCrossDomainMessenger\n ,private elementRef:ElementRef\n ,private modalService:ModalService\n ,private questionnaireResponseService:QuestionnaireService) {\n   this.menuItems = [];\n   this.componentItems = [];\n   this.componentItemsById = new Map<string, ComponentRef<IReportItemComponent>>();\n   this.hasLoadedResults = false;\n   this.displayTherapistNotes = false;\n   this.reportId = \"\";\n }\n\n  ngOnInit() {\n    this.queryParamsSubscription = this.route.queryParams.subscribe(params => {\n      if (params['notes'] && params['notes'] == '1') {\n        this.displayTherapistNotes = true;\n      }\n      else {\n        this.displayTherapistNotes = false;\n      }\n    });\n    this.routeParamsSubscription = this.route.params.subscribe(params => {\n      let clientId = params['id'];\n      if (!clientId || typeof clientId !== \"string\") {\n        // this.router.navigate(['../']);\n        return;\n      }\n      this.navBarService.setupReportSidebar(clientId);\n\n      let reportId = params['reportId'];\n      if (!reportId || typeof reportId !== \"string\") {\n        console.error(\"Missing reportid, can't continue\");\n        return;\n      }\n\n      let assignmentId = params['assignmentId'];\n      if (!assignmentId || typeof reportId !== \"string\") {\n        console.error(\"Missing assignmentId, can't continue\");\n        return;\n      }\n      this.loadReport(clientId, reportId, assignmentId);\n\n    });\n  }\n\n  showCommandButtons() {\n    return !this.dacConfig.seamlessMode;\n  }\n\n  getClasses() {\n    let obj = {'display-therapist-notes': this.displayTherapistNotes};\n    obj[this.reportId] = true;\n    return obj;\n  }\n\n  ngOnDestroy() {\n    if (this.queryParamsSubscription) {\n      this.queryParamsSubscription.unsubscribe();\n    }\n    if (this.routeParamsSubscription) {\n      this.routeParamsSubscription.unsubscribe();\n    }\n    this.navBarService.clearReportSidebar();\n  }\n\n  private loadReport(clientId:string, reportId:string, assignmentId:number) {\n\n    // get the client, get the reportData\n    Promise.all([this.clientService.getClient(clientId), this.reportService.get(reportId)])\n    .then((results) => {\n      let client:ManagedClient = results[0];\n      this.report = results[1];\n      this.reportId = reportId;\n       if (!client || !client.assignments || !client.assignments.length) {\n        throw new Error(\"No assessments to generate a report\");\n      }\n      let assignment = client.getAssignment(assignmentId);\n      if (!assignment) {\n        throw new Error(\"Assignment could not be found with this id\");\n      }\n      else {\n        this.assignment = assignment;\n      }\n\n      if (!this.report) {\n        throw new Error(\"No report data to display\");\n      }\n      this._reportData = this.report;\n\n      // TODO: stephen this is a bug as it loads ALL of the client's assessments they've taken.\n      let assessmentResultIds = assignment.getAssessmentResultIds();\n      let qrResultItems = assignment.getQuestionnaireResponseItems();\n      let arResults = this.assessmentService.getAssessmentResultList(clientId, assessmentResultIds);\n      let qrResults = this.questionnaireResponseService.getQuestionnaireResponsesAsAssessmentResults(qrResultItems);\n\n      // let completedResultIds = assignment.getResultIds();\n      // let resultPromises:Promise<AssessmentResult>[] = completedResultIds.map(r => this.assessmentService.getAssessmentResult(clientId, r));\n      // return Promise.all(resultPromises);\n      return Promise.all([arResults, qrResults]).then(resultPromises => {\n        return resultPromises[0].concat(resultPromises[1]);\n      });\n    })\n    .then((results:AssessmentResult[]) => {\n      this.assessmentResults = results;\n      this.hasLoadedResults = true;\n    });\n  }\n\n  get ReportName() {\n    if (this._reportData) {\n      return this._reportData.name;\n    }\n    return \"\";\n  }\n\n  public goBack() {\n    // TODO: stephen we are dependent on a global here.. should inject angular dependency.\n    window.history.back();\n  }\n\n  public browserPrint() {\n    if (window && window.print) {\n      window.print();\n    }\n  }\n\n  public print() {\n    this.modalService.openDialog(PrintDialogComponent, {assignment:this.assignment});\n    // this.showPrintDialog = true;\n  }\n\n  // public closePrintDialog() {\n  //   // reset it once we've closed the dialog.\n  //   this.showPrintDialog = false;\n  //   // this.displayTherapistNotes = false;\n  // }\n\n}\n","<div class=\"col itemsContainer d-print-block-visible\" [ngClass]=\"getClasses()\">\n    <div class=\"row report-controls\">\n        <div class=\"col-2\" *ngIf=\"showCommandButtons()\">\n            <input class=\"btn btn-primary\" type=\"button\" (click)=\"goBack()\" value=\"Back\" />\n        </div>\n        <div [ngClass]=\"{'col-8': showCommandButtons(), 'col-12 text-center': !showCommandButtons()}\">\n            <h1 class=\"h1-responsive report-name text-center\">{{ReportName}}</h1>\n        </div>\n        <div class=\"col-2 ml-auto\" *ngIf=\"showCommandButtons()\">\n            <input type=\"button\" class=\"btn btn-secondary d-print-none\" value=\"Print\" (click)=\"browserPrint()\" />\n            <!-- <input class=\"btn btn-secondary\" type=\"button\" (click)=\"print()\" value=\"Download PDF\" /> -->\n        </div>\n    </div>\n    <div class=\"row\" *ngIf=\"!hasLoadedResults\">\n        <div class=\"col\" >\n            <p class=\"alert alert-warning\">\n                <app-spin-icon></app-spin-icon> Loading Report data...</p>\n        </div>\n    </div>\n    <div class=\"row d-print-block-visible\" *ngIf=\"hasLoadedResults\">\n        <div class=\"col d-print-block-visible\">\n            <dac-report-viewer-container *ngIf=\"report\" [report]=\"report\" [results]=\"assessmentResults\"></dac-report-viewer-container>\n        </div>\n    </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { FlaggedQuestionsListComponent } from '../flagged-questions-list/flagged-questions-list.component';\nimport { Question } from 'app/shared/models/question';\n\n@Component({\n  selector: 'dac-flagged-questions-list-simple',\n  templateUrl: './flagged-questions-list-simple.component.html',\n  styleUrls: ['./flagged-questions-list-simple.component.scss']\n})\nexport class FlaggedQuestionsListSimpleComponent extends FlaggedQuestionsListComponent implements OnInit {\n\n  private flaggedQuestions:Question[];\n\n  constructor() {\n    super();\n    this.flaggedQuestions = [];\n  }\n\n\n  ngOnInit() {\n    this.flaggedQuestions = this.Assessments.map(a => a.getFlaggedQuestions()).reduce((prev, curr) => curr.concat(prev), []);\n  }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n\n  get FlaggedQuestions() {\n\n    return this.flaggedQuestions;\n  }\n\n}\n","<div class=\"card card-wider card-cascade\">\n  <div class=\"view gradient-card-header primary-gradient text-light\">\n      <h3 class='h3-responsive text-center'>{{title}}</h3>\n  </div>\n  <div class=\"card-body\">\n      <div *ngIf=\"description\" [innerHTML]=\"description\"></div>\n      <p *ngIf=\"!hasFocusQuestions\" class=\"h4 text-center\">There were no flagged items of concern to address.</p>\n      <app-scale-questions-list *ngIf=\"hasFocusQuestions\" [Questions]=\"FlaggedQuestions\" [flagPrompts]=\"true\" [displayScale]=\"true\"></app-scale-questions-list>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { DacConfig } from \"./dac-config.service\";\nimport { Injectable } from \"@angular/core\";\n\n@Injectable()\nexport class SsoCrossDomainMessenger {\n\n    constructor(private dacConfig:DacConfig) {\n    }\n\n    sendMessage(type, sendData:any) {\n        let data = Object.assign({}, sendData);\n        data.type = type;\n        // TODO: stephen do we want to whitelist the events here??\n        if (this.dacConfig.seamlessMode && this.dacConfig.ssoIssuer) {\n            // we are embedded in an iframe so let's post to our parent window\n            if (window && window.document) {\n              // TODO: stephen need to figure out the best way to post this message.\n              window.parent.postMessage(data, this.dacConfig.ssoIssuer);\n            }\n        }\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, EventEmitter, Output } from '@angular/core';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\n\n@Component({\n  selector: 'dac-pricing-table',\n  templateUrl: './pricing-table.component.html',\n  styleUrls: ['./pricing-table.component.scss']\n})\nexport class PricingTableComponent implements OnInit {\n\n  @Output() selected = new EventEmitter<string>();\n  public freeTrialPeriod;\n\n  constructor(dacConfig:DacConfig) {\n    this.freeTrialPeriod = dacConfig.freeTrialPeriod;\n  }\n\n  ngOnInit() {\n  }\n\n  selectPlan(type:string) {\n    this.selected.next(type);\n  }\n\n\n}\n","<!-- Section: Pricing table -->\n<section id=\"one\" class=\"pricing-table d-flex align-items-center text-left\">\n\n  <div class=\"container\">\n    <div class=\"row\">\n      <h2 class=\"text-light text-center mb-3 col\">Pricing</h2>\n    </div>\n\n    <div class=\"row justify-content-center\">\n      <!-- Standard Tier -->\n      <div class=\"col-lg-4\">\n        <div class=\"card mb-5 mb-lg-0\">\n          <div class=\"card-body\">\n            <h5 class=\"card-title grey-text text-uppercase text-center\">Standard</h5>\n            <h6 class=\"card-price text-center\">$30<span class=\"term\">/user/month</span></h6>\n            <hr class=\"my-4\">\n            <ul class=\"fa-ul\">\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>1-50 Users</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Unlimited clients</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Unlimited assessments and assessment batteries</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Unlimited homework exercises and articles</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Assignment completion notifications</li>\n              <li class=\"grey-text\"><span class=\"fa-li\"><i class=\"fa fa-times\"></i></span>Whitelabel Domain\n              </li>\n              <li class=\"grey-text\"><span class=\"fa-li\"><i class=\"fa fa-times\"></i></span>Whitelabel Emails\n              </li>\n              <li class=\"grey-text\"><span class=\"fa-li\"><i class=\"fa fa-times\"></i></span>Whitelabel Reports\n              </li>\n              <li class=\"grey-text\"><span class=\"fa-li\"><i class=\"fa fa-times\"></i></span>Embed assessments on external\n                site</li>\n            </ul>\n            <a (click)=\"selectPlan('Therapist')\" class=\"btn btn-block btn-primary z-depth-0 btn-rounded my-2\">Signup for\n              {{freeTrialPeriod}} day free trial</a>\n          </div>\n        </div>\n      </div>\n      <!-- Advanced Tier -->\n      <div class=\"col-lg-4\">\n        <div class=\"card mb-5 mb-lg-0\">\n          <div class=\"card-body\">\n            <h5 class=\"card-title grey-text text-uppercase text-center\">Custom</h5>\n            <h6 class=\"card-price text-center\"><span class=\"term\">By Quote</span></h6>\n            <hr class=\"my-4\">\n            <ul class=\"fa-ul\">\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span><strong>50+ Users</strong></li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Unlimited clients</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Unlimited assessments and assessment batteries</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Unlimited homework exercises and articles</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Assignment completion notifications</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Whitelabel Domain</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Whitelabel Emails</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Whitelabel Reports</li>\n              <li><span class=\"fa-li\"><i class=\"fa fa-check\"></i></span>Embed assessments on external site</li>\n            </ul>\n            <a [routerLink]=\"['/contact']\" class=\"btn btn-block btn-primary z-depth-0 btn-rounded my-2\">Contact Us</a>\n          </div>\n        </div>\n      </div>\n    </div>\n\n  </div>\n\n</section>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {ListQuestion} from '../models/list-question';\nimport { Injectable } from '@angular/core';\nimport { AssessmentHydrator } from \"./assessment-hydrator.service\";\nimport { AssessmentResult } from \"../models/assessment-result\";\nimport { ScaleResult } from \"../models/scale-result\";\nimport { QuestionSet } from \"../models/question-set\";\nimport { Question } from \"../models/question\";\nimport { Assessment } from 'app/shared/models/assessment';\nimport { QuestionSetType } from 'app/shared/models/question-set-type';\n@Injectable()\nexport class AssessmentResultHydrator {\n\n\tprivate _assessmentHydrator:AssessmentHydrator;\n\n\tconstructor(assessmentHydrator:AssessmentHydrator) {\n\t\tthis._assessmentHydrator = assessmentHydrator;\n\t}\n\n\tpublic hydrate(data: any) : AssessmentResult {\n\t\tlet assessmentResult = new AssessmentResult();\n\t\tlet answerMap = {};\n\t\tassessmentResult.id = data.id || data._id || \"\";\n\n\t\tlet assessment = data._assessment || data.assessment;\n\t\tlet answers = data._answers || [];\n\t\tlet scaleResults = data._scaleResults || data.scaleResults || [];\n\t\tlet flaggedQuestions = data._flaggedQuestions || data.flaggedQuestions || [];\n    let dateCompleted = data._dateCompleted || data.dateCompleted || new Date().toISOString();\n\n\t\tif (assessment) {\n\t\t\tassessmentResult.assessment = this._assessmentHydrator.hydrate(assessment);\n\t\t\tlet questionMap = this.createQuestionMap(assessmentResult.assessment);\n\t\t\tlet answerMap = this.createAnswerMap(answers);\n\t\t\tthis.fillInAnswers(assessmentResult, answerMap);\n\t\t\tassessmentResult.flaggedQuestions = this.getFlaggedQuestions(flaggedQuestions, questionMap);\n\n\t\t\tassessmentResult.scaleResults = scaleResults.map(sr => this.hydrateScaleResult(assessmentResult.assessment, sr));\n\t\t}\n    try {\n      assessmentResult.dateCompleted = new Date(dateCompleted);\n    }\n    catch (error) {\n      console.error(\"Failed to get valid date completed string for result \", assessmentResult.id);\n      console.error(error);\n    }\n\n\t\treturn assessmentResult;\n\t}\n\n\tprivate getFlaggedQuestions(flaggedQuestions:string[], questionMap:Map<string, Question>) {\n\t\treturn flaggedQuestions.map(id => {\n\t\t\tlet fq = questionMap.get(id);\n\t\t\tfq.isFlaggedForReview = true; // make sure we mark the question as flagged.\n\t\t\tif (!fq) {\n\t\t\t\tconsole.error(\"Flagged Question not found with id \", id);\n\t\t\t}\n\t\t\treturn fq;\n\t\t})\n\t\t.filter(fq => fq != null);\n\t}\n\n\tprivate createQuestionMap(assessment:Assessment) : Map<string, Question> {\n\t\tlet map = new Map<string, Question>();\n\t\tassessment.question_sets\n\t\t\t.map(qs => qs.questions)\n\t\t\t.reduce((prev, curr) => curr.concat(prev), [])\n\t\t\t.forEach(q => map.set(q.id, q));\n\t\treturn map;\n\t}\n\n\tprivate fillInAnswers(assessmentResult:AssessmentResult, answerMap:any) {\n\t\t// populate the answers for the questions from the result set.\n\t\tassessmentResult.assessment\n\t\t\t.question_sets.forEach(qs => qs.questions.forEach(q => this.fillInQuestion(q, qs, answerMap)));\n\t}\n\tprivate fillInQuestion(q:Question, questionSet:QuestionSet, answerMap:any) {\n\t\tif (!answerMap[q.id]) {\n\t\t\treturn;\n\t\t}\n\t\t// if the question has it's own custom labels we use those instead.\n\t\tlet score = answerMap[q.id].hasOwnProperty('score') ? answerMap[q.id].score : null;\n\t\tq.setComputedScore(score);\n\t\tif (questionSet.display_type == QuestionSetType.QUESTION_LIST\n\t\t\t&& q instanceof ListQuestion) {\n\t\t\tq.setSavedAnswer(answerMap[q.id].answer, q.CustomLabels);\n\t\t}\n\t\telse {\n\t\t\tq.setSavedAnswer(answerMap[q.id].answer, questionSet.labels);\n\t\t}\n\t}\n\n\tprivate createAnswerMap(answers:any[]) {\n\t\tlet answerMap = {};\n\t\tanswers.forEach(a => answerMap[a._question_id] = {answer: a._answer, score: a._score});\n\t\treturn answerMap;\n\t}\n\n\tprivate hydrateScaleResult(assessment:any, srData: any) : ScaleResult {\n\t\tlet scaleResult = new ScaleResult();\n\t\tlet score = srData.score || srData._score;\n\t\tif (score) {\n\t\t\tscaleResult.score = +score;\n\t\t}\n\n\t\tlet scaleData = srData._scale || srData.scale;\n\t\tif (scaleData) {\n\t\t\tscaleResult.scale = this._assessmentHydrator.hydrateScale(scaleData);\n\t\t} else if (srData._scaleId) {\n\t\t\tlet scale = assessment.scales.find(s => s.id == srData._scaleId);\n\t\t\tif (!scale && assessment.scales.length) {\n\t\t\t\tscale = assessment.scales[0];\n\t\t\t}\n\t\t\tscaleResult.scale = scale;\n\t\t}\n\n\t\tlet rangeData = srData._range || srData.range;\n\t\tif (rangeData) {\n\t\t\tscaleResult.range = this._assessmentHydrator.hydrateScaleRange(rangeData);\n\t\t}\n\t\telse if (srData._rangeId && scaleResult.scale) {\n\t\t\tlet range = scaleResult.scale.ranges.find(r => r.id == srData._rangeId);\n\t\t\t// if for some reason we can't find it... choose the first one.\n\t\t\tif (!range && scaleResult.scale.ranges.length) {\n\t\t\t\trange = scaleResult.scale.ranges[0];\n\t\t\t}\n\t\t\tscaleResult.range = range;\n\t\t}\n\t\telse if (scaleResult.scale && scaleResult.scale.ranges\n\t\t\t&& scaleResult.scale.ranges.length) {\n\n\t\t\tscaleResult.range = scaleResult.scale.ranges[0];\n\t\t}\n\n\t\treturn scaleResult;\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\n\n\n\nimport {DacConfig} from \"../../shared/services/dac-config.service\";\nimport { HTTPService } from '../../shared/services/http.service';\n\nimport {IReport} from \"../models/i-report\";\nimport { Assignment } from 'app/shared/models/Assignment';\nimport { AssignedAssessment } from 'app/shared/models/AssignedAssessment';\nimport { AssignedAssessmentGroup } from 'app/shared/models/AssignedAssessmentGroup';\nimport { AssignedQuestionnaire } from 'app/shared/models/AssignedQuestionnaire';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ReportService {\n\n  private reports:any[];\n  private allReportsIncludingHidden:boolean;\n\n\n  constructor(private dacConfig:DacConfig, private http:HTTPService) {\n    this.reports = null;\n  }\n\n  private getReportObjects(showAllReports:boolean = false) : Promise<IReport[]> {\n    if (this.reports && this.allReportsIncludingHidden == showAllReports) {\n\n      return Promise.resolve(this.reports);\n    }\n\n    return this.http.get<IReport[]>(\"assessment-reports\", {showAllReports:showAllReports})\n      .then((reports) => {\n        this.reports = reports;\n        this.allReportsIncludingHidden = showAllReports;\n        return this.reports;\n      })\n      .catch((error) => {\n        console.error(error);\n        return [];\n      });\n  }\n  list(showAllReports:boolean = false) : Promise<any[]> {\n    return this.getReportObjects(showAllReports);\n  }\n\n  get(reportId:string) : Promise<any> {\n    return this.http.get<IReport>(\"assessment-reports/\" + reportId)\n      .then((report) => {\n        return report;\n      })\n      .catch(error => {\n        console.error(error);\n        throw Error(\"Could not find report with id \" + reportId);\n      });\n  }\n\n  create(item:IReport) {\n    return this.http.compressedPost<IReport>(\"assessment-reports\", item)\n    .then((result) => {\n      this.reports = null; // invalidate the cache\n      return result;\n    });\n  }\n\n  save(item:IReport) {\n    return this.http.compressedPost<IReport>(\"assessment-reports/\" + item.id, item)\n    .then((result) => {\n      this.reports = null; // invalidate the cache\n      return item;\n    });\n  }\n\n\n  getReportRequirements() : Promise<{id:string, name: string, requirements: string[]}[]> {\n    return this.getReportObjects()\n      .then(reports => reports.map((r) => {\n        let linkedAssessments = r.linkedAssessments || [];\n        return {id: r.id, name: r.name, requirements: linkedAssessments};\n      }));\n  }\n\n  getReportsForAssignment(assignment:Assignment) : Promise<{id:string, name:string, requirements:string[]}[]>{\n    if (!assignment) {\n      return Promise.resolve([]);\n    }\n    return this.getReportObjects().then(reports => {\n      let assignmentReports = [];\n      if (assignment.Type == \"Assessment\") {\n        let assessmentAssignment = assignment.Items[0] as AssignedAssessment;\n        assignmentReports = reports.filter(r => r.linkedAssessments && r.linkedAssessments.length == 1 && r.linkedAssessments[0] == assessmentAssignment.Uid);\n      }\n      else if (assignment.Type == \"AssessmentGroup\") {\n        let group = assignment as AssignedAssessmentGroup;\n        assignmentReports = reports.filter(r => r.linkedGroup && r.linkedGroup.id == group.AssessmentGroupId);\n      }\n      else if (assignment.Type == 'LibraryAsset') {\n        assignmentReports = []; // no reports for now.\n      } else if (assignment.Type == 'Questionnaire' || assignment.Type == \"ExternalQuestionnaire\" || assignment.Type == \"TemplateProfile\") {\n        let questionnaireAssignment = assignment.Items[0] as AssignedQuestionnaire;\n        assignmentReports = reports.filter(r => r.linkedQuestionnaires && r.linkedQuestionnaires.length == 1 && r.linkedQuestionnaires[0] == questionnaireAssignment.QuestionnaireId);\n      }\n      else {\n        throw new Error(\"Unsupported assignment type\");\n      }\n      return assignmentReports;\n    });\n  }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-admin-login-page',\n  templateUrl: './admin-login-page.component.html',\n  styleUrls: ['./admin-login-page.component.css']\n})\nexport class AdminLoginPageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<div class=\"container-fluid mb-3\">\n  <div class=\"row justify-content-center\">\n      <div class=\"col-12 col-md-8 col-lg-4\">\n        <dac-card [icon]=\"'lock'\" [title]=\"'Login'\" class=\"mt-4\">\n          <app-admin-login></app-admin-login>\n        </dac-card>\n      </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport { Question } from 'app/shared/models/question';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\nimport { SsoCrossDomainMessenger } from 'app/shared/services/sso-cross-domain-messenger';\n\n@Injectable()\nexport class QuestionActionService {\n\n  constructor(private dacConfig:DacConfig, private crossDomainMessenger:SsoCrossDomainMessenger) { }\n\n  handleAction(action:{action:string, question:Question, data:any}) {\n    if (action.action == 'redirect' && action.data && action.data.url) {\n      this.crossDomainMessenger.sendMessage('dac.redirect', {url: action.data.url});\n    }\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class ChartColor {\n    constructor(public name:string, public color:string) {}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { QuestionSetLabel } from \"./question-set-label\";\nimport { QuestionType } from \"./question-type\";\nimport { ListQuestion } from \"app/shared/models/list-question\";\n\nexport class ChecklistQuestion extends ListQuestion {\n\n    private _answers:{};\n\n    constructor() {\n        super();\n        this._answers = {};\n        this.type = QuestionType.Checklist;\n    }\n\n    public addAnswer(label:QuestionSetLabel) {\n        this._answers[label.id] = label;\n    }\n\n    public removeAnswer(label:QuestionSetLabel) {\n        if (this._answers.hasOwnProperty(label.id)) {\n            delete this._answers[label.id];\n        }\n    }\n\n    public get answerDisplayText() {\n        let description = this.getAnswerLabels()\n        .reduce((prev, curr:QuestionSetLabel) => prev + curr.label + \" \", \"\");\n\n        return description;\n    }\n\n    public hasAnswer(label:QuestionSetLabel) {\n        return this._answers[label.id];\n    }\n\n    public get isFilledOut() : boolean {\n        // we let nothing be an option as well.\n        // TODO: stephen we may at some point require at least one option to be checked...\n\t\treturn true;\n\t}\n\n    public get answerForSave() {\n        return Object.assign({}, this._answers); // just copy them over onto a new object\n    }\n\n    public setSavedAnswer(answer:any, labels:QuestionSetLabel[]) {\n        Object.keys(answer).forEach(key => {\n            let label = labels.find(l => l.id == key);\n            if (label) {\n                this.addAnswer(label);\n            }\n        })\n    }\n\n    private getAnswerLabels() {\n        return Object.keys(this._answers)\n        .filter(a => this._answers[a].label)\n        .map( a => this._answers[a]);\n    }\n}","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class Item {\n    private _id:number;\n    private _price:number;\n    private _name:string;\n    private _quantity:number;\n    private _assessment_uid:string;\n    private _subItems?:Item[];\n\n    constructor() {\n        this.price = 0;\n        this.name = \"\";\n        this.quantity = 0;\n        this.subItems = [];\n    }\n\n    get id() {\n        return this._id;\n    }\n    set id(v:number) {\n        this._id = v;\n    }\n\n    get totalPrice() {\n        let totalPrice = +(this.price * this.quantity).toFixed(2);\n        return totalPrice;\n    }\n\n    get price() {\n        return this._price;\n    }\n    set price(v:number) {\n        if (v < 0) {\n            throw new Error(\"Price cannot be set to less than 0\");\n        }\n        this._price = v;\n    }\n\n    get name() {\n        return this._name;\n    }\n    set name(v:string) {\n        this._name = v;\n    }\n\n    get quantity() {\n        return this._quantity;\n    }\n\n    set quantity(v:number) {\n        let vChecked = +v;\n        if (isNaN(v)) {\n            throw new Error(\"Quantity must be a valid number\");\n        }\n\n        if (v < 0) {\n            throw new Error(\"Quantity cannot be set to less than 0\");\n        }\n        this._quantity = vChecked;\n    }\n\n    get subItems() {\n        return this._subItems;\n    }\n\n    set subItems(v:Item[]) {\n        if (v == null) {\n            throw new Error(\"subItems cannot be null\");\n        }\n        this._subItems = v;\n    }\n\n\n\tpublic get assessment_uid(): string {\n\t\treturn this._assessment_uid;\n\t}\n\n\tpublic set assessment_uid(value: string) {\n\t\tthis._assessment_uid = value;\n\t}\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {HTTPService} from './http.service';\nimport {Injectable} from \"@angular/core\";\nimport { Assignment } from '../models/Assignment';\n\n@Injectable()\nexport class PdfService {\n\n    constructor(private http:HTTPService) {\n\n    }\n\n\n    public async getPDFUrl(filePrintId:string) {\n        let addToken = true;\n        return await this.http.generateUrl(\"/pdf/download/\" + filePrintId, addToken);\n    }\n\n    public generate(url:string, assignment?:Assignment) {\n        let window = document.defaultView || null;\n        if (!window) {\n            return Promise.reject(\"Window missing from document.  Cannot proceed\");\n        }\n\n        let data:any = {\n            pageToGenerate:url\n        };\n        // TODO: stephen our single assessment result viewer is not being connected with any reports\n        // that seems like a problem to me...\n        if (assignment) {\n            data.assignmentId = assignment.Id\n            data.type = assignment.Type\n        };\n        return this.http.post<{fileId:string}>(\"/pdf/\", data).then((response) => {\n            if (response.fileId) {\n                return response.fileId;\n            }\n            else {\n                throw new Error(\"Failed to receive file print id\");\n            }\n        });\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Assignment } from \"./Assignment\";\nimport { AssignmentItem } from \"./AssignmentItem\";\n\nexport class AssignedAssessment extends AssignmentItem\n{\n    private assessmentId:number;\n    private assessmentUuid:string;\n    private uid:string;\n\n    public constructor() {\n        super();\n        this.uid = \"\";\n        this.Type = \"Assessment\";\n    }\n\n    public get AssessmentUuid() : string {\n      return this.assessmentUuid;\n    }\n\n    public set AssessmentUuid(v : string) {\n      this.assessmentUuid = v;\n    }\n\n    public get AssessmentId() : number {\n        return this.assessmentId;\n    }\n\n    public set AssessmentId(v:number) {\n        this.assessmentId = v;\n    }\n\n    public get Uid() : string {\n        return this.uid;\n    }\n\n\n    public set Uid(v : string) {\n        this.uid = v;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component } from '@angular/core';\nimport { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\nimport { Observable } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\n\n@Component({\n  selector: 'navigation',\n  templateUrl: './navigation.component.html',\n  styleUrls: ['./navigation.component.css']\n})\nexport class NavigationComponent {\n\n  isHandset$: Observable<boolean> = this.breakpointObserver.observe(Breakpoints.Handset)\n    .pipe(\n      map(result => result.matches),\n      shareReplay()\n    );\n\n  constructor(private breakpointObserver: BreakpointObserver) {}\n\n}\n","<mat-sidenav-container class=\"sidenav-container\">\n  <mat-sidenav #drawer class=\"sidenav\" fixedInViewport\n      [attr.role]=\"(isHandset$ | async) ? 'dialog' : 'navigation'\"\n      [mode]=\"(isHandset$ | async) ? 'over' : 'side'\"\n      [opened]=\"(isHandset$ | async) === false\">\n    <mat-toolbar>Menu</mat-toolbar>\n    <mat-nav-list>\n      <a mat-list-item href=\"#\">Link 1</a>\n      <a mat-list-item href=\"#\">Link 2</a>\n      <a mat-list-item href=\"#\">Link 3</a>\n    </mat-nav-list>\n  </mat-sidenav>\n  <mat-sidenav-content>\n    <mat-toolbar color=\"primary\">\n      <button\n        type=\"button\"\n        aria-label=\"Toggle sidenav\"\n        mat-icon-button\n        (click)=\"drawer.toggle()\"\n        *ngIf=\"isHandset$ | async\">\n        <mat-icon aria-label=\"Side nav toggle icon\">menu</mat-icon>\n      </button>\n      <span>assessments-angular</span>\n    </mat-toolbar>\n    <!-- Add Content Here -->\n  </mat-sidenav-content>\n</mat-sidenav-container>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from \"@angular/core\";\nimport {User} from \"../models/user\";\nimport {Role} from \"../models/role\";\nimport {HTTPService} from \"./http.service\";\nimport { PaginatedResultResponse } from \"../models/paginated-results-response\";\nimport { PaginatedResultsLoaderFactory } from \"./pagination-results-loader-factory.service\";\nimport { PaginatedResultsLoader } from \"../models/paginated-results-loader\";\n\n@Injectable()\nexport class UserService {\n    private users:User[];\n    private _resultsLoader:PaginatedResultsLoader<User>;\n\n    constructor(private dac$http:HTTPService, private _paginationFactory:PaginatedResultsLoaderFactory) {\n        //  let admin = new User();\n        // admin.username = \"admin\";\n        // admin.id = 1;\n        // admin.role = Role.Admin;\n\n        // let user = new User();\n        // user.username = \"snielson\";\n        // user.id = 2;\n\n        // let user2 = new User();\n        // user2.username = \"kskinner\";\n        // user2.id = 3;\n        // this.users = [admin, user, user2];\n    }\n\n    getUserById(id:string) : Promise<User> {\n      return this.dac$http.get<User[]>(\"assessment-users/\" + id).then((response) => {\n          let user = this.mapUser(response);\n          return user;\n      });\n    }\n\n    getUsers(offset?:number) : Promise<User[]> {\n      // TODO: @adunsulag need to support more than 50 users\n        var data: any = {\n          _offset: offset || 0\n          , _limit: 50\n        };\n        return this.dac$http.get<PaginatedResultResponse<User>>(\"assessment-users/\", data).then((data) => {\n          if (data && data.results.length) {\n            return data.results.map(u => this.mapUser(u));\n          }\n        });\n    }\n\n    createUser(userToCreate:User) {\n        return this.dac$http.post<User>(\"assessment-users/\", userToCreate).then((response) => {\n            return this.mapUser(response);\n        });\n    }\n\n    saveUser(user:User) {\n        return this.dac$http.post(\"assessment-users/\" + user.id + \".json\", user).then((response) => {\n            return user;\n        });\n    }\n\n    getUser(id:number) {\n        return this.getUsers().then((users) => {\n            let user = users.find(user => user.id == id);\n            let newUser = new User();\n            let copied = Object.assign(newUser, user);\n            return copied;\n        });\n    }\n\n    getUserByStringId(id:string) {\n      return this.getUsers().then((users) => {\n          let user = users.find(user => (user.id + \"\") == id);\n          if (!user) {\n            throw new Error(\"Failed to find user with id \" + id);\n          }\n          let newUser = new User();\n          let copied = Object.assign(newUser, user);\n          return copied;\n      });\n  }\n\n    isDuplicateUsername(username:string) : Promise<boolean> {\n        // need to make sure we handle special characters\n        return this.dac$http.post(\"users/check-username\", {_username: username})\n            .then((response) => {\n                if (response) {\n                    return true;\n                }\n        }).catch((error) => {\n            if (error.status === 404) {\n                return false;\n            }\n            throw error;\n        });\n    }\n\n    restoreUser(userToRestore:User) {\n        let user = new User();\n        Object.assign(user, userToRestore);\n        user.enabled = true;\n        return this.saveUser(user).then(savedUser => {\n            userToRestore.enabled = true;\n            return userToRestore;\n        });\n    }\n\n    archiveUser(userToArchive:User) {\n        let user = new User();\n        Object.assign(user, userToArchive);\n        user.enabled = false;\n        return this.saveUser(user).then(savedUser => {\n            userToArchive.enabled = false;\n            return userToArchive;\n        });\n    }\n\n    // we removed the API endpoint to delete users\n    // TODO: stephen if we ever enable user deletion again add this back in.\n    // deleteUser(userToDelete:User, userToReassignTo:User) {\n    //     return this.dac$http.delete(\"users/\" + userToDelete.id + \".json\", {reassignUserId: userToReassignTo.id});\n    // }\n\n    private mapUser(u:any) {\n        let user = new User();\n        Object.assign(user, u);\n        return user;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\nimport { Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { MatSidenav } from '@angular/material/sidenav';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'app/login/services/auth.service';\nimport { DacConfig } from 'app/shared/services/dac-config.service';\nimport { Observable, Subscription } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { NavBarItem } from '../models/nav-bar-item';\nimport { NavBarService } from '../services/nav-bar.service';\nimport { ThemeService } from '../services/theme.service';\n\n@Component({\n  selector: 'dac-site-container',\n  templateUrl: './site-container.component.html',\n  styleUrls: []\n})\nexport class SiteContainerComponent implements OnInit, OnDestroy {\n\n  @Input() skipContentPadding:boolean;\n  private _navItems;\n  private _sidebarNavItems;\n  private _sidebarSubscription:Subscription;\n  @Input() showSideNav:boolean;\n  @ViewChild(\"drawer\") drawer:MatSidenav;\n  private _loginStateSubscription:Subscription;\n\n  // if we want a single navigation add the following\n  // to the css .hidden { display: none }\n  // and [ngClass]=\"{'hidden': !(isHandset$ | async)}\"\n  // to mat-sidenav\n\n  isSmall$: Observable<boolean> = this.breakpointObserver.observe('(max-width: 767px)')\n    .pipe(\n      map(result => result.matches),\n      shareReplay()\n    );\n\n  constructor(private breakpointObserver: BreakpointObserver\n    ,private dacConfig:DacConfig\n    ,private navService:NavBarService\n    ,private authService:AuthService\n    ,private router:Router\n    ,private themeService:ThemeService\n  ) {\n    this.showSideNav = false;\n    this._navItems = [];\n    // TODO: stephen do we need this anymore?\n    this._loginStateSubscription = this.authService.getLoginState().subscribe(state => {\n\n       let items = this.navService.topNavBarItemsForDisplay;\n       if (items && items.length) {\n         this._navItems = items;\n       }\n       else {\n         this._navItems = [];\n       }\n    });\n    this.skipContentPadding = false;\n    this._sidebarSubscription = this.navService.displaySideBarEvent.subscribe(() => {\n      this.showSideNav = !this.showSideNav;\n    })\n  }\n\n  ngOnInit(): void {\n    if (this.dacConfig.seamlessMode) {\n      this.showSideNav = false;\n    }\n  }\n\n  ngOnDestroy() : void {\n    if (this._loginStateSubscription) {\n      this._loginStateSubscription.unsubscribe();\n      this._loginStateSubscription = null;\n    }\n    if (this._sidebarSubscription) {\n      this._sidebarSubscription.unsubscribe();\n    }\n  }\n\n  get ShowSideNav() {\n    return this.showSideNav;\n  }\n\n  get isMainContentFluid() {\n    return this.themeService.isMainContentFluid();\n  }\n\n  get ContainerClasses() {\n    return {\n      \"p-0\": this.skipContentPadding\n    };\n  }\n\n  get logoUrl() {\n    return this.dacConfig.applicationLogoUrl;\n  }\n\n  get logoTitle() {\n    return this.dacConfig.applicationLogoTitle;\n  }\n\n  get sidebarNavItems() {\n    return this.navService.navItemsForDisplay;\n  }\n\n  get topNavItems() {\n    return this._navItems;\n  }\n\n  get isStickyFixEnabled() {\n    return this.themeService.isStickyFixContainerEnabled();\n  }\n\n\n  toggleSideNav() {\n    // this.navService.toggleSidebar();\n    this.drawer.toggle();\n  }\n  public handleItemClick(navBarItem:NavBarItem, event:Event) {\n    this.navService.handleMenuItemClick(navBarItem, event);\n  }\n\n\n  logout() {\n    this.authService.logout().then((resp) => {\n      if (resp.redirectUrl) {\n        window.location.href = resp.redirectUrl;\n      }\n      else {\n        this.router.navigate(['/']);\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n      this.router.navigate([\"/\"]);\n    });\n  }\n\n}\n","<mat-sidenav-container class=\"sidenav-container\" [ngClass]=\"{'sidenav-opened': drawer.opened, 'sticky-container-fix': isStickyFixEnabled}\">\n  <mat-sidenav #drawer class=\"sidenav primary-color shadow-lg border-bottom\" fixedInViewport\n      [attr.role]=\"(isSmall$ | async) ? 'dialog' : 'navigation'\"\n      [mode]=\"(isSmall$ | async) ? 'over' : 'side'\"\n      [opened]=\"ShowSideNav && (isSmall$ | async) === false\"\n      >\n    <mat-toolbar class=\"shadow\">\n      <div class=\"logo-wrapper waves-light text-center\">\n        <a class=\"h-100\" href=\"#\">\n            <img src=\"{{logoUrl}}\" alt=\"{{logoTitle}}\" class=\"p-0\">\n        </a>\n      </div>\n    </mat-toolbar>\n    <mat-nav-list>\n          <!-- Logo -->\n        <mat-accordion class=\"app-nav-accordion\">\n          <mat-expansion-panel class=\"mat-elevation-z0\"\n            *ngFor=\"let navItem of sidebarNavItems\"\n            [hideToggle]=\"!navItem.hasChildren\"\n          >\n            <mat-expansion-panel-header [routerLinkActive]=\"'active'\"\n            [routerLink]=\"navItem.routerLink\" (click)=\"handleItemClick(navItem, $event)\">\n              <mat-panel-title><i class=\"fa fa-hand-pointer-o\"></i> {{navItem.name}}</mat-panel-title>\n            </mat-expansion-panel-header>\n            <mat-nav-list *ngIf=\"navItem.children\">\n              <a mat-list-item *ngFor=\"let child of navItem.children\"\n                 [routerLinkActive]=\"'active'\" [routerLink]=\"child.routerLink\">\n                 <i class=\"fa fa-hand-pointer-o\"></i> {{child.name}}\n              </a>\n            </mat-nav-list>\n          </mat-expansion-panel>\n        </mat-accordion>\n    </mat-nav-list>\n  </mat-sidenav>\n  <mat-sidenav-content class=\"sidenav-content\">\n    <div class=\"row fixed-top dac-navbar-container\">\n      <!-- top navigation bar template-->\n      <mat-toolbar color=\"primary\" class=\"navbar mb-2 col shadow\" id=\"dac-navbar\">\n        <a class=\"navbar-brand mr-0 ml-3\" [routerLink]=\"['/']\"\n        [ngClass]=\"{'d-none': ShowSideNav && !(isSmall$ | async)}\">\n          <img src=\"{{logoUrl}}\" alt=\"{{logoTitle}}\" class=\"p-0\">\n        </a>\n        <span class=\"example-spacer\"></span>\n        <a class=\"nav-link waves-light\" [routerLink]=\"['/']\"\n        [ngClass]=\"{'d-none': (isSmall$ | async)}\">Home</a>\n        <a *ngFor=\"let navItem of topNavItems\" class=\"nav-link waves-light\" (click)=\"handleItemClick(navItem, $event)\"\n            [ngClass]=\"{'d-none': (isSmall$ | async)}\"\n            [routerLink]=\"navItem.routerLink\">\n            {{navItem.name}}</a>\n        <button\n          type=\"button\"\n          aria-label=\"Toggle sidenav\"\n          class=\"navbar-toggler\"\n          mat-icon-button\n          (click)=\"toggleSideNav()\"\n          *ngIf=\"isSmall$ | async\">\n          <i class=\"fa fa-bars\" aria-label=\"Side nav toggle icon\"></i>\n        </button>\n      </mat-toolbar>\n    </div>\n\n    <!-- Main Content this directive surrounds-->\n    <main class=\"row flex-grow-1 pt-5 no-gutters bg-white main-content\" [ngClass]=\"{'main-fluid': isMainContentFluid}\">\n      <div class=\"col\">\n        <ng-content></ng-content>\n      </div>\n    </main>\n\n    <!-- Footer content goes here -->\n    <div class=\"row no-gutters footer-container\">\n      <dac-footer class=\"col\"></dac-footer>\n    </div>\n  </mat-sidenav-content>\n</mat-sidenav-container>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport enum ChallengeName {\n  SMS_MFA = \"SMS_MFA\",\n  SOFTWARE_TOKEN_MFA = \"SOFTWARE_TOKEN_MFA\",\n  NEW_PASSWORD_REQUIRED = \"NEW_PASSWORD_REQUIRED\",\n  CUSTOM_CHALLENGE = \"CUSTOM_CHALLENGE\"\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Output, EventEmitter, Input } from '@angular/core';\n\n@Component({\n  selector: 'search-input',\n  templateUrl: './search-input.component.html',\n  styleUrls: ['./search-input.component.css']\n})\nexport class SearchInputComponent implements OnInit {\n\n  @Input() initialSearch:string;\n\n  @Output() search = new EventEmitter<string>();\n  @Output() reset = new EventEmitter<void>();\n\n  private _searchString:string;\n\n  constructor() { }\n\n  ngOnInit() {\n    if (this.initialSearch) {\n      this._searchString = this.initialSearch;\n    }\n  }\n\n  public get searchPhrase() {\n        return this._searchString;\n    }\n\n  public set searchPhrase(v:string) {\n        this._searchString = v;\n    }\n\n    public enterKeySearch(event) {\n        // enter key is 13\n        if (event.charCode === 13) {\n            this.doSearch();\n        }\n    }\n\n    public doSearch() {\n      this.search.emit(this._searchString);\n    }\n\n    public resetSearch() {\n      this._searchString = \"\";\n      this.reset.emit();\n    }\n}\n","<div class=\"search\">\n    <div class=\"input-group\">\n        <input type=\"text\" class=\"form-control\" [(ngModel)]=\"searchPhrase\" (keypress)=\"enterKeySearch($event)\"\n            placeholder=\"Search for...\">\n        <span class=\"input-group-btn\">\n            <button class=\"btn btn-primary\" type=\"button\" (click)=\"doSearch()\">Go!</button>\n\n            <button type=\"button\" class=\"btn btn-secondary\" (click)=\"resetSearch()\">\n                <i class=\"fa fa-refresh\" aria-hidden=\"true\" aria-label=\"Reset\" ></i></button>\n        </span>\n    </div><!-- /input-group -->\n</div>\n","import { Injectable, OnInit } from \"@angular/core\";\nimport { environment } from \"../../../environments/environment\";\nimport {client, oauth2} from 'fhirclient';\nimport Client from \"fhirclient/lib/Client\";\nimport { FhirService } from \"./fhir-service\";\nimport { AssignedQuestionnaire } from \"../models/AssignedQuestionnaire\";\nimport { AssignmentHydratorService } from \"./assignment-hydrator.service\";\nimport { ExternalAssignedQuestionnaire } from \"../models/ExternalAssignedQuestionnaire\";\nimport { Assignment } from \"../models/Assignment\";\nimport { AssignmentSingle } from \"../models/AssignmentSingle\";\n/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class TaskService {\n  /**\n   * Client\n   */\n  private fhirClient;\n\n  constructor(private fhirService:FhirService, private assignmentHydrator:AssignmentHydratorService) {\n  }\n\n  async getTasksForClient(clientId:string) {\n    let client = await this.fhirService.getFhirClient();\n    let tasks = await client.request<any[]>(\"Task?patient=Patient/\" + clientId, {flat: true});\n    return tasks;\n  }\n\n  async getAssignmentTasksForClient(clientId:string) {\n    let client = await this.fhirService.getFhirClient();\n    let tasks = await this.getTasksForClient(clientId);\n    // we skip over sub tasks for now.\n    let filteredTasks = tasks.filter(t => t.input && t.input.length && !t.partOf);\n    let assignments = [];\n    let assignmentByReference = {};\n    let unmatchedTasks = [];\n    filteredTasks.forEach(t => {\n      t.input.forEach(i => {\n        if (i.type.coding && i.type.coding[0].code) {\n          // TODO: @adunsulag verify we are working with a code we know\n          if (i.type.coding[0].code == 'questionnaire') {\n            // sdc questionnaire type\n            if (i.valueCanonical) {\n              let assignmentItem = new ExternalAssignedQuestionnaire();\n              assignmentItem.Id = parseInt(t.id); // for now we have this as an id, but we'll need to switch it to a uuid\n              assignmentItem.QuestionnaireReference = i.valueCanonical;\n              assignmentItem.Name = t.description || \"\";\n              if (t.status == 'completed' && t.meta && t.meta.lastUpdated) {\n                assignmentItem.DateCompleted = new Date(t.meta.lastUpdated);\n              }\n              if (t.output && t.output.length) {\n                if (t.output[0].type && t.output[0].type.coding && t.output[0].type.coding[0].code == 'questionnaire-response'\n                && t.output[0].valueReference) {\n                  assignmentItem.QuestionnaireResponseReference = t.output[0].valueReference.reference || \"\";\n                  // grab the result id from the reference\n                  assignmentItem.ResultId = assignmentItem.QuestionnaireResponseReference.split(\"/\").pop();\n                } else {\n                  console.error(\"Task with id \" + t.id + \" for questionnaire had output that did not have a valid questionnaire-response format\");\n                }\n              }\n              assignmentItem.Task = t;\n              let assignment = new AssignmentSingle();\n              if (t.authoredOn) {\n                assignment.DateAssigned = new Date(t.authoredOn);\n              } else {\n                assignment.DateAssigned = new Date();\n              }\n              assignment.DateCompleted = assignmentItem.DateCompleted || null;\n              assignment.Items = [assignmentItem];\n              assignment.Name = assignmentItem.Name;\n              assignment.ResultId = assignmentItem.ResultId || null;\n              assignment.Type = \"ExternalQuestionnaire\";\n              assignments.push(assignment);\n            } // we don't know how to handle any non-sdc input\n            else {\n              // see https://build.fhir.org/ig/HL7/sdc/StructureDefinition-sdc-task.html\n              console.log(\"Task \" + t.id + \" did not conform to SDC format for questionnaire for input:questionnaire.value[x]\");\n            }\n          //\n          } else if (['Questionnaire', 'Assessment', 'AssessmentGroup', 'LibraryAsset', 'TemplateProfile'].indexOf(i.type.coding[0].code) !== -1) {\n            let json = i.valueString;\n            try {\n              let record = JSON.parse(json);\n              let assignment = this.assignmentHydrator.hydrateAssignment(record);\n              assignments.push(assignment);\n            }\n            catch (error) {\n              console.error(\"Failed to parse task assignment for task \" + t.id, error);\n            }\n          }\n        }\n      });\n    });\n    return assignments;\n  }\n\n  async updateTaskWithQuestionnaireResponse(task:any, questionnaireResponse:any) {\n    // if (task.input[0].responseEndpoint) {\n        //   // we need to go through and submit to each of the\n        // }\n        task.output = [\n          {\n            type: {\n              coding: [\n                {\n                  system: \"http://hl7.org/fhir/uv/sdc/CodeSystem/temp\"\n                  ,code: \"questionnaire-response\"\n                }\n              ]\n            },\n            valueReference: {\n              reference: \"QuestionnaireResponse/\" + questionnaireResponse.id\n            }\n          }\n        ];\n        task.status = \"completed\";\n        return Promise.resolve(task);\n        // let client = await this.fhirService.getFhirClient();\n        // /** @ts-ignore */\n        // return client.update<Task>(task);\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {\n  AnimationTriggerMetadata,\n  trigger,\n  state,\n  transition,\n  style,\n  animate,\n} from '@angular/animations';\n\nexport const toastAnimations: {\n  readonly fadeToast: AnimationTriggerMetadata;\n} = {\n  fadeToast: trigger('fadeAnimation', [\n      state('default', style({ opacity: 1 })),\n      transition('void => *', [style({ opacity: 0 }), animate('{{ fadeIn }}ms')]),\n      transition(\n          'default => closing',\n          animate('{{ fadeOut }}ms', style({ opacity: 0 })),\n      ),\n  ]),\n};\n\nexport type ToastAnimationState = 'default' | 'closing';\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport { HTTPService } from \"../../shared/services/http.service\"\nimport { DacConfig } from \"../../shared/services/dac-config.service\";\n\nimport {Assessment} from \"../../shared/models/assessment\"\nimport {AssessmentGroup} from \"../../shared/models/assessment-group\";\n\n@Injectable()\nexport class AssessmentGroupService\n{\n    constructor(\n        private http:HTTPService\n    ) {\n\n    }\n\n    public createNewGroup(name:string) : Promise<AssessmentGroup> {\n        return this.http.post<AssessmentGroup>(\"assessment-groups\", {name: name}).then((json) => {\n            let group = new AssessmentGroup();\n            Object.assign(group, json);\n            return group;\n        });\n    }\n\n    public updateAssessmentsForGroup(group:AssessmentGroup) : Promise<AssessmentGroup> {\n        return this.http.post<AssessmentGroup>(\"assessment-groups/\" + group.Id + \"/assessments/$update\", {})\n            .then((json) => {\n                let group = new AssessmentGroup();\n                Object.assign(group, json);\n                return group;\n            }\n        );\n    }\n\n    /**\n     * Persists the assessment in the group and returns the assessment with it's current id and version.\n     * Since the assessments are versioned we add the UID of the assessment instead of its id which is why\n     * we pass back the most current assessment as part of the add.\n     */\n    public addAssessmentToGroup(group:AssessmentGroup, assessment:Assessment) : Promise<Assessment> {\n        if (!(assessment.uid && group.Id)) {\n            return new Promise((resolve, reject) => {\n                reject(\"assessment uid or group id was null, cannot add\");\n            });\n        }\n\n        let data = {\n            uid: assessment.uid\n        };\n        return this.http.post(\"assessment-groups/\" + group.Id + \"/assessments\", data).then((result:any) => {\n            let newAssessment = new Assessment();\n            Object.assign(newAssessment, assessment);\n            newAssessment.version = 1;\n            newAssessment.id = \"12345\"; // TODO: stephen where does this come from?\n            return newAssessment;\n        });\n    }\n\n    /**\n     * Retrieves the groups from the server.  If the showAllGroups flag is set it will return\n     * all the groups across host sites and companies.\n     * @param showAllGroups true\n     */\n    public getAssessmentGroups(showAllGroups?:boolean) : Promise<AssessmentGroup[]> {\n        let data:{showAllGroups?:boolean} = {};\n        if (showAllGroups == true) {\n            data.showAllGroups = true;\n        }\n        return this.http.get<{assessments:Assessment[], id:number, name:string,created:Date,updated:Date}[]>(\"assessment-groups\", data).then((json) => {\n            let groups:AssessmentGroup[] = [];\n            json.forEach((r) => {\n                let group = new AssessmentGroup();\n                Object.assign(group, r);\n                group.Assessments = [];\n                r.assessments.forEach((a) => {\n                    let assessment = new Assessment();\n                    Object.assign(assessment, a);\n                    group.Assessments.push(assessment);\n                });\n                groups.push(group);\n            });\n            return groups;\n        });\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {ReportNavigatorService} from '../../services/report-navigator.service';\nimport {TherapistScaleResultsComponent} from '../therapist-scale-results/therapist-scale-results.component';\nimport { Component, OnInit, ElementRef } from '@angular/core';\nimport { ScaleResult } from 'app/shared/models/scale-result';\nimport { PclGraderService } from 'app/reports/services/pcl-grader.service';\n\n@Component({\n  selector: 'app-pcl-assessment-results',\n  templateUrl: './pcl-assessment-results.component.html'\n})\nexport class PclAssessmentResultsComponent extends TherapistScaleResultsComponent implements OnInit {\n\n  private _criteria:{name:string, hasPTSD:boolean, scaleResult:ScaleResult}[];\n\n\n  constructor(navigator:ReportNavigatorService, el:ElementRef, private pclGrader:PclGraderService) {\n    super(navigator, el);\n }\n\n  ngOnInit() {\n    super.ngOnInit();\n    if (this.AssessmentResult) {\n      this._criteria = this.pclGrader.getPCLCriteriaFromAssessmentResult(this.AssessmentResult);\n    }\n  }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n  get Criteria() : {name:string, hasPTSD:boolean, scaleResult:ScaleResult}[] {\n    return this._criteria;\n  }\n\n}\n","<div class=\"card card-wider card-cascade\">\n    <div class=\"view gradient-card-header primary-gradient text-light\">\n        <h3 class='h3-responsive text-center'>{{Assessment?.name}}</h3>\n    </div>\n    <div class=\"card-body\">\n      <div *ngFor=\"let criteria of Criteria;index as index;\"\n        [id]=\"getScaleResultNavigatorId(criteria.scaleResult)\" class=\"row d-report-print-page\">\n        <div class=\"card card-wider card-cascade mb-md-4 md-0 col\">\n          <div class=\"view gradient-card-header secondary-gradient text-light\">\n              <h3 class='h3-responsive text-center'>{{criteria.scaleResult.scale?.name}} (Scored {{criteria.scaleResult.score}} out of {{criteria.scaleResult.scale.getMaxScore()}})</h3>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"row justify-content-center\">\n              <pcl-criteria-icon class=\"col-3 col-lg-2\" [criteria]=\"criteria.name\" [checked]=\"criteria.hasPTSD\"></pcl-criteria-icon>\n            </div>\n            <!-- <div class=\"row mb-3\">\n              <app-scale-range-content class=\"col\" [scaleResult]=\"criteria.scaleResult\"></app-scale-range-content>\n            </div> -->\n            <div class=\"row\">\n              <app-scale-questions-list  class=\"col\" [Questions]=\"AssessmentResult.assessment.getQuestionsForScale(criteria.scaleResult.scale)\"></app-scale-questions-list>\n            </div>\n          </div>\n      </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Directive, Input, TemplateRef, ViewContainerRef, OnDestroy } from '@angular/core';\nimport { AuthService } from 'app/login/services/auth.service';\nimport { Role } from 'app/shared/models/role';\nimport { Subscription } from 'rxjs';\n\n@Directive({ selector: '[hasPermission]' })\nexport class HasPermissionDirective implements OnDestroy {\n\n  private _userSubscription:Subscription;\n\n  constructor(\n    private templateRef: TemplateRef<any>,\n    private viewContainer: ViewContainerRef,\n    private authService:AuthService\n    ) { }\n\n  @Input() set hasPermission(role: string) {\n    if (this._userSubscription) {\n      this._userSubscription.unsubscribe();\n    }\n\n    this._userSubscription = this.authService.getLoginState().subscribe(loginState => {\n      let user = loginState.user;\n      this.viewContainer.clear();\n      if (user && user.role <= Role[role]) {\n          this.viewContainer.createEmbeddedView(this.templateRef);\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this._userSubscription) {\n      this._userSubscription.unsubscribe();\n    }\n  }\n\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, ElementRef, Directive } from '@angular/core';\nimport { ChartService } from 'app/assessment-charts/services/chart.service';\nimport * as Chart from 'chart.js';\n\n@Directive()\nexport abstract class BaseChartComponent implements OnInit {\n\n  private _timeoutHandler:any;\n  private _configOptions:any;\n  private chart:Chart;\n  private chartNode:HTMLCanvasElement;\n  private chartImage:HTMLImageElement;\n\n  constructor(private chartElement:ElementRef, private cs:ChartService) {}\n\n  ngAfterViewInit() {\n    this.drawChart();\n  }\n  ngOnDestroy() {\n   this.clearChartConversionTimeout();\n    this.destroyChart();\n    this.destroyChartImage();\n  }\n\n  protected abstract setupChartData();\n  protected abstract getLabelData() : any;\n  protected abstract getDatasets() : any;\n  protected getMaxYAxisTick() : number {\n    return 100;\n  }\n\n  protected getChart() : Chart {\n    return this.chart;\n  }\n\n  private calculateStepSize(maxValue) {\n    // TODO: stephen we override the system since we set a max value, but is there a better way?\n    if (maxValue > 100) {\n      return 25;\n    }\n    else if (maxValue > 50) {\n      if (maxValue % 20 == 0) {\n        return 20;\n      }\n      if (maxValue % 15 == 0) {\n        return 15;\n      }\n      return 10;\n    }\n    else if (maxValue > 25) {\n      if (maxValue % 9 == 0) {\n        return 9;\n      }\n      else if (maxValue % 8 == 0) {\n        return 8;\n      }\n      else if (maxValue % 7 == 0) {\n        return 7;\n      }\n      else if (maxValue % 6 == 0) {\n        return 6;\n      }\n      // by default just return 10 if we have to.\n      return 5;\n    }\n    else if (maxValue > 10) {\n      if (maxValue % 3 == 0) {\n        return 3;\n      }\n      return 2;\n    }\n    else {\n      return 1;\n    }\n  }\n\n  protected setupChartConfiguration() {\n\n    let maxY = this.getMaxYAxisTick();\n    let stepSize = this.calculateStepSize(maxY);\n    // let stepSize = maxY / 6 >\n    let configOptions:any = {\n      responsive: true,\n      showDatapoints: true,\n      dataPointFontSize: 18,\n      maintainAspectRatio: true,\n      title: {\n        display: false\n        ,text: \"some title goes here\"\n      }\n      ,legend: {\n        display: false\n      }\n      ,layout: {\n          padding: {\n              left: 0,\n              right: 0,\n              top: 0,\n              bottom: 0\n          }\n      }\n      ,tooltips: {\n        enabled: false\n        // mode: \"index\",\n        // intersect: true\n      }\n      // ,elements: {\n      //   point: {\n      //     radius: 0 // should hide the points from displaying...\n      //     ,hoverRadius: 0\n      //   }\n      // }\n      ,annotation: {\n        events: [\"click\"],\n        annotations: []\n      }\n      ,scales: {\n        xAxes: [{\n          stacked: false\n          ,scaleLabel: {}\n          ,ticks: {}\n          ,gridLines: {}\n        }]\n        ,yAxes: [{\n          ticks: {\n            min: 0\n            ,max: this.getMaxYAxisTick()\n            ,stepSize: stepSize\n            , padding: 0\n          }\n          ,stacked: false\n          ,scaleLabel: {\n            display: true\n          }\n        }]\n      }\n    };\n\n    // convert the canvas chart to an image\n    configOptions.animation = {\n      onComplete: this.handleChartAnimationComplete.bind(this)\n    };\n    return configOptions;\n  }\n\n  ngOnInit() {\n    this.setupChartData();\n    this._configOptions = this.setupChartConfiguration();\n  }\n\n  protected handleChartAnimationComplete(e:any) {\n    // this.convertChartToImage(e);\n  }\n\n  private clearChartConversionTimeout() {\n    if (this._timeoutHandler) {\n      clearTimeout(this._timeoutHandler);\n      this._timeoutHandler = null;\n    }\n  }\n\n  public getChartAsHtmlImageElement() {\n    let dataUrl = this.chartNode.toDataURL('image/png');\n    let chartImage = new Image();\n    chartImage.src = dataUrl;\n    return chartImage;\n  }\n\n  public convertChartToImage(e:any) {\n    // since we are destroying the chart we want to get it out\n    // of the current chart onComplete event cycle.\n    this._timeoutHandler = setTimeout(() => {\n      this._timeoutHandler = null;\n      if (this.chartNode && this.chartNode.parentNode) {\n        let dataUrl = this.chartNode.toDataURL('image/png');\n        this.chartImage = new Image();\n        this.chartImage.src = dataUrl;\n        this.chartNode.parentNode.appendChild(this.chartImage);\n        // now that the chart has been created let's destroy the chart\n        this.destroyChart();\n      }\n    }, 0);\n  }\n\n  private destroyChart() {\n    if (this.chart) {\n      this.cs.destroyChart(this.chart);\n      this.chart = null;\n    }\n\n    if (this.chartNode) {\n      if (this.chartNode.parentNode) {\n        this.chartNode.parentNode.removeChild(this.chartNode);\n      }\n      this.chartNode = null;\n    }\n  }\n\n  private destroyChartImage() {\n    if (this.chartImage) {\n      if (this.chartImage.parentNode) {\n        this.chartImage.parentNode.removeChild(this.chartImage);\n      }\n      this.chartImage = null;\n    }\n  }\n\n  public drawChart() {\n    var chartData = {\n      labels: this.getLabelData()\n      ,datasets: this.getDatasets()\n    };\n    this.drawChartWithData(chartData);\n  }\n\n  private drawChartWithData(data) {\n    this.chartNode = this.createChartNode();\n    if (this.chartNode) {\n      this.chart = this.cs.drawChart(this.chartNode, data, this._configOptions);\n    }\n  }\n\n  private createChartNode() {\n    let componentElement = this.chartElement.nativeElement as Element;\n    let element = componentElement.querySelector(\".scale-chart-container\");\n    if (!element) {\n      console.error(\"could not find element with class .scale-chart-container\");\n      return null;\n    }\n\n    let chartNode = document.createElement(\"canvas\") as HTMLCanvasElement;\n    element.appendChild(chartNode);\n    chartNode = chartNode;\n    return chartNode;\n\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {AuthService} from '../../login/services/auth.service';\nimport { Injectable } from '@angular/core';\nimport { HTTPService } from \"../../shared/services/http.service\";\nimport { BillingDetails } from '../models/billing-details';\nimport { BillingCard } from '../models/billing-card';\nimport { StripePaymentProcessor } from '../../shared/services/stripe-payment-processor.service';\nimport { SubscriptionHydratorService } from './subscription-hydrator.service';\nimport { Subscription } from '../models/subscription';\n\n@Injectable()\nexport class BillingService {\n\n    constructor(private httpService:HTTPService, private authService:AuthService\n        , private stripeService:StripePaymentProcessor\n        , private subHydrator:SubscriptionHydratorService) {\n\n    }\n\n    public getBillingDetails() : Promise<BillingDetails> {\n        return this.authService.getCurrentUser().then(user => {\n            return this.httpService.get<{customerId:string,email:string,_cards:BillingCard[], _subscriptions:Subscription[]}>(\"/admin/billing/\" + user.companyID)\n            .then((data) => {\n                let cards = data._cards || [];\n                let subscriptions = data._subscriptions || [];\n\n                let billingDetails:BillingDetails = Object.assign(new BillingDetails(), data);\n                if (cards.length) {\n                    billingDetails.cards = cards.map(c => Object.assign(new BillingCard(), c));\n                }\n                if (subscriptions.length) {\n                    billingDetails.subscriptions = subscriptions.map(s => this.subHydrator.fromJSONObject(s));\n                }\n                return billingDetails;\n            })\n            .catch((error) => {\n                // no details found at all\n                if (error.status == 404) {\n                    return new BillingDetails(); // make it empty\n                }\n                throw error;\n            });\n        });\n\n    }\n\n    public updateDefaultBillingCard(billingDetails:BillingDetails) {\n        return this.authService.getCurrentUser().then(user => {\n            return this.stripeService.createUpdateCardToken(\"Update card for Assessment Services\", billingDetails.email)\n            .then((token) => {\n                console.log(\"token updated for customer.  Token now: \", token);\n                let promise;\n                if (!billingDetails.customerId) {\n                    // create new billing profile\n                    promise = this.httpService.post(\"/admin/billing/\", {companyID: user.companyID, card:token});\n                }\n                else {\n                    // or update the existing card for the current billing profile\n                    promise = this.httpService.post(\"/admin/billing/\" + user.companyID + \"/card/\", {card: token});\n                }\n\n                return promise.then((newBilling) => {\n                    Object.assign(billingDetails, newBilling);\n                    let cards = newBilling.cards || newBilling._cards || [];\n                    billingDetails.cards = cards.map(c => Object.assign(new BillingCard(), c));\n                    let subscriptions = newBilling.subscriptions || newBilling._subscriptions || [];\n                    billingDetails.subscriptions = subscriptions.map(s => this.subHydrator.fromJSONObject(s));\n                    return billingDetails;\n                });\n            });\n        });\n    }\n\n    public deleteDefaultBillingCard(billingDetails:BillingDetails) : Promise<any> {\n\n        if (billingDetails.cards.length) {\n            return this.authService.getCurrentUser().then(user =>{\n                return this.httpService.delete(\"/admin/billing/\" + user.companyID + \"/card/\").then(() => {\n                    billingDetails.cards = []; // clear out the cards.\n                    return billingDetails;\n                });\n            });\n        }\n        return Promise.reject(new Error(\"Default billing card is missing to delete\"));\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from \"@angular/router\";\n\nimport { AuthService } from \"../services/auth.service\"\n\n@Component({\n  selector: 'logout',\n  templateUrl: './logout.component.html',\n  styleUrls: ['./logout.component.css']\n})\nexport class LogoutComponent implements OnInit {\n\n  constructor(\n    private authService:AuthService\n    ,private router:Router\n  ) { }\n\n  ngOnInit() {\n  }\n\n  logout() {\n    this.authService.logout().then((resp) => {\n      if (resp.redirectUrl) {\n        window.location.href = resp.redirectUrl;\n      }\n      else {\n        this.router.navigate(['/']);\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n      this.router.navigate(['/']);\n    });\n  }\n}\n","<input type=\"button\" class='btn btn-secondary' (click)=\"logout()\" value=\"Logout\" />","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {PaginationQueryFunc} from \"./pagination-query-func\";\nimport {PaginatedResultResponse} from \"./paginated-results-response\";\n\nexport class PaginatedResultsLoader<T> {\n\n    private _results:T[];\n    private _offset:number;\n    private _hasMoreResults:boolean;\n    private _clientId:string;\n    private _queryFunc:PaginationQueryFunc;\n\n    constructor(queryFunc:PaginationQueryFunc) {\n        this._results = [];\n        this._offset = 0;\n        this._hasMoreResults = false;\n        this._queryFunc = queryFunc;\n    }\n\n    public get offset() : number {\n        return this._offset;\n    }\n\n    public set offset(v:number) {\n        this._offset = v;\n    }\n\n    public hasMoreResults() {\n        return this._hasMoreResults;\n    }\n\n    public getResults() : Promise<T[]> {\n        return this._queryFunc(this.offset)\n        .then((resultList:PaginatedResultResponse<T>) => this.handleResultsLoaded(resultList));\n    }\n\n    private handleResultsLoaded(resultList:PaginatedResultResponse<T>) : T[] {\n        this._results = this._results.concat(resultList.results);\n        this._offset = 0;\n        this._hasMoreResults = false;\n\n        if (typeof resultList._offset === \"number\") {\n            this.offset = resultList._offset;\n            this._hasMoreResults = resultList.hasMoreData;\n        }\n\n        return this._results;\n    }\n\n    public loadMore() : Promise<T[]> {\n        return this.getResults();\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Assessment} from \"../models/assessment\";\nimport {QuestionSet} from \"../models/question-set\";\nimport {DisplayCondition} from \"../models/display-condition\";\nimport { Scale } from \"../models/scale\";\nimport { ScaleRange } from \"../models/scale-range\";\n\ninterface CompressedDisplayCondition {\n    _answerId:string;\n    _questionId:string;\n    _questionSetId:string;\n    _displayType:\"show\" | \"hide\";\n}\ninterface CompressedScale {\n    _id: string;\n\t_name: string;\n\t_instructions: string;\n\t_answer_start_value: number;\n\t_display_order: number;\n\t_ranges: ScaleRange[];\n\t_deleted: boolean;\n\t_multiplier: number;\n\t_descriptionClient: string;\n\t_descriptionTherapist: string;\n\t_negativeToPositiveRanges: boolean;\n\t_subScaleIds:string[];\n}\n/**\n * Goes through and compresses the assessment into a smaller format.\n */\nexport class AssessmentCompressorService\n{\n    public compress(assessment:Assessment) {\n        let result = {_scales: [], _question_sets: []};\n        Object.assign(result, assessment);\n        result._scales = assessment.scales.map(s => this.compressScale(s));\n        result._question_sets = assessment.question_sets.map(qs => this.compressQuestionSet(qs));\n        return result;\n    }\n\n    private compressScale(scale:Scale) : CompressedScale {\n        // for now we aren't compressing the scale at all.\n        let compressedScale:any = Object.assign({}, scale, {_subScaleIds: scale.getSubScaleIds()});\n        if (compressedScale.hasOwnProperty('_subScales')) {\n            delete compressedScale._subScales;\n        }\n        return compressedScale;\n    }\n\n    private compressQuestionSet(questionSet:QuestionSet) {\n        let result = {_display_conditions: []};\n        Object.assign(result, questionSet);\n        result._display_conditions = questionSet.display_conditions.map(dc => this.compressDisplayCondition(dc));\n        return result;\n    }\n\n    private compressDisplayCondition(dc:DisplayCondition) {\n        let result:CompressedDisplayCondition = {\n            _answerId: dc.answer.id\n            ,_questionId: dc.question.id\n            ,_questionSetId: dc.questionSet.id\n            ,_displayType: dc.displayType\n        };\n        return result;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from \"@angular/core\";\nimport { HTTPService } from \"../../shared/services/http.service\";\nimport { ManagedClient } from \"../../shared/models/managed-client\";\nimport { PaginatedResultResponse } from \"../../shared/models/paginated-results-response\";\nimport { User } from \"app/shared/models/user\";\nimport { BehaviorSubject ,  Observable } from \"rxjs\";\nimport { AssignmentHydratorService } from \"./assignment-hydrator.service\";\nimport { TaskService } from \"./task-service\";\nimport { FhirService } from \"./fhir-service\";\n\n@Injectable()\nexport class ClientService {\n\n\tprivate _dac$http: HTTPService;\n\tprivate _clientNotice: BehaviorSubject<ManagedClient>;\n\n\tconstructor(dac$http: HTTPService,\n\t\tprivate assignmentHydrator:AssignmentHydratorService,\n    private fhirService:FhirService,\n    private taskService:TaskService) {\n\t\tthis._dac$http = dac$http;\n\t\tthis._clientNotice = new BehaviorSubject<ManagedClient>(null);\n\t}\n\n\tgenerateClientId() : Promise<string> {\n\t\treturn this._dac$http.post<{id:string}>(\"utils/generateClientId\", {}).then((serverResponse) => {\n\t\t\treturn serverResponse.id;\n\t\t});\n\t}\n\n\tgetClientObservable(): Observable<ManagedClient> {\n\t\treturn this._clientNotice;\n\t}\n\n\tgetClientList(user?: User, offset?: number): Promise<PaginatedResultResponse<ManagedClient>> {\n\t\tvar data: any = {\n\t\t\t_limit: 10,\n      _sort: \"-date,lname,fname\"\n\t\t};\n\t\tif (offset) {\n\t\t\tdata._offset = offset; // this.encodeCursor(cursor);\n\t\t}\n\t\tif (user) {\n\t\t\tdata.user = user.id;\n\t\t}\n\t\treturn this._dac$http.get<PaginatedResultResponse<ManagedClient>>(\"reports/clients\", data)\n\t\t\t.then((data) => {\n\t\t\t\treturn Promise.all(data.results.map((record) => this.hydrateClient(record))).then(results => {\n          data.results = results;\n          return data;\n        });\n\t\t\t});\n\t}\n\n\tsendClientEmail(clientId:string, subj:string, message:string, isTest:boolean) {\n\t\tvar data = {\n\t\t\tsubject:subj\n\t\t\t,message:message\n\t\t\t,isTest: (isTest ? 1 : 0)\n\t\t};\n\t\treturn this._dac$http.post(\"clients/\" + clientId + \"/messages\", data)\n\t\t.then((serverResponse) => {\n\t\t\treturn {};\n\t\t});\n\t}\n\n\tcreateClient(client: ManagedClient) {\n\t\treturn this._dac$http.post<ManagedClient>(\"clients/\", client)\n\t\t\t.then((serverResponse) => {\n\t\t\t\tthis.hydrateClient(client)\n        .then(client => {\n          let newClient = client;\n          this._clientNotice.next(newClient);\n          return newClient;\n        })\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tconsole.error(response);\n\t\t\t\tif (response.status === 400) {\n\t\t\t\t\tlet data = response.body as any;\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tthrow data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow response;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Any in memory modifications of the client, or client properties need to be notified\n\t * to other services and this method handles that.\n\t * @param client\n\t */\n\tsyncLocalClient(client:ManagedClient) {\n\t\tthis._clientNotice.next(client);\n\t}\n\n\tsaveClient(client: ManagedClient) {\n\t\treturn this._dac$http.post<ManagedClient>(\"clients/\" + client.id, client)\n\t\t\t.then((data) => {\n\t\t\t\tthis._clientNotice.next(client);\n\t\t\t\treturn data;\n\t\t\t});\n\t}\n\n\tasync getClient(clientId: string): Promise<ManagedClient> {\n    let client = await this.fhirService.getFhirClient();\n    return client.request(\"Patient/\" + clientId)\n\t\t// return this._dac$http.get<ManagedClient>(\"Patient/\" + clientId)\n\t\t\t.then((serverResponse) => {\n\t\t\t\treturn this.hydrateFhirPatient(serverResponse);\n\t\t\t});\n\t}\n\n\tsearchClientList(searchQueryObj: {firstName?:string, lastName?:string, id?:string}, user?: User, offset?: number) {\n\t\tlet search:any = searchQueryObj || {};\n\t\tsearch._limit = 10;\n    search._sort = \"-date,lname,fname\";\n\t\tif (offset) {\n      // need to make sure uri components such as + sign are encoded properly\n\t\t\tsearch._offset = offset; //this.encodeCursor(cursor);\n\t\t}\n\t\tif (user) {\n\t\t\tsearch.user = user.id;\n\t\t}\n\t\treturn this._dac$http.get<PaginatedResultResponse<ManagedClient>>(\"reports/clients\", search)\n\t\t\t.then((data) => {\n\t\t\t\treturn Promise.all(data.results.map((record) => this.hydrateClient(record)))\n        .then(results => {\n          data.results = results;\n          return data;\n        });\n\t\t\t});\n\t}\n\n  private encodeCursor(cursor)\n  {\n    // need to make sure uri components such as + sign are encoded properly\n    return cursor;\n    // return encodeURIComponent(cursor);\n  }\n\n  private hydrateFhirPatient(record) : Promise<ManagedClient> {\n    let user = new User();\n\t\tlet client = new ManagedClient();\n    client.id = record.id;\n    if (record.name) {\n      let n = record.name.find(n => n.use == 'official');\n      if (n) {\n        client.firstName = n.given.length ? n.given.join(\" \") : \"\";\n        client.lastName = n.family || \"\";\n        client.displayName = n.text || (client.firstName + \" \" + client.lastName).trim();\n      }\n    }\n    if (record.generalPractitioner && record.generalPractitioner.length) {\n      // we only grab the first one\n      let provider = record.generalPractitioner[0];\n      let providerParts = provider.reference.split(\"/\");\n      client.user = new User();\n      client.user.username = providerParts[1] || null;\n    }\n    if (record.telecom && record.telecom.length) {\n      let emailContacts = record.telecom.filter(t => t.system == 'email');\n      if (emailContacts) {\n        let workContact = emailContacts.find(e => e.use == 'work');\n        let homeContact = emailContacts.find(e => e.use == 'home');\n        client.email = workContact || homeContact; // order of preference\n      }\n    }\n    return this.taskService.getAssignmentTasksForClient(client.id)\n    .then(assignments => {\n      client.assignments = assignments;\n      return client;\n    });\n  }\n\n\tprivate hydrateClient(record): Promise<ManagedClient> {\n\t\tlet user = new User();\n\t\tlet client = new ManagedClient();\n\t\tObject.assign(client, record);\n\t\tif (record.assignedUser) {\n\t\t\tclient.user = Object.assign(user, record.assignedUser);\n\t\t}\n    return this.taskService.getAssignmentTasksForClient(client.id)\n    .then(assignments => {\n      client.assignments = assignments;\n      return client;\n    });\n\t\t// if (client.assignments) {\n\t\t// \tclient.assignments = record.assignments.map(a => this.assignmentHydrator.hydrateAssignment(a));\n\t\t// }\n\t\t// return client;\n\t}\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-login-finalize-page',\n  templateUrl: './login-finalize-page.component.html'\n})\nexport class LoginFinalizePageComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n    console.log(\"got here\");\n  }\n\n}\n","<div class=\"container-fluid mb-3\">\n  <div class=\"row justify-content-center\">\n      <div class=\"col-12 col-md-8 col-lg-4\">\n        <app-login-finalize></app-login-finalize>\n        <!-- <dac-card [icon]=\"'lock'\" [title]=\"'Therapist Login'\" class=\"mt-4\">\n\n        </dac-card> -->\n      </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {UniqueIdService} from '../../../shared/services/unique-id.service';\nimport { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { IReportItemComponent } from \"../../models/i-report-item-component\";\nimport { AssessmentResult } from \"../../../shared/models/assessment-result\";\nimport {Variable} from \"../../models/variable\";\nimport {ViewEncapsulation, ElementRef} from '@angular/core';\nimport { DomSanitizer,SafeHtml } from '@angular/platform-browser';\nimport { ReportNavigationItem } from 'app/reports/models/report-navigation-item';\nimport { BaseReportItemComponent } from 'app/reports/models/base-report-item-component';\n@Component({\n  selector: 'app-html-content-item',\n  templateUrl: './html-content-item.component.html'\n  ,encapsulation: ViewEncapsulation.None\n})\nexport class HtmlContentItemComponent extends BaseReportItemComponent implements OnInit, IReportItemComponent {\n\n  private _content:SafeHtml;\n  @Input(\"data\") public data:any;\n  @Input(\"data\") public results:AssessmentResult[];\n  private _itemId:string;\n  private _classNames = [];\n\n  constructor(private domSanitizer:DomSanitizer) {\n    super();\n  }\n\n  public getHTMLClassNames() : string[] {\n    return this._classNames;\n  }\n\n  ngOnInit() {\n  }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n\n  public setReportData(data:any, results:AssessmentResult[], variables:Variable[]) {\n    if (data && data.content) {\n      var content = data.content as string;\n\n      if (variables && variables.length) {\n        // handle any variable substitutions here...\n        variables.forEach(v => {\n          let id:string = \"{{\" + v.id + \"}}\";\n          let replace = v.value + \"\";\n          content = content.replace(id, replace);\n        });\n      }\n      this.content = this.domSanitizer.bypassSecurityTrustHtml(content);\n      if (data.classNames && data.classNames.length) {\n        this._classNames = data.classNames.concat(this._classNames);\n      }\n    }\n  }\n\n  get content() {\n    return this._content;\n  }\n\n  set content(v:SafeHtml) {\n    this._content = v;\n  }\n\n}\n","<div class=\"card card-wider card-cascade\" [innerHTML]=\"content\"></div>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input, Output, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\nimport { LibraryAsset } from '../models/library-asset';\nimport { AssetService } from '../services/asset.service';\nimport { AlertService } from 'app/shared/services/alert.service';\n\n@Component({\n  selector: 'dac-asset-list',\n  templateUrl: './asset-list.component.html',\n  styleUrls: ['./asset-list.component.scss']\n})\nexport class AssetListComponent implements OnInit,OnChanges {\n\n  @Input() type:'exercise'|'article'|null;\n  @Output() selected = new EventEmitter<LibraryAsset>();\n  public Assets:LibraryAsset[];\n\n  constructor(private assetService:AssetService, private alertService:AlertService) { }\n\n\n  ngOnChanges(changes: SimpleChanges): void {\n    this.loadAssetsForType(this.type); // reload our changes.\n  }\n\n  ngOnInit() {\n    if (!this.type) {\n      this.type = 'exercise';\n    }\n    this.loadAssetsForType(this.type);\n\n  }\n\n  private loadAssetsForType(type) {\n    this.assetService.getAssetsByType(type).then(assets => {\n      assets.sort((a, b) => a.title.localeCompare(b.title)); // make sure we are sorted by name here.\n      this.Assets = assets;\n    })\n    .catch(error => {\n      console.error(error);\n      this.alertService.error(\"Failed to retrieve the library resources.  Check your internet connection and refresh the page\");\n    })\n  }\n\n  public viewAsset(asset: LibraryAsset) {\n    console.log(\"selecting \", asset);\n    this.selected.emit(asset);\n  }\n\n}\n","<table class=\"table table-striped\">\n  <thead class=\"primary-color text-white\">\n    <tr>\n      <th class=\"w-25\">Title</th>\n      <th class=\"w-25\">Description</th>\n      <th>Tags</th>\n      <th>Author</th>\n      <th>Actions</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr *ngFor=\"let asset of Assets\">\n      <td>{{asset.title}}</td>\n      <td>{{asset.description}}</td>\n      <td><span *ngIf=\"asset.tags?.length > 0\">{{asset.tags.join(\", \")}}</span></td>\n      <td>{{asset.originalCreator}}</td>\n      <td>\n        <button aria-label=\"View\" class=\"btn btn-primary btn-sm\" type=\"button\" tabindex=\"0\" (click)=\"viewAsset(asset)\">\n          <span aria-hidden=\"true\" class=\"fa fa-eye\"></span>\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n","import { Injectable } from \"@angular/core\";\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class ThemeService  {\n  private _isMainContentFluid;\n  private _isStickyFixContainerEnabled;\n\n  constructor() {\n    this._isMainContentFluid = false;\n  }\n\n  public isMainContentFluid() {\n    return this._isMainContentFluid;\n  }\n\n  public setMainContentFluid(isFluid:boolean) {\n    this._isMainContentFluid = isFluid === true;\n  }\n\n  public setStickyFixContainerEnabled(stickyFixEnabled:boolean) {\n    this._isStickyFixContainerEnabled = stickyFixEnabled;\n  }\n\n  public isStickyFixContainerEnabled() {\n    return this._isStickyFixContainerEnabled;\n  }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable } from '@angular/core';\nimport { Assessment } from 'app/shared/models/assessment';\nimport { ScaleResult } from 'app/shared/models/scale-result';\nimport { AssessmentResult } from 'app/shared/models/assessment-result';\n\n@Injectable()\nexport class ScaleResultQuestionFinderService {\n\n  constructor() { }\n\n  public getQuestionsForScaleResult(assessmentResult:AssessmentResult, scaleResult:ScaleResult, depth = 0) {\n    let questionList = [];\n    if (depth > 50) {\n      console.error(\"Max recursive depth reached\");\n      return questionList;\n    }\n    if (this.hasSubScales(scaleResult)) {\n      let subScaleResults = this.getSubScales(assessmentResult, scaleResult);\n      questionList = subScaleResults.map(sr => this.getQuestionsForScaleResult(assessmentResult, sr, depth + 1))\n                    .reduce((prev, curr) => prev.concat(curr), []);\n    }\n    else {\n      questionList = assessmentResult.assessment.getQuestionsForScale(scaleResult.scale);\n    }\n    return questionList;\n  }\n\n  private hasSubScales(scaleResult:ScaleResult) {\n    return scaleResult && scaleResult.scale && scaleResult.scale.hasSubScales();\n  }\n\n  private getSubScales(assessmentResult, scaleResult:ScaleResult) :ScaleResult[]{\n    if (scaleResult.scale.hasSubScales()) {\n      return scaleResult.scale.getSubScaleIds().map(si => assessmentResult.getScaleResultByScaleId(si));\n    }\n    return [];\n  }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\n\n@Component({\n  selector: 'pcl-criteria-icon',\n  templateUrl: './pcl-criteria-icon.component.html'\n})\nexport class PclCriteriaIconComponent implements OnInit {\n  @Input() criteria:string;\n  @Input() checked:boolean;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<span class=\"name\" [ngClass]=\"{'checked': checked}\">{{criteria}}</span>","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable,Inject } from '@angular/core';\nimport * as uuid from \"uuid\";\n\n@Injectable()\nexport class UniqueIdService {\n\n  constructor() { }\n\n  generate() : string {\n    // for now we return nothing.\n    return uuid.v4();\n  }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { ScaleResult } from \"app/shared/models/scale-result\";\nimport { ChartColor } from \"app/assessment-charts/models/chart-color\";\nimport { Injectable } from \"@angular/core\";\n\n@Injectable()\nexport class ScaleResultColorService  {\n\n    private _bgColorsForRangeSize:Map<number, ChartColor[]>;\n    private readonly PURPLE = \"rgba(102,51,204, 1)\";\n    private readonly LIGHT_BLUE = \"rgba(92,141,181, 1)\";\n    private readonly GREEN = \"rgba(102,153,51, 1)\";\n    private readonly ORANGE = \"rgba(204,102,0, 1)\";\n    private readonly RED = \"rgba(204,0,0, 1)\";\n\n    constructor() {\n        this._bgColorsForRangeSize = new Map<number, ChartColor[]>();\n        this._bgColorsForRangeSize.set(1, this.getSingleRange());\n        this._bgColorsForRangeSize.set(2, this.getTwoRange());\n        this._bgColorsForRangeSize.set(3, this.getThreeRange());\n        this._bgColorsForRangeSize.set(4, this.getFourRange());\n        this._bgColorsForRangeSize.set(5, this.getFiveRange());\n    }\n\n    private getSingleRange() {\n        let color = this.LIGHT_BLUE;\n        let singleColor = new ChartColor(\"Score\", color);\n        return [singleColor];\n    }\n\n    private getTwoRange() {\n        let low = new ChartColor(\"Low\", \"rgb(208, 253, 72)\");\n        let high = new ChartColor(\"Severe\", \"rgb(253, 71, 47)\");\n        return [low, high];\n    }\n\n    private getThreeRange() {\n        let low = new ChartColor(\"Low\", \"rgb(208, 253, 72)\");\n        let moderate = new ChartColor(\"Moderate\", \"rgb(231, 162, 60)\");\n        let high = new ChartColor(\"Severe\", \"rgb(253, 71, 47)\");\n        return [low, moderate, high];\n    }\n\n    private getFourRange() {\n        let low = new ChartColor(\"Low\", \"rgb(208, 253, 72)\");\n        let lowModerate = new ChartColor(\"Low-Moderate\", \"rgb(219, 208, 66)\");\n        let moderateHigh = new ChartColor(\"Moderate-Severe\", \"rgb(242, 117, 53)\");\n        let high = new ChartColor(\"Severe\", \"rgb(253, 71, 47)\");\n        return [low, lowModerate, moderateHigh, high];\n    }\n\n    private getFiveRange() {\n        let low = new ChartColor(\"Low\", \"rgb(208, 253, 72)\");\n        let lowModerate = new ChartColor(\"Low-Moderate\", \"rgb(219, 208, 66)\");\n        let moderate = new ChartColor(\"Moderate\", \"rgb(231, 162, 60)\");\n        let moderateHigh = new ChartColor(\"Moderate-Severe\", \"rgb(242, 117, 53)\");\n        let high = new ChartColor(\"Severe\", \"rgb(253, 71, 47)\");\n        return [low, lowModerate, moderate, moderateHigh, high];\n    }\n\n\n    public getBackgroundColors(scaleRangeLength:number) : ChartColor[] {\n        let colors:ChartColor[];\n        switch (scaleRangeLength) {\n            case 1:\n                colors = this.getSingleRange();\n                break;\n            case 2:\n                colors = this.getTwoRange();\n                break;\n            case 3:\n                colors = this.getThreeRange();\n                break;\n            case 4:\n                colors = this.getFourRange();\n                break;\n            case 5:\n                colors = this.getFiveRange();\n                break;\n            case 7:\n                colors = [\n                    new ChartColor(\"Tier 1\", \"rgb(48, 48, 253)\")\n                    ,new ChartColor(\"Tier 2\", \"rgb(48, 150, 253)\")\n                    ,new ChartColor(\"Tier 3\", \"rgb(48, 253, 202)\")\n                    ,new ChartColor(\"Tier 4\", \"rgb(48, 253, 48)\")\n                    ,new ChartColor(\"Tier 5\", \"rgb(253, 253, 48)\")\n                    ,new ChartColor(\"Tier 6\", \"rgb(253, 150, 48)\")\n                    ,new ChartColor(\"Tier 7\", \"rgb(253, 71, 47)\")\n                ];\n                break;\n            default:\n                colors = [];\n\n                // for (var i = 0; i < scaleRangeLength; i++) {\n                //     let initialColor = this.getSingleRange();\n                //     colors.push(initialColor[0]);\n                // }\n                // break;\n        }\n        return colors;\n    }\n\n    private getBackgroundColorForRange(scaleRangeLength:number, rangeIndex:number) {\n        let chartColors = this.getBackgroundColors(scaleRangeLength);\n        if (rangeIndex >= 0 && rangeIndex < chartColors.length) {\n            return chartColors[rangeIndex];\n        }\n        // return the first one.\n        return chartColors[0];\n    }\n\n    public getBackgroundColorForScaleResult(scaleResult:ScaleResult) {\n        let rangeLength = 1;\n        let rangeIndex = 0;\n        if (scaleResult.range && scaleResult.scale\n            && scaleResult.scale.ranges\n            && scaleResult.scale.ranges.length) {\n            let ranges = scaleResult.scale.ranges;\n            rangeLength = ranges.length;\n            rangeIndex = scaleResult.scale.ranges.findIndex(r => r.id == scaleResult.range.id);\n        }\n        return this.getBackgroundColorForRange(rangeLength, rangeIndex);\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { LibraryAsset } from '../models/library-asset';\nimport { Router, ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'dac-exercise-list',\n  templateUrl: './exercise-list.component.html',\n  styleUrls: ['./exercise-list.component.scss']\n})\nexport class ExerciseListComponent implements OnInit,OnDestroy {\n\n  public title:string;\n  public assetType:string;\n  private subscription;\n\n  constructor(private router:Router, private route:ActivatedRoute) { }\n\n  ngOnDestroy(): void {\n   this.subscription.unsubscribe();\n  }\n\n  ngOnInit() {\n    this.subscription = this.route.params.subscribe(params => {\n      let assetType = params['type'];\n      if (assetType == 'articles') {\n        this.assetType = 'article';\n        this.title = \"Article\";\n      }\n      else {\n        this.assetType = 'assignment';\n        this.title = \"Exercise\";\n      }\n    });\n  }\n\n  viewAsset(asset:LibraryAsset) {\n    this.router.navigate([asset.id], {relativeTo: this.route});\n  }\n\n}\n","<div class=\"col-12\">\n  <h1 class=\"h1-responsive\">\n    {{title}} List <a class=\"btn btn-primary\" *hasPermission=\"'SuperUser'\" [routerLink]=\"['new']\">Add New {{title}}</a>\n  </h1>\n  <dac-asset-list [type]=\"assetType\" (selected)=\"viewAsset($event)\"></dac-asset-list>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { AssessmentResult } from '../../../shared/models/assessment-result';\nimport { ScaleResult } from '../../../shared/models/scale-result';\n\n@Component({\n  selector: 'dac-summary-section-graph-item',\n  templateUrl: './summary-section-graph-item.component.html',\n  styleUrls: ['./summary-section-graph-item.component.scss']\n})\nexport class SummarySectionGraphItemComponent implements OnInit {\n  @Input() item:any;\n  @Input() scaleResults:ScaleResult[];\n  @Input() assessmentResult:AssessmentResult;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  get PCLSummaryScaleResult() {\n    if (this.scaleResults && this.scaleResults.length) {\n      return this.scaleResults[0]; // first and only item for the PCL\n    }\n    return null;\n  }\n\n  getRangeNameForFirstScaleResult(scaleResults:ScaleResult[]) {\n    if (scaleResults && scaleResults.length >= 1\n      && scaleResults[0].range) {\n      return scaleResults[0].range.displayName\n    }\n    return \"\";\n  }\n\n  getClasses(item:any) {\n    if (item.chartSize) {\n      let result = \"p-\" + item.chartSize + \"-chart\";\n      return [result];\n    }\n    else {\n      return [\"p-small-chart\"];\n    }\n  }\n\n}\n","<div class=\"card card-cascade h-100\">\n    <div class=\"view gradient-card-header secondary-gradient text-light\">\n        <h3 class='h3-responsive text-center'>{{item.title}}</h3>\n    </div>\n    <div class=\"card-body pt-1 pt-md-3\">\n        <div class=\"row justify-content-center\">\n            <app-summary-scales-chart class=\"col chart\" *ngIf=\"item.type=='SummaryScalesChart'\"\n            [ngClass]=\"getClasses(item)\"\n            [showNames]=\"item.data.showNames\"\n            [chartScaleNames]=\"item.data.chartScaleNames\"\n            [chartRangeNames]=\"item.data.chartRangeNames\"\n            [showRangeScore]=\"item.data.showRangeScore\"\n            [scaleResults]=\"scaleResults\"\n            [reverseDirection]=\"item.data.reverseDirection\"></app-summary-scales-chart>\n            <app-pcl-summary *ngIf=\"item.type=='PCLSummary'\" class=\"col summary-main p-small-chart\" [assessmentResult]=\"assessmentResult\"\n                [summaryScaleResult]=\"PCLSummaryScaleResult\"></app-pcl-summary>\n        </div>\n        <hr *ngIf=\"item.data.showRangeLabel\" class=\"d-print-none\" />\n        <div class=\"row justify-content-center\" *ngIf=\"item.data.showRangeLabel\">\n            <h4>Severity: <strong>{{getRangeNameForFirstScaleResult(scaleResults)}}</strong></h4>\n        </div>\n    </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { ModuleWithProviders, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { ToastComponent } from './toast.component';\n// import { TOAST_CONFIG_TOKEN, defaultToastConfig } from './toast-config';\n\n\n@NgModule({\n  declarations: [ToastComponent],\n  entryComponents: [ToastComponent],\n  imports: [\n    CommonModule\n    ,OverlayModule\n    ,MatIconModule\n  ]\n})\nexport class ToastModule {\n  // public static forRoot(config = defaultToastConfig): ModuleWithProviders<ToastModule> {\n  //   return {\n  //       ngModule: ToastModule,\n  //       providers: [\n  //           {\n  //               provide: TOAST_CONFIG_TOKEN,\n  //               useValue: { ...defaultToastConfig, ...config },\n  //           },\n  //       ],\n  //   };\n  // }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReportViewerComponent } from './report-viewer/report-viewer.component';\nimport { HtmlContentItemComponent } from './report-items/html-content-item/html-content-item.component';\nimport { TextItemComponent } from './text-item/text-item.component';\nimport { ScaleResultsSectionsListComponent } from './report-items/scale-results-sections-list/scale-results-sections-list.component';\nimport { AssessmentChartsModule } from \"../assessment-charts/assessment-charts.module\";\nimport { SharedModule } from \"../shared/shared.module\";\nimport { ComputedScaleComponent } from './report-items/computed-scale/computed-scale.component';\nimport { AddoScaleResultsComponent } from './report-items/addo-scale-results/addo-scale-results.component';\nimport { ReportService } from './services/report.service';\nimport { ScaleSummaryComponent } from './scale-summary/scale-summary.component';\nimport { ScaleResultsSummaryComponent } from './report-items/scale-results-summary/scale-results-summary.component';\nimport { TherapistScaleResultsComponent } from './report-items/therapist-scale-results/therapist-scale-results.component';\nimport { ScaleQuestionsListComponent } from './scale-questions-list/scale-questions-list.component';\nimport { FlaggedQuestionsListComponent } from './report-items/flagged-questions-list/flagged-questions-list.component';\nimport { PclSummaryComponent } from './pcl-summary/pcl-summary.component';\nimport { ScaleResultsTableSummaryComponent } from './scale-results-table-summary/scale-results-table-summary.component';\nimport { ReportNavigatorService } from './services/report-navigator.service';\nimport { ScaleRangeContentComponent } from './scale-range-content/scale-range-content.component';\nimport { PclAssessmentResultsComponent } from './report-items/pcl-assessment-results/pcl-assessment-results.component';\nimport { PclCriteriaIconComponent } from './pcl-criteria-icon/pcl-criteria-icon.component';\nimport { PclGraderService } from './services/pcl-grader.service';\nimport { AssessmentQuestionsListComponent } from './report-items/assessment-questions-list/assessment-questions-list.component';\nimport { PrintDialogComponent } from './print-dialog/print-dialog.component';\nimport { AssessmentResultViewComponent } from 'app/reports/assessment-result-view/assessment-result-view.component';\nimport { LoginModule } from '../login/login.module';\nimport { ScaleSubListComponent } from './scale-sub-list/scale-sub-list.component';\nimport { SummarySectionGraphItemComponent } from './report-items/summary-section-graph-item/summary-section-graph-item.component';\nimport { ClientAssessmentResultViewComponent } from './client-assessment-result-view/client-assessment-result-view.component';\nimport { QuestionActionService } from './services/question-action.service';\nimport { QuestionActionListComponent } from './report-items/question-action-list/question-action-list.component';\nimport { ScaleResultQuestionFinderService } from './services/scale-result-question-finder.service';\nimport { ClientScaleResultsComponent } from './report-items/client-scale-results/client-scale-results.component';\nimport { FlaggedQuestionsListSimpleComponent } from './report-items/flagged-questions-list-simple/flagged-questions-list-simple.component';\nimport { AssetResultViewComponent } from './asset-result-view/asset-result-view.component';\nimport { LibraryAssetsModule } from 'app/library-assets/library-assets.module';\nimport { ReportViewerContainerComponent } from './report-reviewer-container/report-viewer-container.component';\nimport { QuestionnaireResultViewComponent } from './questionnaire-result-view/questionnaire-result-view.component';\nimport { PeerClinicResultViewerComponent } from './peer-clinic-result-viewer/peer-clinic-result-viewer.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule\n   ,SharedModule\n   ,LoginModule\n   ,LibraryAssetsModule\n    ,AssessmentChartsModule\n  ],\n  entryComponents: [ PrintDialogComponent ],\n  declarations: [    ReportViewerComponent, HtmlContentItemComponent, TextItemComponent, ScaleResultsSectionsListComponent\n    , ComputedScaleComponent, AddoScaleResultsComponent, ScaleSummaryComponent, ScaleResultsSummaryComponent\n    , TherapistScaleResultsComponent, ScaleQuestionsListComponent, FlaggedQuestionsListComponent\n    , PclSummaryComponent, ScaleResultsTableSummaryComponent, ScaleRangeContentComponent\n    , PclAssessmentResultsComponent, PclCriteriaIconComponent, AssessmentQuestionsListComponent, PrintDialogComponent\n    ,AssessmentResultViewComponent, ScaleSubListComponent, SummarySectionGraphItemComponent\n    , ClientAssessmentResultViewComponent, QuestionActionListComponent, ClientScaleResultsComponent\n    , FlaggedQuestionsListSimpleComponent, AssetResultViewComponent, ReportViewerContainerComponent\n    , QuestionnaireResultViewComponent, PeerClinicResultViewerComponent ]\n  ,exports: [ReportViewerComponent, AssessmentResultViewComponent, AssetResultViewComponent, ReportViewerContainerComponent, QuestionnaireResultViewComponent ]\n\n  , providers: [ReportService, ReportNavigatorService, PclGraderService,\n    ClientAssessmentResultViewComponent, QuestionActionService, ScaleResultQuestionFinderService]\n})\nexport class ReportsModule { }\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SharedModule } from 'app/shared/shared.module';\nimport { AssetService } from './services/asset.service';\nimport { ArticleComponent } from './article/article.component';\nimport { ExerciseComponent } from './exercise/exercise.component';\nimport { AssetPickerComponent } from './asset-picker/asset-picker.component';\nimport { AssetListComponent } from './asset-list/asset-list.component';\nimport { ExerciseListComponent } from './exercise-list/exercise-list.component';\nimport { AdminViewAssetComponent } from './admin-view-asset/admin-view-asset.component';\nimport { RouterModule } from '@angular/router';\nimport { LoginModule } from 'app/login/login.module';\nimport { AssetNewComponent } from './asset-new/asset-new.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  imports: [\n    CommonModule\n    ,FormsModule\n    ,ReactiveFormsModule\n    ,RouterModule\n    ,SharedModule\n    ,LoginModule\n  ],\n  declarations: [ArticleComponent, AssetPickerComponent, ExerciseComponent, AssetListComponent, ExerciseListComponent, AdminViewAssetComponent, AssetNewComponent]\n  ,providers: []\n  ,exports: [ArticleComponent, AssetPickerComponent, ExerciseComponent, ExerciseListComponent, AdminViewAssetComponent]\n})\nexport class LibraryAssetsModule { }\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { Item } from '../../admin/models/item';\nimport { ShoppingService } from '../services/shopping.service';\nimport { AlertService } from 'app/shared/services/alert.service';\nimport { Router, ActivatedRoute, OutletContext } from '@angular/router';\nimport {debounce} from \"lodash\";\n\n@Component({\n  selector: 'dac-buy-item-button',\n  templateUrl: './buy-item-button.component.html',\n  styleUrls: ['./buy-item-button.component.scss']\n})\nexport class BuyItemButtonComponent implements OnInit {\n\n  @Input() item:{uid?:string, id?:number, name:string};\n  @Output() click = new EventEmitter<{uid?:string, id?:number, name:string}>();\n  public buying:boolean;\n\n  constructor(private shoppingService:ShoppingService\n    , private alertService:AlertService\n    , private router:Router\n    , private activeRoute:ActivatedRoute) { }\n\n  ngOnInit() {\n  }\n\n  public buyItem(event:Event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    // let listener's know we were clicked with our item.\n    this.click.emit(this.item);\n\n    let alert = this.alertService.info(\"Adding \" + this.item + \" to shopping cart\");\n    this.buying = true;\n    let shoppingItem;\n    if (this.item.uid) {\n      shoppingItem = this.shoppingService.getItemForAssessment({uid: this.item.uid});\n    }\n    else {\n      shoppingItem = this.shoppingService.getItemForAssessmentGroup({id: this.item.id, name: this.item.name});\n    }\n\n    shoppingItem.then(i => {\n      this.alertService.clearAlert(alert);\n      alert = null;\n      i.quantity = 1; // make sure we have at least one item to add.\n      return this.shoppingService.addItemToCart(i);\n    })\n    .then(() => {\n      this.buying = false;\n      this.shoppingService.startSingleCheckoutOrder(this.router.url);\n      this.router.navigateByUrl('/admin/shop/checkout');\n    })\n    .catch(error => {\n      this.buying = false;\n      console.error(error);\n      if (alert) {\n        this.alertService.clearAlert(alert);\n      }\n      this.alertService.error(\"There was an error in attempting to purchase this item.  Please try again or contact support\");\n    });\n  }\n\n}\n","<button class=\"badge badge-primary badge-pill btn btn-sm btn-primary\" alt=\"Buy Tokens\" \n  title=\"Buy Tokens\" (click)=\"buyItem($event)\" [disabled]=\"buying\">Buy</button> ","import { AfterViewInit, Component, ComponentFactoryResolver, ComponentRef, ElementRef, Input, OnChanges, OnDestroy, OnInit, SimpleChanges, ViewChild, ViewContainerRef } from \"@angular/core\";\nimport { AssessmentResult } from \"app/shared/models/assessment-result\";\nimport { IReport, QuestionnaireAssessmentMapping } from \"../models/i-report\";\nimport { NavBarService } from \"app/theme/services/nav-bar.service\";\nimport { Assessment } from \"app/shared/models/assessment\";\nimport { ScaleResult } from \"app/shared/models/scale-result\";\nimport { ResultComputation } from \"../models/result-computation\";\nimport { HtmlContentItemComponent } from \"../report-items/html-content-item/html-content-item.component\";\nimport { ScaleResultsSectionsListComponent } from \"../report-items/scale-results-sections-list/scale-results-sections-list.component\";\nimport { AddoScaleResultsComponent } from \"../report-items/addo-scale-results/addo-scale-results.component\";\nimport { ComputedScaleComponent } from \"../report-items/computed-scale/computed-scale.component\";\nimport { ScaleResultsSummaryComponent } from \"../report-items/scale-results-summary/scale-results-summary.component\";\nimport { TherapistScaleResultsComponent } from \"../report-items/therapist-scale-results/therapist-scale-results.component\";\nimport { FlaggedQuestionsListComponent } from \"../report-items/flagged-questions-list/flagged-questions-list.component\";\nimport { FlaggedQuestionsListSimpleComponent } from \"../report-items/flagged-questions-list-simple/flagged-questions-list-simple.component\";\nimport { PclAssessmentResultsComponent } from \"../report-items/pcl-assessment-results/pcl-assessment-results.component\";\nimport { AssessmentQuestionsListComponent } from \"../report-items/assessment-questions-list/assessment-questions-list.component\";\nimport { QuestionActionListComponent } from \"../report-items/question-action-list/question-action-list.component\";\nimport { ClientScaleResultsComponent } from \"../report-items/client-scale-results/client-scale-results.component\";\nimport { TextItemComponent } from \"../text-item/text-item.component\";\nimport { IReportItemComponent } from \"../models/i-report-item-component\";\nimport { UniqueIdService } from \"app/shared/services/unique-id.service\";\nimport { SsoCrossDomainMessenger } from \"app/shared/services/sso-cross-domain-messenger\";\nimport { AssessmentHydrator } from \"app/shared/services/assessment-hydrator.service\";\nimport { DacConfig } from \"app/shared/services/dac-config.service\";\nimport {Variable} from \"../models/variable\";\nimport { NavBarItem } from \"app/theme/models/nav-bar-item\";\n\n/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n@Component({\n  selector: 'dac-report-viewer-container',\n  templateUrl: './report-viewer-container.component.html',\n  host: {'class': 'containerReference'}\n})\nexport class ReportViewerContainerComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input(\"results\") results:AssessmentResult[];\n  @Input(\"questionnaireResults\") questionnaireResults:any[];\n  @Input(\"report\") report:IReport;\n  @Input(\"clientId\") clientId:string;\n  @Input(\"showTitle\") showTitle:boolean;\n  @ViewChild(\"container\", { read: ViewContainerRef }) container;\n\n  private componentItems:ComponentRef<IReportItemComponent>[];\n  private componentItemsById:Map<string, ComponentRef<IReportItemComponent>>;\n  public hasLoadedResults:boolean;\n\n  private _reportItemClassNames = [\"report-item-component\"];\n\n  constructor(private resolver: ComponentFactoryResolver\n    ,private navBarService:NavBarService\n    ,private uniqueIdService:UniqueIdService\n    ,private crossDomainMessenger:SsoCrossDomainMessenger\n    ,private hydrator:AssessmentHydrator\n    ,private elementRef:ElementRef\n    ,private dacConfig:DacConfig\n    ) {\n    this.componentItems = [];\n    this.componentItemsById = new Map<string, ComponentRef<IReportItemComponent>>();\n    this.hasLoadedResults = false;\n    }\n\n    ngAfterViewInit(): void {\n      let reportVariables = this.report.variables || [];\n      let reportComputedVariables = this.report.computedResults || [];\n      let results = this.results;\n      if(this.report.questionnaireMappings && this.report.linkedQuestionnaires) {\n        this.results = this.processQuestionnaireMappings(this.report.questionnaireMappings, this.report.linkedQuestionnaires, this.results);\n      }\n      let processedResults = this.processReportComputations(reportComputedVariables, this.results);\n      let variables = this.resolveVariables(reportVariables, processedResults, this.clientId);\n      console.log(\"variables: \", variables);\n      if (!this.report.items) {\n        return; // nothing else to do here.\n      }\n      this.report.items.forEach((i) => {\n        if (i.display === false) {  // if we've disabled / hidden this item we want to skip over it.\n          return;\n        }\n        let component = this.createComponent(i.type, i.data, processedResults, variables);\n        let componentId = this.uniqueIdService.generate();\n        this.componentItems.push(component);\n        this.componentItemsById.set(componentId, component);\n        this.addComponentToNavBar(i, componentId);\n      });\n\n      // console.log(\"Component item counts are: \", this.componentItems.length);\n      Promise.all(this.componentItems.map(ci => {\n        return ci.instance.itemLoaded().toPromise()\n      })).then(items => {\n        // fire off event on the dom\n        // we need to let outside listeners like the server pdf generator know we have finished loading so we can generate the report\n        console.log(\"adding dac-report-loaded class\");\n        document.body.classList.add(\"dac-report-loaded\");\n        // this.elementRef.nativeElement.dispatchEvent(new Event(\"dac-report-loaded\", {bubbles:true}));\n        this.hasLoadedResults = true;\n        this.handleLoadedResize();\n      })\n      .catch((error) => {\n        console.error(error);\n        // console.log(\"dispatching dac-report-load-failed event\");\n        // this.elementRef.nativeElement.dispatchEvent(new Event(\"dac-report-load-failed\", {bubbles:true}));\n        this.hasLoadedResults = true;\n      });\n    }\n\n  ngOnChanges(changes: SimpleChanges): void {\n\n    console.log(\"Changes detected\");\n  }\n\n  ngOnDestroy(): void {\n    this.navBarService.clearReportSidebar();\n  }\n  ngOnInit(): void {\n    console.log(\"inside ngOnInit\");\n\n  }\n\n  private processQuestionnaireMappings(mappings:QuestionnaireAssessmentMapping, questionnaires:string[], results:AssessmentResult[]) {\n    return results;\n  }\n\n  private handleLoadedResize() {\n    let element = this.elementRef.nativeElement as HTMLElement;\n\n    let height = element.ownerDocument.body.scrollHeight;\n    let width = element.ownerDocument.body.scrollWidth;\n    this.crossDomainMessenger.sendMessage('dac.report-loaded', {height: height, width: width, reportId: this.report.id});\n  }\n\n  private processReportComputations(computed_results:ResultComputation[], results:AssessmentResult[]) {\n\n    if (!computed_results || !computed_results.length) {\n      return results;\n    }\n    let newResults:AssessmentResult[];\n    newResults = computed_results.map(cs => {\n      let result = new AssessmentResult();\n      // make the result and the assessment the same... then we can just refer to the assessment by the uid\n      // and all our code works the same...\n      result.id = cs.id;\n      result.assessment = new Assessment();\n      result.assessment.uid = cs.id;\n      result.assessment.description = cs.description;\n      result.assessment.name = cs.name;\n      result.scaleResults.push(this.createScaleResultFromComputation(cs, results));\n\n      return result;\n    });\n    return results.concat(newResults);\n  }\n  private createScaleResultFromComputation(computation:ResultComputation, results) {\n    let scaleResult = new ScaleResult();\n      if (computation.scale) {\n        scaleResult.scale = this.hydrator.hydrateScale(computation.scale);\n      }\n      // calculation, assessments\n      if (computation.items) {\n        computation.items.forEach(i => this.processCalculation(scaleResult, i, computation.calculation, results));\n        console.log(\"score is \", scaleResult.score);\n        scaleResult.range = scaleResult.scale.getRangeForScore(scaleResult.score);\n        console.log(\"new range is \", scaleResult.range);\n      }\n      return scaleResult;\n  }\n\n  private resolveVariables(variables:any[], results:AssessmentResult[], clientId:string) : Variable[] {\n    let resolved:Variable[] = [];\n    resolved = variables.map(v => {\n      if (!v.type || !v.value) {\n        return null;\n      }\n      var value = null;\n      if (v.type == 'computed_scale_result') {\n        return this.resolveComputedScale(v, results);\n      }\n      else if (v.type == 'scale_result') {  // this is actually the range... not the scaleResult\n        return this.resolveResultScale(v, results);\n      }\n      else if (v.type == 'scale') {\n        return this.resolveScale(v, results);\n      }\n    }).filter(v => v != null);\n    resolved.push({id: \"ClientToken\", value: clientId})\n    resolved.push({id: \"reportTitle\", value: this.report.name});\n    resolved.push({id: \"logoURL\", value: this.dacConfig.applicationLogoUrl});\n    resolved.push({id: \"reportHeaderImgURL\", value: this.dacConfig.reportHeaderImgURL});\n    return resolved;\n  }\n  private resolveResultScale(variableData:any, results:AssessmentResult[]) {\n    let result = results.find(r => r.assessment.uid == variableData.assessmentUid);\n    return this.resolveVariableFromResult(variableData, result);\n  }\n  private resolveScale(variableData:any, results:AssessmentResult[]) {\n    let result = results.find(r => r.assessment.uid == variableData.assessmentUid);\n    if (result) {\n      let scaleResult = result.scaleResults.find(sr => sr.scale.id == variableData.scale);\n      let value = scaleResult.scale[variableData.value];\n      if (value) {\n        return {id: variableData.id, value: value};\n      }\n    }\n    return null;\n  }\n  private resolveVariableFromResult(variableData:any, result:AssessmentResult) {\n    if (result) {\n      let scaleResult = result.scaleResults.find(sr => sr.scale.id == variableData.scale);\n      let value;\n      if (variableData.value == 'score') {\n        value = scaleResult.score;\n      }\n      else if (variableData.value == 'scorePercentage') {\n        value = scaleResult.scorePercentage;\n      }\n      else {\n        value = scaleResult.range[variableData.value];\n      }\n\n      if (value) {\n        return {id: variableData.id, value: value};\n      }\n    }\n    return null;\n  }\n  private resolveComputedScale(variableData:any, results:AssessmentResult[]) {\n    let result = results.find(r => r.id == variableData.computedResultId);\n   return this.resolveVariableFromResult(variableData, result);\n  }\n\n  private processCalculation(scaleResult:ScaleResult, item:any, calculation:string, results:AssessmentResult[]) {\n    let result = results.find(r => r.assessment.uid == item.assessmentUid);\n    let processScaleResult = result ? result.scaleResults.find(sr => sr.scale.id == item.scaleId) : null;\n    if (!(result && processScaleResult)) {\n      return;\n    }\n    if (calculation === \"SUM\") {\n      scaleResult.score += processScaleResult.score;\n    }\n  }\n  createComponent(type, data, results:AssessmentResult[], variables:Variable[]) : ComponentRef<IReportItemComponent> {\n    let component = this.getComponentFromType(type);\n    let factory = this.resolver.resolveComponentFactory(component);\n    let componentRef = this.container.createComponent(factory);\n    let reportItemComponent = componentRef.instance as IReportItemComponent;\n    reportItemComponent.setReportData(data, results, variables);\n\n    // add the specific classes for report items here\n    if (componentRef.location && componentRef.location.nativeElement) {\n      let reportItemClassNames = reportItemComponent.getHTMLClassNames() || [];\n      let classNameString = this._reportItemClassNames.concat(reportItemClassNames).join(\" \");\n      let el = componentRef.location.nativeElement as Element;\n      el.className = classNameString;\n    }\n\n    return componentRef;\n  }\n\n  private goToNavItem(item:NavBarItem) {\n    // TODO: stephen use the navigator service instead of this one.\n    if (!this.componentItemsById.has(item.id)) {\n      console.error(\"tried to navigate to missing component with item id \" + item.id);\n      return;\n    }\n\n    let component = this.componentItemsById.get(item.id);\n    let element = component.location.nativeElement;\n    if (element) {\n      // TODO: stephen change out this hack to accomodate the fixed navbar at the top.\n      let navBar = document.querySelector(\"#dac-navbar\");\n      let navBarHeight = 0;\n      if (!navBar) {\n        console.error(\"Failed to find dac-navbar element in DOM.  Cannot include height into navbar calculations\");\n      } else {\n        navBarHeight = navBar.clientHeight;\n      }\n\n\n      // adapted from https://stackoverflow.com/a/13857312\n      element.scrollIntoView(true);\n      var scrolledY = window.scrollY;\n\n      if(scrolledY){\n        window.scroll(0, scrolledY - navBarHeight);\n      }\n    }\n  }\n\n  private addComponentToNavBar(data, componentId) {\n    if (data.title && componentId) {\n      this.navBarService.addReportNavBarItem(componentId, data.title);\n\n      // let hasIcon = false;\n      // let iconClasses = data.titleIconClasses;\n      // if (iconClasses) {\n      //   hasIcon = true;\n      // }\n      // this.menuItems.push({id: componentId, name: data.title, hasIcon:hasIcon, iconClasses:iconClasses});\n    }\n  }\n\n  private getComponentFromType(type:string) {\n    var component = null;\n    switch (type)\n    {\n      case 'HTMLContentItem': {\n\n        component = HtmlContentItemComponent;\n      }\n      break;\n      case 'ScaleResultsSectionsList': {\n        component = ScaleResultsSectionsListComponent;\n      }\n      break;\n      case 'AddoScaleResults': {\n        component = AddoScaleResultsComponent;\n      }\n      break;\n      case 'ComputedScale': {\n        component = ComputedScaleComponent;\n      }\n      break;\n      case 'ScaleResultsSummary': {\n        component = ScaleResultsSummaryComponent;\n      }\n      break;\n      case 'TherapistScaleResults': {\n        component = TherapistScaleResultsComponent;\n      }\n      break;\n      case 'FlaggedQuestionsList': {\n        component = FlaggedQuestionsListComponent;\n      }\n      break;\n      case 'FlaggedQuestionsListSimple': {\n        component = FlaggedQuestionsListSimpleComponent;\n      }\n      break;\n      case 'PclAssessmentResults': {\n        component = PclAssessmentResultsComponent;\n      }\n      break;\n      case 'AssessmentQuestionsList': {\n        component = AssessmentQuestionsListComponent;\n      }\n      break;\n      case 'QuestionActionList': {\n        component = QuestionActionListComponent;\n      }\n      break;\n      case 'ClientScaleResults': {\n        component = ClientScaleResultsComponent;\n      }\n      break;\n      default: {\n        component = TextItemComponent;\n      }\n      break;\n    }\n    return component;\n  }\n\n}\n","<div *ngIf=\"showTitle\" class=\"row report-controls\">\n  <div class=\"col-12 text-center\">\n      <h1 class=\"h1-responsive report-name text-center\">{{ReportName}}</h1>\n  </div>\n</div>\n<ng-container #container></ng-container>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class Pako {\n    private _pako?:any;\n\n    constructor() {\n        if (window['pako']) {\n            this._pako = window['pako'];\n        }\n    }\n    gzip(data:string) : Uint8Array {\n        if (this._pako) {\n \n           return this._pako.gzip(data);\n        }\n\n        throw new Error(\"Pako service not available\");\n    }\n}","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PageNotFoundComponent } from \"./theme/page-not-found/page-not-found.component\";\nimport { AuthGuard } from './login/services/auth-guard.service';\nimport { AuthGuardLogin } from './login/services/auth-guard-login.service';\nimport { AppComponent } from './app.component';\nimport { StandaloneContainerComponent } from './theme/standalone-container/standalone-container.component';\nimport { AdminGuard } from './login/services/admin-guard.service';\nimport { AdminLoginComponent } from './login/admin-login/admin-login.component';\nimport { AdminLoginFinalizeComponent } from './login/admin-login-finalize/admin-login-finalize.component';\nimport { AdminLoginPageComponent } from './theme/admin-login-page/admin-login-page.component';\nimport { AdminLoginFinalizePageComponent } from './theme/admin-login-finalize-page/admin-login-finalize-page.component';\n\nconst routes: Routes = [\n  { path: '',\n    redirectTo: '/login'\n    ,pathMatch: 'full'\n    // component: PageNotFoundComponent, // never used as our AuthGuardLogin will redirect based on the SMART app configuration\n    // this is a dummy guard that we just use to redirect based on login state to admin or assessments\n  },\n  // { path: 'help', redirectTo: '/home/help', pathMatch: 'full' },\n  // { path: 'baa', redirectTo: '/home/baa', pathMatch: 'full' },\n  // { path: 'privacy', redirectTo: '/home/privacy', pathMatch: 'full' },\n  // { path: 'terms-and-conditions', redirectTo: '/home/terms-and-conditions', pathMatch: 'full' },\n  // { path: 'home', 'loadChildren': () => import('./home/home.module').then(m => m.HomeModule)},\n  { path: 'ehr', data: {'modulePath': '/ehr'}, 'loadChildren': () => import('./ehr/ehr.module').then(m => m.EhrModule)},\n  { path: 'std', component: StandaloneContainerComponent, children: [\n    { path: 'admin',canActivate: [AdminGuard], data: {'modulePath': '/std/admin'}, 'loadChildren': () => import('./admin/admin.module').then(m => m.AdminModule)},\n    { path: 'assessments', canActivate: [AuthGuardLogin], data: {'modulePath': '/std/assessments'}, 'loadChildren': () => import('./assessments/assessments.module').then(m => m.AssessmentsModule)},\n  ]}\n  ,{ path: 'login', component: AdminLoginPageComponent}\n  ,{ path: 'loginFinalize', component: AdminLoginFinalizePageComponent}\n  ,{ path: 'logout', redirectTo: '/login', pathMatch: 'full' }\n  ,{ path: '**', component: PageNotFoundComponent }\n];\n\n@NgModule({\n  imports: [\n    CommonModule\n    ,RouterModule.forRoot(routes, {enableTracing: false})\n  ],\n  exports: [ RouterModule ],\n  declarations: []\n})\nexport class AppRoutingModule { }\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { Routes,RouterModule } from '@angular/router';\nimport { SignupComponent } from \"./signup/signup.component\";\n\nconst companyRoutes: Routes = [\n    {path: 'register',children: [\n    {path: '', component: SignupComponent}\n    ]}\n  ];\n@NgModule({\n  imports: [\n    RouterModule.forChild(companyRoutes)\n  ],\n  exports: [\n    RouterModule\n  ]\n})\nexport class CompaniesRoutingModule {}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Assignment } from \"./Assignment\";\nimport { AssignedAssessment } from \"./AssignedAssessment\";\nimport { AssignmentItem } from \"./AssignmentItem\";\n\nexport class AssignedTemplateProfile extends Assignment\n{\n    private profileId:string|null;\n    private name:string;\n\n    public constructor() {\n        super();\n        this.Type = \"TemplateProfile\";\n    }\n\n    public get ProfileId() : string {\n        return this.profileId;\n    }\n    public set ProfileId(v:string) {\n        this.profileId = v;\n    }\n\n    public getQuestionnaireItems() : AssignmentItem[] {\n        return this.Items.filter(i => i.Type == \"Questionnaire\" || i.Type == \"ExternalQuestionnaire\")\n                .map(i => i as AssignedAssessment);\n    }\n\n    public get Name(): string {\n        return this.name;\n    }\n    public set Name(v: string) {\n        this.name = v;\n    }\n\n    public get isGroup() {\n      return true;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable }             from '@angular/core';\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot }    from '@angular/router';\nimport { AuthService }            from './auth.service';\nimport { Role } from 'app/shared/models/role';\n\n@Injectable()\nexport class AuthGuard implements CanActivate {\n    constructor(private authService: AuthService, private router: Router) {}\n\n      canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n        return this.authService.getCurrentUser()\n        .then(user => {\n            if (user && user.role === Role.Client) {\n                return true;\n            }\n            else {\n              let prefix = route.data['modulePath'] || '';\n              this.router.navigate([prefix + '/login'], {\n                  queryParams: {\n                      return: state.url\n                  }\n              });\n              return false;\n            }\n        }).catch (error => {\n          let prefix = route.data['modulePath'] || '';\n            this.router.navigate([prefix + '/login'], {\n              queryParams: {\n                  return: state.url\n              }\n          });\n\n          return false;\n        });\n      }\n\n    canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {\n        return this.canActivate(route, state);\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {QuestionSetLabel} from \"./question-set-label\";\nimport {Scale} from \"./scale\";\nimport { QuestionType } from \"./question-type\";\nimport { FlaggedCondition } from \"app/shared/models/flagged-condition\";\n\nexport abstract class Question\n{\n\tprivate _id:string;\n\tprivate _prompt:string;\n\tprivate _type:QuestionType;\n\tprivate _display_order:number;\n\tprivate _is_reversed:boolean;\n\tprivate _scale:Scale;\n\n\tprivate _skip_scoring:boolean;\n\tprivate _display_index:number;\n\tprivate _flaggedCondition:FlaggedCondition;\n\tprivate _is_flagged:boolean;\n\t/**\n\t * The score that was calculated for this individual question if applicable.\n\t */\n\tprivate _computedScore:number;\n\n\tconstructor() {\n\t\tthis.id = null;\n\t\tthis.prompt = \"\";\n\t\tthis.display_order = 0;\n\t\tthis.is_reversed = false;\n\t\tthis.assessment_scale = null;\n\t\tthis.skip_scoring = false;\n\t\tthis._display_index = 0;\n\t\tthis._flaggedCondition = null;\n\t\tthis.isFlaggedForReview = false;\n\t\tthis._computedScore = null;\n\t}\n\n\tpublic get type() : QuestionType {\n\t\treturn this._type;\n\t}\n\tpublic set type(v:QuestionType) {\n\t\tthis._type = v;\n\t}\n\n\tpublic get display_index() : number {\n\t\treturn this._display_index;\n\t}\n\n\tpublic set display_index(v:number) {\n\t\tthis._display_index = v;\n\t}\n\n\tpublic get id() : string {\n\t\treturn this._id;\n\t}\n\n\tpublic set id(v : string) {\n\t\tthis._id = v;\n\t}\n\n\n\tpublic get prompt() : string {\n\t\treturn this._prompt;\n\t}\n\n\tpublic set prompt(v : string) {\n\t\tthis._prompt = v;\n\t}\n\n\tpublic get display_order() : number {\n\t\treturn this._display_order;\n\t}\n\n\tpublic set display_order(v : number) {\n\t\tthis._display_order = v;\n\t}\n\n\tpublic get is_reversed() : boolean {\n\t\treturn this._is_reversed;\n\t}\n\n\tpublic set is_reversed(v : boolean) {\n\t\tthis._is_reversed = v;\n\t}\n\n\tpublic get skip_scoring() : boolean {\n\t\treturn this._skip_scoring;\n\t}\n\n\tpublic set skip_scoring(v : boolean) {\n\t\tthis._skip_scoring = v;\n\t}\n\n\tpublic get assessment_scale() : Scale {\n\t\treturn this._scale;\n\t}\n\n\tpublic set assessment_scale(v : Scale) {\n\t\tthis._scale = v;\n\t}\n\n\n  public get scale() : Scale {\n    return this._scale;\n  }\n  public set scale(v:Scale) {\n    this._scale = v;\n  }\n\n\tpublic get hasFlagCondition(): boolean {\n\t\treturn this._flaggedCondition != null;\n\t}\n\n\tpublic get flaggedCondition(): FlaggedCondition {\n\t\treturn this._flaggedCondition;\n\t}\n\n\tpublic set flaggedCondition(value: FlaggedCondition) {\n\t\tthis._flaggedCondition = value;\n\t}\n\n\tpublic abstract get answerDisplayText();\n\n\tpublic abstract get answerForSave();\n\n\tpublic abstract setSavedAnswer(data:any, labels:QuestionSetLabel[]);\n\n\tpublic abstract hasAnswer(answer:any);\n\n\tpublic setComputedScore(v:number) {\n\t\tthis._computedScore = v;\n\t}\n\tpublic getComputedScore() {\n\t\treturn this._computedScore;\n\t}\n\n\tpublic abstract get isFilledOut() : boolean;\n\n\tpublic get isFlaggedForReview() {\n\t\treturn this._is_flagged;\n\t}\n\n\tpublic set isFlaggedForReview(v:boolean) {\n\t\tthis._is_flagged = v;\n\t}\n\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { BillingCard } from '../models/billing-card';\n\n@Component({\n  selector: 'dac-billing-card',\n  templateUrl: './billing-card.component.html',\n  styleUrls: ['./billing-card.component.scss']\n})\nexport class BillingCardComponent implements OnInit {\n\n  // TODO: stephen go through and add the card images here.\n  @Input() card:BillingCard;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","{{card.brand}} XXXX-XXXX-XXXX-XXXX-{{card.last4}}","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-page-not-found',\n  templateUrl: './page-not-found.component.html',\n  styleUrls: ['./page-not-found.component.css']\n})\nexport class PageNotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<div class=\"container pt-5 pb-5\">\n  <div class=\"row\">\n    <div class=\"col\">\n      <h2>404: Page not found</h2>\n    </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class Client {\n    public id:string;\n    public customField1: string;\n\n    constructor() {\n        this.id = \"\";\n        this.customField1 = \"\";\n    }\n\n    getDisplayId() {\n        if (this.customField1) {\n            return this.customField1;\n \n       }\n        else {\n            return this.id;\n        }\n    }\n}","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {IReportItemComponent} from '../../models/i-report-item-component';\nimport { Component, OnInit } from '@angular/core';\nimport { ScaleResultsSectionsListComponent } from '../scale-results-sections-list/scale-results-sections-list.component';\nimport { AssessmentResult } from \"../../../shared/models/assessment-result\";\nimport { Variable } from \"../../models/variable\";\n\n@Component({\n  selector: 'app-addo-scale-results',\n  templateUrl: './addo-scale-results.component.html'\n})\nexport class AddoScaleResultsComponent extends ScaleResultsSectionsListComponent implements OnInit, IReportItemComponent {\n  private _scales_per_page:number;\n  private _pageBreaks:number[];\n  private _skipGraph:boolean;\n  private _skipContent:boolean;\n  private _skipTable:boolean;\n\n  constructor() {\n    super()\n    this._pageBreaks = [];\n    this._skipTable = false;\n    this._skipContent = false;\n    this._skipGraph = false;\n  }\n\n  ngOnInit() {\n  }\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n\n\n  get SkipContent() : boolean {\n    return this._skipContent;\n  }\n\n  get SkipGraph() : boolean {\n    return this._skipGraph;\n  }\n\n  get SkipTable() : boolean {\n    return this._skipTable;\n  }\n\n\n  public getHTMLClassNames() : string[] {\n    return [\"scale-results\", \"report-item-component\", \"flex-column\"];\n  }\n\n  public setReportData(data:any, results:AssessmentResult[], variables:Variable[]) {\n    super.setReportData(data, results, variables);\n    if (data && data.scales_per_page) {\n      this._scales_per_page = +data.scales_per_page;\n    }\n    else if (this.ScaleResults) {\n      // this makes it so we never force a page break here.\n      this._scales_per_page = this.ScaleResults.length + 1;\n    }\n    else {\n      console.error(\"No scales found for component\");\n      this._scales_per_page = 0;\n    }\n\n    if (data.pageBreaks && data.pageBreaks.length > 0) {\n      this._pageBreaks = data.pageBreaks.map(pb => +pb).filter(pb => !isNaN(pb));\n    }\n    else {\n      this._pageBreaks = [];\n    }\n\n    if (data) {\n      this._skipTable = data.skipTable == true;\n      this._skipGraph = data.skipGraph == true;\n      this._skipContent = data.skipContent == true;\n    }\n\n  }\n\n  // shouldPrintBreak(0), showPageHeader(0), scales_per_page = 2\n  // index=0: false, false -> should be false, false\n  // index=1: true, true  -> should be true, false\n  // index=2: false, false -> should be false, true\n\n  // shouldPrintBreak(0), showPageHeader(0), scales_per_page = 2, scales_per_page=3\n  // index=0: false, false => should be false, false\n  // index=1: false, false => should be false, false\n  // index=2: true, true, should be true, false\n  // index=3: false, false -> should be false, true\n\n  public showPageHeader(index:number) {\n    if (index == 0) {\n      return false;\n    }\n\n    if (this._pageBreaks && this._pageBreaks.length > 0) {\n      return this._pageBreaks.indexOf(index) >= 0;\n    }\n\n   // since index is 0 based the the user scales per page is 1 based we convert.\n    let pageBreakIndex = (index + 1) - this._scales_per_page;\n    if (index < 0) {\n      return false;\n    }\n    else if (index % this._scales_per_page == 0) {\n      return true;\n    }\n    else {\n      return false;\n    }\n  }\n\n  get ScalesPerPage() {\n    return this._scales_per_page;\n  }\n\n  get IsSingleScaleResult() {\n    let isSingle = this.ScaleResults && this.ScaleResults.length == 1;\n    return isSingle;\n  }\n\n  get SingleScaleResult() {\n    if (this.ScaleResults && this.ScaleResults[0]) {\n      return this.ScaleResults[0];\n    }\n    return null;\n  }\n\n}\n","<div class=\"card card-wider card-cascade mb-3 force-page-break\">\n    <div class=\"view gradient-card-header primary-gradient text-light\">\n        <h3 class='h3-responsive text-center'>{{AssessmentResult?.assessment.name}}</h3>\n    </div>\n    <div class=\"card-body assessment-overview\">\n        <div class=\"page-block-center\">\n            <h3 class=\"ml-0 pl-0 h3-responsive\" *ngIf=\"AssessmentResult?.assessment.creator\">{{AssessmentResult?.assessment.creator}}</h3>\n            <h6 class=\"h6-responsive\" *ngIf=\"AssessmentResult?.assessment.creatorUrl\">{{AssessmentResult?.assessment.creatorUrl}}</h6>\n            <div [innerHTML]=\"AssessmentResult?.assessment.description\"></div>\n        </div>\n    </div>\n</div>\n<div class=\"card card-wider card-cascade\" *ngIf=\"IsSingleScaleResult\">\n    <div class=\"view gradient-card-header primary-gradient text-light\">\n        <h3 class='h3-responsive text-center'>Results</h3>\n    </div>\n    <div class=\"card-body assessment-scale-result single-scale\">\n        <div class=\"row justify-content-center text-center\">\n            <h4 class='col-8 h4-responsive'>YOUR CATEGORY:\n                <span class='scale-name'>{{SingleScaleResult.range?.displayName}}</span>\n            </h4>\n        </div>\n        <div class=\"row justify-content-center text-center\" *ngIf=\"!SkipGraph\">\n            <app-scale-chart class=\"col-8\" [scale-result]=\"SingleScaleResult\" [show-scale-name]=\"false\"></app-scale-chart>\n\n        </div>\n        <div class=\"row\" *ngIf=\"!SkipContent\">\n            <div class=\"col\" *ngIf=\"SingleScaleResult?.range?.clientContent\" [innerHTML]=\"SingleScaleResult?.range?.clientContent\"></div>\n        </div>\n        <div class=\"row\" *ngIf=\"!SkipTable\">\n                <app-scale-questions-list  class=\"col-12\" [Questions]=\"AssessmentResult.assessment.getQuestionsForScale(SingleScaleResult.scale)\"></app-scale-questions-list>\n        </div>\n    </div>\n</div>\n<div class=\"card card-wider card-cascade\" *ngIf=\"!IsSingleScaleResult\">\n    <div class=\"view gradient-card-header primary-gradient text-light\">\n        <h3 class='h3-responsive text-center'>Results</h3>\n    </div>\n    <div class=\"card-body assessment-scale-result no-gutter\" >\n        <div *ngFor=\"let scaleResult of ScaleResults;index as index;\">\n            <div [ngClass]=\"{'d-print-block':showPageHeader(index), 'd-none': !showPageHeader(index)}\"\n                class=\"scalePageHeader view gradient-card-header primary-gradient text-light mt-2\">\n                <h3 class='h3-responsive text-center'>Results Continued...</h3>\n            </div>\n            <div class=\"row no-gutter\">\n                <h3 class=\"col h3-responsive\">{{scaleResult.scale?.name}}</h3>\n            </div>\n            <div class=\"row no-gutter\">\n                <div class=\"col-7 col-md-5\" *ngIf=\"scaleResult?.range?.clientContent && !SkipContent\" [innerHTML]=\"scaleResult?.range?.clientContent\"></div>\n                <div class=\"col-5 ml-auto text-center\">\n                    <div class=\"row pl-5\">\n                            <h4 class=\"h4-responsive col-10 ml-auto mr-auto\">YOUR CATEGORY</h4>\n                    </div>\n                    <div class=\"row pl-5\">\n                            <h5 class='h5-responsive scale-name col-10 ml-auto mr-auto'>{{scaleResult.range?.displayName}}</h5>\n                    </div>\n                    <div class=\"row\" *ngIf=\"!SkipGraph\">\n                        <app-scale-chart class=\"col\" [show-ranges]=\"false\" [scale-result]=\"scaleResult\" [show-scale-name]=\"false\"></app-scale-chart>\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\" *ngIf=\"!SkipTable\">\n                    <app-scale-questions-list  class=\"col-12\" [Questions]=\"AssessmentResult.assessment.getQuestionsForScale(scaleResult.scale)\"></app-scale-questions-list>\n            </div>\n        </div>\n    </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { ChartColor } from 'app/assessment-charts/models/chart-color';\nimport { ScaleResultColorService } from 'app/assessment-charts/services/scale-result-color.service';\nimport { ScaleRange } from 'app/shared/models/scale-range';\nimport { ScaleResult } from 'app/shared/models/scale-result';\n\nclass ScaleRangeChartColor {\n    constructor(public range:ScaleRange, public color:ChartColor) {}\n}\n@Component({\n  selector: 'scale-chart-legend',\n  templateUrl: './scale-chart-legend.component.html',\n  styleUrls: ['./scale-chart-legend.component.css']\n})\nexport class ScaleChartLegendComponent implements OnInit {\n\n  @Input() rangeSize:number;\n  @Input() scaleResult:ScaleResult;\n  @Input() severityLabels:string[];\n\n  private _chartColors:ChartColor[];\n\n  constructor(private scaleResultColorService:ScaleResultColorService) { }\n\n  ngOnInit() {\n\n    if (this.scaleResult) {\n\n    }\n    let colors = this.scaleResultColorService.getBackgroundColors(this.rangeSize);\n    if (this.severityLabels && this.severityLabels.length == colors.length) {\n      colors = colors.map((r, index) => {\n        return new ChartColor(this.severityLabels[index], r.color);\n      });\n    }\n    this._chartColors = colors;\n  }\n\n\n\tpublic get chartColors(): ChartColor[] {\n\t\treturn this._chartColors;\n\t}\n\n\tpublic set chartColors(value: ChartColor[]) {\n\t\tthis._chartColors = value;\n\t}\n\n\n}\n","<div class=\"card card-cascade wider\">\n  <div class=\"view gradient-card-header secondary-gradient text-light\">\n      <h3 class='h3-responsive text-center'>Severity Legend</h3>\n  </div>\n  <div class=\"card-body\">\n    <div class=\"row\" *ngFor=\"let color of chartColors\">\n      <div class=\"name col-8\">{{color.name}}</div>\n      <legend-color-icon [color]=\"color.color\" class=\"color col-4\"></legend-color-icon>\n    </div>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class BillingCard\n{\n    private _brand:string;\n    private _last4:string;\n    private _id:string;\n\n\n    /**\n     * Getter id\n     * @return {string}\n     */\n\tpublic get id(): string {\n\t\treturn this._id;\n\t}\n\n    /**\n     * Setter id\n     * @param {string} value\n     */\n\tpublic set id(value: string) {\n\t\tthis._id = value;\n\t}\n\n\n    /**\n     * Getter brand\n     * @return {string}\n     */\n\tpublic get brand(): string {\n\t\treturn this._brand;\n\t}\n\n    /**\n     * Setter brand\n     * @param {string} value\n     */\n\tpublic set brand(value: string) {\n\t\tthis._brand = value;\n\t}\n\n    /**\n     * Getter last4\n     * @return {string}\n     */\n\tpublic get last4(): string {\n\t\treturn this._last4;\n\t}\n\n    /**\n     * Setter last4\n     * @param {string} value\n     */\n\tpublic set last4(value: string) {\n\t\tthis._last4 = value;\n\t}\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Injectable }             from '@angular/core';\nimport { CanActivate, Router, ActivatedRouteSnapshot, RouterStateSnapshot }    from '@angular/router';\nimport { AuthService }            from './auth.service';\nimport { Role } from 'app/shared/models/role';\n\n@Injectable()\nexport class AdminGuard implements CanActivate {\n    constructor(private authService: AuthService, private router: Router) {}\n\n      canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n          // need to make sure the user is an admin... otherwise redirect them back to the home screen.\n          return this.authService.getCurrentUser().then(user => {\n              if (user.role < Role.Client) {\n                  return true;\n              }\n              else {\n                this.router.navigate(['/login'], {\n                    queryParams: {\n                        return: state.url\n                        ,loginType: 1 // admin\n                    }\n                });\n                return false;\n              }\n          }).catch (error => {\n              console.error(error); // not logged, or an error occurred with the login process so send them to login\n              this.router.navigate(['/login'], {\n                queryParams: {\n                    return: state.url\n                    ,loginType: 1 // admin\n                }\n            });\n\n            return false;\n          });\n      }\n\n    canActivateChild(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {\n        return this.canActivate(route, state);\n    }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, ElementRef, Input } from '@angular/core';\nimport {PdfService} from \"../services/pdf.service\";\nimport { ActivatedRoute } from '@angular/router';\nimport { Assignment } from '../models/Assignment';\n\n@Component({\n  selector: 'dac-pdf-generate-btn',\n  templateUrl: './pdf-generate-btn.component.html'\n})\nexport class PdfGenerateBtnComponent implements OnInit {\n\n  @Input() file:string;\n  @Input() assignment:Assignment;\n  public printing:boolean;\n\n  constructor(private element:ElementRef, private pdfService:PdfService\n  ,private activeRoute:ActivatedRoute) {\n    this.printing = false;\n  }\n\n  ngOnInit() {\n  }\n\n\n  public print() {\n    let name = this.file || \"File\";\n    let element = this.element.nativeElement as HTMLElement;\n    let html = element.ownerDocument.documentElement.innerHTML;\n    this.printing = true;\n    if (!(window && window.location)) {\n      console.error(\"window or window.location is missing\");\n      return;\n    }\n    let url = window.location.href;\n    this.pdfService.generate(url, this.assignment).then(() => {\n      this.printing = false;\n      console.log(\"document printed\");\n    })\n    .catch((error) => {\n      alert(\"There was an error in generating your pdf.  Please check your internet connection and try again\");\n      this.printing = false;\n      console.error(error);\n    });\n  }\n\n}\n","<input *ngIf=\"!printing\" type=\"button\" class=\"btn btn-secondary\" (click)=\"print()\" value=\"Download PDF\" />\n<input *ngIf=\"printing\" type=\"button\" class=\"btn btn-secondary\" disabled value=\"Generating PDF...\" />\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { ScaleResult } from 'app/shared/models/scale-result';\n\n@Component({\n  selector: 'app-scale-range-content',\n  templateUrl: './scale-range-content.component.html'\n})\nexport class ScaleRangeContentComponent implements OnInit {\n  @Input() scaleResult:ScaleResult;\n  @Input() expandContent:boolean;\n  @Input() client:boolean;\n\n  constructor() {\n    this.client = false;\n  }\n\n  ngOnInit() {\n  }\n\n  public get hasContent() {\n    if (this.scaleResult && this.scaleResult.range) {\n      if (this.client && this.scaleResult.range.clientContent) {\n        return this.scaleResult.range.clientContent.trim() != \"\";\n      }\n      else if (this.scaleResult.range.therapistContent) {\n        return this.scaleResult.range.therapistContent.trim() != \"\";\n      }\n    }\n    return false;\n  }\n\n\n  public shouldShowContent(scaleResult:ScaleResult) {\n\n    return this.expandContent && this.hasContent;\n  }\n\n}\n","<!-- @media Screen collapsed -->\n<div *ngIf=\"hasContent\" class=\"d-print-none\" [ngClass]=\"{'d-none': expandContent}\">\n    <div class=\"card card-cascade card-wider\">\n        <div class=\"card-header secondary-color lighten-1 text-light\" (click)=\"expandContent = !expandContent\">\n            <span class=\"fa fa-hand-o-right\"></span>\n            What does this mean?\n        </div>\n    </div>\n</div>\n<!-- @media Screen expanded -->\n<div *ngIf=\"hasContent\" [ngClass]=\"{'d-none': !expandContent}\" class=\"d-print-none\">\n  <div class=\"card card-cascade card-wider\">\n    <div class=\"card-header secondary-color lighten-1 text-light\" (click)=\"expandContent = !expandContent\">\n        <span class=\"fa fa-hand-o-up\"></span>\n        What does this mean?\n    </div>\n    <div class=\"card-body\">\n      <div *ngIf=\"shouldShowContent(scaleResult)\" [innerHTML]=\"scaleResult?.range?.therapistContent\"></div>\n    </div>\n    <div class=\"card-footer text-muted secondary-color text-light\" (click)=\"expandContent = !expandContent\">\n        <span class=\"fa fa-hand-o-up\"></span>\n        What does this mean?\n    </div>\n  </div>\n</div>\n<!-- @media Print only shows if notes enabled -->\n<div *ngIf=\"hasContent\" class=\"therapist-note-print-content\" >\n  <div class=\"card card-cascade card-wider\">\n    <div class=\"card-header secondary-color lighten-1 text-light\" (click)=\"expandContent = !expandContent\">\n        <span class=\"fa fa-hand-o-right\"></span>\n        What does this mean?\n    </div>\n    <div class=\"card-body\">\n      <div [innerHTML]=\"scaleResult?.range?.therapistContent\"></div>\n    </div>\n  </div>\n</div>\n","import { Injectable, OnInit } from \"@angular/core\";\nimport { environment } from \"../../../environments/environment\";\nimport {client, oauth2} from 'fhirclient';\nimport Client from \"fhirclient/lib/Client\";\nimport { Router } from \"@angular/router\";\nimport { DacConfig } from \"./dac-config.service\";\nimport { FhirSmartStyleService } from \"./fhir-smart-style.service\";\n/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class FhirService {\n  /**\n   * Client\n   */\n  private fhirClient;\n\n  constructor(private dacConfig:DacConfig, private smartStyleService:FhirSmartStyleService) {\n\n  }\n\n  isAuthorized() : boolean {\n    // if there is no authorization header then we are not logged in for sure\n    if (this.getAuthorizationHeader() !== null) {\n      return true;\n    }\n    return false;\n  }\n\n  // getFhirUserId() : Promise<string> {\n  //   let user = this.getFhirUser();\n  //   if (user) {\n\n  //   }\n  // }\n\n  getFhirUser() : Promise<string> {\n    return this.getFhirClient()\n    .then(client => client.getFhirUser());\n  }\n\n  getFhirUserType() : Promise<string> {\n    return this.getFhirUser().then(user => {\n      let fhirUserParts = user.split(\"/\");\n      let fhirRole = fhirUserParts[0];\n      return fhirRole;\n    });\n  }\n\n  getFhirClient() : Promise<Client> {\n    if (!this.fhirClient) {\n      return oauth2.ready().then(client => {\n        this.fhirClient = client;\n        return client;\n      });\n    }\n\n    return Promise.resolve(this.fhirClient);\n  }\n\n  async refreshToken() {\n    let client = await this.getFhirClient();\n    return client.refresh();\n  }\n\n  refreshIfNeeded() {\n    return this.getFhirClient().then(client => client.refreshIfNeeded());\n  }\n\n  authorizeClient(redirectUrlPath) {\n    // TODO: @adunsulag need to change up the scopes for patients\n    let clientId = this.getClientId();\n    let scopes = environment.smartConfig.clientScopes;\n    let fhirUrl = environment.smartConfig.fhirUrl;\n    // example would be the baseUri + '/loginAdminFinalize' for users\n    // example would be the baseUri + '/loginFinalize' for patients\n    let baseUri = document.baseURI;\n    let url;\n    // redirectUrlPath always starts with a /\n    if (baseUri.endsWith(\"/\")) {\n      url = baseUri.substring(0, baseUri.length - 1) + redirectUrlPath;\n    } else {\n      url = document.baseURI + redirectUrlPath;\n    }\n    // before we redirect we want to save off the our return url\n    let returnParam = (new URL(window.document.location.href)).searchParams.get('return') || '';\n    if (returnParam) {\n      sessionStorage.setItem(\"dc-return-url\", returnParam);\n    }\n\n    oauth2.authorize({\n      \"clientId\": clientId,\n      \"scope\": scopes,\n      \"iss\": fhirUrl,\n      \"redirect_uri\": url\n    });\n  }\n\n  authorizeUserAdmin(redirectUrlPath) {\n    // TODO: need to look at saving off the return url in the sessionStorage if we can to handle the redirect.\n    let clientId = this.getClientId();\n    let scopes = environment.smartConfig.scopes;\n    let fhirUrl = environment.smartConfig.fhirUrl;\n    // example would be the baseUri + '/loginAdminFinalize' for users\n    // example would be the baseUri + '/loginFinalize' for patients\n    let baseUri = document.baseURI;\n    let url;\n    // redirectUrlPath always starts with a /\n    if (baseUri.endsWith(\"/\")) {\n      url = baseUri.substring(0, baseUri.length - 1) + redirectUrlPath;\n    } else {\n      url = document.baseURI + redirectUrlPath;\n    }\n    let returnParam = (new URL(window.document.location.href)).searchParams.get('return') || '';\n    if (returnParam) {\n      sessionStorage.setItem(\"dc-return-url\", returnParam);\n    }\n    oauth2.authorize({\n      \"client_id\": clientId,\n      \"scope\": scopes,\n      \"iss\": fhirUrl,\n      \"redirect_uri\": url\n    });\n  }\n\n  getAuthorizationHeader() : Promise<string> {\n    return this.getFhirClient().then(client => client.getAuthorizationHeader());\n  }\n\n  async loadFhirStylesFromClient(client:Client) {\n    if (client.state.tokenResponse && client.state.tokenResponse.smart_style_url) {\n      let url = client.state.tokenResponse.smart_style_url;\n      this.dacConfig.smartConfigStyleUrl = url;\n      await this.smartStyleService.loadSmartStyles();\n    }\n  }\n\n  getIntentFromClient(client:Client) {\n    let intent = null;\n    if (client.state.tokenResponse) {\n      intent = client.state.tokenResponse.intent;\n    }\n    return intent;\n  }\n\n  getFhirContextFromClient(client:Client, contextResourceFilter:string) {\n    let resource = null;\n    if (client.state.tokenResponse && client.state.tokenResponse.fhirContext && client.state.tokenResponse.fhirContext.length) {\n      let filteredResources = client.state.tokenResponse.fhirContext.filter(c => c.reference && c.reference.startsWith(contextResourceFilter));\n      // if there is more than one we just return the first one\n      resource = filteredResources.length ? filteredResources[0] : null;\n    }\n    return resource;\n  }\n\n  fhirClientReady() : Promise<Client|void> {\n    return oauth2.ready()\n    .catch(error => {\n        if (error && error.message && error.message.indexOf(\":\") !== -1) {\n          let errorParts = error.message.split(\":\");\n          let errorKey = errorParts[0] || \"error\";\n          // TODO: @adunsulag need to be able to display an error message page here\n          if (errorKey == 'invalid_scope') {\n            console.error(error);\n            const urlParams = new URLSearchParams(window.location.search);\n            if (urlParams.has('hint')) {\n              throw new Error(errorParts[1] + \" \" + urlParams.get('hint'));\n            } else {\n              throw new Error(errorParts[1]);\n            }\n          } else {\n            // need to review the scopes authorized and require authorization again if the scopes were not granted....\n            console.error(error);\n          }\n        }\n        throw Object.assign({needsAuthentication: true}, error);\n        // we need to redirect to our authorize location\n      });\n  }\n\n  private getClientId() {\n    // server application setting our clientId.\n    // for testing purposes we\n    let bodyClientId = document.body.dataset['clientId'];\n    let clientId = bodyClientId;\n    if (!environment.production) {\n        clientId = bodyClientId || environment.smartConfig.client_id;\n    }\n\n    if (!clientId) {\n      throw new Error(\"invalid_client\");\n    }\n    return clientId;\n  }\n\n  private getClientSecret() {\n    // TODO: @adunsulag this is just used for testing as we will remove this once we implement the BFF.\n    // server application setting our clientId.\n    // for testing purposes we\n    let bodyClientSecret = document.body.dataset['clientSecret'];\n    let clientId = bodyClientSecret;\n    if (!environment.production) {\n        clientId = bodyClientSecret || environment.smartConfig.clientSecret;\n    }\n\n    if (!clientId) {\n      throw new Error(\"invalid_client\");\n    }\n    return clientId;\n  }\n\n\n  // getFhirClient() : Promise<client> {\n  //   if (!this.fhirClient) {\n  //     return oauth2.ready().then((client) => {\n  //       this.fhirClient = client;\n  //       return client;\n  //     });\n  //   }\n  //   return Promise.resolve(this.fhirClient);\n  // }\n\n  // clientReady() {\n\n  // }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Subscription } from \"../models/subscription\";\nimport { SubscriptionStatus } from \"../models/subscription-status\";\nimport { SubscriptionPlanUnitType } from \"../models/subscription-plan-unit-type\";\nimport { SubscriptionPlan } from \"../models/subscription-plan\";\n\nexport class SubscriptionHydratorService {\n    public fromJSON(subJSONString: string) {\n\n        let subJSON: any = {};\n        if (subJSONString) {\n            try {\n                subJSON = JSON.parse(subJSONString);\n            } catch (error) {\n                console.error(\"Failed to parse subscription string: \", error);\n                return null;\n            }\n        }\n        return this.fromJSONObject(subJSON);\n    }\n\n    public fromJSONObject(subJSON:any) {\n        let subscription = new Subscription();\n        subscription.id = +subJSON.id;\n        subscription.canceledAt = this.getNullableDate(subJSON, 'canceledAt');\n        subscription.currentPeriodEnd = this.getNullableDate(subJSON, 'currentPeriodEnd');\n        subscription.currentPeriodStart = this.getNullableDate(subJSON, 'currentPeriodStart');\n        subscription.renewalDate = this.getNullableDate(subJSON, 'renewalDate');\n        subscription.endedAt = this.getNullableDate(subJSON, 'endedAt');\n        subscription.quantity = +subJSON.quantity;\n        subscription.status = subJSON.status;\n        // subscription.quantity = 1;\n        // subscription.status = SubscriptionStatus.PAST_DUE;\n        subscription.total = +subJSON.total;\n        // subscription.total = 30;\n\n        let plan = new SubscriptionPlan();\n        plan.id = +subJSON.plan.id;\n        plan.amountPerUnit = +subJSON.plan.amountPerUnit;\n        plan.name = subJSON.plan.name;\n        plan.unitType = subJSON.plan.unitType;\n        subscription.plan = plan;\n        return subscription;\n    }\n\n    public toJSON(subscription:Subscription) {\n        // we can just stringify it as we don't need any transformations here\n        return JSON.stringify(subscription);\n    }\n\n    private getNullableDate(obj, property) {\n        if (obj[property]) {\n            return new Date(obj[property]);\n        }\n        return null;\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { SubscriptionPlan } from \"./subscription-plan\";\nimport { SubscriptionStatus } from \"./subscription-status\";\nexport class Subscription {\n    id:number;\n    endedAt:Date;\n    canceledAt:Date;\n    currentPeriodStart:Date;\n    currentPeriodEnd:Date;\n    status:SubscriptionStatus;\n    quantity:number;\n    plan:SubscriptionPlan;\n    renewalDate:Date;\n    total:number;\n    billingInterval:string = \"month\";\n\n    public isActiveSubscription() {\n        if (this.status == SubscriptionStatus.ACTIVE || this.status == SubscriptionStatus.TRIAL) {\n            return true;\n        }\n        if (this.status == SubscriptionStatus.CANCEL_PROCESSING && this.currentPeriodEnd && this.currentPeriodEnd >= new Date()) {\n            return true;\n        }\n        return false;\n    }\n\n    public isTrialSubscription() {\n        return this.status == SubscriptionStatus.TRIAL || this.status == SubscriptionStatus.TRIAL_PERIOD_ENDED;\n    }\n\n    public isUnpaidSubscription() {\n        return this.status == SubscriptionStatus.UNPAID || this.status == SubscriptionStatus.PAST_DUE;\n    }\n\n    public isEndedSubscription() {\n        return this.status == SubscriptionStatus.CANCELED || this.status == SubscriptionStatus.TERMINATED;\n    }\n\n    public getChargeDescription() {\n        let description = [];\n        if (this.isTrialSubscription()) {\n            description.push(\"Free trial \")\n        } else {\n            // future versions of angular can use formatCurrency in @angular/common\n            description.push(this.getTotalCurrency());\n            description.push(\" per \");\n            description.push(this.billingInterval);\n        }\n\n        if (this.plan && this.plan.unitType != \"Assessments\") {\n            description.push(\" for \");\n            description.push(this.quantity);\n            description.push(\" \");\n            // make it singular\n            description.push(this.plan.getUnitTypeNameForQuantity(this.quantity));\n        }\n        return description.join(\"\");\n    }\n\n    private getTotalCurrency() {\n        if (Intl && Intl.NumberFormat) {\n            var formatter = new Intl.NumberFormat('en-US', {\n                style: 'currency',\n                currency: 'USD',\n            });\n            return formatter.format(this.total);\n        } else {\n            return \"$\" + this.total.toFixed(2); // good enough compromise.\n        }\n    }\n}\n","import { Component, Input, OnInit } from \"@angular/core\"\nimport { ActivatedRoute } from \"@angular/router\";\nimport { AssessmentResult } from \"app/shared/models/assessment-result\"\nimport { Scale } from \"app/shared/models/scale\";\nimport { ScaleRange } from \"app/shared/models/scale-range\";\nimport { ScaleResult } from \"app/shared/models/scale-result\";\nimport { AlertService } from \"app/shared/services/alert.service\";\nimport { QuestionnaireService } from \"app/shared/services/questionnaire.service\";\n\n/*\n *   Copyright (c) 2023 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\n@Component({\n  selector: 'dac-peer-clinic-result-viewer',\n  templateUrl: './peer-clinic-result-viewer.component.html'\n})\nexport class PeerClinicResultViewerComponent implements OnInit {\n  @Input(\"result\") result:AssessmentResult;\n  public scaleList:Scale[];\n  private scalesById:Map<string, Scale>;\n  public dateList:Date[];\n  public scaleResults:Map<Scale, ScaleResult[]>;\n  public extraRows = [];\n  private maxRows = 5;\n  private resultCount = 2;\n  private resultHistory:AssessmentResult[];\n  public hasLoadedResults = false;\n  private debug = true;\n  private resultsMapping = {\n    'PP': '/PP/PP-score'\n    ,'PC': '/PC/PC-score'\n    ,'PS': '/PS/PS-score'\n    ,'PD': '/PD/PD-score'\n    ,'PA': '/PA/PA-score'\n    ,'NRS': '/BS/MDS03' // single score result from the user\n    ,'ODI': '/BS/BS-score'\n  };\n\n  constructor(private questionnaireService:QuestionnaireService, private alertService:AlertService, private activatedRoute:ActivatedRoute) {\n\n  }\n\n  isAfterVisitAssessment(result:AssessmentResult) {\n    return result && result.assessment && result.assessment.uid == \"PEER After Visit Assessment\";\n  }\n\n  isFollowUpAssessment(result:AssessmentResult) {\n    return result && result.assessment && result.assessment.uid == \"PEER Follow Up Assessment\";\n  }\n  isInitialAssessment(result:AssessmentResult) {\n    return result && result.assessment && result.assessment.uid == \"PEER Initial Assessment\";\n  }\n\n  ngOnInit(): void {\n    this.scaleList = [];\n    this.dateList = [];\n    this.scalesById = new Map<string, Scale>();\n    this.scaleResults = new Map<Scale, ScaleResult[]>();\n    // TODO: @adunsulag need to go through and grab all of the questionnaires previous to the current one for the current patient.\n\n    console.log(this.result);\n    let highScaleRange = new ScaleRange();\n    highScaleRange.rangeStart = 1;\n    highScaleRange.rangeEnd = 99;\n    highScaleRange.clientContent = \"<p>Higher scores are better.The average score is 50. Range is 1 to 99.</p>\";\n\n    let lowScaleRange = Object.assign(new ScaleRange(), highScaleRange);\n    lowScaleRange.clientContent = \"<p>Lower scores are better. The average score is 50. Range is 1 to 99.</p>\";\n\n    this.createScale(\"PP\", \"Physical Function\", highScaleRange);\n    this.createScale(\"PC\", \"Pain Interference\", lowScaleRange);\n    this.createScale(\"PS\", \"Sleep Disturbance\", lowScaleRange);\n    this.createScale(\"PD\", \"Depression Symptoms\", lowScaleRange);\n    this.createScale(\"PA\", \"Anxiety Symptoms\", lowScaleRange);\n\n    let nrs = this.createScale(\"NRS\", \"Back Pain Numerical Rating Scale (NRS)\", lowScaleRange, 0, 10);\n    nrs.ranges[0].clientContent = \"<p>Higher scores mean worse health.Range is 0 to 10.</p><p>Severity ratings for this score are: </p>\"\n      + \"<ul><li>0:No pain</li><li>1-4: Mild</li><li>5-7: Moderate</li><li>8-10: Severe</li></ul>\";\n\n    let odi = this.createScale(\"ODI\", \"Oswestry Disability Index (ODI)\", lowScaleRange, 0, 100);\n    odi.ranges[0].clientContent = \"<p>Higher scores mean worse health.Range is 0 to 100.</p><p>Average for the U.S. population is 10.</p><p>Severity ratings for this score are: </p>\"\n      + \"<ul><li>0-20:Minimal disability</li><li>21-40: Moderate disability</li><li>41-60: Severe disability</li><li>61-80: Crippling back pain</li><li>81-100: Bed ridden</li></ul>\";\n\n    this.setupResultHistory([this.result]);\n    let questionnaireIds = [this.result.assessment.id];\n    let patientId = this.activatedRoute.snapshot.paramMap.get('id');\n    this.questionnaireService.getQuestionnairesByTitle([\"PEER Follow Up Assessment\", \"PEER Initial Assessment\", \"PEER After Visit Assessment\"])\n    .then(questionnaires => {\n      let questionnaireIds = questionnaires.map(q => q.id);\n      return this.questionnaireService.getPreviousQuestionnaireResponsesAsAssessmentResults(patientId, questionnaireIds, this.result.dateCompleted, (this.maxRows - 1))\n    })\n    .then(results => {\n      this.hasLoadedResults = true;\n      // make sure we add in our current result to the previous result\n      this.setupResultHistory([this.result].concat(results || []));\n    })\n    .catch(error => {\n      this.hasLoadedResults = true;\n      this.alertService.error(\"Failed to load previous response scores\");\n      console.error(error);\n    })\n\n\n    // this.dateList.push(new Date());\n    // for (let i = 1; i < this.resultCount; i++) {\n    //   let newDate = new Date();\n    //   newDate.setTime(this.dateList[0].getTime() - i * 3600 * 24 * 1000);\n    //   this.dateList.push(newDate);\n    // }\n  }\n  private setupResultHistory(results:AssessmentResult[]) {\n    this.dateList = [];\n    this.scaleResults.clear();\n    this.resultHistory = results;\n    this.resultCount = this.resultHistory.length;\n    if (this.hasLoadedResults) {\n      this.extraRows = Array.from({length: this.maxRows - this.resultCount}, () => Math.random());\n    } else {\n      this.extraRows = [];\n    }\n\n\n    this.resultHistory.forEach(result => {\n      if (this.isAfterVisitAssessment(result)) {\n        return; // skip over adding any scores for an after visit assessment\n      }\n      this.dateList.push(result.dateCompleted);\n        for (var key in this.resultsMapping) {\n          let scaleResult = new ScaleResult();\n          scaleResult.scale = this.scalesById.get(key);\n          let resultAnswer = result.getAnswerForQuestionId(this.resultsMapping[key]);\n          let score = resultAnswer ? +resultAnswer.answer : 0;\n          if (!isNaN(score)) {\n            scaleResult.score = score;\n          } else {\n            scaleResult.score = 0;\n          }\n          scaleResult.range = scaleResult.scale.getRangeForScore(scaleResult.score);\n          if (!this.scaleResults.has(scaleResult.scale)) {\n            this.scaleResults.set(scaleResult.scale, [scaleResult]);\n          }\n          else {\n            this.scaleResults.get(scaleResult.scale).push(scaleResult);\n          }\n        }\n    });\n  }\n  public getRecentAnswer(linkId:string) {\n    // the first result is our most recent one\n    let result = this.resultHistory.find(r => r.getAnswerForQuestionId(linkId) !== null);\n    if (result) {\n      let answer = result.getAnswerForQuestionId(linkId);\n      return answer.answer;\n    } else {\n      return this.debug ? linkId : \"<Missing Answer>\";\n    }\n  }\n  private createScale(id:string, name:string, range:ScaleRange, newLow?:number, newHigh?:number) {\n    let scale = new Scale();\n    scale.id = id;\n    this.scalesById.set(id, scale);\n    scale.name = name;\n    let scaleRange = Object.assign(new ScaleRange(), range);\n    if (newLow !== undefined) {\n      scaleRange.rangeStart = newLow;\n    }\n    if (newHigh !== undefined) {\n      scaleRange.rangeEnd = newHigh;\n    }\n    scale.addRange(scaleRange);\n    this.scaleList.push(scale);\n    // this.scaleResults.set(scale, this.createScaleResults(scale));\n    return scale;\n  }\n\n  private createScaleResults(scale:Scale) : ScaleResult[] {\n    let rangeEnd = scale.getMaxRange().rangeEnd - 1;\n    let scores = Array.from({length: this.resultCount}, () => Math.floor(1 + Math.random() * rangeEnd));\n    let results = scores.map(s => {\n\n    let scaleResult = new ScaleResult();\n    scaleResult.score = s;\n    scaleResult.range = scale.getRangeForScore(scaleResult.score);\n    return scaleResult;\n    });\n    return results;\n  }\n\n\n}\n","<!-- <pre>{{result?.assessment.questionnaire|json}}</pre>\n<pre>{{result?.answers|json}}</pre> -->\n<div class=\"row mb-2 mb-md-5\" *ngFor=\"let scale of scaleList\">\n  <div class=\"col-6 col-md-6\">\n    <h5><u>{{scale.name}}</u></h5>\n    <p>Your {{scale.name}} Score is</p>\n    <table class=\"table table-striped\">\n      <thead>\n        <tr>\n          <td class=\"w-50\">Date</td>\n          <td class=\"w-50\">Score</td>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let result of scaleResults.get(scale); index as i\">\n          <td>{{dateList[i] | date:'short' }}</td>\n          <td>{{result.score}}</td>\n        </tr>\n        <tr *ngIf=\"!hasLoadedResults\">\n          <td class=\"alert alert-info\" colspan=\"2\"><app-spin-icon></app-spin-icon> Loading previous scores...</td>\n        </tr>\n        <tr *ngFor=\"let extraRow of extraRows\">\n          <td></td>\n          <td>&nbsp;</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class=\"col-5 offset-1 col-md-5\">\n    <div [innerHTML]=\"scale.getMaxRange().clientContent\"></div>\n  </div>\n</div>\n<!-- we use tables to make printing better -->\n<div class=\"row mb-2 mb-md-5\">\n  <div class=\"col-12\">\n    <h5><u>Back Pain History</u></h5>\n\n    <table class=\"table\">\n      <tbody>\n        <tr>\n          <td class=\"w-25\" rowspan=\"2\"><b>Duration</b></td>\n          <td class=\"w-50\">Duration of back pain:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS01\")}}</td>\n        </tr>\n        <tr>\n          <td>Frequency of back pain:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS02\")}}</td>\n        </tr>\n\n        <tr>\n          <td class=\"w-25\" rowspan=\"2\"><b>Radicular pain</b></td>\n          <td class=\"w-50\">Pain goes down the legs:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS04\")}}</td>\n        </tr>\n        <tr>\n          <td>Symptoms below the knees:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS04Side\")}}</td>\n        </tr>\n\n        <tr>\n          <td class=\"w-25\" rowspan=\"2\"><b>Physical Therapy</b></td>\n          <td class=\"w-50\">Ever had physical therapy:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS13c\")}}</td>\n        </tr>\n        <tr>\n          <td>Time since last PT session:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS13cWhen\")}}</td>\n        </tr>\n\n        <tr>\n          <td class=\"w-25\" rowspan=\"2\"><b>Opiod Use</b></td>\n          <td class=\"w-50\">Ever used opioid pain killers:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS13a\")}}</td>\n        </tr>\n        <tr>\n          <td>Currently taking opioids:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS13aCurrent\")}}</td>\n        </tr>\n\n        <tr>\n          <td class=\"w-25\" rowspan=\"2\"><b>CBT</b></td>\n          <td class=\"w-50\">Had Cognitive Behavioral Therapy:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS13d\")}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n<div class=\"row mb-2 mb-md-5\">\n  <div class=\"col-12\">\n    <h5><u>Invasive Treatments</u></h5>\n    <!-- we use tables to make printing better -->\n    <table class=\"table\">\n      <tbody>\n        <tr>\n          <td class=\"w-25\" rowspan=\"2\"><b>Injections</b></td>\n          <td class=\"w-50\">Ever had a back injection:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS13b\")}}</td>\n        </tr>\n        <tr>\n          <td>Time since last back injection:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS13bWhen\")}}</td>\n        </tr>\n        <tr>\n          <td class=\"w-25\" rowspan=\"3\"><b>Surgery</b></td>\n          <td class=\"w-50\">Had Previous low back surgery:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS06\")}}</td>\n        </tr>\n        <tr>\n          <td>How long ago was the surgery:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS07\")}}</td>\n        </tr>\n        <tr>\n          <td>Did surgery involve fusion:</td>\n          <td class=\"w-25\">{{getRecentAnswer(\"/BP/MDS08\")}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n<div class=\"row mb-2 mb-md-5\">\n  <div class=\"col-12\">\n    <h5><u>Summary of Social History</u></h5>\n    <!-- we use tables to make printing better -->\n    <table class=\"table\">\n      <tbody>\n        <tr>\n          <td class=\"w-75\"><b>Height</b></td>\n          <td class=\"w-25\">{{getRecentAnswer('/SC/MDS40afeet')}} {{getRecentAnswer('/SC/MDS40ainch')}}</td>\n        </tr>\n        <tr>\n          <td><b>Weight</b></td>\n          <td>{{getRecentAnswer('/SC/MDS40b')}}</td>\n        </tr>\n        <tr>\n          <td><b>BMI</b></td>\n          <td>{{getRecentAnswer('/SC/BMI')}}</td>\n        </tr>\n        <tr>\n          <td><b>Smoking Status:</b></td>\n          <td>{{getRecentAnswer('/SC/MDS39')}}</td>\n        </tr>\n        <tr>\n          <td><b>Alcohol use more than meant to:</b></td>\n          <td>{{getRecentAnswer('/SC/MDS31')}}</td>\n        </tr>\n        <tr>\n          <td><b>Alcohol use wanted to cut down:</b></td>\n          <td>{{getRecentAnswer('/SC/MDS32')}}</td>\n        </tr>\n        <tr>\n          <td><b>Employment Status:</b></td>\n          <td>{{getRecentAnswer('/SC/MDS37')}}</td>\n        </tr>\n        <tr>\n          <td><b>Time Off Work:</b></td>\n          <td>{{getRecentAnswer('/BP/MDS14')}}</td>\n        </tr>\n        <tr>\n          <td><b>Applied for disability:</b></td>\n          <td>{{getRecentAnswer('/BP/MDS15')}}</td>\n        </tr>\n        <tr>\n          <td><b>Involved in a lawsuit:</b></td>\n          <td>{{getRecentAnswer('/BI/MDS30')}}</td>\n        </tr>\n        <tr>\n          <td><b>Education Level:</b></td>\n          <td>{{getRecentAnswer('/SC/MDS38')}}</td>\n        </tr>\n        <tr>\n          <td><b>Race:</b></td>\n          <td>{{getRecentAnswer('/SC/MDS36')}}</td>\n        </tr>\n        <tr>\n          <td><b>Ethnicity:</b></td>\n          <td>{{getRecentAnswer('/SC/MDS35')}}</td>\n        </tr>\n        <tr>\n          <td><b>Fear Avoidance:</b></td>\n          <td>{{getRecentAnswer('/BI/MDS28')}}</td>\n        </tr>\n        <tr>\n          <td><b>Catostrophizing:</b></td>\n          <td>{{getRecentAnswer('/BI/MDS29')}}</td>\n        </tr>\n        <tr>\n          <td><b>Goal:</b></td>\n          <td>{{getRecentAnswer('/BI/Goal')}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n<div class=\"row mb-2 mb-md-5\">\n  <div class=\"col-12\">\n    <h5><u>Past Medical History</u></h5>\n    <!-- we use tables to make printing better -->\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th colspan=\"2\">Chronic Pain Screening</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class=\"w-75\">Stomach pain (complex regional pain risk):</td>\n          <td class=\"w-25\">{{getRecentAnswer('/BI/MDS05a')}}</td>\n        </tr>\n        <tr>\n          <td>Headaches (possible migraine risk):</td>\n          <td>{{getRecentAnswer('/BI/MDS05b')}}</td>\n        </tr>\n        <tr>\n          <td>Pain in arms or legs (possible arthritis risk):</td>\n          <td>{{getRecentAnswer('/BI/MDS05c')}}</td>\n        </tr>\n        <tr>\n          <td>Widespread pain (possible fibromyalgia risk):</td>\n          <td>{{getRecentAnswer('/BI/MDS05d')}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n\n<div class=\"row mb-2 mb-md-5\" *ngIf=\"isFollowUpAssessment(result)\">\n  <div class=\"col-12\">\n    <h5><u>FOLLOW-UP ASSESSMENT</u></h5>\n    <!-- we use tables to make printing better -->\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th colspan=\"2\">Follow-Up</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class=\"w-75\">Physical therapy:</td>\n          <td class=\"w-25\">{{getRecentAnswer('/SO/MDS13cFollow')}}</td>\n        </tr>\n        <tr>\n          <td>Opioid pain killers:</td>\n          <td>{{getRecentAnswer('/BP/MDS13a')}}</td>\n        </tr>\n        <tr>\n          <td>Currently taking opioids:</td>\n          <td>{{getRecentAnswer('/SO/MDS13aFollow')}}</td>\n        </tr>\n        <tr>\n          <td>Cognitive behavioral therapy:</td>\n          <td>{{getRecentAnswer('/SO/MDS13dFollow')}}</td>\n        </tr>\n        <tr>\n          <td>Back injection:</td>\n          <td>{{getRecentAnswer('/SO/MDS13bFollow')}}</td>\n        </tr>\n        <tr>\n          <td>Back surgery:</td>\n          <td>{{getRecentAnswer('/SO/MDS06Follow')}}</td>\n        </tr>\n        <tr>\n          <td>Emergency room visits:</td>\n          <td>{{getRecentAnswer('/SO/ERvisitFollow')}}</td>\n        </tr>\n        <tr>\n          <td>Time off work:</td>\n          <td>{{getRecentAnswer('/SO/MDS14Follow')}}</td>\n        </tr>\n        <tr>\n          <td>Applied for disability:</td>\n          <td>{{getRecentAnswer('/SO/MDS15Follow')}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n<div class=\"row mb-2 mb-md-5\" *ngIf=\"isAfterVisitAssessment(result)\">\n  <div class=\"col-12\">\n    <h5><u>FOLLOW-UP ASSESSMENT</u></h5>\n    <!-- we use tables to make printing better -->\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th colspan=\"2\">Shared Decision Making</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class=\"w-75\">Understanding:</td>\n          <td class=\"w-25\">{{getRecentAnswer('/DM/SDMunderstand')}}</td>\n        </tr>\n        <tr>\n          <td>Preferences:</td>\n          <td>{{getRecentAnswer('/DM/SDMlisten')}}</td>\n        </tr>\n        <tr>\n          <td>Integration:</td>\n          <td>{{getRecentAnswer('/DM/SDMinclude')}}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit } from '@angular/core';\nimport { AssetService } from '../services/asset.service';\nimport { AlertService } from 'app/shared/services/alert.service';\nimport { ActivatedRoute } from '@angular/router';\nimport { LibraryAsset } from '../models/library-asset';\nimport { Location } from '@angular/common';\n\n@Component({\n  selector: 'dac-admin-view-asset',\n  templateUrl: './admin-view-asset.component.html',\n  styleUrls: ['./admin-view-asset.component.scss']\n})\nexport class AdminViewAssetComponent implements OnInit {\n  public hasLoaded:boolean;\n  public asset:LibraryAsset\n  public disableAsset:boolean = true;\n\n  constructor(private route:ActivatedRoute, private assetService:AssetService, private alertService:AlertService, private location:Location) { }\n\n  ngOnInit() {\n    this.route.params.subscribe((params) => {\n      let assetId = params['assetId'];\n      this.hasLoaded = false;\n      this.assetService.getAsset(assetId).then((asset:LibraryAsset) => {\n        this.hasLoaded = true;\n        this.asset = asset;\n      })\n      .catch((error) => {\n        console.error(error);\n        if (error && error.status === 404 || error.status === 400) {\n          this.alertService.error(\"404 This item could not be found\");\n        } else {\n          this.alertService.error(\"There was a server error in loading this item.  Check your internet connection or contact support\");\n        }\n      });\n    });\n  }\n\n  public goBack() {\n    this.location.back();\n  }\n  public shouldDisplayExercise() {\n    return this.asset && this.asset.type == 'assignment';\n  }\n\n  public shouldDisplayArticle() {\n    return this.asset && this.asset.type == 'article';\n  }\n\n}\n","<div class=\"col itemsContainer d-print-block-visible\">\n  <div class=\"row report-controls\">\n      <div class=\"col-2\">\n          <input class=\"btn btn-primary\" type=\"button\" (click)=\"goBack()\" value=\"Back\" />\n      </div>\n      <div class='col-8 text-center'>\n          <h1 class=\"h1-responsive report-name text-center\" *ngIf=\"hasLoaded\">{{asset.title}}</h1>\n      </div>\n      <div class=\"col-2 ml-auto\">\n      </div>\n  </div>\n  <div class=\"row d-none d-print-block-visible\">\n      <div class='col-12 text-center'>\n          <h1 class=\"h1-responsive report-name text-center\" *ngIf=\"hasLoaded\">{{asset.title}}</h1>\n      </div>\n  </div>\n  <div class=\"row\" *ngIf=\"!hasLoaded\">\n      <div class=\"col\">\n          <p class=\"alert alert-warning\">\n              <app-spin-icon></app-spin-icon> Loading...\n          </p>\n      </div>\n  </div>\n  <p class=\"text-center offset-2 col-8\" *ngIf=\"hasLoaded\"><i>{{asset.description}}</i></p>\n  <p *ngIf=\"asset && asset.tags?.length > 0\" class=\"text-center offset-2 col-8\"><i>Tags: {{asset.tags.join(', ')}}</i></p>\n  <dac-exercise class=\"card card-body\" *ngIf=\"shouldDisplayExercise()\" [exercise]=\"asset\" [hideHeaders]=\"disableAsset\" [disabled]=\"disableAsset\">\n  </dac-exercise>\n  <dac-article class=\"card card-body\" *ngIf=\"shouldDisplayArticle()\" [article]=\"asset\" [hideHeaders]=\"disableAsset\" [disabled]=\"disableAsset\">\n  </dac-article>\n</div>\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Question} from \"./question\";\nimport { QuestionSetLabel } from \"./question-set-label\";\nimport { QuestionType } from \"app/shared/models/question-type\";\n\nexport class SingleChoiceQuestion extends Question {\n    private isSelected:boolean;\n\n    constructor() {\n        super();\n        this.type = QuestionType.SingleChoice;\n        this.isSelected = false;\n    }\n\n    public get answerDisplayText() :any{\n        if (this.isSelected == true) {\n            return \"Checked\";\n        }\n        else {\n            return \"Not Checked\";\n        }\n    }\n\n    public get answerForSave(): any {\n        return {isSelected: this.isSelected};\n    }\n\n    public setSavedAnswer(data: any, labels: QuestionSetLabel[]) {\n        if (data && data.isSelected === true) {\n            this.isSelected = true;\n        }\n        else {\n            this.isSelected = false;\n        }\n    }\n    public hasAnswer(answer: any) {\n        // it always has an answer if it's selected or not selected.\n        return true;\n    }\n    public get isFilledOut() : boolean {\n        return true;\n    }\n\n}\n","import {ActivatedRoute, Router} from '@angular/router';\nimport {User} from '../../shared/models/user';\nimport {Role} from '../../shared/models/role';\nimport {AuthService} from '../../login/services/auth.service';\nimport { Injectable, EventEmitter, OnDestroy } from '@angular/core';\nimport { NavBarItem } from 'app/theme/models/nav-bar-item';\nimport { Subject ,  SubscriptionLike as ISubscription } from 'rxjs';\nimport { DacConfig } from '../../shared/services/dac-config.service';\nimport { Capability } from 'app/shared/models/capability';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class NavBarService implements OnDestroy {\n  private _navItems: NavBarItem[];\n  private user:User;\n  private _displaySideBarEvent:Subject<boolean>;\n  private _reportNavBarItems: NavBarItem[];\n\n  /**\n   * Represents the top navigation bar.\n   */\n  private _topNavBarItems: NavBarItem[];\n\n  private _navBarAction:Subject<NavBarItem>;\n\n  private _userSubscription:ISubscription;\n\n  constructor(private authService:AuthService, private activatedRoute:ActivatedRoute, private router:Router, private dacConfig:DacConfig) {\n\n    this._userSubscription = this.authService.getLoginState().subscribe((stateUpdate) => {\n      this.user = stateUpdate.user;\n      this._navItems = this.createNavItems(); // update our navigation items.\n      this._topNavBarItems = this.createTopNavItems();\n    });\n    // this._navItems = this.createNavItems();\n    this._displaySideBarEvent = new Subject<boolean>();\n    this._navBarAction = new Subject<NavBarItem>();\n    this._reportNavBarItems = [];\n  }\n\n  ngOnDestroy() {\n      this._userSubscription.unsubscribe();\n  }\n\n\n\tpublic get displaySideBarEvent(): Subject<boolean> {\n\t\treturn this._displaySideBarEvent;\n  }\n\n  public get navBarAction() : Subject<NavBarItem> {\n    return this._navBarAction;\n  }\n\n  public toggleSidebar() {\n    // send off an event to show the sidebar.\n    this.displaySideBarEvent.next();\n  }\n\n  public setupReportSidebar(reportClientId) {\n    let navItems = [];\n    navItems.push(this.getHomeMenuItem());\n     navItems.push({\n      id: \"clients\"\n      ,name: \"Patients\"\n      ,routerLink: ['/','admin', 'clients']\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,hasChildren: false\n    });\n    navItems.push({\n      id: \"currentClient\"\n      ,name: 'Back to ' + reportClientId\n      ,routerLink: ['/','admin', 'client', reportClientId]\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,hasChildren: false\n    });\n    this._reportNavBarItems = navItems;\n  }\n\n  public clearReportSidebar() {\n    this._reportNavBarItems = [];\n  }\n\n  public addReportNavBarItem(id:string, name:string) {\n    this._reportNavBarItems.push({\n      id: id\n      ,name: name\n      ,routerLink: null\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,hasChildren: false\n      ,type: 'report-item'\n    });\n  }\n\n  public handleMenuItemClick(navItem:NavBarItem, event:Event) {\n    if (navItem.id == 'logout') {\n      event.preventDefault();\n      event.stopPropagation();\n      let currentRole = this.user.role;\n      this.authService.logout().then((resp) => {\n        if (resp && resp.redirectUrl) {\n          window.location.href = resp.redirectUrl;\n        }\n        else {\n          this.router.navigate(['/login']);\n        }\n      })\n      .catch((error) => {\n        console.error(error);\n        this.router.navigate([\"/login\"]);\n      });\n      return;\n    }\n\n    this._navBarAction.next(navItem);\n\n    if (navItem.type && navItem.type == 'report-item') {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  public get topNavBarItemsForDisplay() {\n    let items = this._topNavBarItems;\n    // any item with children... filter out the children based upon the display\n    items.filter(i => i.children)\n    .forEach(i => {\n      i.children = i.children.filter(ic => this.shouldDisplayItem(ic))\n      i.hasChildren = i.children.length > 0;\n    });\n\n    // now filter out the parents.\n    return items.filter(ni => this.shouldDisplayItem(ni));\n  }\n\n  private createTopNavItems() {\n    let navItems = [\n      this.getClientLoginMenuItem()\n      , this.getAdminLoginMenuItem()\n      , this.getClientDashboardMenuItem()];\n\n    if (this.dacConfig.isFeatureEnabled(\"admin.myaccount\"))\n    {\n      navItems.push(this.getMyAccountMenuItem());\n    }\n    if (this.dacConfig.isFeatureEnabled(\"menu.contact\")) {\n      navItems.push(this.getContactMenuItem());\n    }\n    navItems.push(this.getLogoutMenuItem());\n    return navItems;\n  }\n\n  private createNavItems() {\n   let navItems = [];\n   navItems.push(this.getHomeMenuItem());\n    navItems.push(this.getClientLoginMenuItem());\n    navItems.push(this.getAdminLoginMenuItem());\n    navItems.push(this.getClientDashboardMenuItem());\n    if (this.dacConfig.isFeatureEnabled(\"menu.system-overview\")) {\n      navItems.push({\n        id: \"systemOverview\"\n        ,name: \"System Overview\"\n        ,routerLink: ['/','std','admin','system']\n        ,role: [Role.SuperUser]\n        ,roleExplicitMatch: true\n        ,hasChildren: false\n      });\n    }\n    if (this.dacConfig.isFeatureEnabled(\"menu.companies\")) {\n      navItems.push({\n        id: \"companies\"\n        ,name: \"Companies\"\n        ,routerLink: ['/','std','admin', 'companies']\n        ,role: [Role.SuperUser]\n        ,roleExplicitMatch: true\n        ,hasChildren: false\n      });\n    }\n    if (this.dacConfig.isFeatureEnabled(\"menu.users\")) {\n      navItems.push({\n        id: \"users\"\n        ,name: \"Users\"\n        ,routerLink: ['/','std','admin', 'users']\n        ,role: [Role.Admin]\n        ,roleExplicitMatch: false\n        ,hasChildren: false\n      });\n    }\n    navItems.push({\n      id: \"clients\"\n      ,name: \"Patients\"\n      ,routerLink: ['/','std','admin', 'clients']\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,hasChildren: false\n    });\n\n    let assessments = {\n      id: \"adminAssessments\"\n      ,name: \"Assessments\"\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,children: []\n      ,hasChildren: true\n    };\n    assessments.children.push({\n      id: \"manageAssessments\"\n      ,name: \"Assessments\"\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,routerLink: ['/','std','admin', 'assessment', 'manage']\n      ,hasChildren: false\n    });\n    assessments.children.push({\n      id: \"manageBatteries\"\n      ,name: \"Batteries\"\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,routerLink: ['/','std','admin', 'assessment', 'batteries']\n      ,hasChildren: false\n    });\n    if (this.dacConfig.isFeatureEnabled('assessments.reports.manage')) {\n      assessments.children.push({\n        id: \"manageAssessmentReports\"\n        ,name: \"Reports\"\n        ,role: [Role.SuperUser]\n        ,roleExplicitMatch: false\n        ,routerLink: ['/','std','admin', 'assessment', 'custom-reports']\n        ,hasChildren: false\n      });\n    }\n\n    if (this.dacConfig.isFeatureEnabled(\"debug\")) {\n      navItems.push({\n        id: \"debug\"\n        ,name: \"Debug\"\n        ,routerLink: ['/', 'debug']\n        ,role: [Role.Registered]\n        ,roleExplicitMatch: false\n        ,hasChildren: false\n      })\n    }\n\n    navItems.push(assessments);\n\n    let library = {\n      id: \"adminLibrary\"\n      ,name: \"Homework Library\"\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,children: []\n      ,hasChildren: true\n    };\n    library.children.push({\n      id: \"libraryArticles\"\n      ,name: \"Articles\"\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,children: []\n      ,hasChildren: false\n      ,routerLink: ['/','std','admin', 'library', 'articles']\n    });\n    library.children.push({\n      id: \"libraryExercises\"\n      ,name: \"Exercises\"\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,children: []\n      ,hasChildren: false\n      ,routerLink: ['/','std','admin', 'library', 'exercises']\n    });\n\n    navItems.push(library);\n\n    if (this.dacConfig.isFeatureEnabled(\"admin.shop\"))\n    {\n      navItems.push({\n        id: \"shop\"\n        ,name: \"Shop\"\n        ,routerLink: ['/','std','admin', 'shop']\n        ,role: []\n        ,capability: [Capability.CAN_SHOP]\n        ,roleExplicitMatch: false\n        ,hasChildren: false\n      });\n    }\n    if (this.dacConfig.isFeatureEnabled(\"admin.myaccount\"))\n    {\n      navItems.push(this.getMyAccountMenuItem());\n    }\n    if (this.dacConfig.isFeatureEnabled(\"menu.contact\")) {\n      navItems.push(this.getContactMenuItem());\n    }\n    navItems.push(this.getLogoutMenuItem());\n    return navItems;\n\n  }\n\n  private getContactMenuItem() {\n    return {\n      id: \"help\"\n      ,name: \"Contact\"\n      ,routerLink: ['/help']\n      ,role: []\n      ,roleExplicitMatch: false\n      ,hasChildren: false\n    };\n  }\n\n  private getClientDashboardMenuItem() {\n    return {\n      id: \"clientDashboard\"\n      ,name: \"Dashboard\"\n      ,routerLink: ['/','std','assessments','dashboard']\n      ,role: [Role.Client]\n      ,roleExplicitMatch: true\n      ,hasChildren: false\n    };\n  }\n\n  private getHomeMenuItem() {\n    return {\n      id: \"home\"\n       ,name: \"Home\"\n       ,routerLink: ['/']\n       ,role: [Role.UnAuthenticated]\n       ,roleExplicitMatch: false\n       ,hasChildren: false\n     };\n  }\n\n  private getClientLoginMenuItem() {\n    return {\n      id: \"clientLogin\"\n      ,name: \"Client Login\"\n      ,routerLink: ['/login']\n      ,role: [Role.UnAuthenticated]\n      ,roleExplicitMatch: true\n      ,hasChildren: false\n    };\n  }\n  private getAdminLoginMenuItem() {\n    return {\n      id: \"adminLogin\"\n      ,name: \"Therapist Login\"\n      ,routerLink: ['/loginAdmin/']\n      ,role: [Role.UnAuthenticated]\n      ,roleExplicitMatch: true\n      ,hasChildren: false\n    };\n  }\n  private getLogoutMenuItem() {\n    return {\n      id: \"logout\"\n      ,name: \"Logout\"\n      ,routerLink: null // no link as we don't want to go to a logout right now.\n      ,role: [Role.Client]\n      ,roleExplicitMatch: false\n      ,hasChildren: false\n    };\n  }\n\n  private getMyAccountMenuItem() {\n    return {\n      id: \"adminMyAccount\"\n      ,name: \"My Account\"\n      ,routerLink: ['/','std','admin', 'my-account']\n      ,role: [Role.Registered]\n      ,roleExplicitMatch: false\n      ,hasChildren: false\n    };\n  }\n  public shouldDisplayItem(navItem:NavBarItem) {\n    if (navItem.capability && navItem.capability.length) {\n      return navItem.capability.some(c => this.user.hasCapability(c));\n    }\n\n    if (navItem.role.length) {\n      if (navItem.roleExplicitMatch) {\n        return navItem.role.some(r => this.user.role === r);\n      }\n      else {\n        return navItem.role.some(r => this.user.role <= r);\n      }\n    }\n    return true;\n  }\n\n  public get navItemsForDisplay() {\n    let items = this.navItems;\n    if (this._reportNavBarItems.length) {\n      items = this._reportNavBarItems;\n    }\n    // any item with children... filter out the children based upon the display\n    items.filter(i => i.children)\n    .forEach(i => {\n      i.children = i.children.filter(ic => this.shouldDisplayItem(ic))\n      i.hasChildren = i.children.length > 0;\n    });\n\n    // now filter out the parents.\n    return items.filter(ni => this.shouldDisplayItem(ni));\n  }\n\n\n  public get navItems() : NavBarItem[] {\n    return this._navItems;\n  }\n\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { SharedModule } from '../shared/shared.module';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { DebugRoutingModule } from './debug-routing.module';\n\n@NgModule({\n  imports: [\n    CommonModule\n    ,RouterModule\n    ,FormsModule\n    ,ReactiveFormsModule\n    ,SharedModule\n    ,DebugRoutingModule\n  ],\n  entryComponents: [],\n  declarations: []\n  ,providers: []\n  ,exports: []\n})\nexport class DebugModule { }\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nexport class AssignmentItem {\n    private id:number;\n    private name:string;\n    private dateAssigned:Date;\n    private dateCompleted:Date;\n    private type:\"Assessment\"|\"LibraryAsset\"|\"Questionnaire\"|\"ExternalQuestionnaire\";\n    private resultId:string;\n\n    public constructor() {\n        this.name = \"\";\n        this.dateAssigned = null;\n        this.type = \"Assessment\";\n    }\n\n    public get Id() : number {\n        return this.id;\n    }\n\n    public set Id(v:number) {\n        this.id = v;\n    }\n\n    public get Name() : string {\n        return this.name;\n    }\n\n    public set Name(v : string) {\n        this.name = v;\n    }\n\n\n    public get DateAssigned() : Date {\n        return this.dateAssigned;\n    }\n\n    public set DateAssigned(v : Date) {\n        this.dateAssigned = v;\n    }\n\n    public get DateCompleted() : Date {\n        return this.dateCompleted;\n    }\n\n    public set DateCompleted(v : Date) {\n        this.dateCompleted = v;\n    }\n\n    public setDateAssigned(time:number) : Date {\n        this.DateAssigned = new Date(time);\n        return this.DateAssigned;\n    }\n\n\n    public get IsComplete() : boolean {\n        return this.dateCompleted != null;\n    }\n\n    public get Type() : \"Assessment\"|\"LibraryAsset\"|\"Questionnaire\"|\"ExternalQuestionnaire\" {\n        return this.type;\n    }\n\n    public set Type(v:\"Assessment\"|\"LibraryAsset\"|\"Questionnaire\"|\"ExternalQuestionnaire\") {\n        this.type = v;\n    }\n\n    public get ResultId() : string {\n        return this.resultId;\n    }\n\n    public set ResultId(v : string) {\n        this.resultId = v;\n        if (v !== null) {\n            this.DateCompleted = new Date();\n        }\n    }\n}\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n// import Amplify from 'aws-amplify';\nimport {client, oauth2} from 'fhirclient';\n\nif (environment.production) {\n  enableProdMode();\n}\n\n// we setup our initial AWS config here...\n // configure the AWS library here.\n//  let awsConfigData = {\n//    Auth: {\n\n//   // REQUIRED only for Federated Authentication - Amazon Cognito Identity Pool ID\n//   // identityPoolId: dacConfig.awsCognitoConfig.userPool.userIdentityPoolId, // 'us-east-1:0c4629df-3bcc-49b5-be6e-5861d5283b56',\n\n//   // REQUIRED - Amazon Cognito Region\n//   region: environment.awsCognitoConfig.awsCognitoRegion, // 'us-east-1',\n\n//   // OPTIONAL - Amazon Cognito Federated Identity Pool Region\n//   // Required only if it's different from Amazon Cognito Region\n//   // identityPoolRegion: 'XX-XXXX-X',\n\n//   // OPTIONAL - Amazon Cognito User Pool ID\n//   userPoolId: environment.awsCognitoConfig.userPool.userPoolsId, // 'us-east-1_s9iDqPquj',\n\n//   // OPTIONAL - Amazon Cognito Web Client ID (26-char alphanumeric string)\n//   userPoolWebClientId: environment.awsCognitoConfig.userPool.webClientId, //'1271f4r7a3f24kk53j6emll9nb',\n\n//   // OPTIONAL - Enforce user authentication prior to accessing AWS resources or not\n//   mandatorySignIn: false,\n\n//   // OPTIONAL - Configuration for cookie storage\n//   // cookieStorage: {\n//   // // REQUIRED - Cookie domain (only required if cookieStorage is provided)\n//   //     domain: '.yourdomain.com',\n//   // // OPTIONAL - Cookie path\n//   //     path: '/',\n//   // // OPTIONAL - Cookie expiration in days\n//   //     expires: 365,\n//   // // OPTIONAL - Cookie secure flag\n//   //     secure: true\n//   // },\n\n//   // OPTIONAL - customized storage object\n//   // storage: new MyStorage(),\n\n//   // OPTIONAL - Manually set the authentication flow type. Default is 'USER_SRP_AUTH'\n//   // authenticationFlowType: 'USER_PASSWORD_AUTH'\n//   authenticationFlowType: 'USER_SRP_AUTH'\n// }\n//  }\n//  Amplify.configure(awsConfigData);\n\nif (window['dacAppConfig']) {\n  let dacAppConfig = window['dacAppConfig'] || {};\n  if (dacAppConfig.clientId) {\n    environment.smartConfig.client_id = dacAppConfig.clientId;\n  }\n  if (dacAppConfig['fhirUrl']) {\n    environment.smartConfig.fhirUrl = dacAppConfig['fhirUrl'];\n  }\n  if (dacAppConfig['apiUrl']) {\n    environment.apiURL = dacAppConfig['apiUrl'];\n  }\n  if (dacAppConfig['smartStyleUrl']) {\n    environment.smartConfig.smartStyleUrl = dacAppConfig['smartStyleUrl'];\n  }\n  if (dacAppConfig['logoSrc']) {\n    environment.applicationLogo = dacAppConfig['logoSrc'];\n  }\n}\n// oauth2.ready()\n// .then(client => {\n  platformBrowserDynamic([\n    {provide:'AuthToken', useValue: window['AuthToken'] || environment.token}\n    // ,{provide: 'fhirClient', useValue: client}\n    // ,{provide: 'idToken', useValue: client.getIdToken()}\n    ,{provide: 'StripePublicKey', useValue: environment.stripePublicKey}\n    ,{provide: 'StripeChargeName', useValue: environment.stripeChargeName}\n    ,{provide:'EnabledFeatures', useValue: environment.features}\n    ,{provide: 'Environment', useValue: environment}]).bootstrapModule(AppModule);\n// })\n// .catch(error => {\n//   if (error && error.message && error.message.indexOf(\":\") !== -1) {\n//     let errorParts = error.message.split(\":\");\n//     let errorKey = errorParts[0] || \"error\";\n//     // TODO: @adunsulag need to be able to display an error message page here\n//     if (errorKey == 'invalid_scope') {\n//       alert(error.message);\n//       console.error(error);\n//       return; // nothing we can do here as the setup is incorrect\n//     } else {\n//       // need to review the scopes authorized and require authorization again if the scopes were not granted....\n//       console.error(error);\n//     }\n//   } else {\n//     // if there is not a session authorized here... then we need to launch\n//     oauth2.authorize({\n//       \"client_id\": clientId,\n//       \"scope\": scopes,\n//       \"iss\": fhirUrl,\n//       \"redirect_uri\": redirectUrl\n//     }).then((r) => {\n//       // shouldn't really get here since we do a browser redirect\n//         console.log(r);\n//     })\n//     .catch(error => {\n//         // need to display some kind of error or retry type of screen here.\n//         console.log(error);\n//     });\n//   }\n\n// });\n\n","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport { Component, OnInit, Input } from '@angular/core';\nimport { Location } from \"@angular/common\";\nimport {ActivatedRoute, Router} from '@angular/router';\n\n@Component({\n  selector: 'app-back-button',\n  templateUrl: './back-button.component.html',\n  styleUrls: ['./back-button.component.css']\n})\nexport class BackButtonComponent implements OnInit {\n\n  @Input() route:string[];\n\n  constructor(private location: Location, private router:Router\n    , private activeRoute:ActivatedRoute) { }\n\n  ngOnInit() {\n  }\n\n  goBack() {\n    if (this.route && this.route.length) {\n      this.router.navigate(this.route, {relativeTo: this.activeRoute});\n    }\n    else {\n      this.location.back();\n    }\n  }\n\n}\n","<a class=\"btn btn-primary text-light\" (click)=\"goBack()\">Back</a>\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";","/*\n *   Copyright (c) 2022 Discover and Change @author Stephen Nielson <snielson@discoverandchange.com>\n *   All rights reserved.\n *   For License information see LICENSE.md in the root folder of this project.\n */\nimport {Variable} from '../../models/variable';\nimport {AssessmentResult} from '../../../shared/models/assessment-result';\nimport { Component, OnInit } from '@angular/core';\nimport { IReportItemComponent } from 'app/reports/models/i-report-item-component';\nimport { Assessment } from 'app/shared/models/assessment';\nimport { BaseReportItemComponent } from '../../models/base-report-item-component';\n\n@Component({\n  selector: 'dac-assessment-questions-list',\n  templateUrl: './assessment-questions-list.component.html',\n  styleUrls: ['./assessment-questions-list.component.scss']\n})\nexport class AssessmentQuestionsListComponent extends BaseReportItemComponent implements OnInit, IReportItemComponent {\n  private _title: string;\n\n  private _assessment: Assessment;\n  public description:string;\n\n  constructor() {\n    super();\n  }\n\n  ngOnInit() {\n  }\n\n  public get assessment() : Assessment {\n    return this._assessment;\n  }\n\n  setReportData(data: any, results: AssessmentResult[], variables: Variable[]) {\n\n    if (data.assessment && results) {\n      let assessmentResult = results.find(r => r.assessment.uid == data.assessment);\n      this._assessment = assessmentResult ? assessmentResult.assessment : null;\n    }\n    if (data.title) {\n      this._title = data.title;\n    }\n    else {\n      this._title = this._assessment.name;\n    }\n  }\n\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n\n  getTitle() {\n    return this._title;\n  }\n\n  public getQuestionsForAssessment() {\n    if (!this._assessment) {\n      return [];\n    }\n\n    let questions = this._assessment.question_sets\n                      .map(qs => qs.questions)\n                      .reduce((a,b) => a.concat(b), []);\n    return questions;\n  }\n\n}\n","<div class=\"card card-wider card-cascade\">\n    <div class=\"view gradient-card-header primary-gradient text-light\">\n        <h3 class='h3-responsive text-center'>{{getTitle()}}</h3>\n    </div>\n    <div class=\"card-body\">\n      <div class=\"row\">\n        <div class=\"col\" *ngIf=\"description\" [innerHTML]=\"description\"></div>\n      </div>\n      <div class=\"row\">\n          <app-scale-questions-list class=\"col\" [Questions]=\"getQuestionsForAssessment()\"></app-scale-questions-list>\n      </div>\n    </div>\n</div>\n"]}